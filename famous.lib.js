/**
 * almond 0.2.0 Copyright (c) 2011, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/jrburke/almond for details
 */

/*! @source http://purl.eligrey.com/github/classList.js/blob/master/classList.js*/

/**
 * @license RequireJS text 2.0.7 Copyright (c) 2010-2012, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/requirejs/text for details
 */

!function(t,i){if("function"==typeof define&&define.amd)define(i);else if("object"==typeof window){var e;window.addEventListener("load",function(){t.Famous=i(),e&&t.Famous(e)}),t.Famous=function(t){e=t}}else t.Famous=i()}(this,function(){var requirejs,require,define;return function(t){function i(t,i){var e,s,o,n,r,a,h,u,p,c,l=i&&i.split("/"),f=d.map,m=f&&f["*"]||{};if(t&&"."===t.charAt(0)&&i){for(l=l.slice(0,l.length-1),t=l.concat(t.split("/")),u=0;u<t.length;u+=1)if(c=t[u],"."===c)t.splice(u,1),u-=1;else if(".."===c){if(1===u&&(".."===t[2]||".."===t[0]))break;u>0&&(t.splice(u-1,2),u-=2)}t=t.join("/")}if((l||m)&&f){for(e=t.split("/"),u=e.length;u>0;u-=1){if(s=e.slice(0,u).join("/"),l)for(p=l.length;p>0;p-=1)if(o=f[l.slice(0,p).join("/")],o&&(o=o[s])){n=o,r=u;break}if(n)break;!a&&m&&m[s]&&(a=m[s],h=u)}!n&&a&&(n=a,r=h),n&&(e.splice(0,r,n),t=e.join("/"))}return t}function e(i,e){return function(){return u.apply(t,g.call(arguments,0).concat([i,e]))}}function s(t){return function(e){return i(e,t)}}function o(t){return function(i){l[t]=i}}function n(i){if(f.hasOwnProperty(i)){var e=f[i];delete f[i],m[i]=!0,h.apply(t,e)}if(!l.hasOwnProperty(i)&&!m.hasOwnProperty(i))throw new Error("No "+i);return l[i]}function r(t){var i,e=t?t.indexOf("!"):-1;return e>-1&&(i=t.substring(0,e),t=t.substring(e+1,t.length)),[i,t]}function a(t){return function(){return d&&d.config&&d.config[t]||{}}}var h,u,p,c,l={},f={},d={},m={},g=[].slice;p=function(t,e){var o,a=r(t),h=a[0];return t=a[1],h&&(h=i(h,e),o=n(h)),h?t=o&&o.normalize?o.normalize(t,s(e)):i(t,e):(t=i(t,e),a=r(t),h=a[0],t=a[1],h&&(o=n(h))),{f:h?h+"!"+t:t,n:t,pr:h,p:o}},c={require:function(t){return e(t)},exports:function(t){var i=l[t];return"undefined"!=typeof i?i:l[t]={}},module:function(t){return{id:t,uri:"",exports:l[t],config:a(t)}}},h=function(i,s,r,a){var h,u,d,g,v,y,x=[];if(a=a||i,"function"==typeof r){for(s=!s.length&&r.length?["require","exports","module"]:s,v=0;v<s.length;v+=1)if(g=p(s[v],a),u=g.f,"require"===u)x[v]=c.require(i);else if("exports"===u)x[v]=c.exports(i),y=!0;else if("module"===u)h=x[v]=c.module(i);else if(l.hasOwnProperty(u)||f.hasOwnProperty(u)||m.hasOwnProperty(u))x[v]=n(u);else{if(!g.p)throw new Error(i+" missing "+u);g.p.load(g.n,e(a,!0),o(u),{}),x[v]=l[u]}d=r.apply(l[i],x),i&&(h&&h.exports!==t&&h.exports!==l[i]?l[i]=h.exports:d===t&&y||(l[i]=d))}else i&&(l[i]=r)},requirejs=require=u=function(i,e,s,o,r){return"string"==typeof i?c[i]?c[i](e):n(p(i,e).f):(i.splice||(d=i,e.splice?(i=e,e=s,s=null):i=t),e=e||function(){},"function"==typeof s&&(s=o,o=r),o?h(t,i,e,s):setTimeout(function(){h(t,i,e,s)},15),u)},u.config=function(t){return d=t,u},define=function(t,i,e){i.splice||(e=i,i=[]),f[t]=[t,i,e]},define.amd={jQuery:!0}}(),define("lib/almond",function(){}),"undefined"==typeof document||"classList"in document.createElement("a")||function(t){var i="classList",e="prototype",s=(t.HTMLElement||t.Element)[e],o=Object,n=String[e].trim||function(){return this.replace(/^\s+|\s+$/g,"")},r=Array[e].indexOf||function(t){for(var i=0,e=this.length;e>i;i++)if(i in this&&this[i]===t)return i;return-1},a=function(t,i){this.name=t,this.code=DOMException[t],this.message=i},h=function(t,i){if(""===i)throw new a("SYNTAX_ERR","An invalid or illegal string was specified");if(/\s/.test(i))throw new a("INVALID_CHARACTER_ERR","String contains an invalid character");return r.call(t,i)},u=function(t){for(var i=n.call(t.className),e=i?i.split(/\s+/):[],s=0,o=e.length;o>s;s++)this.push(e[s]);this._updateClassName=function(){t.className=this.toString()}},p=u[e]=[],c=function(){return new u(this)};if(a[e]=Error[e],p.item=function(t){return this[t]||null},p.contains=function(t){return t+="",-1!==h(this,t)},p.add=function(t){t+="",-1===h(this,t)&&(this.push(t),this._updateClassName())},p.remove=function(t){t+="";var i=h(this,t);-1!==i&&(this.splice(i,1),this._updateClassName())},p.toggle=function(t){t+="",-1===h(this,t)?this.add(t):this.remove(t)},p.toString=function(){return this.join(" ")},o.defineProperty){var l={get:c,enumerable:!0,configurable:!0};try{o.defineProperty(s,i,l)}catch(f){-2146823252===f.number&&(l.enumerable=!1,o.defineProperty(s,i,l))}}else o[e].__defineGetter__&&s.__defineGetter__(i,c)}(self),define("lib/classList",function(){}),Function.prototype.bind||(Function.prototype.bind=function(t){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var i=Array.prototype.slice.call(arguments,1),e=this,s=function(){},o=function(){return e.apply(this instanceof s&&t?this:t,i.concat(Array.prototype.slice.call(arguments)))};return s.prototype=this.prototype,o.prototype=new s,o}),define("lib/functionPrototypeBind",function(){}),window.requestAnimationFrame||(window.requestAnimationFrame=window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){return window.setTimeout(function(){t(+new Date)},1e3/60)}),define("lib/requestAnimationFrame",function(){}),define("famous/EventHandler",["require","exports","module"],function(t,i,e){function s(){this.listeners={},this.downstream=[],this.downstreamFn=[],this.owner=this}function o(t,i){for(var e=!1,s=0;s<this.downstream.length;s++)e=this.downstream[s].emit(t,i)||e;for(var s=0;s<this.downstreamFn.length;s++)e=this.downstreamFn[s](t,i)||e;return e}s.prototype.emit=function(t,i){i||(i={});var e=this.listeners[t],s=!1;if(e)for(var n=0;n<e.length;n++)e[n].call(this.owner,i)&&(s=!0);return o.call(this,t,i)||s},s.prototype.on=function(t,i){this.listeners[t]||(this.listeners[t]=[]);var e=this.listeners[t].indexOf(i);return 0>e&&this.listeners[t].push(i),this},s.prototype.unbind=function(t,i){var e=this.listeners[t].indexOf(i);e>=0&&this.listeners[t].splice(e,1)},s.prototype.pipe=function(t){var i=t instanceof Function?this.downstreamFn:this.downstream,e=i.indexOf(t);return 0>e&&i.push(t),t instanceof Function?t("pipe"):t.emit("pipe"),t},s.prototype.unpipe=function(t){var i=t instanceof Function?this.downstreamFn:this.downstream,e=i.indexOf(t);return e>=0?(i.splice(e,1),t instanceof Function?t("unpipe"):t.emit("unpipe"),t):!1},s.prototype.bindThis=function(t){this.owner=t},s.setInputHandler=function(t,i){t.emit=i.emit.bind(i)},s.setOutputHandler=function(t,i){i instanceof s&&i.bindThis(t),t.pipe=i.pipe.bind(i),t.unpipe=i.unpipe.bind(i),t.on=i.on.bind(i),t.unbind=i.unbind.bind(i)},e.exports=s}),define("famous/OptionsManager",["require","exports","module","./EventHandler"],function(t,i,e){function s(t){this._value=t,this.eventOutput=null}function o(){this.eventOutput=new n,this.eventOutput.bindThis(this),n.setOutputHandler(this,this.eventOutput)}var n=t("./EventHandler");s.prototype.patch=function(){for(var t=this._value,i=0;i<arguments.length;i++){var e=arguments[i];for(var s in e)s in t&&e[s].constructor===Object&&t[s].constructor===Object?(t.hasOwnProperty(s)||(t[s]=Object.create(t[s])),this.key(s).patch(e[s]),this.eventOutput&&this.eventOutput.emit("change",{id:s,value:this.key(s).value()})):this.set(s,e[s])}return this},s.prototype.setOptions=s.prototype.patch,s.prototype.key=function(t){var i=new s(this._value[t]);return(!(i._value instanceof Object)||i._value instanceof Array)&&(i._value={}),i},s.prototype.get=function(t){return this._value[t]},s.prototype.getOptions=s.prototype.get,s.prototype.set=function(t,i){var e=this.get(t);return this._value[t]=i,this.eventOutput&&i!==e&&this.eventOutput.emit("change",{id:t,value:i}),this},s.prototype.value=function(){return this._value},s.prototype.on=function(){return o.call(this),this.on.apply(this,arguments)},s.prototype.unbind=function(){return o.call(this),this.unbind.apply(this,arguments)},s.prototype.pipe=function(){return o.call(this),this.pipe.apply(this,arguments)},s.prototype.unpipe=function(){return o.call(this),this.unpipe.apply(this,arguments)},e.exports=s}),define("famous-mvc/Model",["require","exports","module","famous/OptionsManager","famous/EventHandler"],function(t,i,e){function s(t){o.call(this,Object.create(this.constructor.DEFAULT_OPTIONS)),this.eventOutput=new n,this.eventOutput.bindThis(this),n.setOutputHandler(this,this.eventOutput),this.on("change",this._handleChange),this.id=s.ID++,t&&this.setOptions(t)}var o=t("famous/OptionsManager"),n=t("famous/EventHandler");s.ID=0,s.prototype=Object.create(o.prototype),s.prototype.constructor=s,s.prototype._handleChange=function(t){var i="change:"+t.id;this.eventOutput.emit(i,t)},s.prototype.toJSON=function(){return this.value()},s.prototype.toString=function(){return JSON.stringify(this.value())},s.DEFAULT_OPTIONS={},e.exports=s}),define("famous/Entity",["require","exports","module"],function(t,i,e){function s(t){var i=r.length;return n(i,t),i}function o(t){return r[t]}function n(t,i){r[t]=i}var r=[];e.exports={register:s,get:o,set:n}}),define("famous/Matrix",["require","exports","module"],function(t,i,e){function s(t){return 2===t.length?t[0]*t[0]+t[1]*t[1]:t[0]*t[0]+t[1]*t[1]+t[2]*t[2]}function o(t){return Math.sqrt(s(t))}function n(t){return 0>t?-1:1}var r={};r.precision=1e-6,r.identity=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],r.multiply4x4=function a(t,i){var e=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];return e[0]=t[0]*i[0]+t[1]*i[4]+t[2]*i[8]+t[3]*i[12],e[1]=t[0]*i[1]+t[1]*i[5]+t[2]*i[9]+t[3]*i[13],e[2]=t[0]*i[2]+t[1]*i[6]+t[2]*i[10]+t[3]*i[14],e[3]=t[0]*i[3]+t[1]*i[7]+t[2]*i[11]+t[3]*i[15],e[4]=t[4]*i[0]+t[5]*i[4]+t[6]*i[8]+t[7]*i[12],e[5]=t[4]*i[1]+t[5]*i[5]+t[6]*i[9]+t[7]*i[13],e[6]=t[4]*i[2]+t[5]*i[6]+t[6]*i[10]+t[7]*i[14],e[7]=t[4]*i[3]+t[5]*i[7]+t[6]*i[11]+t[7]*i[15],e[8]=t[8]*i[0]+t[9]*i[4]+t[10]*i[8]+t[11]*i[12],e[9]=t[8]*i[1]+t[9]*i[5]+t[10]*i[9]+t[11]*i[13],e[10]=t[8]*i[2]+t[9]*i[6]+t[10]*i[10]+t[11]*i[14],e[11]=t[8]*i[3]+t[9]*i[7]+t[10]*i[11]+t[11]*i[15],e[12]=t[12]*i[0]+t[13]*i[4]+t[14]*i[8]+t[15]*i[12],e[13]=t[12]*i[1]+t[13]*i[5]+t[14]*i[9]+t[15]*i[13],e[14]=t[12]*i[2]+t[13]*i[6]+t[14]*i[10]+t[15]*i[14],e[15]=t[12]*i[3]+t[13]*i[7]+t[14]*i[11]+t[15]*i[15],arguments.length<=2?e:a.apply(null,[e].concat(Array.prototype.slice.call(arguments,2)))},r.multiply=function h(t,i){if(!t||!i)return t||i;var e=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1];return e[0]=t[0]*i[0]+t[1]*i[4]+t[2]*i[8],e[1]=t[0]*i[1]+t[1]*i[5]+t[2]*i[9],e[2]=t[0]*i[2]+t[1]*i[6]+t[2]*i[10],e[4]=t[4]*i[0]+t[5]*i[4]+t[6]*i[8],e[5]=t[4]*i[1]+t[5]*i[5]+t[6]*i[9],e[6]=t[4]*i[2]+t[5]*i[6]+t[6]*i[10],e[8]=t[8]*i[0]+t[9]*i[4]+t[10]*i[8],e[9]=t[8]*i[1]+t[9]*i[5]+t[10]*i[9],e[10]=t[8]*i[2]+t[9]*i[6]+t[10]*i[10],e[12]=t[12]*i[0]+t[13]*i[4]+t[14]*i[8]+i[12],e[13]=t[12]*i[1]+t[13]*i[5]+t[14]*i[9]+i[13],e[14]=t[12]*i[2]+t[13]*i[6]+t[14]*i[10]+i[14],arguments.length<=2?e:h.apply(null,[e].concat(Array.prototype.slice.call(arguments,2)))},r.move=function(t,i){return i[2]||(i[2]=0),[t[0],t[1],t[2],0,t[4],t[5],t[6],0,t[8],t[9],t[10],0,t[12]+i[0],t[13]+i[1],t[14]+i[2],1]},r.moveThen=function(t,i){t[2]||(t[2]=0);var e=t[0]*i[0]+t[1]*i[4]+t[2]*i[8],s=t[0]*i[1]+t[1]*i[5]+t[2]*i[9],o=t[0]*i[2]+t[1]*i[6]+t[2]*i[10];return r.move(i,[e,s,o])},r.translate=function(t,i,e){return void 0===e&&(e=0),[1,0,0,0,0,1,0,0,0,0,1,0,t,i,e,1]},r.scale=function(t,i,e){return void 0===e&&(e=1),[t,0,0,0,0,i,0,0,0,0,e,0,0,0,0,1]},r.rotateX=function(t){var i=Math.cos(t),e=Math.sin(t);return[1,0,0,0,0,i,e,0,0,-e,i,0,0,0,0,1]},r.rotateY=function(t){var i=Math.cos(t),e=Math.sin(t);return[i,0,-e,0,0,1,0,0,e,0,i,0,0,0,0,1]},r.rotateZ=function(t){var i=Math.cos(t),e=Math.sin(t);return[i,e,0,0,-e,i,0,0,0,0,1,0,0,0,0,1]},r.rotate=function(t,i,e){var s=Math.cos(t),o=Math.sin(t),n=Math.cos(i),r=Math.sin(i),a=Math.cos(e),h=Math.sin(e),u=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1];return u[0]=n*a,u[1]=s*h+o*r*a,u[2]=o*h-s*r*a,u[4]=-n*h,u[5]=s*a-o*r*h,u[6]=o*a+s*r*h,u[8]=r,u[9]=-o*n,u[10]=s*n,u},r.rotateAxis=function(t,i){var e=Math.sin(i),s=Math.cos(i),o=1-s,n=t[0]*t[0]*o,r=t[0]*t[1]*o,a=t[0]*t[2]*o,h=t[1]*t[1]*o,u=t[1]*t[2]*o,p=t[2]*t[2]*o,c=t[0]*e,l=t[1]*e,f=t[2]*e,d=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,1];return d[0]=n+s,d[1]=r+f,d[2]=a-l,d[4]=r-f,d[5]=h+s,d[6]=u+c,d[8]=a+l,d[9]=u-c,d[10]=p+s,d},r.aboutOrigin=function(t,i){var e=t[0]-(t[0]*i[0]+t[1]*i[4]+t[2]*i[8]),s=t[1]-(t[0]*i[1]+t[1]*i[5]+t[2]*i[9]),o=t[2]-(t[0]*i[2]+t[1]*i[6]+t[2]*i[10]);return r.move(i,[e,s,o])},r.formatCSS=function(t){for(var i=t.slice(0),e=0;e<i.length;e++)i[e]<1e-6&&i[e]>-1e-6&&(i[e]=0);return"matrix3d("+i.join()+")"},r.skew=function(t,i,e){return[1,0,0,0,Math.tan(e),1,0,0,Math.tan(i),Math.tan(t),1,0,0,0,0,1]},r.getTranslate=function(t){return[t[12],t[13],t[14]]},r.inverse=function(t){var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],e=t[5]*t[10]-t[6]*t[9],s=t[4]*t[10]-t[6]*t[8],o=t[4]*t[9]-t[5]*t[8],n=t[1]*t[10]-t[2]*t[9],r=t[0]*t[10]-t[2]*t[8],a=t[0]*t[9]-t[1]*t[8],h=t[1]*t[6]-t[2]*t[5],u=t[0]*t[6]-t[2]*t[4],p=t[0]*t[5]-t[1]*t[4],c=t[0]*e-t[1]*s+t[2]*o,l=1/c;return i[0]=l*e,i[1]=-l*n,i[2]=l*h,i[4]=-l*s,i[5]=l*r,i[6]=-l*u,i[8]=l*o,i[9]=-l*a,i[10]=l*p,i[12]=-t[12]*i[0]-t[13]*i[4]-t[14]*i[8],i[13]=-t[12]*i[1]-t[13]*i[5]-t[14]*i[9],i[14]=-t[12]*i[2]-t[13]*i[6]-t[14]*i[10],i},r.interpret=function(t){var i=[t[0],t[1],t[2]],e=n(i[0]),a=o(i),h=[i[0]+e*a,i[1],i[2]],u=2/s(h),p=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1];p[0]=1-u*h[0]*h[0],p[5]=1-u*h[1]*h[1],p[10]=1-u*h[2]*h[2],p[1]=-u*h[0]*h[1],p[2]=-u*h[0]*h[2],p[6]=-u*h[1]*h[2],p[4]=p[1],p[8]=p[2],p[9]=p[6];var c=r.multiply(t,p),l=[c[5],c[6]],f=n(l[0]),d=o(l),m=[l[0]+f*d,l[1]],g=2/s(m),v=[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1];v[5]=1-g*m[0]*m[0],v[10]=1-g*m[1]*m[1],v[6]=-g*m[0]*m[1],v[9]=v[6];var y=r.multiply(p,v),x=r.multiply(t,y),S=r.scale(x[0]<0?-1:1,x[5]<0?-1:1,x[10]<0?-1:1);x=r.multiply(S,x),y=r.multiply(y,S);var b={};return b.translate=r.getTranslate(t),b.rotate=[Math.atan2(-y[6],y[10]),Math.asin(y[2]),Math.atan2(-y[1],y[0])],b.rotate[0]||(b.rotate[0]=0,b.rotate[2]=Math.atan2(y[4],y[5])),b.scale=[x[0],x[5],x[10]],b.skew=[Math.atan(x[9]/b.scale[2]),Math.atan(x[8]/b.scale[2]),Math.atan(x[4]/b.scale[0])],Math.abs(b.rotate[0])+Math.abs(b.rotate[2])>1.5*Math.PI&&(b.rotate[1]=Math.PI-b.rotate[1],b.rotate[1]>Math.PI&&(b.rotate[1]-=2*Math.PI),b.rotate[1]<-Math.PI&&(b.rotate[1]+=2*Math.PI),b.rotate[0]<0?b.rotate[0]+=Math.PI:b.rotate[0]-=Math.PI,b.rotate[2]<0?b.rotate[2]+=Math.PI:b.rotate[2]-=Math.PI),b},r.average=function(t,i,e){e=void 0===e?.5:e;for(var s=r.interpret(t),o=r.interpret(i),n={translate:[0,0,0],rotate:[0,0,0],scale:[0,0,0],skew:[0,0,0]},a=0;3>a;a++)n.translate[a]=(1-e)*s.translate[a]+e*o.translate[a],n.rotate[a]=(1-e)*s.rotate[a]+e*o.rotate[a],n.scale[a]=(1-e)*s.scale[a]+e*o.scale[a],n.skew[a]=(1-e)*s.skew[a]+e*o.skew[a];return r.build(n)},r.build=function(t){var i=r.scale(t.scale[0],t.scale[1],t.scale[2]),e=r.skew(t.skew[0],t.skew[1],t.skew[2]),s=r.rotate(t.rotate[0],t.rotate[1],t.rotate[2]);return r.move(r.multiply(i,e,s),t.translate)},r.equals=function(t,i){if(t===i)return!0;if(!t||!i)return!1;for(var e=0;e<t.length;e++)if(t[e]!=i[e])return!1;return!0},r.normalizeRotation=function(t){var i=t.slice(0);for((i[0]==Math.PI/2||i[0]==-Math.PI/2)&&(i[0]=-i[0],i[1]=Math.PI-i[1],i[2]-=Math.PI),i[0]>Math.PI/2&&(i[0]=i[0]-Math.PI,i[1]=Math.PI-i[1],i[2]-=Math.PI),i[0]<-Math.PI/2&&(i[0]=i[0]+Math.PI,i[1]=-Math.PI-i[1],i[2]-=Math.PI);i[1]<-Math.PI;)i[1]+=2*Math.PI;for(;i[1]>=Math.PI;)i[1]-=2*Math.PI;for(;i[2]<-Math.PI;)i[2]+=2*Math.PI;for(;i[2]>=Math.PI;)i[2]-=2*Math.PI;return i},r.vecMultiply=function(t,i){return[t[0]*i[0]+t[1]*i[4]+t[2]*i[8]+i[12],t[0]*i[1]+t[1]*i[5]+t[2]*i[9]+i[13],t[0]*i[2]+t[1]*i[6]+t[2]*i[10]+i[14]]},r.applyPerspective=function(t,i){var e=i/(i-t[2]);return[e*t[0],e*t[1]]},e.exports=r}),define("famous/SpecParser",["require","exports","module","./Matrix"],function(t,i,e){function s(){this.reset()}function o(t,i){return[t[0]*i[0]+t[1]*i[4]+t[2]*i[8],t[0]*i[1]+t[1]*i[5]+t[2]*i[9],t[0]*i[2]+t[1]*i[6]+t[2]*i[10]]}var n=t("./Matrix");s.parse=function(t,i){var e=new s,o=e.parse(t);return i?(i(o),void 0):o},s.prototype.parse=function(t){return this.reset(),this._parseSpec(t,n.identity,1,[0,0],void 0,n.identity),this.result},s.prototype.reset=function(){this.result={}},s.prototype._parseSpec=function(t,i,e,s,r,a){if(void 0==t);else if("number"==typeof t){var h=t,u=r?[s[0]*r[0],s[1]*r[1],0]:[0,0,0];i||(i=n.identity),this.result[h]=[n.move(i,o(u,a)),e,s,r]}else if(t instanceof Array)for(var p=0;p<t.length;p++)this._parseSpec(t[p],i,e,s,r,a);else if(void 0!==t.target){var c=t.target,l=i,f=e,d=s,m=r;void 0!==t.opacity&&(f=e*t.opacity),t.transform&&(l=n.multiply(t.transform,i)),t.origin&&(d=t.origin),t.size&&(m=t.size,void 0===m[0]&&(m[0]=r[0]),void 0===m[1]&&(m[1]=r[1]),r||(r=m),d||(d=[0,0]),l||(l=n.identity),l=n.move(l,o([d[0]*r[0],d[1]*r[1],0],a)),l=n.moveThen([-d[0]*m[0],-d[1]*m[1],0],l),a=i?i:n.identity,d=[0,0]),this._parseSpec(c,l,f,d,m,a)}},e.exports=s}),define("famous/RenderNode",["require","exports","module","./Entity","./SpecParser","./Matrix"],function(t,i,e){function s(t){this.modifiers=[],this.object=void 0,t&&this.set(t),this._hasCached=!1,this._resultCache={},this._prevResults={}}function o(t,i,e){var s=r.parse(t);for(var a in s){var h=n.get(a),u=s[a];u.unshift(i);var p=h.commit.apply(h,u);p?o(p,i,e):e[a]=u}}var n=t("./Entity"),r=t("./SpecParser");t("./Matrix"),s.prototype.get=function(){return this.object},s.prototype.set=function(t){this.object=t},s.prototype.link=function(t){if(t instanceof Array)this.set(t);else{var i=this.get();i?i instanceof Array?this.modifiers.unshift(t):(this.modifiers.unshift(i),this.set(t)):this.set(t)}return this},s.prototype.add=function(t){this.get()instanceof Array||this.set([]);var i=new s(t);return this.get().push(i),i},s.prototype.mod=function(t){return this.modifiers.push(t),this},s.prototype.commit=function(t,i,e,s,r){var a=this.render(void 0,this._hasCached);if(a!==!0){for(var h in this._prevResults)if(!(h in this._resultCache)){var u=n.get(h);u.cleanup&&u.cleanup(t.getAllocator())}this._prevResults=this._resultCache,this._resultCache={},o({transform:i,size:r,origin:s,opacity:e,target:a},t,this._resultCache),this._hasCached=!0}},s.prototype.render=function(t){var i=t,e=this.get();if(e)if(e.render)i=e.render(t);else{var s=e.length-1;for(i=new Array(s);s>=0;)i[s]=e[s].render(),s--}for(var o=this.modifiers.length,s=0;o>s;s++)i=this.modifiers[s].render(i);return i},e.exports=s}),define("famous/ElementAllocator",["require","exports","module"],function(t,i,e){function s(t){t||(t=document.createDocumentFragment()),this.container=t,this.detachedNodes={},this.nodeCount=0}s.prototype.migrate=function(t){var i=this.container;if(t!==i){if(i instanceof DocumentFragment)t.appendChild(i);else for(;i.hasChildNodes();)t.appendChild(i.removeChild(i.firstChild));this.container=t}},s.prototype.allocate=function(t){t=t.toLowerCase(),t in this.detachedNodes||(this.detachedNodes[t]=[]);var i,e=this.detachedNodes[t];return e.length>0?i=e.pop():(i=document.createElement(t),this.container.appendChild(i)),this.nodeCount++,i},s.prototype.deallocate=function(t){var i=t.nodeName.toLowerCase(),e=this.detachedNodes[i];e.push(t),this.nodeCount--},s.prototype.getNodeCount=function(){return this.nodeCount},e.exports=s}),define("famous/Utility",["require","exports","module"],function(t,i,e){var s={};s.Curve={linear:function(t){return t},easeIn:function(t){return t*t},easeOut:function(t){return t*(2-t)},easeInOut:function(t){return.5>=t?2*t*t:-2*t*t+4*t-1},easeOutBounce:function(t){return t*(3-2*t)},spring:function(t){return(1-t)*Math.sin(6*Math.PI*t)+t}},s.Direction={X:0,Y:1,Z:2},s.Origin={tl:[0,0],t:[.5,0],tr:[1,0],l:[0,.5],c:[.5,.5],r:[1,.5],bl:[0,1],b:[.5,1],br:[1,1]},s.after=function(t,i){var e=t;return function(){e--,0===e&&i.apply(this,arguments)}},s.loadURL=function(t,i){var e=new XMLHttpRequest;e.onreadystatechange=function(){4==this.readyState&&i&&i(this.responseText)},e.open("GET",t),e.send()},s.transformInFrontMatrix=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,1,1],s.transformInFront={render:function(t){return{transform:s.transformInFrontMatrix,target:t}}},s.transformBehindMatrix=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,-1,1],s.transformBehind={render:function(t){return{transform:s.transformBehindMatrix,target:t}}},s.customizeComponent=function(t,i,e){var s=function(s){t.call(this,i),s&&this.setOptions(s),e&&e.call(this)};return s.prototype=Object.create(t.prototype),s},e.exports=s}),define("famous/MultipleTransition",["require","exports","module","./Utility"],function(t,i,e){function s(t){this.method=t,this._instances=[],this.state=[]}var o=t("./Utility");s.SUPPORTS_MULTIPLE=!0,s.prototype.get=function(){for(var t=0;t<this._instances.length;t++)this.state[t]=this._instances[t].get();return this.state},s.prototype.set=function(t,i,e){for(var s=o.after(t.length,e),n=0;n<t.length;n++)this._instances[n]||(this._instances[n]=new this.method),this._instances[n].set(t[n],i,s)},s.prototype.reset=function(t){for(var i=0;i<t.length;i++)this._instances[i]||(this._instances[i]=new this.method),this._instances[i].reset(t[i])},e.exports=s}),define("famous/TweenTransition",["require","exports","module","famous/Utility"],function(t,i,e){function s(t){this.options=Object.create(s.DEFAULT_OPTIONS),t&&this.setOptions(t),this._startTime=0,this._startValue=0,this._updateTime=0,this._endValue=0,this._curve=void 0,this._duration=0,this._active=!1,this._callback=void 0,this.state=0}function o(t,i,e){return(1-e)*t+e*i}function n(t){return t instanceof Object?t instanceof Array?t.slice(0):Object.create(t):t}function r(t,i){var e={curve:i.curve};return i.duration&&(e.duration=i.duration),i.speed&&(e.speed=i.speed),t instanceof Object&&(void 0!==t.duration&&(e.duration=t.duration),t.curve&&(e.curve=t.curve),t.speed&&(e.speed=t.speed)),"string"==typeof e.curve&&(e.curve=s.getCurve(e.curve)),e}var a=t("famous/Utility");s.SUPPORTS_MULTIPLE=!0,s.DEFAULT_OPTIONS={curve:a.Curve.linear,duration:500,speed:0};var h={};s.registerCurve=function(t,i){return h[t]?!1:(h[t]=i,!0)},s.unregisterCurve=function(t){return h[t]?(delete h[t],!0):!1},s.getCurve=function(t){return h[t]},s.getCurves=function(){return h},s.prototype.setOptions=function(t){void 0!==t.curve&&(this.options.curve=t.curve),void 0!==t.duration&&(this.options.duration=t.duration),void 0!==t.speed&&(this.options.speed=t.speed)},s.prototype.set=function(t,i,e){if(!i)return this.reset(t),e&&e(),void 0;if(this._startValue=n(this.get()),i=r(i,this.options),i.speed){var s=this._startValue;if(s instanceof Object){var o=0;for(var a in s)o+=(t[a]-s[a])*(t[a]-s[a]);i.duration=Math.sqrt(o)/i.speed}else i.duration=Math.abs(t-s)/i.speed}this._startTime=Date.now(),this._endValue=n(t),this._duration=i.duration,this._curve=i.curve,this._active=!0,this._callback=e},s.prototype.reset=function(t){if(this._callback){var i=this._callback;this._callback=void 0,i()}this.state=n(t),this._startTime=0,this._duration=0,this._updateTime=0,this._startValue=this.state,this._endValue=this.state,this._active=!1},s.prototype.get=function(t){return this.update(t),this.state},s.prototype.update=function(t){if(this._active){if(t||(t=Date.now()),!(this._updateTime>=t)){this._updateTime=t;var i=t-this._startTime;if(i>=this._duration)this.state=this._endValue,this._active=!1;else if(0>i)this.state=this._startValue;else{var e=i/this._duration;if(this.state instanceof Object)for(var s in this.state)this.state[s]=o(this._startValue[s],this._endValue[s],this._curve(e));else this.state=o(this._startValue,this._endValue,this._curve(e))}}}else if(this._callback){var n=this._callback;this._callback=void 0,n()}},s.prototype.isActive=function(){return this._active},s.prototype.halt=function(){this.reset(this.get())},s.registerCurve("linear",a.Curve.linear),s.registerCurve("easeIn",a.Curve.easeIn),s.registerCurve("easeOut",a.Curve.easeOut),s.registerCurve("easeInOut",a.Curve.easeInOut),s.registerCurve("easeOutBounce",a.Curve.easeOutBounce),s.registerCurve("spring",a.Curve.spring),e.exports=s}),define("famous/Transitionable",["require","exports","module","./Utility","./MultipleTransition","./TweenTransition"],function(t,i,e){function s(t){this.currentAction=null,this.actionQueue=[],this.callbackQueue=[],this.state=0,this._callback=void 0,this._engineInstance=null,this._currentMethod=null,this.set(t)}function o(){if(this._callback){var t=this._callback;this._callback=void 0,t()}if(this.actionQueue.length<=0)return this.set(this._engineInstance),void 0;this.currentAction=this.actionQueue.shift(),this._callback=this.callbackQueue.shift();var i=null,e=this.currentAction[0],s=this.currentAction[1];s instanceof Object&&s.method?(i=s.method,"string"==typeof i&&(i=a[i])):i=r,this._currentMethod!==i&&(this._engineInstance=!(e instanceof Object)||i.SUPPORTS_MULTIPLE===!0||e.length<=i.SUPPORTS_MULTIPLE?new i:new n(i),this._currentMethod=i),this._engineInstance.reset(this.state),this._engineInstance.set(e,s,o.bind(this))}t("./Utility");var n=t("./MultipleTransition"),r=t("./TweenTransition"),a={};s.registerMethod=function(t,i){return t in a?!1:(a[t]=i,!0)},s.unregisterMethod=function(t){return t in a?(delete a[t],!0):!1},s.prototype.set=function(t,i,e){if(!i)return this.reset(t),e&&e(),void 0;var s=[t,i];this.actionQueue.push(s),this.callbackQueue.push(e),this.currentAction||o.call(this)},s.prototype.reset=function(t){this._currentMethod=null,this._engineInstance=null,this.state=t,this.currentAction=null,this.actionQueue=[],this.callbackQueue=[]},s.prototype.delay=function(t,i){this.set(this._engineInstance,{duration:t,curve:function(){return 0}},i)},s.prototype.get=function(t){return this._engineInstance&&(this.state=this._engineInstance.get(t)),this.state},s.prototype.isActive=function(){return!!this.currentAction},s.prototype.halt=function(){this.set(this.get())},e.exports=s}),define("famous/Context",["require","exports","module","./RenderNode","./EventHandler","./SpecParser","./ElementAllocator","./Matrix","./Transitionable"],function(t,i,e){function s(t){this.container=t,this.allocator=new a(t),this.srcNode=new n,this.eventHandler=new r,this._size=[window.innerWidth,window.innerHeight],this.perspectiveState=new u(0),this._perspective=void 0,this.eventHandler.on("resize",function(){this._size=o(this.container)}.bind(this))}function o(t){return[t.clientWidth,t.clientHeight]}var n=t("./RenderNode"),r=t("./EventHandler");t("./SpecParser");var a=t("./ElementAllocator"),h=t("./Matrix"),u=t("./Transitionable");s.prototype.getAllocator=function(){return this.allocator},s.prototype.link=function(t){return this.srcNode.link(t)},s.prototype.add=function(t){return this.srcNode.add(t)},s.prototype.mod=function(t){return this.srcNode.mod(t)},s.prototype.migrate=function(t){t!==this.container&&(this.container=t,this.allocator.migrate(t))},s.prototype.getSize=function(){return this._size},s.prototype.setSize=function(t){t||(t=o(this.container)),this._size=t},s.prototype.update=function(){var t=this.perspectiveState.get();t!==this._perspective&&(this.container.style.perspective=t?t.toFixed()+"px":"",this.container.style.webkitPerspective=t?t.toFixed():"",this._perspective=t),this.srcNode&&this.srcNode.commit(this,h.identity,1,[0,0],this._size)},s.prototype.getOutputTransform=function(t){var i=this.parsedCache;if(i){var e=t.id,s={transform:i.transforms[e],opacity:i.opacities[e]};if(i.origins[e]&&(s.origin=i.origins[e]),i.groups[e]){var o=i.groups[e];s.transform=h.multiply(s.transform,i.groupTransforms[o]),i.groupOpacities[o]&&(s.opacity*=i.groupOpacities[o])}return s}},s.prototype.getPerspective=function(){return this.perspectiveState.get()},s.prototype.setPerspective=function(t,i,e){return this.perspectiveState.set(t,i,e)},s.prototype.emit=function(t,i){return this.eventHandler.emit(t,i)},s.prototype.on=function(t,i){return this.eventHandler.on(t,i)},s.prototype.unbind=function(t,i){return this.eventHandler.unbind(t,i)},s.prototype.pipe=function(t){return this.eventHandler.pipe(t)},s.prototype.unpipe=function(t){return this.eventHandler.unpipe(t)},e.exports=s}),define("famous/Engine",["require","exports","module","./Context","./EventHandler"],function(t,i,e){function s(){var t=Date.now();if(M&&M>t-w)return requestAnimationFrame(s),void 0;T=t-w,w=t,z.emit("prerender");for(var i=0;i<S.length;i++)S[i].call(this);for(S=[];b.length&&Date.now()-t<_;)b.shift().call(this);for(var i=0;i<x.length;i++)x[i].update();z.emit("postrender"),requestAnimationFrame(s)}function o(t){if(document.activeElement&&"INPUT"==document.activeElement.nodeName)return document.activeElement.addEventListener("blur",function e(){this.removeEventListener("blur",e),o(t)}),void 0;window.scrollTo(0,0);for(var i=0;i<x.length;i++)x[i].emit("resize");z.emit("resize")}function n(t){return z.pipe(t)}function r(t){return z.unpipe(t)}function a(t,i){z.on(t,i)}function h(t,i){z.emit(t,i)}function u(t,i){z.unbind(t,i)}function p(){return 1e3/T}function c(t){M=Math.floor(1e3/t)}function l(t){void 0===t?(t=document.createElement("div"),t.classList.add("container"),document.body.appendChild(t)):t instanceof Element||(t=document.createElement("div"),console.warn("Tried to create context on non-existent element"));var i=new v(t);return x.push(i),i}function f(t){S.push(t)}function d(t){return C[t]}function m(t){var i=C.length;return C[i]=t,i}function g(t){b.push(t)}var v=t("./Context"),y=t("./EventHandler"),x=[],S=[],b=[],w=Date.now(),T=void 0,M=void 0,z=new y,_=10,C=[];requestAnimationFrame(s),window.addEventListener("resize",o,!1),o(),window.addEventListener("touchmove",function(t){t.preventDefault()},!1);for(var P=["touchstart","touchmove","touchend","touchcancel","click","keydown","keyup","keypress","mouseup","mousedown","mousemove","mouseover","mouseout","mousewheel","wheel","resize"],O=0;O<P.length;O++){var E=P[O];document.body.addEventListener(E,function(t){z.emit(t.type,t,!1)},!1)}e.exports={on:a,defer:g,emit:h,unbind:u,pipe:n,unpipe:r,createContext:l,getFPS:p,setFPSCap:c,nextTick:f,getEntity:d,registerEntity:m}}),define("famous/Timer",["require","exports","module","famous/Engine"],function(t,i,e){function s(t){return u.on(p,t),t}function o(t,i){var e=c(),o=function(){var s=c();s-e>=i&&(t.apply(this,arguments),u.unbind(p,o))};return s(o)}function n(t,i){var e=c(),o=function(){var s=c();s-e>=i&&(t.apply(this,arguments),e=c())};return s(o)}function r(t,i){if(void 0!==i){var e=function(){i--,0>=i&&(t.apply(this,arguments),h(e))};return s(e)}}function a(t,i){i=i||1;var e=i,o=function(){i--,0>=i&&(t.apply(this,arguments),i=e)};return s(o)}function h(t){u.unbind(p,t)}var u=t("famous/Engine"),p="prerender",c=window.performance?function(){return performance.now()}:function(){return Date.now()};e.exports={setTimeout:o,setInterval:n,after:r,every:a,clear:h}}),define("app/data/Alarm",["require","exports","module","famous-mvc/Model","famous/Timer","famous/Engine"],function(t,i,e){function s(){o.apply(this,arguments),this._timerActive,this.events()}var o=t("famous-mvc/Model"),n=t("famous/Timer"),r=t("famous/Engine");s.prototype=Object.create(o.prototype),s.prototype.constructor=s,s.TYPE={QUICK:0,CUSTOM:1},s.DAYS={0:"MON",1:"TUE",2:"WED",3:"THU",4:"FRI",5:"SAT",6:"SUN"},s.DEFAULT_OPTIONS={time:moment({hour:23,minute:55}).format(),type:s.TYPE.QUICK,days:[],active:!1,ringing:!1,name:"Home"},s.prototype.events=function(){return this.eventOutput.on("change:active",this._toggleCountdown.bind(this)),this.eventOutput.on("change:active",this._checkRinging.bind(this)),this},s.prototype._toggleCountdown=function(){this.get("active")?this._addRingTimer():this._removeRingTimer()},s.prototype._checkRinging=function(){this.get("ringing")&&this.set("ringing",!1)},s.prototype._addRingTimer=function(){var t=this.getTime();this._timerActive=n.setTimeout(this.set.bind(this,"ringing",!0),t.diff(moment()))},s.prototype._removeRingTimer=function(){return this._timerActive&&r.unbind("prerender",this._timerActive),this},s.prototype.getTime=function(){return moment(this.get("time"))},s.prototype.addDay=function(t){var i=this.get("days").slice(0);return-1==i.indexOf(t)&&(i.push(t),this.set("days",i)),this},s.prototype.addDays=function(t){for(var i=0;i<t.length;i++)this.addDay(t[i]);return this},s.prototype.removeDay=function(t){var i=this.get("days").slice(0),e=i.indexOf(t);return-1!=e&&(i.splice(e,1),this.set("days",i)),this
},s.prototype.removeDays=function(t){for(var i=0;i<t.length;i++)this.removeDay(t[i]);return this},s.prototype.getHourTime=function(){return[this.getTime().format("h:mm"),this.getTime().format("a").toUpperCase()]},s.prototype.getTimeStringFromNow=function(){var t=moment();return moment.duration(this.getTime().diff(t)).humanize(!0)},s.prototype.updateToTodaysTime=function(){var t=this.getTime(),i=moment();if(i.diff(t)>0){var e=t.hours(),s=t.minutes();return this.set("time",moment({hour:e,minute:s}).format()),!0}return!1},e.exports=s}),define("app/data/AppSettings",["require","exports","module","famous-mvc/Model"],function(t,i,e){function s(){o.call(this,arguments)}var o=t("famous-mvc/Model");s.prototype=Object.create(o.prototype),s.prototype.constructor=s,s.ORIENTATION={PORTRAIT:0,LANDSCAPE:1},s.DEFAULT_OPTIONS={volume:1,brightness:1,orientation:s.ORIENTATION.PORTRAIT,currentAlarm:void 0,activeSound:"Dubstep",sounds:[{name:"Dubstep",url:"sounds/dubstep.wav"}]},s.prototype.getSoundArray=function(){for(var t=[],i=this.get("sounds"),e=0;e<i.length;e++)t.push(i[e].url);return t},s.prototype.getActiveSoundIndex=function(){for(var t=this.get("sounds"),i=0;i<t.length;i++)if(t[i].name===this.get("activeSound"))return i;return void 0},s.prototype.setCurrentAlarm=function(t){this.set("currentAlarm",t)},s.prototype.getCurrentAlarm=function(){return this.get("currentAlarm")},e.exports=s}),define("famous-utils/Time",["require","exports","module","famous/Engine"],function(t,i,e){function s(t,i){var e=Date.now(),s=function(){var s=Date.now();s-e>=i&&(t(),e=Date.now())};return h.on("prerender",s),s}function o(t){h.unbind("prerender",t)}function n(t,i,e){var s=Date.now(),o=function(){var n=Date.now(),r=(n-s)/t;return n-s>=t?(i(1),h.unbind("prerender",o),e&&e(),void 0):(i(r),void 0)};h.on("prerender",o)}function r(t,i){var e=Date.now(),s=function(){var o=Date.now();return o-e>=i?(h.unbind("prerender",s),t(),void 0):void 0};return h.on("prerender",s),s}function a(t){h.unbind("prerender",t)}var h=t("famous/Engine");e.exports={setInterval:s,removeInterval:o,executeOver:n,setTimeout:r,removeTimeout:a}}),define("famous-utils/Utils",["require","exports","module","./Time","famous/Matrix"],function(t,i,e){var s=t("./Time"),o=t("famous/Matrix"),n={rad2deg:function(t){return 57.2957795*t},deg2rad:function(t){return.0174532925*t},distance:function(t,i,e,s){var o=e-t,n=s-i;return Math.sqrt(o*o+n*n)},distance3D:function(t,i,e,s,o,n){var r=s-t,a=o-i,h=n-e;return Math.sqrt(r*r+a*a+h*h)},map:function(t,i,e,s,o,n){var r=(t-i)/(e-i)*(o-s)+s;return n&&(o>s?r>o?r=o:s>r&&(r=s):o>r?r=o:r>s&&(r=s)),r},limit:function(t,i,e){return t=Math.min(t,e),t=Math.max(t,i)},perspective:function(t,i,e,s){var o=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],n=1/Math.tan(t/2),r=1/(e-s);return o[0]=n/i,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=n,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=(s+e)*r,o[11]=-1,o[12]=0,o[13]=0,o[14]=2*s*e*r,o[15]=0,o},ortho:function(t,i,e,s,o,n){var r=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],a=-(i+t)/(i-t),h=-(s+e)/(s-e),u=-(n+o)/(n-o);return r[0]=2/(i-t),r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=2/(s-e),r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=-2/(n-o),r[11]=-1,r[12]=a,r[13]=h,r[14]=u,r[15]=1,r},normalFromFM:function(t,i){var e=i[0],s=i[1],o=i[2],n=i[3],r=i[4],a=i[5],h=i[6],u=i[7],p=i[8],c=i[9],l=i[10],f=i[11],d=i[12],m=i[13],g=i[14],v=i[15],y=e*a-s*r,x=e*h-o*r,S=e*u-n*r,b=s*h-o*a,w=s*u-n*a,T=o*u-n*h,M=p*m-c*d,z=p*g-l*d,_=p*v-f*d,C=c*g-l*m,P=c*v-f*m,O=l*v-f*g,E=y*O-x*P+S*C+b*_-w*z+T*M;return E?(E=1/E,t[0]=(a*O-h*P+u*C)*E,t[1]=(h*_-r*O-u*z)*E,t[2]=(r*P-a*_+u*M)*E,t[3]=(o*P-s*O-n*C)*E,t[4]=(e*O-o*_+n*z)*E,t[5]=(s*_-e*P-n*M)*E,t[6]=(m*T-g*w+v*b)*E,t[7]=(g*S-d*T-v*x)*E,t[8]=(d*w-m*S+v*y)*E,t):null},clamp:function(t,i,e){return i>t?i:t>e?e:t},color:function(t,i,e,s){return"rgba("+Math.floor(t)+","+Math.floor(i)+","+Math.floor(e)+","+s+")"},backgroundTransparent:function(){return{backgroundColor:"transparent"}},backgroundColor:function(t,i,e,s){return{backgroundColor:"rgba("+Math.floor(t)+","+Math.floor(i)+","+Math.floor(e)+","+s+")"}},borderRadius:function(t){return{borderRadius:t+"px"}},borderTopWidth:function(t){return{borderTopWidth:t+"px"}},borderBottomWidth:function(t){return{borderBottomWidth:t+"px"}},borderLeftWidth:function(t){return{borderLeftWidth:t+"px"}},borderRightWidth:function(t){return{borderRightWidth:t+"px"}},borderWidth:function(t){return{borderWidth:t+"px"}},borderColor:function(t,i,e,s){return 0==s?{borderColor:"transparent"}:{borderColor:"rgba("+Math.floor(t)+","+Math.floor(i)+","+Math.floor(e)+","+s+")"}},borderTopColor:function(t,i,e,s){return 0==s?{borderTopColor:"transparent"}:{borderTopColor:"rgba("+Math.floor(t)+","+Math.floor(i)+","+Math.floor(e)+","+s+")"}},borderBottomColor:function(t,i,e,s){return 0==s?{borderBottomColor:"transparent"}:{borderBottomColor:"rgba("+Math.floor(t)+","+Math.floor(i)+","+Math.floor(e)+","+s+")"}},borderRightColor:function(t,i,e,s){return 0==s?{borderRightColor:"transparent"}:{borderRightColor:"rgba("+Math.floor(t)+","+Math.floor(i)+","+Math.floor(e)+","+s+")"}},borderLeftColor:function(t,i,e,s){return 0==s?{borderLeftColor:"transparent"}:{borderLeftColor:"rgba("+Math.floor(t)+","+Math.floor(i)+","+Math.floor(e)+","+s+")"}},borderStyle:function(t){return{borderStyle:t}},borderTopStyle:function(t){return{borderTopStyle:t}},borderBottomStyle:function(t){return{borderBottomStyle:t}},borderRightStyle:function(t){return{borderRightStyle:t}},borderLeftStyle:function(t){return{borderLeftStyle:t}},colorHSL:function(t,i,e,s){return"hsla("+Math.floor(t)+","+Math.floor(i)+"%,"+Math.floor(e)+"%,"+s+")"},backgroundTransparent:function(){return{backgroundColor:"transparent"}},backgroundColorHSL:function(t,i,e,s){return{backgroundColor:"hsla("+Math.floor(t)+","+Math.floor(i)+"%,"+Math.floor(e)+"%,"+s+")"}},backfaceVisible:function(t){return t===!0?{"backface-visibility":"visible","-webkit-backface-visibility":"visible",MozBackfaceVisibility:"visible","-ms-backface-visibility":"visible"}:{"backface-visibility":"hidden","-webkit-backface-visibility":"hidden",MozBackfaceVisibility:"hidden","-ms-backface-visibility":"hidden"}},clipCircle:function(t,i,e){return{"-webkit-clip-path":"circle("+t+"px,"+i+"px,"+e+"px)"}},getWidth:function(){return window.innerWidth},getHeight:function(){return window.innerHeight},getCenter:function(){return[.5*n.getWidth(),.5*n.getHeight()]},isMobile:function(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry/i.test(navigator.userAgent)?!0:!1},isString:function(t){return"string"==typeof t||t instanceof String},isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},extend:function(t,i){for(var e in i)t[e]=i[e];return t},getDevicePixelRatio:function(){return window.devicePixelRatio?window.devicePixelRatio:1},supportsWebGL:function(){return/Android|Chrome|Mozilla/i.test(navigator.appCodeName)&&window.WebGLRenderingContext&&!/iPhone|iPad|iPod/i.test(navigator.userAgent)?!0:!1},getSurfacePosition:function(t){function i(t){var s=o(t);if(""!==s&&void 0!==s){var n=e(s);r[0]+=n[0],r[1]+=n[1],r[2]+=n[2]}t.parentElement!==document.body&&i(t.parentNode)}function e(t){var i=[];t=s(t),i[0]=parseInt(t[12].replace(" ","")),i[1]=parseInt(t[13].replace(" ","")),i[2]=parseInt(t[14].replace(" ",""));for(var e=0;e<i.length;e++)"undefined"==typeof i[e]&&(i[e]=0);return i}function s(t){return t=t.replace("matrix3d(",""),t=t.replace(")",""),t.split(",")}function o(t){var i=t.style.webkitTransform||t.style.transform;return i}var n=t._currTarget,r=[0,0,0];return n?(i(n),r):void 0},getCenterMatrix:function(t,i,e){return void 0==e&&(e=0),o.translate(t[0]-.5*i[0],t[1]-.5*i[1],e)},debounce:function(t,i){var e,o,n,r,a;return function(){o=this,a=arguments,n=new Date;var h=function(){var u=new Date-n;i>u?e=s.setTimeout(h,i-u):(e=null,r=t.apply(o,a))};return e||(e=s.setTimeout(h,i)),r}},hasUserMedia:function(){return!!(navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia)},getUserMedia:function(){return navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia},isWebkit:function(){return!!window.webkitURL},isAndroid:function(){var t=navigator.userAgent.toLowerCase();return t.indexOf("android")>-1},hasLocalStorage:function(){return!!window.localStorage}};e.exports=n}),define("famous-mvc/Collection",["require","exports","module","famous/OptionsManager","famous/EventHandler","famous-utils/Utils"],function(t,i,e){function s(t,i){this.eventOutput=new r,this.eventOutput.bindThis(this),r.setOutputHandler(this,this.eventOutput),r.setInputHandler(this,this.eventOutput),this.models=[],this.modelsById={},this.options=a.extend(s.DEFAULT_OPTIONS),this.setOptions(i),t&&this.reset(t,{silent:!0})}function o(t,i){var e=a.extend({model:t,modelIndex:this.models.indexOf(t)},i);this.emit("change",e),this.emit("change:"+i.id,e)}var n=t("famous/OptionsManager"),r=t("famous/EventHandler"),a=t("famous-utils/Utils");s.DEFAULT_OPTIONS={model:void 0,comparator:void 0},s.prototype=Object.create(n.prototype),s.prototype.constructor=s,s.prototype.createModel=function(t){var i=new this.options.model(t);return this.add(i),i},s.prototype.getModels=function(){return this.models},s.prototype.getModelsById=function(){return this.modelsById},s.prototype.resetFromJSON=function(t){if(this.options.model){for(var i=[],e=0;e<t.length;e++)i.push(new this.options.model(t[e]));this.reset(i)}},s.prototype.setOptions=function(t){a.extend(this.options,t)},s.prototype.toJSON=function(){for(var t=[],i=0;i<this.models.length;i++)t.push(this.models[i].toJSON());return t},s.prototype.add=function(t){if(t){if(a.isArray(t))for(var i=0;i<t.length;i++)i==t.length-1?this._singularAdd(t[i]):this._singularAdd(t[i],{triggerSort:!0});else this._singularAdd(t,{triggerSort:!0});this.emit("add",t)}},s.prototype._singularAdd=function(t,i){i||(i={}),this.models.push(t),this.modelsById[t.id]=t,t.on("change",o.bind(this,t)),this.emit("singular:add",t),i.triggerSort||this.sort()},s.prototype.remove=function(t){if(a.isArray(t))for(var i=0;i<t.length;i++)i==t.length-1?this._singularRemove(t[i]):this._singularRemove(t[i],{triggerSort:!0});else this._singularRemove(t,{triggerSort:!0});this.emit("remove")},s.prototype._singularRemove=function(t,i){i||(i={});var e=this.models.indexOf(t);delete this.modelsById[t.id],this.models.splice(e,1),i.triggerSort||this.sort()},s.prototype.reset=function(t,i){i||(i={}),this.models=[],this.modelsById={},this.add(t),i.silent||this.emit("reset")},s.prototype.sortBy=function(t){return this.comparator=t,this.sort(),this},s.prototype.sort=function(){if(this.comparator){var t=this.comparator;return this.models.sort(function(i,e){var s=i.get(t);return bValue=e.get(t),"number"==typeof s?s-bValue:bValue>s?-1:s>bValue?1:0}),this.emit("sort"),this}},s.prototype.where=function(t,i){if(!this.models.length)return void 0;for(var e=[],s=0;s<this.models.length;s++){var o=this.models[s].get(t);o==i&&e.push(this.models[s])}return 0==e.length?e=void 0:1==e.length&&(e=e[0]),e},s.prototype.length=function(){return this.models.length},s.prototype.forEach=function(t,i){for(var e=0;e<this.models.length;e++)t.call(i,this.models[e],e)},e.exports=s}),define("app/data/RiseData",["require","exports","module","famous-utils/Utils","app/data/Alarm","famous-mvc/Collection","app/data/AppSettings"],function(t,i,e){function s(){this.alarms=new n(void 0,{model:o}),this.appSettings,this.load()}t("famous-utils/Utils");var o=t("app/data/Alarm"),n=t("famous-mvc/Collection"),r=t("app/data/AppSettings");s.LOCALSTORAGE_ID="ride",s.prototype.getAlarms=function(){return this.alarms},s.prototype.getAlarmModels=function(){return this.alarms.getModels()},s.prototype.save=function(){var t={};t.alarms=this.alarms.toJSON(),this.appSettings&&(t.appSettings=this.appSettings.toJSON());try{localStorage.setItem(s.LOCALSTORAGE_ID,JSON.stringify(t))}catch(i){console.log(i)}},s.prototype.load=function(){var t=localStorage.getItem(s.LOCALSTORAGE_ID);t=JSON.parse(t),t?this._parseData(t):(this.alarms.reset(new o({name:"Quick Alarm"})),this.appSettings=new r)},s.prototype._parseData=function(t){var i=t.alarms?t.alarms:[],e=t.appSettings?t.appSettings:{};this.alarms.resetFromJSON(i),this.validateTimes(),this.appSettings=new r(e)},s.prototype.where=function(t,i){return this.alarms.where(t,i)},s.prototype.getCurrentAlarm=function(){return this.appSettings.getCurrentAlarm()},s.prototype.setCurrentAlarm=function(t){this.appSettings.setCurrentAlarm(t)},s.prototype.validateTimes=function(){var t=!1;this.alarms.forEach(function(i){var e=i.updateToTodaysTime();1==e&&(t=!0)},this),t&&this.save()};var a=new s;e.exports=a}),define("app/data/TimeHelpers",["require","exports","module"],function(t,i,e){function s(){this.startTime=moment({hour:0,minute:0,second:1}),this.endTime=moment({hour:23,minute:55}),this.oneDay=this.endTime.diff(this.startTime),this.formattedStartTime=this.startTime.format(),this.formattedNextDayStartTime=this.startTime.clone().add(24,"hours").format(),this.formattedEndTime=this.endTime.format(),this.FIVE_MINUTES=3e5,this.FIFTEEN_MINUTES=9e5}s.prototype={getTimePercentage:function(t){var i=this.startTime.diff(t)/this.startTime.diff(this.endTime);return i>1&&(i-=1),i},getFormattedTimeToSetTo:function(t){var i=moment(),e=this.startTime.clone();return e.add(t),e.diff(i)<0&&e.add(24,"hours"),e.format()},checkRelativeTimeOffset:function(t,i){var e=t.diff(this.startTime);return e-i}};var o=new s;e.exports=o}),define("famous/Surface",["require","exports","module","./Entity","./EventHandler","./Matrix"],function(t,i,e){function s(t){this.options={},this.properties={},this.content="",this.classList=[],this.size=void 0,this._classesDirty=!0,this._stylesDirty=!0,this._sizeDirty=!0,this._contentDirty=!0,this._dirtyClasses=[],this._matrix=void 0,this._opacity=1,this._origin=void 0,this._size=void 0,this.eventForwarder=function(t){this.emit(t.type,t)}.bind(this),this.eventHandler=new f,this.eventHandler.bindThis(this),this.id=l.register(this),t&&this.setOptions(t),this._currTarget=void 0}function o(t){for(var i=this.surfaceEvents,e=0;e<i.length;e++)t.addEventListener(i[e],this.eventForwarder)}function r(t){for(var i=this.surfaceEvents,e=0;e<i.length;e++)t.removeEventListener(i[e],this.eventForwarder)}function a(t){for(var i=0;i<this._dirtyClasses.length;i++)t.classList.remove(this._dirtyClasses[i]);t.classList.add("surface"),this._dirtyClasses=[]}function h(t){for(var i in this.properties)t.style[i]=this.properties[i]}function u(t){for(var i in this.properties)t.style[i]="";t.style.display="block"}function p(t,i){return t||i?t&&i?t[0]==i[0]&&t[1]==i[1]:!1:!0}function c(t){return(100*t[0]).toFixed(6)+"% "+(100*t[1]).toFixed(6)+"%"}var l=t("./Entity"),f=t("./EventHandler"),d=t("./Matrix"),m=void 0!==document.body.style.webkitTransform;s.prototype.surfaceEvents=["touchstart","touchmove","touchend","touchcancel","click","mousedown","mouseup","mousemove","mouseover","mouseout","mouseenter","mouseleave","mousewheel","wheel"],s.prototype.elementType="div",s.prototype.elementClass="surface",s.prototype.on=function(t,i){this.eventHandler.on(t,i)},s.prototype.unbind=function(t,i){this.eventHandler.unbind(t,i)},s.prototype.emit=function(t,i){i&&!i.origin&&(i.origin=this);var e=this.eventHandler.emit(t,i);return e&&i.stopPropagation&&i.stopPropagation(),e},s.prototype.pipe=function(t){return this.eventHandler.pipe(t)},s.prototype.pipeEvents=function(){return console.warn("pipeEvents is deprecated; use pipe instead"),this.pipe.apply(this,arguments)},s.prototype.unpipe=function(t){return this.eventHandler.unpipe(t)},s.prototype.render=function(){return this.id},s.prototype.setProperties=function(t){for(n in t)this.properties[n]=t[n];this._stylesDirty=!0},s.prototype.getProperties=function(){return this.properties},s.prototype.addClass=function(t){this.classList.indexOf(t)<0&&(this.classList.push(t),this._classesDirty=!0)},s.prototype.removeClass=function(t){var i=this.classList.indexOf(t);i>=0&&(this._dirtyClasses.push(this.classList.splice(i,1)[0]),this._classesDirty=!0)},s.prototype.setClasses=function(t){for(var i=[],e=0;e<this.classList.length;e++)t.indexOf(this.classList[e])<0&&i.push(this.classList[e]);for(var e=0;e<i.length;e++)this.removeClass(i[e]);for(var e=0;e<t.length;e++)this.addClass(t[e])},s.prototype.getClassList=function(){return this.classList},s.prototype.setContent=function(t){this.content!=t&&(this.content=t,this._contentDirty=!0)},s.prototype.getContent=function(){return this.content},s.prototype.setOptions=function(t){t.size&&this.setSize(t.size),t.classes&&this.setClasses(t.classes),t.properties&&this.setProperties(t.properties),t.content&&this.setContent(t.content)};var g,v,y;g=m?function(t,i){t.style.webkitTransform=d.formatCSS(i)}:function(t,i){t.style.transform=d.formatCSS(i)},v=m?function(t,i){t.style.webkitTransformOrigin=c(i)}:function(t,i){t.style.transformOrigin=c(i)},y=m?function(t){t.style.webkitTransform="scale3d(0.0001,0.0001,1)",t.style.opacity=0}:function(t){t.style.transform="scale3d(0.0001,0.0001,1)",t.style.opacity=0},s.prototype.setup=function(t){var i=t.allocate(this.elementType);if(this.elementClass)if(this.elementClass instanceof Array)for(var e=0;e<this.elementClass.length;e++)i.classList.add(this.elementClass[e]);else i.classList.add(this.elementClass);i.style.display="",o.call(this,i),v(i,[0,0]),this._currTarget=i,this._stylesDirty=!0,this._classesDirty=!0,this._sizeDirty=!0,this._contentDirty=!0,this._matrix=void 0,this._opacity=void 0,this._origin=void 0,this._size=void 0},s.prototype.commit=function(t,i,e,s,o){this._currTarget||this.setup(t.getAllocator());var n=this._currTarget;if(this.size){var r=o;o=this.size.slice(0),void 0===o[0]&&r[0]&&(o[0]=r[0]),void 0===o[1]&&r[1]&&(o[1]=r[1])}if(p(this._size,o)||(this._size=o.slice(0),this._sizeDirty=!0),!i&&this._matrix)return this._matrix=void 0,this._opacity=0,y(n),void 0;if(this._opacity!==e&&(this._opacity=e,n.style.opacity=Math.min(e,.999999)),!p(this._origin,s)||!d.equals(this._matrix,i)){i||(i=d.identity),s||(s=[0,0]),this._origin=s.slice(0),this._matrix=i;var u=i;s&&(u=d.moveThen([-this._size[0]*s[0],-this._size[1]*s[1]],i)),g(n,u)}if(this._classesDirty||this._stylesDirty||this._sizeDirty||this._contentDirty){if(this._classesDirty){a.call(this,n);for(var c=this.getClassList(),l=0;l<c.length;l++)n.classList.add(c[l]);this._classesDirty=!1}this._stylesDirty&&(h.call(this,n),this._stylesDirty=!1),this._sizeDirty&&(this._size&&(n.style.width=this._size[0]!==!0?this._size[0]+"px":"",n.style.height=this._size[1]!==!0?this._size[1]+"px":""),this._sizeDirty=!1),this._contentDirty&&(this.deploy(n),this._contentDirty=!1)}},s.prototype.cleanup=function(t){var i=this._currTarget;this.recall(i),i.style.width="",i.style.height="",i.style.display="none",this._size=void 0,u.call(this,i);var e=this.getClassList();a.call(this,i);for(var s=0;s<e.length;s++)i.classList.remove(e[s]);if(this.elementClass)if(this.elementClass instanceof Array)for(var s=0;s<this.elementClass.length;s++)i.classList.remove(this.elementClass[s]);else i.classList.remove(this.elementClass);r.call(this,i),this._currTarget=void 0,t.deallocate(i),y(i)},s.prototype.deploy=function(t){var i=this.getContent();if(i instanceof Node){for(;t.hasChildNodes();)t.removeChild(t.firstChild);t.appendChild(i)}else t.innerHTML=i},s.prototype.recall=function(t){for(var i=document.createDocumentFragment();t.hasChildNodes();)i.appendChild(t.firstChild);this.setContent(i)},s.prototype.getSize=function(t){return t?this._size:this.size||this._size},s.prototype.setSize=function(t){this.size=t?t.slice(0,2):void 0,this._sizeDirty=!0},e.exports=s}),define("famous/ImageSurface",["require","exports","module","./Surface"],function(t,i,e){function s(){this.imageUrl=void 0,a.apply(this,arguments)}function o(t){for(var i in this.properties)t.style[i]="";t.style.display="block"}function n(t){for(var i=this.surfaceEvents,e=0;e<i.length;e++)t.removeEventListener(i[e],this.eventForwarder)}function r(t){for(var i=0;i<this._dirtyClasses.length;i++)t.classList.remove(this._dirtyClasses[i]);t.classList.add("surface"),this._dirtyClasses=[]}var a=t("./Surface");s.prototype=Object.create(a.prototype),s.prototype.surfaceEvents=a.prototype.surfaceEvents.concat(["load"]),s.prototype.elementType="img",s.prototype.elementClass="surface",s.prototype.setContent=function(t){this.imageUrl=t,this._contentDirty=!0},s.prototype.deploy=function(t){t.src=this.imageUrl||""},s.prototype.recall=function(t){t.src=""},s.prototype.cleanup=function(t){var i=this._currTarget;this.recall(i),i.style.width="0px",i.style.height="0px",this._size=void 0,o.call(this,i);var e=this.getClassList();r.call(this,i);for(var s=0;s<e.length;s++)i.classList.remove(e[s]);if(this.elementClass)if(this.elementClass instanceof Array)for(var s=0;s<this.elementClass.length;s++)i.classList.remove(this.elementClass[s]);else i.classList.remove(this.elementClass);n.call(this,i),this._currTarget=void 0,t.deallocate(i),h(i)};var h,u=void 0!==document.body.style.webkitTransform;h=u?function(t){t.style.webkitTransform="scale3d(0.0001,0.0001,1)",t.style.opacity=0}:function(t){t.style.transform="scale3d(0.0001,0.0001,1)",t.style.opacity=0},e.exports=s}),define("famous/Modifier",["require","exports","module","./Matrix","./Transitionable","./Utility"],function(t,i,e){function s(t){var i=o.identity,e=1,s=void 0,r=void 0;arguments.length>1||arguments[0]instanceof Array?(void 0!==arguments[0]&&(i=arguments[0]),void 0!==arguments[1]&&(e=arguments[1]),s=arguments[2],r=arguments[3]):t&&(t.transform&&(i=t.transform),void 0!==t.opacity&&(e=t.opacity),t.origin&&(s=t.origin),t.size&&(r=t.size)),this.transformTranslateState=new n([0,0,0]),this.transformRotateState=new n([0,0,0]),this.transformSkewState=new n([0,0,0]),this.transformScaleState=new n([1,1,1]),this.opacityState=new n(e),this.originState=new n([0,0]),this.sizeState=new n([0,0]),this._originEnabled=!1,this._sizeEnabled=!1,this.setTransform(i),this.setOpacity(e),this.setOrigin(s),this.setSize(r)}var o=t("./Matrix"),n=t("./Transitionable"),r=t("./Utility");s.prototype.getTransform=function(){return this.isActive()?o.build({translate:this.transformTranslateState.get(),rotate:this.transformRotateState.get(),skew:this.transformSkewState.get(),scale:this.transformScaleState.get()}):this.getFinalTransform()},s.prototype.getFinalTransform=function(){return this._finalTransform},s.prototype.setTransform=function(t,i,e){var s=e?r.after(4,e):void 0;if(i){if(this._transformDirty){var n=o.interpret(this.getFinalTransform());this.transformTranslateState.set(n.translate),this.transformRotateState.set(n.rotate),this.transformSkewState.set(n.skew),this.transformScaleState.set(n.scale),this._transformDirty=!1}var a=o.interpret(t);this.transformTranslateState.set(a.translate,i,s),this.transformRotateState.set(a.rotate,i,s),this.transformSkewState.set(a.skew,i,s),this.transformScaleState.set(a.scale,i,s)}else this.transformTranslateState.halt(),this.transformRotateState.halt(),this.transformSkewState.halt(),this.transformScaleState.halt(),this._transformDirty=!0;this._finalTransform=t},s.prototype.getOpacity=function(){return this.opacityState.get()},s.prototype.setOpacity=function(t,i,e){this.opacityState.set(t,i,e)},s.prototype.getOrigin=function(){return this._originEnabled?this.originState.get():void 0},s.prototype.setOrigin=function(t,i,e){this._originEnabled=!!t,t||(t=[0,0]),t instanceof Array||(t=r.origins[t]),this.originState.set(t,i,e)},s.prototype.getSize=function(){return this._sizeEnabled?this.sizeState.get():void 0},s.prototype.setSize=function(t,i,e){this._sizeEnabled=!!t,t||(t=[0,0]),this.sizeState.set(t,i,e)},s.prototype.setDefaultTransition=function(t){this.transformTranslateState.setDefault(t),this.transformRotateState.setDefault(t),this.transformSkewState.setDefault(t),this.transformScaleState.setDefault(t),this.opacityState.setDefault(t),this.originState.setDefault(t),this.sizeState.setDefault(t)},s.prototype.halt=function(){this.transformTranslateState.halt(),this.transformRotateState.halt(),this.transformSkewState.halt(),this.transformScaleState.halt(),this.opacityState.halt(),this.originState.halt(),this.sizeState.halt()},s.prototype.isActive=function(){return this.transformTranslateState.isActive()||this.transformRotateState.isActive()||this.transformSkewState.isActive()||this.transformScaleState.isActive()},s.prototype.render=function(t){return{transform:this.getTransform(),opacity:this.getOpacity(),origin:this.getOrigin(),size:this.getSize(),target:t}},e.exports=s}),define("famous/View",["require","exports","module","./RenderNode","./EventHandler","./OptionsManager"],function(t,i,e){function s(t){this.node=new o,this.eventInput=new n,this.eventOutput=new n,n.setInputHandler(this,this.eventInput),n.setOutputHandler(this,this.eventOutput),this.options=Object.create(this.constructor.DEFAULT_OPTIONS||s.DEFAULT_OPTIONS),this.optionsManager=new r(this.options),t&&this.setOptions(t)}var o=t("./RenderNode"),n=t("./EventHandler"),r=t("./OptionsManager");s.DEFAULT_OPTIONS={},s.prototype.getOptions=function(){return this.optionsManager.value()},s.prototype.setOptions=function(t){this.optionsManager.patch(t)},s.prototype._add=function(){return this.node.add.apply(this.node,arguments)},s.prototype._link=function(){return this.node.link.apply(this.node,arguments)},s.prototype.render=function(){return this.node.render.apply(this.node,arguments)},s.prototype.getSize=function(){var t=this.node.get();return t.getSize?t.getSize.apply(t,arguments):this.options.size},e.exports=s}),define("famous-scene/SceneController",["require","exports","module","famous/View","famous/Matrix","famous/Modifier","famous/Engine"],function(t,i,e){function s(){o.apply(this,arguments),this.eventInput.pipe(this.eventOutput),this.routes={},this.sceneArray=[],this.sceneIndex=0}var o=t("famous/View");t("famous/Matrix");var n=t("famous/Modifier"),r=t("famous/Engine");s.prototype=Object.create(o.prototype),s.prototype.constructor=s,s.DEFAULT_OPTIONS={loop:!0},s.prototype.addScene=function(t,i){this.routes[t]=i,this.sceneArray.push(t),this.emit("add",{key:t,view:i})},s.prototype.addScenes=function(t){for(var i in t)this.addScene(i,t[i])},s.prototype.removeScene=function(t){delete this.routes[t],this.emit("remove",{key:t})},s.prototype.reset=function(){this.node.modifiers=[],this.node.object=void 0,this.node._hasCached=!1,this.node._resultCache={},this.node._prevResults={}},s.prototype.next=function(){this.sceneIndex++,this.sceneIndex==this.sceneArray.length?this.options.loop?(this.sceneIndex=0,this.setScene(this.sceneArray[this.sceneIndex],"next")):(this.emit("end"),this.sceneIndex--):this.setScene(this.sceneArray[this.sceneIndex],"next"),this.emit("next",this.sceneArray[this.sceneIndex])},s.prototype.prev=function(){this.sceneIndex--,this.sceneIndex<0?this.options.loop?(this.sceneIndex=this.sceneArray.length-1,this.setScene(this.sceneArray[this.sceneIndex],"prev")):(this.emit("beginning"),this.sceneIndex++):this.setScene(this.sceneArray[this.sceneIndex],"prev"),this.emit("prev",this.sceneArray[this.sceneIndex])},s.prototype.setActiveTransform=function(t,i,e){this.activeTransform&&(this.activeTransform.halt(),this.activeTransform.setTransform(t,i,e))},s.prototype.setScene=function(t,i){var e=this.routes[t];return"undefined"==typeof e?(console.warn("No view exists!",t),void 0):(this.currentRoute=t,this.ActiveConstructor=e,this.inTransition=!0,void 0==i&&(this.sceneIndex=this.sceneArray.indexOf(this.currentRoute)),this.emit("set",{key:t,view:e,index:this.sceneIndex}),this.activeScene&&this.activeScene.deactivate?(this.activeScene.deactivate(this.activateScene.bind(this),i),this.emit("deactivate"),void 0):this.activateScene(i))},s.prototype.setSceneOrder=function(t){this.sceneArray=t,this.emit("reorder",{array:this.sceneArray})},s.prototype.activateScene=function(){this.reset(),r.unpipe(this.activeScene),this.activeScene=new this.ActiveConstructor,this.activeTransform=new n,this.activeScene.setController&&this.activeScene.setController(this),r.pipe(this.activeScene),this.node.add(this.activeTransform).link(this.activeScene),this.activeScene.activate?this.activeScene.activate(function(){this.inTransition=!1,this.emit("activate")}.bind(this)):(this.inTransition=!1,this.emit("activate"))},s.prototype.getCurrentRoute=function(){return this.currentRoute},s.prototype.getCurrentIndex=function(){return this.sceneIndex},s.prototype.getRoutes=function(){return this.routes},s.prototype.getSceneOrder=function(){return this.sceneArray},s.prototype.getOrderedScenes=function(){for(var t=[],i=0;i<this.sceneArray.length;i++)t.push(this.routes[this.sceneArray[i]]);return t},s.prototype.getActiveTransform=function(){return this.activeTransform},e.exports=s}),define("famous-animation/Easing",["require","exports","module"],function(t,i,e){var s={linear:function(t,i,e,s){return t*(e/s)+i},linearNorm:function(t){return t},inQuad:function(t,i,e,s){return e*(t/=s)*t+i},inQuadNorm:function(t){return t*t},outQuad:function(t,i,e,s){return-e*(t/=s)*(t-2)+i},outQuadNorm:function(t){return-(t-=1)*t+1},inOutQuad:function(t,i,e,s){return(t/=s/2)<1?e/2*t*t+i:-e/2*(--t*(t-2)-1)+i},inOutQuadNorm:function(t){return(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1)},inCubic:function(t,i,e,s){return e*(t/=s)*t*t+i},inCubicNorm:function(t){return t*t*t},outCubic:function(t,i,e,s){return e*((t=t/s-1)*t*t+1)+i},outCubicNorm:function(t){return--t*t*t+1},inOutCubic:function(t,i,e,s){return(t/=s/2)<1?e/2*t*t*t+i:e/2*((t-=2)*t*t+2)+i},inOutCubicNorm:function(t){return(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2)},inQuart:function(t,i,e,s){return e*(t/=s)*t*t*t+i},inQuartNorm:function(t){return t*t*t*t},outQuart:function(t,i,e,s){return-e*((t=t/s-1)*t*t*t-1)+i},outQuartNorm:function(t){return-(--t*t*t*t-1)},inOutQuart:function(t,i,e,s){return(t/=s/2)<1?e/2*t*t*t*t+i:-e/2*((t-=2)*t*t*t-2)+i},inOutQuartNorm:function(t){return(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)},inQuint:function(t,i,e,s){return e*(t/=s)*t*t*t*t+i},inQuintNorm:function(t){return t*t*t*t*t},outQuint:function(t,i,e,s){return e*((t=t/s-1)*t*t*t*t+1)+i},outQuintNorm:function(t){return--t*t*t*t*t+1},inOutQuint:function(t,i,e,s){return(t/=s/2)<1?e/2*t*t*t*t*t+i:e/2*((t-=2)*t*t*t*t+2)+i},inOutQuintNorm:function(t){return(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)},inSine:function(t,i,e,s){return-e*Math.cos(t/s*(Math.PI/2))+e+i},inSineNorm:function(t){return-1*Math.cos(t*(Math.PI/2))+1},outSine:function(t,i,e,s){return e*Math.sin(t/s*(Math.PI/2))+i},outSineNorm:function(t){return Math.sin(t*(Math.PI/2))},inOutSine:function(t,i,e,s){return-e/2*(Math.cos(Math.PI*t/s)-1)+i},inOutSineNorm:function(t){return-.5*(Math.cos(Math.PI*t)-1)},inExpo:function(t,i,e,s){return 0==t?i:e*Math.pow(2,10*(t/s-1))+i},inExpoNorm:function(t){return 0==t?0:Math.pow(2,10*(t-1))},outExpo:function(t,i,e,s){return t==s?i+e:e*(-Math.pow(2,-10*t/s)+1)+i},outExpoNorm:function(t){return 1==t?1:-Math.pow(2,-10*t)+1},inOutExpo:function(t,i,e,s){return 0==t?i:t==s?i+e:(t/=s/2)<1?e/2*Math.pow(2,10*(t-1))+i:e/2*(-Math.pow(2,-10*--t)+2)+i},inOutExpoNorm:function(t){return 0==t?0:1==t?1:(t/=.5)<1?.5*Math.pow(2,10*(t-1)):.5*(-Math.pow(2,-10*--t)+2)},inCirc:function(t,i,e,s){return-e*(Math.sqrt(1-(t/=s)*t)-1)+i},inCircNorm:function(t){return-(Math.sqrt(1-t*t)-1)},outCirc:function(t,i,e,s){return e*Math.sqrt(1-(t=t/s-1)*t)+i},outCircNorm:function(t){return Math.sqrt(1- --t*t)},inOutCirc:function(t,i,e,s){return(t/=s/2)<1?-e/2*(Math.sqrt(1-t*t)-1)+i:e/2*(Math.sqrt(1-(t-=2)*t)+1)+i},inOutCircNorm:function(t){return(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},inElastic:function(t,i,e,s){var o=1.70158,n=0,r=e;if(0==t)return i;if(1==(t/=s))return i+e;if(n||(n=.3*s),r<Math.abs(e)){r=e;var o=n/4}else var o=n/(2*Math.PI)*Math.asin(e/r);return-(r*Math.pow(2,10*(t-=1))*Math.sin((t*s-o)*2*Math.PI/n))+i},inElasticNorm:function(t){var i=1.70158,e=0,s=1;return 0==t?0:1==t?1:(e||(e=.3),i=e/(2*Math.PI)*Math.asin(1/s),-(s*Math.pow(2,10*(t-=1))*Math.sin((t-i)*2*Math.PI/e)))},outElastic:function(t,i,e,s){var o=1.70158,n=0,r=e;
if(0==t)return i;if(1==(t/=s))return i+e;if(n||(n=.3*s),r<Math.abs(e)){r=e;var o=n/4}else var o=n/(2*Math.PI)*Math.asin(e/r);return r*Math.pow(2,-10*t)*Math.sin((t*s-o)*2*Math.PI/n)+e+i},outElasticNorm:function(t){var i=1.70158,e=0,s=1;return 0==t?0:1==t?1:(e||(e=.3),i=e/(2*Math.PI)*Math.asin(1/s),s*Math.pow(2,-10*t)*Math.sin((t-i)*2*Math.PI/e)+1)},inOutElastic:function(t,i,e,s){var o=1.70158,n=0,r=e;if(0==t)return i;if(2==(t/=s/2))return i+e;if(n||(n=s*.3*1.5),r<Math.abs(e)){r=e;var o=n/4}else var o=n/(2*Math.PI)*Math.asin(e/r);return 1>t?-.5*r*Math.pow(2,10*(t-=1))*Math.sin((t*s-o)*2*Math.PI/n)+i:.5*r*Math.pow(2,-10*(t-=1))*Math.sin((t*s-o)*2*Math.PI/n)+e+i},inOutElasticNorm:function(t){var i=1.70158,e=0,s=1;return 0==t?0:2==(t/=.5)?1:(e||(e=.3*1.5),i=e/(2*Math.PI)*Math.asin(1/s),1>t?-.5*s*Math.pow(2,10*(t-=1))*Math.sin((t-i)*2*Math.PI/e):.5*s*Math.pow(2,-10*(t-=1))*Math.sin((t-i)*2*Math.PI/e)+1)},inBack:function(t,i,e,s,o){return void 0==o&&(o=1.70158),e*(t/=s)*t*((o+1)*t-o)+i},inBackNorm:function(t,i){return void 0==i&&(i=1.70158),t*t*((i+1)*t-i)},outBack:function(t,i,e,s,o){return void 0==o&&(o=1.70158),e*((t=t/s-1)*t*((o+1)*t+o)+1)+i},outBackNorm:function(t,i){return void 0==i&&(i=1.70158),--t*t*((i+1)*t+i)+1},inOutBack:function(t,i,e,s,o){return void 0==o&&(o=1.70158),(t/=s/2)<1?e/2*t*t*(((o*=1.525)+1)*t-o)+i:e/2*((t-=2)*t*(((o*=1.525)+1)*t+o)+2)+i},inOutBackNorm:function(t,i){return void 0==i&&(i=1.70158),(t/=.5)<1?.5*t*t*(((i*=1.525)+1)*t-i):.5*((t-=2)*t*(((i*=1.525)+1)*t+i)+2)},inBounce:function(t,i,e,o){return e-s.outBounce(o-t,0,e,o)+i},inBounceNorm:function(t){return 1-s.outBounceNorm(1-t)},outBounce:function(t,i,e,s){return(t/=s)<1/2.75?e*7.5625*t*t+i:2/2.75>t?e*(7.5625*(t-=1.5/2.75)*t+.75)+i:2.5/2.75>t?e*(7.5625*(t-=2.25/2.75)*t+.9375)+i:e*(7.5625*(t-=2.625/2.75)*t+.984375)+i},outBounceNorm:function(t){return 1/2.75>t?7.5625*t*t:2/2.75>t?7.5625*(t-=1.5/2.75)*t+.75:2.5/2.75>t?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},inOutBounce:function(t,i,e,o){return o/2>t?.5*s.inBounce(2*t,0,e,o)+i:.5*s.outBounce(2*t-o,0,e,o)+.5*e+i},inOutBounceNorm:function(t){return.5>t?.5*s.inBounceNorm(2*t):.5*s.outBounceNorm(2*t-1)+.5}};e.exports=s}),define("famous-scene/Transitions",["require","exports","module","famous-animation/Easing","famous/Matrix"],function(t,i,e){var s=t("famous-animation/Easing"),o=t("famous/Matrix");e.exports={popIn:function(t,i,e){e=e?e:{curve:s.inOutExpoNorm,duration:1e3},t.halt(),t.setTransform(o.move(o.scale(1e-6,1e-6),[.5*window.innerWidth,.5*window.innerHeight])),t.setTransform(o.identity,e,i)},popOut:function(t,i,e){e=e?e:{curve:s.inOutExpoNorm,duration:1e3},t.halt(),t.setTransform(o.move(o.scale(1e-6,1e-6),[.5*window.innerWidth,.5*window.innerHeight]),e,i)},fadeLeft:function(t,i,e){e=e?e:{curve:s.inOutExpoNorm,duration:1e3},t.halt(),t.setTransform(o.translate(-window.innerWidth,0,0),e,i),t.setOpacity(0,e)},fadeInLeft:function(t,i,e){e=e?e:{curve:s.inOutExpoNorm,duration:1e3},t.halt(),t.setTransform(o.translate(window.innerWidth,0,0)),t.setTransform(o.identity,e,i),t.setOpacity(0),t.setOpacity(1,e)},fadeRight:function(t,i,e){e=e?e:{curve:s.inOutExpoNorm,duration:1e3},t.halt(),t.setTransform(o.translate(window.innerWidth,0,0),e,i),t.setOpacity(0,e)},fadeInRight:function(t,i,e){e=e?e:{curve:s.inOutExpoNorm,duration:1e3},t.halt(),t.setTransform(o.translate(-window.innerWidth,0,0)),t.setTransform(o.identity,e,i),t.setOpacity(0),t.setOpacity(1,e)},fadeOut:function(t,i,e){e=e?e:{curve:s.inExpoNorm,duration:1e3},t.halt(),t.setOpacity(1),t.setOpacity(0,e,i),t.setTransform(o.identity)},fadeIn:function(t,i,e){e=e?e:{curve:s.outExpoNorm,duration:750},t.halt(),t.setOpacity(0),t.setOpacity(1,e,i),t.setTransform(o.identity)}}}),define("famous-scene/SceneTransitions",["require","exports","module","famous-scene/SceneController","famous-animation/Easing","famous/Matrix","./Transitions"],function(t,i,e){function s(t){this.controller=t}t("famous-scene/SceneController"),t("famous-animation/Easing"),t("famous/Matrix");var o=t("./Transitions");s.prototype.setController=function(t){this.controller=t},s.prototype.popIn=function(t,i){o.popIn(this.controller.getActiveTransform(),t,i)},s.prototype.popOut=function(t,i){o.popOut(this.controller.getActiveTransform(),t,i)},s.prototype.fadeLeft=function(t,i){o.fadeLeft(this.controller.getActiveTransform(),t,i)},s.prototype.fadeInLeft=function(t,i){o.fadeInLeft(this.controller.getActiveTransform(),t,i)},s.prototype.fadeRight=function(t,i){o.fadeRight(this.controller.getActiveTransform(),t,i)},s.prototype.fadeInRight=function(t,i){o.fadeInRight(this.controller.getActiveTransform(),t,i)},s.prototype.fadeIn=function(t,i){o.fadeIn(this.controller.getActiveTransform(),t,i)},s.prototype.fadeOut=function(t,i){o.fadeOut(this.controller.getActiveTransform(),t,i)},e.exports=s}),define("app/SceneController",["require","exports","module","famous-scene/SceneController"],function(t,i,e){var s=t("famous-scene/SceneController"),o=new s;e.exports=o}),define("app/SceneTransitions",["require","exports","module","famous-scene/SceneTransitions","app/SceneController"],function(t,i,e){var s=t("famous-scene/SceneTransitions"),o=t("app/SceneController"),n=new s;n.setController(o),e.exports=n}),define("famous-utils/KeyCodes",["require","exports","module"],function(t,i,e){var s={0:48,1:49,2:50,3:51,4:52,5:53,6:54,7:55,8:56,9:57,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,a:97,b:98,c:99,d:100,e:101,f:102,g:103,h:104,i:105,j:106,k:107,l:108,m:109,n:110,o:111,p:112,q:113,r:114,s:115,t:116,u:117,v:118,w:119,x:120,y:121,z:122,ENTER:13,LEFT_ARROW:37,RIGHT_ARROW:39,UP_ARROW:38,DOWN_ARROW:40,SPACE:32,SHIFT:16,TAB:9};e.exports=s}),define("famous-scene/Scene",["require","exports","module","famous-utils/Utils","famous-utils/KeyCodes","famous/EventHandler","famous/View"],function(t,i,e){function s(){n.apply(this,arguments),this.width=o.getWidth(),this.height=o.getHeight(),this.mouseDown=!1,this.callbacks={},this.bindEvents()}var o=t("famous-utils/Utils");t("famous-utils/KeyCodes"),t("famous/EventHandler");var n=t("famous/View");s.prototype=Object.create(n.prototype),s.prototype.constructor=s,s.prototype.bindEvents=function(){this.callbacks.prerender=this.update.bind(this),this.callbacks.touchstart=this.touchstart.bind(this),this.callbacks.touchmove=this.touchmove.bind(this),this.callbacks.touchend=this.touchend.bind(this),this.callbacks.keypress=this.keypress.bind(this),this.callbacks.resize=o.debounce(this.resize.bind(this),333),this.callbacks.mousedown=this._mousedown.bind(this),this.callbacks.mousemove=this._mousemove.bind(this),this.callbacks.mouseover=this._mouseover.bind(this),this.callbacks.mouseup=this._mouseup.bind(this),this.callbacks.mouseout=this._mouseout.bind(this),this.callbacks.keydown=this.keydown.bind(this),this.callbacks.keyup=this.keyup.bind(this);for(var t=Object.keys(this.callbacks),i=0;i<t.length;i++)this.eventInput.on(t[i],this.callbacks[t[i]])},s.prototype.unbindEvents=function(){for(var t=Object.keys(this.callbacks),i=0;i<t.length;i++)this.eventInput.unbind(t[i],this.callbacks[t[i]])},s.prototype.activate=function(t){t&&t()},s.prototype.update=function(){},s.prototype.render=function(){return this.node.render()},s.prototype.deactivate=function(t){t&&t()},s.prototype.touchstart=function(){},s.prototype.touchmove=function(){},s.prototype.touchend=function(){},s.prototype._mousedown=function(t){this.mouseDown=!0,this.mousedown(t)},s.prototype._mousemove=function(t){this.mouseDown===!0?this.mousedrag(t):this.mousemove(t)},s.prototype._mouseover=function(t){this.mouseover(t)},s.prototype._mouseup=function(t){this.mouseDown=!1,this.mouseup(t)},s.prototype._mouseout=function(t){this.mouseout(t)},s.prototype.mousedown=function(){},s.prototype.mouseup=function(){},s.prototype.mousemove=function(){},s.prototype.mouseover=function(){},s.prototype.mouseout=function(){},s.prototype.mousedrag=function(){},s.prototype.keypress=function(){},s.prototype.keydown=function(){},s.prototype.keyup=function(){},s.prototype.keypress=function(){},s.prototype.resize=function(){this.width=o.getWidth(),this.height=o.getHeight()},s.prototype.setController=function(t){this.controller=t},e.exports=s}),define("famous-physics/math/Vector",["require","exports","module"],function(t,i,e){function s(t,i,e){return 1===arguments.length?this.set(t):(this.x=t||0,this.y=i||0,this.z=e||0),this}var o=new s(0,0,0);s.prototype.add=function(t,i){return i=i||o,i.setXYZ(this.x+(t.x||0),this.y+(t.y||0),this.z+(t.z||0))},s.prototype.sub=function(t,i){return i=i||o,i.setXYZ(this.x-t.x,this.y-t.y,this.z-t.z)},s.prototype.mult=function(t,i){return i=i||o,i.setXYZ(t*this.x,t*this.y,t*this.z)},s.prototype.div=function(t,i){return this.mult(1/t,i)},s.prototype.cross=function(t,i){return i=i||o,i.setXYZ(this.y*t.z-this.z*t.y,this.z*t.x-this.x*t.z,this.x*t.y-this.y*t.x)},s.prototype.equals=function(t){return t.x==this.x&&t.y==this.y&&t.z==this.z},s.prototype.rotateX=function(t,i){i=i||o;var e=this.x,s=this.y,n=this.z,r=Math.cos(t),a=Math.sin(t);return i.setXYZ(e,-n*a+s*r,n*r-s*a)},s.prototype.rotateY=function(t,i){i=i||o;var e=this.x,s=this.y,n=this.z,r=Math.cos(t),a=Math.sin(t);return i.setXYZ(-n*a+e*r,s,n*r+e*a)},s.prototype.rotateZ=function(t,i){i=i||o;var e=this.x,s=this.y,n=this.z,r=Math.cos(t),a=Math.sin(t);return i.setXYZ(-s*a+e*r,s*r+e*a,n)},s.prototype.dot=function(t){return this.x*t.x+this.y*t.y+this.z*t.z},s.prototype.normSquared=function(){return this.dot(this)},s.prototype.norm=function(){return Math.sqrt(this.normSquared())},s.prototype.normalize=function(t,i){t=void 0!==t?t:1,i=i||o;var e=1e-7,s=this.norm();return Math.abs(s)>e?this.mult(t/s,i):i.setXYZ(t,0,0)},s.prototype.clone=function(){return new s(this)},s.prototype.isZero=function(){return!(this.x||this.y||this.z)},s.prototype.set=function(t){return t instanceof Array?this.setFromArray(t):(this.x=t.x,this.y=t.y,this.z=t.z||0),this!==o&&o.clear(),this},s.prototype.setFromArray=function(t){this.x=t[0],this.y=t[1],this.z=t[2]||0},s.prototype.put=function(t){t.set(o)},s.prototype.setXYZ=function(t,i,e){return o.clear(),this.x=t,this.y=i,this.z=e,this},s.prototype.clear=function(){this.x=0,this.y=0,this.z=0},s.prototype.cap=function(t,i){if(1/0===t)return this;i=i||o;var e=this.norm();return e>t?this.normalize(t,i):this},s.prototype.project=function(t,i){return i=i||o,t.mult(this.dot(t),i)},s.prototype.reflectAcross=function(t,i){return i=i||o,t.normalize(),this.sub(this.project(t).mult(2),i)},s.prototype.toArray=function(){return[this.x,this.y,this.z]},s.prototype.get=function(){return this.toArray()},e.exports=s}),define("famous-physics/bodies/Particle",["require","exports","module","famous/RenderNode","famous-physics/math/Vector","famous/Matrix"],function(t,i,e){function s(t){t=t||{},this.p=t.p?new n(t.p):new n(0,0,0),this.v=t.v?new n(t.v):new n(0,0,0),this.f=t.f?new n(t.f):new n(0,0,0),this.m=void 0!==t.m?t.m:1,this.restitution=void 0!==t.restitution?t.restitution:.5,this.dissipation=void 0!==t.dissipation?t.dissipation:0,this.axis=void 0!==t.axis?t.axis:void 0,this.setImmunity(t.immunity||s.IMMUNITIES.NONE),this.mInv=1/this.m,this.size=[0,0,0],this.node=void 0,this.spec={size:[0,0],target:{origin:[.5,.5],transform:void 0,target:void 0}}}var o=t("famous/RenderNode"),n=t("famous-physics/math/Vector"),r=t("famous/Matrix");s.AXIS={X:1,Y:2,Z:4},s.IMMUNITIES={NONE:0,POSITION:1,VELOCITY:2,ROTATION:4,AGENTS:8,UPDATE:16};for(var a in s.IMMUNITIES)s.IMMUNITIES.ALL|=s.IMMUNITIES[a];s.prototype.setPos=function(t){this.p.set(t)},s.prototype.getPos=function(){return this.p.get()},s.prototype.setVel=function(t){this.hasImmunity(s.IMMUNITIES.VELOCITY)||this.v.set(t)},s.prototype.getVel=function(){return this.v.get()},s.prototype.setMass=function(t){this.m=t,this.mInv=1/t},s.prototype.getMass=function(){return this.m},s.prototype.addImmunity=function(t){"string"==typeof t&&(t=s.IMMUNITIES[t.toUpperCase()]),this.immunity|=t},s.prototype.removeImmunity=function(t){"string"==typeof t&&(t=s.IMMUNITIES[t.toUpperCase()]),this.immunity&=~t},s.prototype.setImmunity=function(t){"string"==typeof t&&(t=s.IMMUNITIES[t.toUpperCase()]),this.immunity=t},s.prototype.hasImmunity=function(t){return"string"==typeof t&&(t=s.IMMUNITIES[t.toUpperCase()]),this.getImmunity()&t},s.prototype.getImmunity=function(){return this.immunity},s.prototype.reset=function(t,i){t=t||[0,0,0],i=i||[0,0,0],this.setPos(t),this.setVel(i)},s.prototype.applyForce=function(t){this.hasImmunity(s.IMMUNITIES.AGENTS)||this.f.set(this.f.add(t))},s.prototype.applyImpulse=function(t){this.hasImmunity(s.IMMUNITIES.AGENTS)||this.setVel(this.v.add(t.mult(this.mInv)))},s.prototype.getEnergy=function(){return.5*this.m*this.v.normSquared()},s.prototype.getTransform=function(){var t=this.p,i=this.axis;return void 0!==i&&(i&~s.AXIS.X&&(t.x=0),i&~s.AXIS.Y&&(t.y=0),i&~s.AXIS.Z&&(t.z=0)),r.translate(t.x,t.y,t.z)},s.prototype.link=function(t){return this.node||(this.node=new o),this.node.link(t)},s.prototype.add=function(t){return this.node||(this.node=new o),this.node.add(t)},s.prototype.replace=function(t){this.node.object=t},s.prototype.render=function(t){return t=void 0!==t?t:this.node.render(),this.spec.target.transform=this.getTransform(),this.spec.target.target=t,this.spec},e.exports=s}),define("famous-physics/math/Quaternion",["require","exports","module"],function(t,i,e){function s(t,i,e,s){return 1==arguments.length?this.set(t):(this.w=void 0!==t?t:1,this.x=i||0,this.y=e||0,this.z=s||0),this}var o=new s(1,0,0,0);s.prototype.add=function(t,i){return i=i||o,i.setWXYZ(this.w+t.w,this.x+t.x,this.y+t.y,this.z+t.z)},s.prototype.sub=function(t,i){return i=i||o,i.setWXYZ(this.w-t.w,this.x-t.x,this.y-t.y,this.z-t.z)},s.prototype.scalarDivide=function(t,i){return i=i||o,this.scalarMult(1/t,i)},s.prototype.scalarMult=function(t,i){return i=i||o,i.setWXYZ(this.w*t,this.x*t,this.y*t,this.z*t)},s.prototype.multiply=function(t,i){i=i||o;var e=this.x,s=this.y,n=this.z,r=this.w,a=t.x,h=t.y,u=t.z,p=t.w;return i.setWXYZ(r*p-e*a-s*h-n*u,r*a+e*p+s*u-n*h,r*h-e*u+s*p+n*a,r*u+e*h-s*a+n*p)},s.prototype.vectorMultiply=function(t,i){return i=i||o,t.w=0,i.set(this.inverse().multiply(t).multiply(this))},s.prototype.inverse=function(t){return t=t||o,this.conj().scalarDivide(this.normSquared(),t)},s.prototype.negate=function(t){return t=t||o,this.scalarMult(-1,t)},s.prototype.conj=function(t){return t=t||o,t.setWXYZ(this.w,-this.x,-this.y,-this.z)},s.prototype.normalize=function(t){t=t||o;var i=this.norm();return Math.abs(i)<1e-7?t.setWXYZ(1,0,0,0):this.scalarDivide(i,t)},s.prototype.makeFromAngleAndAxis=function(t,i){i.normalize(1,i);var e=.5*t,s=Math.sin(e);return this.x=s*i.x,this.y=s*i.y,this.z=s*i.z,this.w=Math.cos(e),this},s.prototype.getAngle=function(){return 2*Math.acos(this.w)},s.prototype.getAxis=function(){var t=this.w;if(t>=1)return[0,0,0];var i=1/Math.sqrt(1-t*t);return[i*this.x,i*this.y,this.z]},s.prototype.setWXYZ=function(t,i,e,s){return o.clear(),this.w=t,this.x=i,this.y=e,this.z=s,this},s.prototype.set=function(t){return t instanceof Array?(this.w=t[0],this.x=t[1],this.y=t[2],this.z=t[3]):(this.w=t.w,this.x=t.x,this.y=t.y,this.z=t.z),this!==o&&o.clear(),this},s.prototype.put=function(t){t.set(o)},s.prototype.clone=function(){return new s(this)},s.prototype.clear=function(){return this.w=1,this.x=0,this.y=0,this.z=0,this},s.prototype.isEqual=function(t){return t.w==this.w&&t.x==this.x&&t.y==this.y&&t.z==this.z},s.prototype.dot=function(t){return this.w*t.w+this.x*t.x+this.y*t.y+this.z*t.z},s.prototype.normSquared=function(){return this.dot(this)},s.prototype.norm=function(){return Math.sqrt(this.normSquared())},s.prototype.isZero=function(){return!(this.x||this.y||this.z||1!=this.w)},s.prototype.zeroRotation=function(){return this.x=0,this.y=0,this.z=0,this.w=1,this},s.prototype.getMatrix=function(){var t=1/this.norm(),i=this.x*t,e=this.y*t,s=this.z*t,o=this.w*t;return[1-2*e*e-2*s*s,-2*i*e-2*s*o,2*i*s-2*e*o,0,-2*i*e+2*s*o,1-2*i*i-2*s*s,-2*e*s-2*i*o,0,2*i*s+2*e*o,-2*e*s+2*i*o,1-2*i*i-2*e*e,0,0,0,0,1]};var n=1e-5;s.prototype.slerp=function(t,i,e){e=e||o;var s,r,a,h,u;return r=this.dot(t),0>r&&(r*=-1),1-r>n?(s=Math.acos(r),a=Math.sin(s),h=Math.sin((1-i)*s)/a,u=Math.sin(i*s)/a):(h=1-i,u=i),this.scalarMult(h/u).add(t).mult(u,e)},e.exports=s}),define("famous-physics/bodies/Body",["require","exports","module","./Particle","famous-physics/math/Vector","famous-physics/math/Quaternion","famous/Matrix"],function(t,i,e){function s(t){o.call(this,t),this.q=t.q?new r(t.q):new r,this.w=t.w?new n(t.w):new n,this.L=t.L?new n(t.L):new n,this.t=t.t?new n(t.t):new n,this.I=[1,0,0,1,0,0,1,0,0],this.Iinv=[1,0,0,1,0,0,1,0,0],this.w.w=0,this.pWorld=new n}var o=t("./Particle"),n=t("famous-physics/math/Vector"),r=t("famous-physics/math/Quaternion"),a=t("famous/Matrix");s.prototype=Object.create(o.prototype),s.prototype.constructor=s,s.IMMUNITIES=o.IMMUNITIES,s.prototype.updateAngularVelocity=function(){var t=this.Iinv,i=this.L,e=i.x,s=i.y,o=i.z,n=t[0],r=t[1],a=t[2];this.w.setXYZ(n[0]*e+n[1]*s+n[2]*o,r[0]*e+r[1]*s+r[2]*o,a[0]*e+a[1]*s+a[2]*o)},s.prototype.toWorldCoordinates=function(t){var i=this.q;return t.w=0,this.pWorld.set(i.inverse().multiply(t).multiply(i))},s.prototype.getEnergy=function(){var t=this.w,i=this.I,e=t.x,s=t.y,o=t.z,n=this.I[0],r=i[1],a=i[2];return.5*(this.m*this.v.normSquared()+n[0]*e*e+n[1]*e*s+n[2]*e*o+r[0]*s*e+r[1]*s*s+r[2]*s*o+a[0]*o*e+a[1]*o*s+a[2]*o*o)},s.prototype.reset=function(t,i,e,s){this.setPos(t||[0,0,0]),this.setVel(i||[0,0,0]),this.w.clear(),this.setOrientation(e||[1,0,0,0]),this.setAngularMomentum(s||[0,0,0])},s.prototype.setOrientation=function(t){this.q.set(t)},s.prototype.setAngularMomentum=function(t){this.L.set(t)},s.prototype.applyForce=function(t,i){this.hasImmunity(s.IMMUNITIES.AGENTS)||(this.f.set(this.f.add(t)),void 0!==i&&this.applyTorque(i.cross(t)))},s.prototype.applyTorque=function(t){this.hasImmunity(s.IMMUNITIES.ROTATION)||this.t.set(this.t.add(t))},s.prototype.getTransform=function(){return a.move(this.q.getMatrix(),this.p.get())},e.exports=s}),define("famous-physics/bodies/Circle",["require","exports","module","./Body"],function(t,i,e){function s(t){o.call(this,t),t=t||{},this.r=t.r||0,this.size=[2*this.r,2*this.r];var i=this.r,e=this.m;this.I=[[.25*e*i*i,0,0],[0,.25*e*i*i,0],[0,0,.5*e*i*i]],this.Iinv=[[4/(e*i*i),0,0],[0,4/(e*i*i),0],[0,0,2/(e*i*i)]]}var o=t("./Body");s.prototype=Object.create(o.prototype),s.prototype.constructor=s,s.IMMUNITIES=o.IMMUNITIES,e.exports=s}),define("famous-physics/bodies/Rectangle",["require","exports","module","./Body"],function(t,i,e){function s(t){o.call(this,t),t=t||{},this.size=t.size||[0,0];var i=this.size[0],e=this.size[1];this.I=[[e*e/12,0,0],[0,i*i/12,0],[0,0,(i*i+e*e)/12]],this.Iinv=[[12/(e*e),0,0],[0,12/(i*i),0],[0,0,12/(i*i+e*e)]]}var o=t("./Body");s.prototype=Object.create(o.prototype),s.prototype.constructor=s,s.IMMUNITIES=o.IMMUNITIES,e.exports=s}),define("famous-physics/forces/Force",["require","exports","module","famous-physics/math/Vector"],function(t,i,e){function s(){this.force=new o}var o=t("famous-physics/math/Vector");s.prototype.setOpts=function(t){for(var i in t)this.opts[i]=t[i]},s.prototype.applyConstraint=function(){},s.prototype.setupSlider=function(t,i){i=i||t.opts.name,t.setOpts({value:this.opts[i]}),t.init&&t.init(),t.on("change",function(t){this.opts[i]=t.value}.bind(this))},s.prototype.getEnergy=function(){return 0},e.exports=s}),define("famous-physics/constraints/Constraint",["require","exports","module"],function(t,i,e){function s(){}s.prototype.setOpts=function(t){for(var i in t)this.opts[i]=t[i]},s.prototype.applyConstraint=function(){},s.prototype.setupSlider=function(t,i){i=i||t.opts.name,t.setOpts({value:this.opts[i]}),t.init&&t.init(),t.on("change",function(t){this.opts[i]=t.value}.bind(this))},e.exports=s}),define("famous-physics/integrator/SymplecticEuler",["require","exports","module"],function(t,i,e){function s(t){this.opts={velocityCap:1/0,angularVelocityCap:1/0},t&&this.setOpts(t)}s.prototype.integrateVelocity=function(t,i){var e=t.v,s=t.m,o=t.f;o.isZero()||(t.setVel(e.add(o.mult(i/s))),o.clear())},s.prototype.integratePosition=function(t,i){var e=t.p,s=t.v;s.isZero()||(s.set(s.cap(this.opts.velocityCap)),t.setPos(e.add(s.mult(i))))},s.prototype.integrateAngularMomentum=function(t,i){var e=t.L,s=t.t;s.isZero()||(s.set(s.cap(this.opts.angularVelocityCap)),e.add(s.mult(i)).put(e),s.clear())},s.prototype.integrateOrientation=function(t,i){var e=t.q,s=t.w;s.isZero()||(e.set(e.add(e.multiply(s).scalarMult(.5*i))),e.set(e.normalize()))},s.prototype.setOpts=function(t){for(var i in t)this.opts[i]=t[i]},e.exports=s}),define("famous-physics/PhysicsEngine",["require","exports","module","famous-physics/bodies/Particle","famous-physics/bodies/Body","famous-physics/bodies/Circle","famous-physics/bodies/Rectangle","famous-physics/forces/Force","famous-physics/constraints/Constraint","famous-physics/integrator/SymplecticEuler"],function(t,i,e){function s(t){this.opts={speed:1,steps:1,velocityCap:1/0,angularVelocityCap:1/0,constraintSteps:1,constraintTolerance:1e-4},t&&this.setOpts(t),this._particles=[],this._agents={},this._forces=[],this._constraints=[],this._playing=!0,this._buffer=0,this._timestep=1e3/60/this.opts.steps,this._prevTime=void 0,this._currTime=void 0,this._integrator=new O({velocityCap:this.opts.velocityCap,angularVelocityCap:this.opts.angularVelocityCap}),this._currAgentId=0,this.BODIES=s.BODIES}function o(){return Date.now()}function n(t,i,e){return void 0===i&&(i=this.getParticles()),i instanceof Array||(i=[i]),this._agents[this._currAgentId]={agent:t,targets:i,source:e},r.call(this,t).push(this._currAgentId),this._currAgentId++}function r(t){return t instanceof C?this._forces:t instanceof P?this._constraints:void 0}function a(t){return this._agents[t]}function h(t){var i=a.call(this,this._forces[t]);i.agent.applyForce(i.targets,i.source)}function u(t,i){var e=this._agents[this._constraints[t]];return e.agent.applyConstraint(e.targets,e.source,i)}function p(){for(var t=this._forces.length-1;t>-1;t--)h.call(this,t)}function c(t){var i=1/0,e=0;for(this.opts.constraintTolerance;e<this.opts.constraintSteps;){i=0;for(var s=this._constraints.length-1;s>-1;s--)i+=u.call(this,s,t);e++}}function l(t,i){t.hasImmunity(T.IMMUNITIES.UPDATE)||this._integrator.integrateVelocity(t,i)}function f(t){t.hasImmunity(T.IMMUNITIES.ROTATION)||t instanceof M&&t.updateAngularVelocity()}function d(t,i){t.hasImmunity(T.IMMUNITIES.ROTATION)||t instanceof M&&this._integrator.integrateAngularMomentum(t,i)}function m(t,i){t.hasImmunity(T.IMMUNITIES.UPDATE)||this._integrator.integratePosition(t,i)}function g(t,i){t.hasImmunity(T.IMMUNITIES.ROTATION)||t instanceof M&&this._integrator.integrateOrientation(t,i)}function v(t){this.forEachParticle(l,t)}function y(t){this.forEachParticle(m,t)}function x(){this.forEachParticle(f)}function S(t){this.forEachParticle(d,t)}function b(t){this.forEachParticle(g,t)}function w(t){p.call(this),v.call(this,t),S.call(this,t),x.call(this,t),c.call(this,t),y.call(this,t),b.call(this,t)}var T=t("famous-physics/bodies/Particle"),M=t("famous-physics/bodies/Body"),z=t("famous-physics/bodies/Circle"),_=t("famous-physics/bodies/Rectangle"),C=t("famous-physics/forces/Force"),P=t("famous-physics/constraints/Constraint"),O=t("famous-physics/integrator/SymplecticEuler");s.BODIES={POINT:T,BODY:M,CIRCLE:z,RECTANGLE:_},s.IMMUNITIES=T.IMMUNITIES,s.prototype.setOpts=function(t){for(var i in t)this.opts[i]&&(this.opts[i]=t[i])},s.prototype.addBody=function(t){return this._particles.push(t),t},s.prototype.createParticle=function(t){return this.addBody(new T(t))},s.prototype.createBody=function(t){var i=t.shape||s.BODIES.POINT;return this.addBody(new i(t))},s.prototype.remove=function(t){var i=this._particles.indexOf(t);if(i>-1){for(var e=0;e<Object.keys(this._agents);e++)this.detachFrom(e,t);this._particles.splice(i,1)}},s.prototype.attach=function(t,i,e){if(t instanceof Array){for(var s=[],o=0;o<t.length;o++)s[o]=n.call(this,t[o],i,e);return s}return n.call(this,t,i,e)},s.prototype.attachTo=function(t,i){a.call(this,t).targets.push(i)},s.prototype.detach=function(t){var i=this.getAgent(t),e=r.call(this,i),s=e.indexOf(t);e.splice(s,1),delete this._agents[t]},s.prototype.detachFrom=function(t,i){var e=a.call(this,t);if(e.source===i)this.detach(t);else{var s=e.targets,o=s.indexOf(i);o>-1&&s.splice(o,1)}},s.prototype.detachAll=function(){this._agents={},this._forces=[],this._constraints=[],this._currAgentId=0},s.prototype.getAgent=function(t){return a.call(this,t).agent},s.prototype.getParticles=function(){return this._particles},s.prototype.getParticlesExcept=function(t){var i=[];return this.forEachParticle(function(e){-1===t.indexOf(e)&&i.push(e)}),i},s.prototype.getPos=function(t){return(t||this._particles[0]).getPos()},s.prototype.getVel=function(t){return(t||this._particles[0]).getVel()},s.prototype.getTransform=function(t){return(t||this._particles[0]).getTransform()},s.prototype.setPos=function(t,i){(i||this._particles[0]).setPos(t)},s.prototype.setVel=function(t,i){(i||this._particles[0]).setVel(t)},s.prototype.forEachParticle=function(t,i){for(var e=this.getParticles(),s=0,o=e.length;o>s;s++)t.call(this,e[s],i)},s.prototype.step=function(){if(this._playing){this._prevTime||(this._prevTime=o()),this._currTime=o();var t=this._currTime-this._prevTime;this._prevTime=this._currTime,0!=t&&w.call(this,this.opts.speed*this._timestep)}},s.prototype.render=function(t){this.step();var i=[];return this.forEachParticle(function(e){i.push(e.render(t))}),i},s.prototype.play=function(){this._prevTime=o(),this._playing=!0},s.prototype.pause=function(){this._playing=!1},s.prototype.toggle=function(){this._playing?this.pause():this.play()},s.prototype.reverseTime=function(){this.opts.speed*=-1},s.prototype.reverseVelocities=function(){this.forEachParticle(function(t){t.v.mult(-1,t.v)})},e.exports=s}),define("famous-physics/forces/Drag",["require","exports","module","famous-physics/forces/Force"],function(t,i,e){function s(t){this.opts={strength:.01,forceFunction:s.FORCE_FUNCTIONS.LINEAR},t&&this.setOpts(t),o.call(this)}var o=t("famous-physics/forces/Force");s.prototype=Object.create(o.prototype),s.prototype.constructor=o,s.FORCE_FUNCTIONS={LINEAR:function(t){return t},QUADRATIC:function(t){return t.mult(t.norm())}},s.prototype.applyForce=function(t){for(var i=this.opts.strength,e=this.opts.forceFunction,s=this.force,o=0;o<t.length;o++){var n=t[o];e(n.v).mult(-i).put(s),n.applyForce(s)}},s.prototype.setOpts=function(t){for(var i in t)this.opts[i]=t[i]},e.exports=s}),define("famous-physics/forces/Spring",["require","exports","module","famous-physics/forces/Force","famous-physics/math/Vector","famous/EventHandler"],function(t,i,e){function s(t){this.opts={period:300,dampingRatio:.1,length:0,lMin:0,lMax:1/0,anchor:void 0,forceFunction:s.FORCE_FUNCTIONS.HOOK,restTolerance:1e-5},t&&this.setOpts(t),this.eventOutput=void 0,this._atRest=!1,this.init(),p.call(this),this.disp=new c(0,0,0)}function o(t){this.forceFunction=t}function n(){var t=this.opts;t.stiffness=Math.pow(2*Math.PI/t.period,2)}function r(){var t=this.opts;t.damping=4*Math.PI*t.dampingRatio/t.period}function a(t,i){return.5*t*i*i}function h(t,i){t<this.opts.restTolerance?(this._atRest||this.eventOutput.emit("atRest",{particle:i}),this._atRest=!0):this._atRest=!1}function u(){this.eventOutput=new l,this.eventOutput.bindThis(this),l.setOutputHandler(this,this.eventOutput)}var p=t("famous-physics/forces/Force"),c=t("famous-physics/math/Vector"),l=t("famous/EventHandler");s.prototype=Object.create(p.prototype),s.prototype.constructor=p,s.FORCE_FUNCTIONS={FENE:function(t,i){var e=.99*i,s=Math.max(Math.min(t,e),-e);return s/(1-s*s/(i*i))},HOOK:function(t){return t}},s.prototype.init=function(){o.call(this,this.opts.forceFunction),n.call(this),r.call(this)},s.prototype.applyForce=function(t,i){for(var e=this.force,s=this.disp,o=this.opts,n=o.stiffness,r=o.damping,u=o.length,p=o.lMax,c=o.anchor||i.p,l=0;l<t.length;l++){var f=t[l];s.set(c.sub(f.p));var d=s.norm()-u;if(0==d)return;var m=f.m;if(n*=m,r*=m,e.set(s.normalize(n*this.forceFunction(d,p))),r&&(i?e.set(e.add(f.v.sub(i.v).mult(-r))):e.set(e.add(f.v.mult(-r)))),f.applyForce(e),i&&i.applyForce(e.mult(-1)),this.eventOutput){var g=f.getEnergy()+a(n,d);h.call(this,g,f)}}},s.prototype.getEnergy=function(t,i){var e=this.opts,s=e.length,o=e.anchor||i.p,n=e.stiffness,r=o.sub(t.p).norm()-s;return.5*n*r*r},s.prototype.setOpts=function(t){void 0!==t.anchor&&(t.anchor.p instanceof c&&(this.opts.anchor=t.anchor.p),t.anchor instanceof c&&(this.opts.anchor=t.anchor),t.anchor instanceof Array&&(this.opts.anchor=new c(t.anchor))),void 0!==t.period&&(this.opts.period=t.period),void 0!==t.dampingRatio&&(this.opts.dampingRatio=t.dampingRatio),void 0!==t.length&&(this.opts.length=t.length),void 0!==t.lMin&&(this.opts.lMin=t.lMin),void 0!==t.lMax&&(this.opts.lMax=t.lMax),void 0!==t.forceFunction&&(this.opts.forceFunction=t.forceFunction),void 0!==t.restTolerance&&(this.opts.restTolerance=t.restTolerance),this.init()},s.prototype.setAnchor=function(t){void 0===this.opts.anchor&&(this.opts.anchor=new c),this.opts.anchor.set(t)},s.prototype.on=function(){return u.call(this),this.on.apply(this,arguments)},s.prototype.unbind=function(){return u.call(this),this.unbind.apply(this,arguments)},s.prototype.pipe=function(){return u.call(this),this.pipe.apply(this,arguments)},s.prototype.unpipe=function(){return u.call(this),this.unpipe.apply(this,arguments)},e.exports=s}),define("famous-sync/TouchTracker",["require","exports","module","famous/EventHandler"],function(t,i,e){function s(t){this.selective=t,this.touchHistory={},this.eventHandler=new u(!0)}function o(t,i,e,s,o){var n={};for(var r in t)n[r]=t[r];return{touch:n,origin:i,timestamp:+Date.now(),count:s,history:e,event:o}}function n(t){for(var i=0;i<t.changedTouches.length;i++){var e=t.changedTouches[i],s=o(e,t.origin,void 0,t.touches.length,t);this.eventHandler.emit("trackstart",s),this.selective||this.touchHistory[e.identifier]||this.track(s)}}function r(t){for(var i=0;i<t.changedTouches.length;i++){var e=t.changedTouches[i],s=this.touchHistory[e.identifier];if(s){var n=o(e,t.origin,s,t.touches.length,t),r=s[s.length-1];r&&delete r.event,this.touchHistory[e.identifier].push(n),this.eventHandler.emit("trackmove",n)}}}function a(t){for(var i=0;i<t.changedTouches.length;i++){var e=t.changedTouches[i],s=this.touchHistory[e.identifier];if(s){var n=o(e,t.origin,s,t.touches.length,t);this.eventHandler.emit("trackend",n),delete this.touchHistory[e.identifier]}}}function h(){for(var t in this.touchHistory){var i=this.touchHistory[t];this.eventHandler.emit("trackend",{touch:i[i.length-1].touch,timestamp:+Date.now(),count:0,history:i}),delete this.touchHistory[t]}}var u=t("famous/EventHandler");s.prototype.track=function(t){this.touchHistory[t.touch.identifier]=[t]},s.prototype.emit=function(t,i){return"touchstart"==t?n.call(this,i):"touchmove"==t?r.call(this,i):"touchend"==t?a.call(this,i):"touchcancel"==t?a.call(this,i):"unpipe"==t?h.call(this):void 0},s.prototype.on=function(t,i){return this.eventHandler.on(t,i)},s.prototype.unbind=function(t,i){return this.eventHandler.unbind(t,i)},s.prototype.pipe=function(t){return this.eventHandler.pipe(t)},s.prototype.unpipe=function(t){return this.eventHandler.unpipe(t)},e.exports=s}),define("famous-sync/TouchSync",["require","exports","module","./TouchTracker","famous/EventHandler"],function(t,i,e){function s(t,i){this._customTargetGet=i?!0:!1,this._relativePosition=[0,0],this.targetGet=i||function(){return this._relativePosition}.bind(this),this.output=new h,this.touchTracker=new a,this.options={direction:void 0,rails:!1,scale:1},t?this.setOptions(t):this.setOptions(this.options),h.setOutputHandler(this,this.output),h.setInputHandler(this,this.touchTracker),this.touchTracker.on("trackstart",o.bind(this)),this.touchTracker.on("trackmove",n.bind(this)),this.touchTracker.on("trackend",r.bind(this))
}function o(t){this.output.emit("start",{event:t.event,count:t.count,touch:t.touch.identifier,coordinate:[t.touch.clientX,t.touch.clientY],timestamp:+Date.now()}),this._customTargetGet||(this._relativePosition=[0,0])}function n(t){var i=t.history,e=i[i.length-2].timestamp,o=i[i.length-1].timestamp,n=i[i.length-2].touch,r=i[i.length-1].touch,a=r.pageX-n.pageX,h=r.pageY-n.pageY;this.options.rails&&(Math.abs(a)>Math.abs(h)?h=0:a=0);var u=Math.max(o-e,8),p=a/u,c=h/u;if(i.length>2)var l=i[i.length-3].touch,f=(r.pageX-2*n.pageX+l.pageX)/(u*u),d=(r.pageY-2*n.pageY+l.pageY)/(u*u);else var f=0,d=0;var m,g,v,y=this.targetGet(),x=this.options.scale;this.options.direction==s.DIRECTION_X?(m=y+x*a,g=x*p,v=x*c):this.options.direction==s.DIRECTION_Y?(m=y+x*h,g=x*c,v=x*d):(m=[y[0]+x*a,y[1]+x*h],g=[x*p,x*c],v=[x*f,x*d]),this.output.emit("update",{position:m,velocity:g,count:t.count,acceleration:v,coordinate:[t.touch.clientX,t.touch.clientY],touch:t.touch,touchID:t.touch.identifier,timestamp:o,event:t.event}),this._customTargetGet||(this._relativePosition=m)}function r(t){var i=void 0!==this.options.direction?0:[0,0],e=t.history,o=t.count,n=this.targetGet();if(e.length>1){var r=e[e.length-2].timestamp,a=e[e.length-1].timestamp,h=e[e.length-2].touch,u=e[e.length-1].touch,p=u.pageX-h.pageX,c=u.pageY-h.pageY;this.options.rails&&(Math.abs(p)>Math.abs(c)?c=0:p=0);var i,l=Math.max(a-r,1),f=p/l,d=c/l,m=this.options.scale;i=this.options.direction==s.DIRECTION_X?m*f:this.options.direction==s.DIRECTION_Y?m*d:[m*f,m*d]}this.output.emit("end",{position:n,coordinate:[t.touch.clientX,t.touch.clientY],velocity:i,count:o,touch:t.touch,touchID:t.touch.identifier,event:t.event,duration:a?a-e[0].timestamp:+Date.now()-e[0].timestamp,timestamp:a?a:+Date.now()})}var a=t("./TouchTracker"),h=t("famous/EventHandler");s.DIRECTION_X=0,s.DIRECTION_Y=1,s.prototype.setOptions=function(t){void 0!==t.direction&&(this.options.direction=t.direction),void 0!==t.rails&&(this.options.rails=t.rails),void 0!==t.scale&&(this.options.scale=t.scale)},s.prototype.getOptions=function(){return this.options},e.exports=s}),define("famous-sync/ScrollSync",["require","exports","module","famous/EventHandler","famous/Engine"],function(t,i,e){function s(t,i){this.options={direction:void 0,minimumEndSpeed:1/0,rails:!1,scale:1,stallTime:50},t?this.setOptions(t):this.setOptions(this.options),this._relativePosition,this.targetGet=i||function(){return this._relativePosition},this._customTargetGet=i?!0:!1,this.input=new r,this.output=new r,r.setInputHandler(this,this.input),r.setOutputHandler(this,this.output),this._prevTime=void 0,this._prevVel=void 0,this._lastFrame=void 0,this.input.on("mousewheel",n.bind(this)),this.input.on("wheel",n.bind(this)),this.inProgress=!1,this._loopBound=!1}function o(){var t=Date.now();if(this.inProgress&&t-this._prevTime>this.options.stallTime){var i=this.targetGet();this.inProgress=!1;var e=0;Math.abs(this._prevVel)>=this.options.minimumEndSpeed&&(e=this._prevVel),this._relativePosition=this._relative2D?0:[0,0],this.output.emit("end",{position:i,velocity:e,slip:!0})}}function n(t){t.preventDefault(),this.inProgress||(this.inProgress=!0,this.output.emit("start",{slip:!0,event:t}),this._loopBound||(a.on("prerender",o.bind(this)),this._loopBound=!0));var i=this._prevTime,e=void 0!==t.wheelDeltaX?t.wheelDeltaX:-t.deltaX,n=void 0!==t.wheelDeltaY?t.wheelDeltaY:-t.deltaY,r=Date.now();this.options.rails&&(Math.abs(e)>Math.abs(n)?n=0:e=0);var h,u,p=Math.max(r-i,8),c=e/p,l=n/p,f=this.targetGet(),d=this.options.scale;this.options.direction==s.DIRECTION_X?(h=f+d*e,u=d*c):this.options.direction==s.DIRECTION_Y?(h=f+d*n,u=d*l):(h=[f[0]+d*e,f[1]+d*n],u=[d*c,d*l]),this.output.emit("update",{position:h,velocity:u,slip:!0,event:t}),this._prevTime=r,this._prevVel=u,this._relativePosition=h}var r=t("famous/EventHandler"),a=t("famous/Engine");s.DIRECTION_X=0,s.DIRECTION_Y=1,s.prototype.getOptions=function(){return this.options},s.prototype.setOptions=function(t){void 0!==t.direction&&(this.options.direction=t.direction),void 0!==t.minimumEndSpeed&&(this.options.minimumEndSpeed=t.minimumEndSpeed),void 0!==t.rails&&(this.options.rails=t.rails),void 0!==t.scale&&(this.options.scale=t.scale),void 0!==t.stallTime&&(this.options.stallTime=t.stallTime),this._relative2D=this.options.direction==s.DIRECTION_X||this.options.direction==s.DIRECTION_Y?!0:!1,this._relativePosition=this._relative2D?0:[0,0]},e.exports=s}),define("famous-sync/GenericSync",["require","exports","module","famous/EventHandler","./TouchSync","./ScrollSync"],function(t,i,e){function s(t,i){this.targetGet=i,this.eventInput=new n,n.setInputHandler(this,this.eventInput),this.eventOutput=new n,n.setOutputHandler(this,this.eventOutput),this._handlers=void 0,this.options={syncClasses:h},this._handlerOptions=this.options,t&&this.setOptions(t),this._handlers||o.call(this)}function o(){if(this._handlers)for(var t=0;t<this._handlers.length;t++)this.eventInput.unpipe(this._handlers[t]),this._handlers[t].unpipe(this.eventOutput);this._handlers=[];for(var t=0;t<this.options.syncClasses.length;t++){var i=this.options.syncClasses[t];this._handlers[t]=new i(this.targetGet,this._handlerOptions),this.eventInput.pipe(this._handlers[t]),this._handlers[t].pipe(this.eventOutput)}}var n=t("famous/EventHandler"),r=t("./TouchSync"),a=t("./ScrollSync"),h=[r,a];s.register=function(t){h.indexOf(t)<0&&h.push(t),console.log(h)},s.DIRECTION_X=0,s.DIRECTION_Y=1,s.DIRECTION_Z=2,s.prototype.setOptions=function(t){if(this._handlerOptions=t,t.syncClasses&&(this.options.syncClasses=t.syncClasses,o.call(this)),this._handlers)for(var i=0;i<this._handlers.length;i++)this._handlers[i].setOptions(this._handlerOptions)},e.exports=s}),define("famous/ViewSequence",["require","exports","module"],function(t,i,e){function s(t,i,e){this.array=t||[],this.index=i||0,this.loop=e||!1,this._prev=void 0,this._prevIndex=void 0,this._next=void 0,this._nextIndex=void 0}function o(t){for(var i=this.index,e=this;e&&i<this.array.length;)e.index+=t,void 0!==e._prevIndex&&(e._prevIndex+=t),void 0!==e._nextIndex&&(e._nextIndex+=t),e=e._next}s.prototype._createPrevious=function(){var t=new this.constructor(this.array,this._prevIndex,this.loop);return t._next=this,t._nextIndex=this.index,t},s.prototype._createNext=function(){var t=new this.constructor(this.array,this._nextIndex,this.loop);return t._prev=this,t._prevIndex=this.index,t},s.prototype.getPrevious=function(){var t=this.index-1;if(0==this.index){if(!this.loop)return void 0;t=this.array.length-1}return this._prev&&this._prevIndex==t||(this._prevIndex=t,this._prev=this._createPrevious()),this._prev},s.prototype.getNext=function(){var t=this.index+1;if(t>=this.array.length){if(!this.loop)return void 0;t=0}return this._next&&this._nextIndex==t||(this._nextIndex=t,this._next=this._createNext()),this._next},s.prototype.toString=function(){return this.index},s.prototype.unshift=function(){if(this._prev&&0!==this.index)this._prev.unshift.apply(this._prev,arguments);else{var t=arguments.length;this.array.unshift.apply(this.array,arguments),o.call(this,t)}},s.prototype.push=function(){this.array.push.apply(this.array,arguments)},s.prototype.splice=function(t,i){if(this._prev&&this.index!==t)this._prev.splice.apply(this._prev,arguments);else{var e=this.index>=t?arguments.length-2-i:0;this.array.splice.apply(this.array,arguments),e&&o.call(this,e)}},s.prototype.get=function(){return this.array[this.index]},s.prototype.getSize=function(){var t=this.get();if(t)return t.getSize?t.getSize.apply(t,arguments):void 0},s.prototype.render=function(){var t=this.get();if(t)return t.render.apply(t,arguments)},e.exports=s}),define("famous/Group",["require","exports","module","./Context","./Matrix","./Surface"],function(t,i,e){function s(t){r.call(this,t),this._shouldRecalculateSize=!1,this._container=document.createDocumentFragment(),this.context=new o(this._container),this.setContent(this._container),this._groupSize=[void 0,void 0],this._origin=void 0,this._originTransfer={render:function(t){return{origin:this._origin,target:t}}.bind(this)}}var o=t("./Context"),n=t("./Matrix"),r=t("./Surface");s.SIZE_ZERO=[0,0],s.prototype=Object.create(r.prototype),s.prototype.elementType="div",s.prototype.elementClass="group",s.prototype.link=function(){var t=this.context.link(this._originTransfer);return t.link.apply(t,arguments)},s.prototype.add=function(){return this.context.add.apply(this.context,arguments)},s.prototype.mod=function(){return this.context.mod.apply(this.context,arguments)},s.prototype.render=function(){return r.prototype.render.call(this)},s.prototype.deploy=function(t){this.context.migrate(t)},s.prototype.recall=function(){this._container=document.createDocumentFragment(),this.context.migrate(this._container)},s.prototype.commit=function(t,i,e,o,a){i=n.moveThen([-o[0]*a[0],-o[1]*a[1],0],i);var h=r.prototype.commit.call(this,t,i,e,o,s.SIZE_ZERO);return this._origin=o,(a[0]!=this._groupSize[0]||a[1]!=this._groupSize[1])&&(this.context.setSize(a),this._groupSize[0]=a[0],this._groupSize[1]=a[1]),this.context.update(),h},e.exports=s}),define("famous-views/Scrollview",["require","exports","module","famous/Utility","famous-physics/PhysicsEngine","famous-physics/bodies/Particle","famous-physics/forces/Drag","famous-physics/forces/Spring","famous/Matrix","famous/EventHandler","famous-sync/GenericSync","famous/ViewSequence","famous/Group","famous/Entity"],function(t,i,e){function s(t){this.options={direction:S.Direction.Y,rails:!0,itemSpacing:0,clipSize:void 0,margin:void 0,friction:.001,drag:1e-4,edgeGrip:.5,edgePeriod:300,edgeDamp:1,paginated:!1,pagePeriod:500,pageDamp:.8,pageStopSpeed:1/0,pageSwitchSpeed:1,speedLimit:10},this.node=null,this.physicsEngine=new b,this.particle=new w,this.physicsEngine.addBody(this.particle),this.spring=new M({anchor:[0,0,0]}),this.drag=new T({forceFunction:T.FORCE_FUNCTIONS.QUADRATIC}),this.friction=new T({forceFunction:T.FORCE_FUNCTIONS.LINEAR}),this.sync=new C(function(){return-this.getPosition()}.bind(this),{direction:this.options.direction==S.Direction.X?C.DIRECTION_X:C.DIRECTION_Y}),this.eventInput=new _,this.eventOutput=new _,this.rawInput=new _,this.rawInput.pipe(this.sync),this.sync.pipe(this.eventInput),this.sync.pipe(this.eventOutput),this.rawInput.pipe(this.eventInput),_.setInputHandler(this,this.rawInput),_.setOutputHandler(this,this.eventOutput),this._outputFunction=void 0,this._masterOutputFunction=void 0,this.setOutputFunction(),this.touchCount=0,this._springAttached=!1,this._onEdge=0,this._springPosition=0,this._touchVelocity=void 0,this._earlyEnd=!1,this._masterOffset=0,this._lastFrameNode=void 0,t?this.setOptions(t):this.setOptions({}),a.call(this),this.group=new O,this.group.link({render:x.bind(this)}),this._entityId=E.register(this),this._contextSize=[window.innerWidth,window.innerHeight],this._offsets={}}function o(t){this.touchCount=t.count,void 0===t.count&&(this.touchCount=1),u.call(this),this.setVelocity(0),this._touchVelocity=0,this._earlyEnd=!1}function n(t){var i=-t.position,e=-t.velocity;this._onEdge&&t.slip&&(0>e&&this._onEdge<0||e>0&&this._onEdge>0?this._earlyEnd||(r.call(this,t),this._earlyEnd=!0):this._earlyEnd&&Math.abs(e)>Math.abs(this.particle.getVel()[0])&&o.call(this,t)),this._earlyEnd||(this._touchVelocity=e,t.slip?this.setVelocity(e):this.setPosition(i))}function r(t){if(this.touchCount=t.count||0,!this.touchCount){u.call(this),this._onEdge&&(this._springAttached=!0),h.call(this);var i=-t.velocity,e=this.options.speedLimit;t.slip&&(e*=this.options.edgeGrip),-e>i?i=-e:i>e&&(i=e),this.setVelocity(i),this._touchVelocity=void 0}}function a(){this.eventInput.on("start",o.bind(this)),this.eventInput.on("update",n.bind(this)),this.eventInput.on("end",r.bind(this))}function h(){this._springAttached?this.physicsEngine.attach([this.spring],this.particle):this.physicsEngine.attach([this.drag,this.friction],this.particle)}function u(){this._springAttached=!1,this.physicsEngine.detachAll()}function p(t){t||(t=this._contextSize);var i=this.options.direction===S.Direction.X?0:1;return t[i]||this._contextSize[i]}function c(t){this._springPosition+=t,this.setPosition(this.getPosition()+t),this.spring.setOpts({anchor:[this._springPosition,0,0]})}function l(){for(var t=!1;!t&&this.getPosition()<0;){var i=this.node.getPrevious?this.node.getPrevious():void 0;if(i){var e=i.getSize?i.getSize():this._contextSize,s=p.call(this,e)+this.options.itemSpacing;c.call(this,s),this._masterOffset-=s,this.node=i}else t=!0}for(var o=this.node&&this.node.getSize?this.node.getSize():this._contextSize;!t&&this.getPosition()>=p.call(this,o)+this.options.itemSpacing;){var n=this.node.getNext?this.node.getNext():void 0;if(n){var s=p.call(this,o)+this.options.itemSpacing;c.call(this,-s),this._masterOffset+=s,this.node=n,o=this.node.getSize?this.node.getSize():this._contextSize}else t=!0}Math.abs(this._masterOffset)>y.call(this)+this.options.margin&&(this._masterOffset=0)}function f(t){!this._onEdge&&t?(this.sync.setOptions({scale:this.options.edgeGrip}),this.touchCount||this._springAttached||(this._springAttached=!0,this.physicsEngine.attach([this.spring],this.particle))):this._onEdge&&!t&&(this.sync.setOptions({scale:1}),this._springAttached&&Math.abs(this.getVelocity())<.001&&(this.setVelocity(0),this.setPosition(this._springPosition),u.call(this),h.call(this))),this._onEdge=t}function d(){if(0==this.touchCount&&!this._springAttached&&!this._onEdge&&this.options.paginated&&Math.abs(this.getVelocity())<this.options.pageStopSpeed){var t=this.node.getSize?this.node.getSize():this._contextSize,i=Math.abs(this.getVelocity())>this.options.pageSwitchSpeed,e=this.getVelocity()>0,s=this.getPosition()>.5*p.call(this,t);i&&e||!i&&s?this.goToNextPage():m.call(this)}}function m(){g.call(this,0,{period:this.options.pagePeriod,damp:this.options.pageDamp}),this._springAttached||(this._springAttached=!0,this.physicsEngine.attach([this.spring],this.particle))}function g(t,i){i||(i={period:this.options.edgePeriod,damp:this.options.edgeDamp}),this._springPosition=t,this.spring.setOpts({anchor:[this._springPosition,0,0],period:i.period,dampingRatio:i.damp})}function v(t,i,e){var s=t.getSize?t.getSize():this._contextSize,o=this._outputFunction(i);return e.push({transform:o,target:t.render()}),p.call(this,s)}function y(){return this.options.clipSize?this.options.clipSize:p.call(this,this._contextSize)}function x(){var t={},i=this.getPosition(),e=[],s=0,o=0,n=this.node;for(t[n]=0;n&&o-i<y.call(this)+this.options.margin;)o+=v.call(this,n,o+this._masterOffset,e)+this.options.itemSpacing,n=n.getNext?n.getNext():void 0,t[n]=o,!n&&o-i-this.options.itemSpacing<=y.call(this)&&(this._onEdge||g.call(this,o-y.call(this)-this.options.itemSpacing),s=1);if(n=this.node&&this.node.getPrevious?this.node.getPrevious():void 0,o=0,n){var r=n.getSize?n.getSize():this._contextSize;o-=p.call(this,r)+this.options.itemSpacing}else 0>=i&&(this._onEdge||g.call(this,0),s=-1);for(;n&&o-i>-(y.call(this)+this.options.margin);)if(t[n]=o,v.call(this,n,o+this._masterOffset,e),n=n.getPrevious?n.getPrevious():void 0){var r=n.getSize?n.getSize():this._contextSize;o-=p.call(this,r)+this.options.itemSpacing}return this._offsets=t,f.call(this,s),d.call(this),this.options.paginated&&this._lastFrameNode!==this.node&&(this.eventOutput.emit("pageChange"),this._lastFrameNode=this.node),e}var S=t("famous/Utility"),b=t("famous-physics/PhysicsEngine"),w=t("famous-physics/bodies/Particle"),T=t("famous-physics/forces/Drag"),M=t("famous-physics/forces/Spring"),z=t("famous/Matrix"),_=t("famous/EventHandler"),C=t("famous-sync/GenericSync"),P=t("famous/ViewSequence"),O=t("famous/Group"),E=t("famous/Entity");s.prototype.getPosition=function(t){var i=this.particle.getPos()[0];if(void 0===t)return i;var e=this._offsets[t];return void 0!==e?i-e:void 0},s.prototype.setPosition=function(t){this.particle.setPos([t,0,0])},s.prototype.getVelocity=function(){return this.touchCount?this._touchVelocity:this.particle.getVel()[0]},s.prototype.setVelocity=function(t){this.particle.setVel([t,0,0])},s.prototype.getOptions=function(){return this.options},s.prototype.setOptions=function(t){void 0!==t.direction&&(this.options.direction=t.direction,"x"===this.options.direction?this.options.direction=S.Direction.X:"y"===this.options.direction&&(this.options.direction=S.Direction.Y)),void 0!==t.rails&&(this.options.rails=t.rails),void 0!==t.itemSpacing&&(this.options.itemSpacing=t.itemSpacing),void 0!==t.clipSize&&(t.clipSize!==this.options.clipSize&&(this._onEdge=0),this.options.clipSize=t.clipSize),void 0!==t.margin&&(this.options.margin=t.margin),void 0!==t.drag&&(this.options.drag=t.drag),void 0!==t.friction&&(this.options.friction=t.friction),void 0!==t.edgeGrip&&(this.options.edgeGrip=t.edgeGrip),void 0!==t.edgePeriod&&(this.options.edgePeriod=t.edgePeriod),void 0!==t.edgeDamp&&(this.options.edgeDamp=t.edgeDamp),void 0!==t.paginated&&(this.options.paginated=t.paginated),void 0!==t.pageStopSpeed&&(this.options.pageStopSpeed=t.pageStopSpeed),void 0!==t.pageSwitchSpeed&&(this.options.pageSwitchSpeed=t.pageSwitchSpeed),void 0!==t.pagePeriod&&(this.options.pagePeriod=t.pagePeriod),void 0!==t.pageDamp&&(this.options.pageDamp=t.pageDamp),void 0!==t.speedLimit&&(this.options.speedLimit=t.speedLimit),void 0===this.options.margin&&(this.options.margin=.5*Math.max(window.innerWidth,window.innerHeight)),this.drag.setOpts({strength:this.options.drag}),this.friction.setOpts({strength:this.options.friction}),this.spring.setOpts({period:this.options.edgePeriod,dampingRatio:this.options.edgeDamp}),this.sync.setOptions({rails:this.options.rails,direction:this.options.direction==S.Direction.X?C.DIRECTION_X:C.DIRECTION_Y})},s.prototype.setOutputFunction=function(t,i){t||(t=function(t){return this.options.direction==S.Direction.X?z.translate(t,0):z.translate(0,t)}.bind(this),i||(i=t)),this._outputFunction=t,this._masterOutputFunction=i?i:function(i){return z.inverse(t(-i))}},s.prototype.goToPreviousPage=function(){if(this.node){var t=this.node.getPrevious?this.node.getPrevious():void 0;if(t){var i=p.call(this,this.node.getSize())+this.options.itemSpacing;this.setPosition(this.getPosition()+i),this.node=t;for(var e in this._offsets)this._offsets[e]+=i;m.call(this)}return t}},s.prototype.goToNextPage=function(){if(this.node){var t=this.node.getNext?this.node.getNext():void 0;if(t){var i=p.call(this,this.node.getSize())+this.options.itemSpacing;this.setPosition(this.getPosition()-i),this.node=t;for(var e in this._offsets)this._offsets[e]-=i;m.call(this)}return t}},s.prototype.getCurrentNode=function(){return this.node},s.prototype.sequenceFrom=function(t){t instanceof Array&&(t=new P(t)),this.node=t,this._lastFrameNode=t},s.prototype.getSize=function(){return this.options.direction==S.Direction.X?[y.call(this),void 0]:[void 0,y.call(this)]},s.prototype.render=function(){return this.node?(this.physicsEngine.step(),this._entityId):void 0},s.prototype.commit=function(t,i,e,s,o){this.options.clipSize||o[0]==this._contextSize[0]&&o[1]==this._contextSize[1]||(this._onEdge=0,this._contextSize=o),l.call(this);var n=this.getPosition(),r=this._masterOutputFunction(-(n+this._masterOffset));return{transform:z.moveThen([-s[0]*o[0],-s[1]*o[1],0],i),opacity:e,origin:s,size:o,target:{transform:r,origin:s,target:this.group.render()}}},e.exports=s}),define("famous/WebGLSurface",["require","exports","module","./Surface"],function(t,i,e){function s(t){this.glOptions=t.glOptions,this._canvas=document.createElement("canvas"),o.call(this,t),this.setContent(this._canvas),this.setSize(t.size)}var o=t("./Surface");s.prototype=Object.create(o.prototype),s.prototype.getContext=function(){return this._canvas.getContext("webgl",this.glOptions)||this._canvas.getContext("experimental-webgl",this.glOptions)},s.prototype.setSize=function(t){o.prototype.setSize.apply(this,arguments),this._canvas.style.width=t[0]+"px",this._canvas.style.height=t[1]+"px";var i=window.devicePixelRatio?window.devicePixelRatio:1;this._canvas.width=t[0]*i,this._canvas.height=t[1]*i},e.exports=s}),define("famous-scene/GLScene",["require","exports","module","famous-utils/Utils","famous/View","famous/WebGLSurface","famous/Surface","famous/Modifier"],function(t,i,e){function s(){n.apply(this,arguments),this.width=o.getWidth(),this.height=o.getHeight(),this.mouseDown=!1,this.callbacks={},this.gl=null,this.glReady=!1,this.contextInitAttempts=0,this.glSurface=new r({size:[this.width,this.height],glOptions:{antialias:!0}}),this.node.add(this.glSurface),this.bindEvents()}var o=t("famous-utils/Utils"),n=t("famous/View"),r=t("famous/WebGLSurface"),a=t("famous/Surface"),h=t("famous/Modifier");s.prototype=Object.create(n.prototype),s.prototype.constructor=s,s.prototype.bindEvents=function(){this.callbacks.prerender=this.__update.bind(this),this.callbacks.touchstart=this.touchstart.bind(this),this.callbacks.touchmove=this.touchmove.bind(this),this.callbacks.touchend=this.touchend.bind(this),this.callbacks.keypress=this.keypress.bind(this),this.callbacks.resize=this._resize.bind(this),this.callbacks.mousedown=this._mousedown.bind(this),this.callbacks.mousemove=this._mousemove.bind(this),this.callbacks.mouseover=this._mouseover.bind(this),this.callbacks.mouseup=this._mouseup.bind(this),this.callbacks.mouseout=this._mouseout.bind(this),this.callbacks.keydown=this.keydown.bind(this),this.callbacks.keyup=this.keyup.bind(this);for(var t=Object.keys(this.callbacks),i=0;i<t.length;i++)this.eventInput.on(t[i],this.callbacks[t[i]])},s.prototype.unbindEvents=function(){for(var t=Object.keys(this.callbacks),i=0;i<t.length;i++)this.eventInput.unbind(t[i],this.callbacks[t[i]])},s.prototype.unbindEvent=function(t){void 0!==this.callbacks[t]&&this.eventInput.unbind(t,this.callbacks[t])},s.prototype.setup=function(){},s.prototype.__update=function(){this.initGL()&&(this.eventInput.unbind("prerender",this.callbacks.prerender),this.callbacks.prerender=this._update.bind(this),this.eventInput.on("prerender",this.callbacks.prerender))},s.prototype._update=function(){this.update(this.gl),this.draw(this.gl)},s.prototype.update=function(){},s.prototype.draw=function(){},s.prototype._resize=function(t){var i=o.getDevicePixelRatio();this.width=o.getWidth(),this.height=o.getHeight(),this.glSurface.setSize([this.width,this.height]),this.gl?(this.gl.viewportWidth=this.width*i,this.gl.viewportHeight=this.height*i,this.resize(t)):(this.errorSurfaceSize=[this.width,this.height],this.errorSurface.setSize(this.errorSurfaceSize),this.errorSurface.setProperties({"line-height":this.errorSurfaceSize[1]+"px","font-size":.05*this.errorSurfaceSize[0]+"px",width:this.errorSurfaceSize[0]+"px"}))},s.prototype.initGL=function(){var t=this.glSurface.getContext({antialias:!0});if(this.contextInitAttempts++,null!=t&&o.supportsWebGL()){this.gl=t;var i=o.getDevicePixelRatio();this.gl.viewportWidth=this.width*i,this.gl.viewportHeight=this.height*i,this.glReady=!0,this.setup(this.gl)}else this.contextInitAttempts>3&&(this.eventInput.unbind("prerender",this.callbacks.prerender),this.errorSurfaceSize=[this.width,this.height],this.errorSurface=new a({size:this.errorSurfaceSize,content:"A WebGL enabled browser is required",properties:{"background-color":"rgba(0, 0, 0, 1.0)",color:"white","text-align":"center","vertical-align":"center","line-height":this.errorSurfaceSize[1]+"px","font-size":.05*this.errorSurfaceSize[0]+"px","border-radius":"0px 0px 0px 0px","font-family":"Avenir Next W10 Thin",width:this.errorSurfaceSize[0]+"px"}}),this.errorSurfaceModifier=new h,this.node.add(this.errorSurfaceModifier).link(this.errorSurface));return this.glReady},s.prototype.activate=function(t){t&&t()},s.prototype.update=function(){},s.prototype.render=function(){return this.node.render()},s.prototype.deactivate=function(t){t&&t()},s.prototype.touchstart=function(){},s.prototype.touchmove=function(){},s.prototype.touchend=function(){},s.prototype._mousedown=function(t){this.mouseDown=!0,this.mousedown(t)},s.prototype._mousemove=function(t){this.mouseDown===!0?this.mousedrag(t):this.mousemove(t)},s.prototype._mouseover=function(t){this.mouseover(t)},s.prototype._mouseup=function(t){this.mouseDown=!1,this.mouseup(t)},s.prototype._mouseout=function(t){this.mouseout(t)},s.prototype.mousedown=function(){},s.prototype.mouseup=function(){},s.prototype.mousemove=function(){},s.prototype.mouseover=function(){},s.prototype.mouseout=function(){},s.prototype.mousedrag=function(){},s.prototype.keypress=function(){},s.prototype.keydown=function(){},s.prototype.keyup=function(){},s.prototype.keypress=function(){},s.prototype.resize=function(){},s.prototype.setController=function(t){this.controller=t},e.exports=s}),define("famous-animation/Timer",["require","exports","module"],function(t,i,e){function s(){window.performance?window.performance.now?this.getTime=function(){return window.performance.now()}:window.performance.webkitNow&&(this.getTime=function(){return window.performance.webkitNow()}):this.getTime=function(){return Date.now()}}e.exports=s}),define("famous-animation/AnimationEngine",["require","exports","module","famous/Engine","./Timer","./Animation"],function(t,i,e){function s(){this.animations=[],this.timer=new n,o.on("prerender",this.update.bind(this))}var o=t("famous/Engine"),n=t("./Timer");t("./Animation"),s.prototype.update=function(){for(var t=0;t<this.animations.length;t++)this.animations[t].tick()},s.prototype.render=function(){for(var t=[],i=0;i<this.animations.length;i++)this.animations[i].normalizedTime>0&&t.push(this.animations[i].render()),this.animations[i].isDead()&&this.animations.splice(this.animations.indexOf(this.animations[i]),1);return t},s.prototype.emit=function(t){"prerender"==t&&(this.update(),this.render())},s.prototype.addAnimation=function(t){-1==this.animations.indexOf(t)&&this.animations.push(t)},s.prototype.removeAnimation=function(t){t.setDead(!0)},s.prototype.getTime=function(){return this.timer.getTime()},e.exports=s}),define("famous-animation/Animation",["require","exports","module","famous-utils/Utils","famous-animation/AnimationEngine"],function(t,i,e){function s(t){return this.name=t.name||"base",this.dead=!1,this.engine=t.engine||new n,this.duration=t.duration||500,this.delay=t.delay||0,this.nextAnimations=[],void 0!==t.next&&(t.next instanceof Array?this.nextAnimations.concat(t.next):this.nextAnimations.push(t.next)),this.callback=t.callback||void 0,this.startTime=0,this.endTime=0,this.currentTime=0,this.normalizedTime=0,this.timePassed=0,this.halted=!1,this.playing=!1,this.activated=!1,this.activateCallback=t.activateCallback||void 0,this.deactivateCallback=t.deactivateCallback||void 0,this.loop=t.loop||!1,this.reverse=t.reverse||!1,this.reverseUponLoop=t.reverseUponLoop||!1,this}var o=t("famous-utils/Utils"),n=t("famous-animation/AnimationEngine");s.prototype.setDead=function(t){return this.dead=t,this},s.prototype.isDead=function(){return this.dead},s.prototype.setup=function(){},s.prototype.update=function(){},s.prototype.render=function(){},s.prototype.isPlaying=function(){return this.playing},s.prototype.setDuration=function(t){return this.duration=t,this},s.prototype.setDelay=function(t){return this.delay=t,this},s.prototype.setCallback=function(t){return this.callback=t||void 0,this},s.prototype.setReverse=function(t){return this.reverse=t,this},s.prototype.toggleReverse=function(){return this.reverse=!this.reverse,this},s.prototype.setLoop=function(t){return this.loop=t,this},s.prototype.setReverseUponLoop=function(t){return this.reverseUponLoop=t,this},s.prototype.isHalted=function(){return this.halted},s.prototype.halt=function(){this.halted=!0,this.timePassed=this.engine.getTime()-this.startTime},s.prototype.continueAnimation=function(){this.halted=!1,this.startTime=this.engine.getTime()-this.timePassed,this.timePassed=0},s.prototype.activate=function(){},s.prototype.deactivate=function(){},s.prototype.start=function(){this.engine.addAnimation(this),this.setDead(!1),this.halted=!1,this.playing=!0,this.startTime=this.engine.getTime()+this.delay-this.timePassed,this.endTime=this.startTime+this.duration,this.normalizedTime=0},s.prototype.tick=function(){if(this.playing&&!this.halted){if(this.currentTime=this.engine.getTime()-this.startTime,this.normalizedTime=this.currentTime/this.duration,this.normalizedTime>1)return this.normalizedTime=o.clamp(this.normalizedTime,0,1),this.reverse&&(this.normalizedTime=1-this.normalizedTime),this.update(),this.end(),void 0;this.normalizedTime>1e-6&&(this.activated||(this.activate(),void 0!==this.activateCallback&&this.activateCallback(),this.activated=!0),this.reverse&&(this.normalizedTime=1-this.normalizedTime),this.update())}},s.prototype.getTime=function(){return this.normalizedTime},s.prototype.end=function(){if(this.activated=!1,this.playing=!1,this.deactivate(),void 0!==this.deactivateCallback&&this.deactivateCallback(),this.engine.removeAnimation(this),this.reverseUponLoop&&this.toggleReverse(),this.loop)this.start();else for(var t=0;t<this.nextAnimations.length;t++)this.nextAnimations[t].start();void 0!==this.callback&&this.callback()},s.prototype.setNext=function(t){t instanceof Array?this.nextAnimations=this.nextAnimations.concat(this.nextAnimations,t):this.nextAnimations.push(t)},s.prototype.setName=function(t){this.name=t},s.prototype.getName=function(){return this.name},s.prototype.setActivateCallback=function(t){this.activateCallback=t},s.prototype.setDeactivateCallback=function(t){this.deactivateCallback=t},e.exports=s}),define("famous-color/Color",["require","exports","module","famous-utils/Utils"],function(t,i,e){function s(t,i,e,o){t instanceof s?(this.r=t.r,this.g=t.g,this.b=t.b,this.a=t.a,this.hex=t.getHex()):"string"==typeof t?"#"==t[0]?this.setFromHex(t):this.setFromRGBAString(t):(this.r="undefined"==typeof t?255:t,this.g="undefined"==typeof i?255:i,this.b="undefined"==typeof e?255:e,this.a="undefined"==typeof o?1:o,this.hex=this.getHex())}function o(t,i,e){return 0>e&&(e+=1),e>1&&(e-=1),1/6>e?t+6*(i-t)*e:.5>e?i:2/3>e?t+6*(i-t)*(2/3-e):t}var n=t("famous-utils/Utils");s.prototype.getHue=function(){var t=this.r/255,i=this.g/255,e=this.b/255,s=Math.max(t,i,e),o=Math.min(t,i,e),n=0,r=s-o;switch(s){case t:n=(i-e)/r+(e>i?6:0);break;case i:n=(e-t)/r+2;break;case e:n=(t-i)/r+4}return n*=60,isNaN(n)&&(n=0),n},s.prototype.getSaturation=function(){var t,i=this.r/255,e=this.g/255,s=this.b/255,o=Math.max(i,e,s),n=Math.min(i,e,s),r=(o+n)/2;if(o==n)h=t=0;else{var a=o-n;switch(t=r>.5?a/(2-o-n):a/(o+n),o){case i:h=(e-s)/a+(s>e?6:0);break;case e:h=(s-i)/a+2;break;case s:h=(i-e)/a+4}h*=60}return 100*t},s.prototype.getBrightness=function(){var t=this.r/255,i=this.g/255,e=this.b/255;return 100*Math.max(t,i,e)},s.prototype.getLightness=function(){var t=this.r/255,i=this.g/255,e=this.b/255;return 100*((Math.max(t,i,e)+Math.min(t,i,e))/2)},s.prototype.getHex=function(){function t(t){var i=t.toString(16);return 1===i.length?"0"+i:i}return"#"+t(this.r)+t(this.g)+t(this.b)},s.prototype.getHSL=function(){var t,i,e=this.r/255,s=this.g/255,o=this.b/255,n=Math.max(e,s,o),r=Math.min(e,s,o),a=(n+r)/2;if(n==r)t=i=0;else{var h=n-r;switch(i=a>.5?h/(2-n-r):h/(n+r),n){case e:t=(s-o)/h+(o>s?6:0);break;case s:t=(o-e)/h+2;break;case o:t=(e-s)/h+4}t*=60}return[t,100*i,100*a]},s.prototype.setFromHSL=function(t,i,e){t/=360,i/=100,e/=100;var s,n,r;if(0===i)s=n=r=e;else{var a=.5>e?e*(1+i):e+i-e*i,h=2*e-a;s=o(h,a,t+1/3),n=o(h,a,t),r=o(h,a,t-1/3)}return this.r=Math.round(255*s),this.g=Math.round(255*n),this.b=Math.round(255*r),this.hex=this.getHex(),this},s.prototype.setFromHex=function(t){return t="#"===t.charAt(0)?t.substring(1,t.length):t,3===t.length&&(t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2]),this.hex="#"+t,this.r=parseInt(t.substring(0,2),16),this.g=parseInt(t.substring(2,4),16),this.b=parseInt(t.substring(4,6),16),void 0==this.a&&(this.a=1),this},s.prototype.setFromRGBA=function(t,i,e,s){return this.r=t,this.g=i,this.b=e,s&&(this.a=s),this.hex=this.getHex(),this},s.prototype.setHue=function(t){var i=this.getHSL();return this.setFromHSL(t,i[1],i[2])},s.prototype.setSaturation=function(t){var i=this.getHSL();
return this.setFromHSL(i[0],t,i[2])},s.prototype.setLightness=function(t){var i=this.getHSL();return this.setFromHSL(i[0],i[1],t)},s.prototype.getCSSBackgroundColor=function(){return n.backgroundColor(this.r,this.b,this.g,this.a)},s.prototype.getCSSColor=function(){return n.color(this.r,this.g,this.b,this.a)},s.prototype.get=function(){return this.getCSSColor()},s.prototype.setFromRGBAString=function(t){var i=t.match(/\(([^()]+)\)/g);if(i){i=i[0],i=i.substring(1,i.length-1);for(var e=i.split(","),s=0;s<e.length;s++)e[s]=parseFloat(e[s]);return this.setFromRGBA(e[0],e[1],e[2],e[3])}},s.prototype.clone=function(){return new s(this.r,this.g,this.b,this.a)},s.prototype.toNormalizeColorArray=function(){return[this.r/255,this.g/255,this.b/255,this.a]},s.prototype.lerp=function(t,i){var e=this.getHSL(),o=t.getHSL(),n=e[0]+(o[0]-e[0])*i,r=e[1]+(o[1]-e[1])*i,a=e[2]+(o[2]-e[2])*i,h=new s;return h.setFromHSL(n,r,a),h},e.exports=s}),define("famous-color/ColorPalette",["require","exports","module","./Color"],function(t,i,e){function s(t){this.colors=t}t("./Color"),s.prototype.getColor=function(t){return this.colors[t%this.colors.length]},s.prototype.getCSS=function(t){return this.getColor(t).getCSSColor()},s.prototype.getLighestColor=function(){for(var t,i=0,e=0;e<this.colors.length;e++){var s=this.colors[e].getLightness();s>i&&(t=this.colors[e],i=s)}return t},s.prototype.getDarkestColor=function(){for(var t,i=100,e=0;e<this.colors.length;e++){var s=this.colors[e].getLightness();i>s&&(t=this.colors[e],i=s)}return t},s.prototype.getCount=function(){return this.colors.length},e.exports=s}),define("famous-color/ColorPalettes",["require","exports","module","./Color","./ColorPalette"],function(t,i,e){function s(){}function o(t){return new r(t[0],t[1],t[2],t[3])}function n(t){for(var i=[],e=0,s=t.length;s>e;e++)i.push(o(t[e]));return new a(i)}var r=t("./Color"),a=t("./ColorPalette"),h=[[[53,92,125,1],[108,91,123,1],[192,108,132,1],[246,114,128,1],[248,177,149,1]],[[27,21,33,1],[181,172,1,1],[212,30,69,1],[232,110,28,1],[236,186,9,1]],[[63,54,42,1],[231,69,13,1],[250,157,4,1],[251,222,3,1],[254,245,150,1]],[[10,103,137,1],[10,153,111,1],[207,6,56,1],[250,102,50,1],[254,205,35,1]],[[157,85,105,1],[192,227,217,1],[202,55,99,1],[227,237,195,1],[235,113,84,1]],[[110,110,110,1],[145,217,255,1],[237,255,135,1],[255,133,167,1],[255,255,255,1]],[[0,0,0,1],[25,26,36,1],[51,44,44,1],[250,101,87,1],[255,255,255,1]],[[27,103,107,1],[81,149,72,1],[136,196,37,1],[190,242,2,1],[234,253,230,1]],[[31,11,12,1],[48,5,17,1],[179,84,79,1],[214,195,150,1],[231,252,207,1]],[[172,248,248,1],[223,235,24,1],[230,95,95,1],[235,54,24,1],[235,207,24,1]],[[196,182,109,1],[213,39,5,1],[240,211,119,1],[243,232,228,1],[247,109,60,1]],[[11,72,107,1],[59,134,134,1],[121,189,154,1],[168,219,168,1],[207,240,158,1]],[[0,188,209,1],[118,211,222,1],[174,232,251,1],[176,248,255,1],[254,249,240,1]],[[85,73,57,1],[112,108,77,1],[241,230,143,1],[255,100,100,1],[255,151,111,1]],[[36,244,161,1],[178,42,58,1],[199,244,36,1],[244,36,182,1],[249,246,49,1]],[[108,144,134,1],[169,204,24,1],[207,73,108,1],[235,234,188,1],[252,84,99,1]],[[78,79,75,1],[130,35,57,1],[247,62,62,1],[255,119,61,1],[255,213,115,1]],[[121,28,49,1],[145,213,152,1],[191,178,64,1],[202,51,68,1],[237,126,80,1]],[[104,73,83,1],[127,191,151,1],[182,219,145,1],[250,107,41,1],[253,158,41,1]],[[0,203,231,1],[0,218,60,1],[223,21,26,1],[244,243,40,1],[253,134,3,1]],[[56,222,231,1],[232,255,0,1],[254,62,71,1],[255,130,0,1]],[[27,32,38,1],[75,89,107,1],[153,228,255,1],[247,79,79,1],[255,59,59,1]],[[0,0,0,1],[0,173,239,1],[236,0,140,1],[255,242,0,1]],[[47,43,173,1],[173,43,173,1],[228,38,146,1],[247,21,104,1],[247,219,21,1]],[[101,150,158,1],[171,20,44,1],[189,219,222,1],[205,212,108,1],[219,217,210,1]],[[97,24,36,1],[193,47,42,1],[247,255,238,1],[254,222,123,1],[255,101,64,1]],[[118,85,66,1],[124,231,163,1],[220,93,110,1],[255,174,60,1],[255,229,156,1]],[[63,184,175,1],[127,199,175,1],[218,216,167,1],[255,61,127,1],[255,158,157,1]],[[217,251,223,1],[219,255,210,1],[231,254,235,1],[234,255,210,1],[243,255,210,1]],[[0,23,42,1],[27,139,163,1],[94,202,214,1],[178,222,249,1],[206,254,255,1]],[[225,245,196,1],[237,229,116,1],[249,212,35,1],[252,145,58,1],[255,78,80,1]],[[7,9,61,1],[11,16,140,1],[12,15,102,1],[14,78,173,1],[16,127,201,1]],[[5,177,240,1],[5,232,240,1],[94,87,230,1],[230,87,149,1],[255,5,113,1]],[[48,0,24,1],[90,61,49,1],[131,123,71,1],[173,184,95,1],[229,237,184,1]],[[111,191,162,1],[191,184,174,1],[242,199,119,1],[242,230,194,1],[255,255,255,1]],[[22,147,165,1],[69,181,196,1],[126,206,202,1],[160,222,214,1],[199,237,232,1]],[[8,26,48,1],[50,64,90,1],[59,100,128,1],[155,153,130,1],[255,134,17,1]],[[74,186,176,1],[152,33,0,1],[255,211,0,1],[255,245,158,1]],[[42,135,50,1],[49,48,66,1],[107,85,48,1],[255,109,36,1],[255,235,107,1]],[[0,0,0,1],[25,134,219,1],[105,172,224,1],[149,199,24,1],[184,212,40,1]],[[64,0,20,1],[127,0,40,1],[191,0,59,1],[229,0,71,1],[255,0,79,1]],[[56,69,59,1],[78,133,136,1],[255,70,84,1],[255,213,106,1],[255,254,211,1]],[[29,44,143,1],[57,179,162,1],[209,146,191,1],[222,75,107,1],[252,180,121,1]],[[14,36,48,1],[232,213,183,1],[232,213,185,1],[245,179,73,1],[252,58,81,1]],[[0,210,255,1],[222,255,0,1],[255,0,168,1],[255,66,0,1]],[[21,99,105,1],[51,53,84,1],[169,186,181,1],[216,69,148,1],[236,196,89,1]],[[105,210,231,1],[167,219,216,1],[224,228,204,1],[243,134,48,1],[250,105,0,1]],[[122,106,83,1],[148,140,117,1],[153,178,183,1],[213,222,217,1],[217,206,178,1]],[[34,104,136,1],[57,142,182,1],[255,162,0,1],[255,214,0,1],[255,245,0,1]],[[2,100,117,1],[194,163,79,1],[251,184,41,1],[254,251,175,1],[255,229,69,1]],[[214,37,77,1],[246,215,107,1],[253,235,169,1],[255,84,117,1],[255,144,54,1]],[[0,0,0,1],[124,180,144,1],[211,25,0,1],[255,102,0,1],[255,242,175,1]],[[35,116,222,1],[38,38,38,1],[87,54,255,1],[231,255,54,1],[255,54,111,1]],[[64,18,44,1],[89,186,169,1],[101,98,115,1],[216,241,113,1],[252,255,217,1]],[[126,148,158,1],[174,194,171,1],[235,206,160,1],[252,119,101,1],[255,51,95,1]],[[75,73,11,1],[117,116,73,1],[226,223,154,1],[235,229,77,1],[255,0,81,1]],[[159,112,69,1],[183,98,5,1],[208,167,124,1],[253,169,43,1],[254,238,171,1]],[[38,37,28,1],[160,232,183,1],[235,10,68,1],[242,100,61,1],[242,167,61,1]],[[0,0,0,1],[67,110,217,1],[120,0,0,1],[216,216,216,1],[240,24,0,1]],[[51,51,51,1],[131,163,0,1],[158,12,57,1],[226,27,90,1],[251,255,227,1]],[[79,156,52,1],[108,186,85,1],[125,210,89,1],[158,228,70,1],[187,255,133,1]],[[0,44,43,1],[7,100,97,1],[10,131,127,1],[255,61,0,1],[255,188,17,1]],[[149,207,183,1],[240,65,85,1],[242,242,111,1],[255,130,58,1],[255,247,189,1]],[[89,168,15,1],[158,213,76,1],[196,237,104,1],[226,255,158,1],[240,242,221,1]],[[54,42,44,1],[189,223,38,1],[237,38,105,1],[238,189,97,1],[252,84,99,1]],[[11,246,147,1],[38,137,233,1],[233,26,157,1],[246,182,11,1],[246,242,11,1]],[[8,0,9,1],[65,242,221,1],[207,242,65,1],[249,44,130,1],[252,241,30,1]],[[198,164,154,1],[198,229,217,1],[214,129,137,1],[233,78,119,1],[244,234,213,1]],[[6,71,128,1],[8,84,199,1],[160,194,222,1],[205,239,255,1],[237,237,244,1]],[[93,66,63,1],[124,87,83,1],[238,128,117,1],[255,177,169,1],[255,233,231,1]],[[59,129,131,1],[237,48,60,1],[245,99,74,1],[250,208,137,1],[255,156,91,1]],[[56,166,155,1],[104,191,101,1],[204,217,106,1],[242,88,53,1],[242,218,94,1]],[[60,197,234,1],[70,70,70,1],[233,234,60,1],[246,246,246,1]],[[97,99,130,1],[102,36,91,1],[105,165,164,1],[168,196,162,1],[229,234,164,1]],[[10,191,188,1],[19,116,125,1],[41,34,31,1],[252,53,76,1],[252,247,197,1]],[[7,0,4,1],[236,67,8,1],[252,129,10,1],[255,172,35,1],[255,251,214,1]],[[0,5,1,1],[8,138,19,1],[237,20,9,1],[240,249,241,1],[247,249,21,1]],[[64,197,132,1],[131,218,232,1],[170,46,154,1],[251,35,137,1],[251,132,137,1]],[[64,47,58,1],[217,119,119,1],[255,198,158,1],[255,219,196,1]],[[243,96,49,1],[249,236,95,1],[255,102,0,1],[255,153,0,1],[255,204,0,1]],[[33,90,109,1],[45,45,41,1],[60,162,162,1],[146,199,163,1],[223,236,230,1]],[[10,42,63,1],[101,147,160,1],[185,204,184,1],[219,21,34,1],[255,239,167,1]],[[0,160,176,1],[106,74,60,1],[204,51,63,1],[235,104,65,1],[237,201,81,1]],[[14,141,148,1],[67,77,83,1],[114,173,117,1],[233,213,88,1],[255,171,7,1]],[[94,159,163,1],[176,85,116,1],[220,209,180,1],[248,126,123,1],[250,184,127,1]],[[31,31,31,1],[122,91,62,1],[205,189,174,1],[250,75,0,1],[250,250,250,1]],[[176,230,41,1],[180,35,16,1],[247,207,10,1],[250,124,7,1],[252,231,13,1]],[[94,65,47,1],[120,192,168,1],[240,120,24,1],[240,168,48,1],[252,235,182,1]],[[31,26,28,1],[98,128,125,1],[134,158,138,1],[201,107,30,1],[209,205,178,1]],[[40,60,0,1],[100,153,125,1],[237,143,69,1],[241,169,48,1],[254,204,109,1]],[[37,2,15,1],[143,143,143,1],[158,30,76,1],[236,236,236,1],[255,17,104,1]],[[207,108,116,1],[244,93,120,1],[255,112,136,1],[255,130,153,1],[255,187,193,1]],[[0,0,0,1],[12,13,5,1],[168,171,132,1],[198,201,157,1],[231,235,176,1]],[[0,170,255,1],[170,0,255,1],[170,255,0,1],[255,0,170,1],[255,170,0,1]],[[78,150,137,1],[126,208,214,1],[135,214,155,1],[195,255,104,1],[244,252,232,1]],[[10,10,10,1],[227,246,255,1],[255,20,87,1],[255,216,125,1]],[[51,51,153,1],[102,153,204,1],[153,204,255,1],[255,0,51,1],[255,204,0,1]],[[23,22,92,1],[190,191,158,1],[216,210,153,1],[229,228,218,1],[245,224,56,1]],[[49,99,64,1],[96,158,77,1],[159,252,88,1],[195,252,88,1],[242,252,88,1]],[[92,88,99,1],[168,81,99,1],[180,222,193,1],[207,255,221,1],[255,31,76,1]],[[61,67,7,1],[161,253,17,1],[225,244,56,1],[244,251,196,1],[255,208,79,1]],[[0,205,172,1],[2,170,176,1],[22,147,165,1],[127,255,36,1],[195,255,104,1]],[[0,203,231,1],[0,218,60,1],[223,21,26,1],[244,243,40,1],[253,134,3,1]],[[34,104,136,1],[57,142,182,1],[255,162,0,1],[255,214,0,1],[255,245,0,1]],[[3,13,79,1],[206,236,239,1],[231,237,234,1],[251,12,6,1],[255,197,44,1]],[[253,255,0,1],[255,0,0,1],[255,90,0,1],[255,114,0,1],[255,167,0,1]],[[108,66,18,1],[179,0,176,1],[183,255,55,1],[255,124,69,1],[255,234,155,1]],[[0,4,49,1],[59,69,58,1],[90,224,151,1],[204,46,9,1],[255,253,202,1]],[[59,45,56,1],[188,189,172,1],[207,190,39,1],[240,36,117,1],[242,116,53,1]],[[101,145,155,1],[120,185,168,1],[168,212,148,1],[242,177,73,1],[244,229,97,1]],[[0,193,118,1],[136,193,0,1],[250,190,40,1],[255,0,60,1],[255,138,0,1]],[[110,37,63,1],[165,199,185,1],[199,94,106,1],[241,245,244,1],[251,236,236,1]],[[39,112,140,1],[111,191,162,1],[190,191,149,1],[227,208,116,1],[255,180,115,1]],[[62,72,76,1],[82,91,96,1],[105,158,81,1],[131,178,107,1],[242,232,97,1]],[[248,135,46,1],[252,88,12,1],[252,107,10,1],[253,202,73,1],[255,169,39,1]],[[83,119,122,1],[84,36,55,1],[192,41,66,1],[217,91,67,1],[236,208,120,1]],[[41,136,140,1],[54,19,0,1],[162,121,15,1],[188,53,33,1],[255,208,130,1]],[[10,186,181,1],[58,203,199,1],[106,219,216,1],[153,236,234,1],[201,252,251,1]],[[8,158,42,1],[9,42,100,1],[90,204,191,1],[229,4,4,1],[251,235,175,1]],[[187,187,136,1],[204,198,141,1],[238,170,136,1],[238,194,144,1],[238,221,153,1]],[[121,219,204,1],[134,78,65,1],[234,169,167,1],[242,199,196,1],[248,245,226,1]],[[96,136,213,1],[114,170,222,1],[157,200,233,1],[192,222,245,1],[217,239,244,1]],[[30,30,30,1],[177,255,0,1],[209,210,212,1],[242,240,240,1]],[[255,102,0,1],[255,153,0,1],[255,204,0,1],[255,255,204,1],[255,255,255,1]],[[35,15,43,1],[130,179,174,1],[188,227,197,1],[235,235,188,1],[242,29,65,1]],[[212,238,94,1],[225,237,185,1],[240,242,235,1],[244,250,210,1],[255,66,66,1]],[[20,32,71,1],[168,95,59,1],[247,92,92,1],[255,255,255,1]],[[63,184,240,1],[80,208,240,1],[196,251,93,1],[224,240,240,1],[236,255,224,1]],[[185,222,81,1],[209,227,137,1],[224,72,145,1],[225,183,237,1],[245,225,226,1]],[[185,222,81,1],[209,227,137,1],[224,72,145,1],[225,183,237,1],[245,225,226,1]],[[17,68,34,1],[51,170,170,1],[51,221,51,1],[221,238,68,1],[221,238,187,1]],[[46,13,35,1],[245,72,40,1],[247,128,60,1],[248,228,193,1],[255,237,191,1]],[[204,243,144,1],[224,224,90,1],[247,196,31,1],[252,147,10,1],[255,0,61,1]],[[18,18,18,1],[255,89,56,1],[255,255,255,1]],[[53,38,48,1],[85,72,101,1],[205,91,81,1],[233,223,204,1],[243,163,107,1]],[[236,250,1,1],[236,250,2,1],[247,220,2,1],[248,227,113,1],[250,173,9,1]],[[77,129,121,1],[161,129,121,1],[236,85,101,1],[249,220,159,1],[254,157,93,1]],[[4,0,4,1],[65,61,61,1],[75,0,15,1],[200,255,0,1],[250,2,60,1]],[[66,50,56,1],[179,112,45,1],[200,209,151,1],[235,33,56,1],[245,222,140,1]],[[143,153,36,1],[172,201,95,1],[241,57,109,1],[243,255,235,1],[253,96,129,1]],[[18,18,18,1],[23,122,135,1],[250,245,240,1],[255,180,143,1]],[[67,197,210,1],[182,108,97,1],[241,155,140,1],[254,247,237,1],[255,234,215,1]],[[78,205,196,1],[85,98,112,1],[196,77,88,1],[199,244,100,1],[255,107,107,1]],[[0,0,0,1],[137,161,160,1],[154,227,226,1],[255,71,103,1],[255,118,5,1]],[[248,200,221,1],[253,231,120,1],[255,61,61,1],[255,92,143,1],[255,103,65,1]],[[23,138,132,1],[145,145,145,1],[229,255,125,1],[235,143,172,1],[255,255,255,1]],[[73,112,138,1],[136,171,194,1],[202,255,66,1],[208,224,235,1],[235,247,248,1]],[[51,222,245,1],[122,245,51,1],[245,51,145,1],[245,161,52,1],[248,248,101,1]],[[57,13,45,1],[172,222,178,1],[225,234,181,1],[237,173,158,1],[254,75,116,1]],[[192,107,129,1],[233,22,67,1],[245,175,145,1],[247,201,182,1],[249,210,182,1]],[[131,196,192,1],[156,100,53,1],[190,215,62,1],[237,66,98,1],[240,233,226,1]],[[136,145,136,1],[191,218,223,1],[207,246,247,1],[233,26,82,1],[237,242,210,1]],[[64,44,56,1],[209,212,169,1],[227,164,129,1],[245,215,165,1],[255,111,121,1]],[[93,65,87,1],[131,134,137,1],[168,202,186,1],[202,215,178,1],[235,227,170,1]],[[0,168,198,1],[64,192,203,1],[143,190,0,1],[174,226,57,1],[249,242,231,1]],[[0,204,190,1],[9,166,163,1],[157,191,175,1],[237,235,201,1],[252,249,216,1]],[[0,205,172,1],[2,170,176,1],[22,147,165,1],[127,255,36,1],[195,255,104,1]],[[51,39,23,1],[107,172,191,1],[157,188,188,1],[240,240,175,1],[255,55,15,1]],[[51,51,53,1],[101,99,106,1],[139,135,149,1],[193,190,200,1],[233,232,238,1]],[[17,118,109,1],[65,9,54,1],[164,11,84,1],[228,111,10,1],[240,179,0,1]],[[73,10,61,1],[138,155,15,1],[189,21,80,1],[233,127,2,1],[248,202,0,1]],[[71,162,145,1],[144,79,135,1],[213,28,122,1],[219,213,139,1],[244,127,143,1]],[[55,191,230,1],[169,232,250,1],[186,255,21,1],[211,255,106,1],[247,239,236,1]],[[69,173,168,1],[84,121,128,1],[89,79,79,1],[157,224,173,1],[229,252,194,1]],[[248,241,224,1],[249,246,241,1],[250,244,227,1],[251,106,79,1],[255,193,150,1]],[[0,98,125,1],[1,64,87,1],[51,50,49,1],[66,153,15,1],[255,255,255,1]],[[52,17,57,1],[53,150,104,1],[60,50,81,1],[168,212,111,1],[255,237,144,1]],[[0,153,137,1],[163,169,72,1],[206,24,54,1],[237,185,46,1],[248,89,49,1]],[[26,31,30,1],[108,189,181,1],[147,204,198,1],[200,214,191,1],[227,223,186,1]],[[165,222,190,1],[183,234,201,1],[251,178,163,1],[252,37,55,1],[255,215,183,1]],[[26,20,14,1],[90,142,161,1],[204,65,65,1],[255,255,255,1]],[[51,51,51,1],[111,111,111,1],[204,204,204,1],[255,100,0,1],[255,255,255,1]],[[51,145,148,1],[167,2,103,1],[241,12,73,1],[246,216,107,1],[251,107,65,1]],[[31,3,51,1],[31,57,77,1],[39,130,92,1],[112,179,112,1],[171,204,120,1]],[[209,242,165,1],[239,250,180,1],[245,105,145,1],[255,159,128,1],[255,196,140,1]],[[60,54,79,1],[109,124,157,1],[124,144,179,1],[149,181,194,1],[185,224,220,1]],[[35,179,218,1],[153,214,241,1],[168,153,241,1],[208,89,218,1],[248,78,150,1]],[[85,66,54,1],[96,185,154,1],[211,206,61,1],[241,239,165,1],[247,120,37,1]],[[20,20,20,1],[177,198,204,1],[255,239,94,1],[255,255,255,1]],[[136,238,208,1],[202,224,129,1],[239,67,53,1],[242,205,79,1],[246,139,54,1]],[[53,38,29,1],[95,79,69,1],[151,123,105,1],[206,173,142,1],[253,115,26,1]],[[68,66,89,1],[159,189,166,1],[219,101,68,1],[240,145,67,1],[252,177,71,1]],[[191,208,0,1],[196,60,39,1],[233,60,31,1],[242,83,58,1],[242,240,235,1]],[[43,43,43,1],[53,54,52,1],[230,50,75,1],[242,227,198,1],[255,198,165,1]],[[23,20,38,1],[26,15,12,1],[207,207,207,1],[240,240,240,1],[255,77,148,1]],[[28,1,19,1],[107,1,3,1],[163,0,6,1],[194,26,1,1],[240,60,2,1]],[[10,10,10,1],[140,97,70,1],[214,179,156,1],[242,76,61,1],[255,255,255,1]],[[46,13,35,1],[245,72,40,1],[247,128,60,1],[248,228,193,1],[255,237,191,1]],[[0,62,95,1],[0,67,132,1],[22,147,165,1],[150,207,234,1],[247,249,114,1]],[[66,29,56,1],[87,0,69,1],[190,226,232,1],[205,255,24,1],[255,8,90,1]],[[47,59,97,1],[121,128,146,1],[187,235,185,1],[233,236,229,1],[255,103,89,1]],[[58,17,28,1],[87,73,81,1],[131,152,142,1],[188,222,165,1],[230,249,188,1]],[[147,193,196,1],[198,182,204,1],[242,202,174,1],[250,12,195,1],[255,123,15,1]],[[255,3,149,1],[255,9,3,1],[255,139,3,1],[255,216,3,1],[255,251,3,1]],[[4,0,4,1],[254,26,138,1],[254,53,26,1],[254,143,26,1],[254,240,26,1]],[[125,173,154,1],[196,199,169,1],[249,213,177,1],[254,126,142,1],[255,62,97,1]],[[69,38,50,1],[145,32,77,1],[226,247,206,1],[228,132,74,1],[232,191,86,1]],[[0,0,0,1],[38,173,228,1],[77,188,233,1],[209,231,81,1],[255,255,255,1]],[[44,87,133,1],[209,19,47,1],[235,241,247,1],[237,214,130,1]],[[92,172,196,1],[140,209,157,1],[206,232,121,1],[252,182,83,1],[255,82,84,1]],[[58,68,8,1],[74,88,7,1],[125,146,22,1],[157,222,13,1],[199,237,14,1]],[[22,147,167,1],[200,207,2,1],[204,12,57,1],[230,120,30,1],[248,252,193,1]],[[59,12,44,1],[210,255,31,1],[250,244,224,1],[255,106,0,1],[255,195,0,1]],[[44,13,26,1],[52,158,151,1],[200,206,19,1],[222,26,114,1],[248,245,193,1]],[[28,20,13,1],[203,232,107,1],[242,233,225,1],[255,255,255,1]],[[75,88,191,1],[161,206,247,1],[247,255,133,1],[255,54,134,1]],[[74,95,103,1],[92,55,75,1],[204,55,71,1],[209,92,87,1],[217,212,168,1]]];s.prototype.getPalette=function(t){return n(h[Math.floor(t)])},s.prototype.getCount=function(){return h.length},s.prototype.getRandomPalette=function(){var t=Math.floor(h.length*Math.random());return this.getPalette(t)};var u=new s;e.exports=u}),define("famous-math/Vector",["require","exports","module"],function(t,i,e){function s(t,i,e){return 1==arguments.length?(t instanceof Array&&this.setXYZ(t[0],t[1],t[2]),"Vector"==t.constructor.name&&this.set(t)):(this.x=t||0,this.y=i||0,this.z=e||0),this}s.prototype.add=function(t,i){return i=i||this.register,i.setXYZ(this.x+t.x,this.y+t.y,this.z+t.z)},s.prototype.sub=function(t,i){return i=i||this.register,i.setXYZ(this.x-t.x,this.y-t.y,this.z-t.z)},s.prototype.mult=function(t,i){return i=i||this.register,i.setXYZ(t*this.x,t*this.y,t*this.z)},s.prototype.div=function(t,i){return this.mult(1/t,i)},s.prototype.cross=function(t,i){return i=i||this.register,i.setXYZ(this.y*t.z-this.z*t.y,this.z*t.x-this.x*t.z,this.x*t.y-this.y*t.x)},s.prototype.rotate=function(t,i){var e=t.x,s=t.y,o=t.z;return this.rotateX(e,i).rotateY(s,i).rotateZ(o,i)},s.prototype.rotateX=function(t,i){i=i||this.register;var e=this.x,s=this.y,o=this.z,n=Math.cos(t),r=Math.sin(t);return i.setXYZ(e,-o*r+s*n,o*n-s*r)},s.prototype.rotateY=function(t,i){i=i||this.register;var e=this.x,s=this.y,o=this.z,n=Math.cos(t),r=Math.sin(t);return i.setXYZ(-o*r+e*n,s,o*n+e*r)},s.prototype.rotateZ=function(t,i){i=i||this.register;var e=this.x,s=this.y,o=this.z,n=Math.cos(t),r=Math.sin(t);return i.setXYZ(-s*r+e*n,s*n+e*r,o)},s.prototype.dot=function(t){return this.x*t.x+this.y*t.y+this.z*t.z},s.prototype.normSquared=function(){return this.dot(this)},s.prototype.norm=function(){return Math.sqrt(this.normSquared())},s.prototype.normalize=function(t,i){t=t||1,i=i||this.register;var e=1e-7,s=this.norm();return Math.abs(s)>e?this.mult(t/s,i):i.setXYZ(t,0,0)},s.prototype.clone=function(){return new s(this.x,this.y,this.z)},s.prototype.isZero=function(){return!this.x&&!this.y&&!this.z},s.prototype.set=function(t){return t instanceof Array?(this.x=t[0],this.y=t[1],this.z=t[2]||0):(this.x=t.x,this.y=t.y,this.z=t.z),this!=this.register&&this.register.clear(),this},s.prototype.setXYZ=function(t,i,e){return this.register.clear(),this.x=t,this.y=i,this.z=e,this},s.prototype.clear=function(){this.x=0,this.y=0,this.z=0},s.prototype.cap=function(t){if(1/0==t)return this;var i=this.norm();return i>t&&this.normalize().mult(t,this),this},s.prototype.project=function(t,i){return i=i||this.register,t.mult(this.dot(t),i)},s.prototype.reflect=function(t,i){return i=i||this.register,t.normalize(),this.sub(this.project(t).mult(2),i)},s.prototype.toArray=function(){return[this.x,this.y,this.z]},s.prototype.fromArray=function(t){this.x=t[0],this.y=t[1],this.z=t[2]},s.prototype.get=function(){return this.toArray()},s.prototype.register=new s(0,0,0),s.prototype.zero=new s(0,0,0),s.prototype.one=new s(1,1,1),e.exports=s}),define("famous-gl/Light",["require","exports","module","famous-math/Vector","famous-color/Color"],function(t,i,e){function s(t){this.options={position:void 0,ambientColor:void 0,color:void 0},this.setOptions(t),this.position=this.options.position||new o(0,0,0),this.color=this.options.color||new n(255,255,255,1),this.ambientColor=this.options.ambientColor||new n(255,255,255,1)}var o=t("famous-math/Vector"),n=t("famous-color/Color");s.prototype.setOptions=function(t){for(var i in t)t.hasOwnProperty(i)&&(this.options[i]=t[i])},s.prototype.getPosition=function(){return this.position},s.prototype.getAmbientColor=function(){return this.ambientColor},s.prototype.getColor=function(){return this.color},e.exports=s}),define("famous-gl/ShaderMaker",["require","exports","module"],function(t,i,e){function s(t,i){var e=t.createShader(t.FRAGMENT_SHADER);return t.shaderSource(e,i),t.compileShader(e),t.getShaderParameter(e,t.COMPILE_STATUS)?e:(alert(t.getShaderInfoLog(e)),void 0)}function o(t,i){var e=t.createShader(t.VERTEX_SHADER);return t.shaderSource(e,i),t.compileShader(e),t.getShaderParameter(e,t.COMPILE_STATUS)?e:(alert(t.getShaderInfoLog(e)),void 0)}function n(t,i,e){var n=o(t,i),r=s(t,e),a=t.createProgram();return t.attachShader(a,n),t.attachShader(a,r),t.linkProgram(a),t.getProgramParameter(a,t.LINK_STATUS)||alert("Could not initialise shaders"),a}e.exports={createShader:n,initVertShader:o,initFragShader:s}}),define("famous-gl/Texture",["require","exports","module"],function(t,i,e){function s(t){this.options={context:void 0,src:void 0,flip:!1,size:void 0,width:void 0,height:void 0,mipmap:!1,type:void 0,format:void 0,data:void 0,magFilter:void 0,minFilter:void 0,wrapS:void 0,wrapT:void 0},this.setOptions(t),this.gl=void 0,this.id=0,this.initialized=!1}function o(t){return Math.log(t)/Math.LN2}function n(t){var i=o(t);return 0===i?!1:Math.abs(i-Math.floor(i))>0?!1:!0}s.prototype.setOptions=function(t){for(var i in t)t.hasOwnProperty(i)&&(this.options[i]=t[i])},s.prototype.setContext=function(t){this.gl=t,this.isInitialized()||(this.init(),this.setTextureID(),s.HASFLOATTEXTURES=this.gl.getExtension("OES_texture_float"))},s.prototype.init=function(){var t=this.gl;this.texture=t.createTexture(),this.options.src?this.image?this.makeTextureFromImage():this.initFromImage():this.initFromNull()},s.prototype.initFromNull=function(){var t=this.gl,i=this.options.format?this.options.format:t.RGBA,e=this.options.type?this.options.type:t.UNSIGNED_BYTE,s=this.options.data?this.options.data:null;this.options.size=this.options.size?this.options.size:[this.options.width?this.options.width:0,this.options.height?this.options.height:0],this.bind(),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,this.options.flip),t.texImage2D(t.TEXTURE_2D,0,i,this.options.size[0],this.options.size[1],0,i,e,s),this.setTextureParameters(),this.unbind(),this.initialized=!0},s.prototype.initFromImage=function(){this.gl,this.image=new Image,this.image.crossOrigin="anonymous",this.image.src=this.options.src,this.image.onload=function(){this.makeTextureFromImage()}.bind(this),this.initialized=!0},s.prototype.makeTextureFromImage=function(){var t=this.gl;this.options.size=[this.image.width,this.image.height],this.bind(),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,this.options.flip),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,this.image),this.setTextureParameters(),this.unbind(),this.initialized=!0},s.prototype.setTextureParameters=function(){var t=this.gl;this.options.magFilter=this.options.magFilter?this.options.magFilter:t.NEAREST,this.options.minFilter=this.options.minFilter?this.options.minFilter:t.NEAREST,this.options.wrapS=this.options.wrapS?this.options.wrapS:t.CLAMP_TO_EDGE,this.options.wrapT=this.options.wrapT?this.options.wrapT:t.CLAMP_TO_EDGE,n(this.options.size[0])&&n(this.options.size[1])&&this.options.size[0]===this.options.size[1]?(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,this.options.magFilter),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,this.options.minFilter),this.options.mipmap&&t.generateMipmap(t.TEXTURE_2D)):(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,this.options.magFilter),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,this.options.minFilter),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,this.options.wrapS),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,this.options.wrapT))},s.prototype.setTextureID=function(){this.id=s.COUNT,s.COUNT++},s.prototype.bind=function(){var t=this.gl;t&&(t.activeTexture(t.TEXTURE0+this.getID()),t.bindTexture(t.TEXTURE_2D,this.texture))},s.prototype.unbind=function(){var t=this.gl;t&&t.bindTexture(t.TEXTURE_2D,null)},s.prototype.get=function(){return this.texture},s.prototype.setData=function(t){var i=this.gl;if(i){var e=this.options.format?this.options.format:i.RGBA,s=this.options.type?this.options.type:i.UNSIGNED_BYTE;this.bind(),i.texImage2D(i.TEXTURE_2D,0,e,this.options.size[0],this.options.size[1],0,e,s,t),this.unbind()}},s.prototype.getID=function(){return this.id},s.prototype.isInitialized=function(){return this.initialized},s.prototype.setSize=function(t){var i=this.gl;i&&(this.options.size=t,i.deleteTexture(this.texture),this.initialized=!1,this.init())},s.prototype.destroy=function(){if(this.isInitialized()){var t=this.gl;t.deleteTexture(this.texture),s.COUNT--,this.initialized=!1}},s.COUNT=0,s.HASFLOATTEXTURES=!1,e.exports=s}),define("famous-gl/Fbo",["require","exports","module","./Texture"],function(t,i,e){function s(t){this.options={size:void 0,width:void 0,height:void 0,textureOptions:void 0},this.setOptions(t),this.options.size=this.options.size?this.options.size:[this.options.width?this.options.width:0,this.options.height?this.options.height:0],this.gl=void 0,this.frameTexture=void 0,this.frameBuffer=void 0,this.renderBuffer=void 0,this.textureOptions={size:this.options.size,flip:!1,mipmap:!1},this.setTextureOptions(this.options.textureOptions),this.frameTexture=new o(this.textureOptions),this.initialized=!1}var o=t("./Texture");s.prototype.setOptions=function(t){for(var i in t)t.hasOwnProperty(i)&&(this.options[i]=t[i])},s.prototype.setTextureOptions=function(t){for(var i in t)t.hasOwnProperty(i)&&(this.textureOptions[i]=t[i])},s.prototype.setContext=function(t){this.gl=t,this.isInitialized()||this.init()},s.prototype.init=function(){var t=this.gl,i=this.options.size;this.frameTexture.setContext(t);var e=this.frameTexture.get(),s=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,s);var o=t.createRenderbuffer();t.bindRenderbuffer(t.RENDERBUFFER,o),t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_COMPONENT16,i[0],i[1]),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e,0),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.RENDERBUFFER,o),t.bindTexture(t.TEXTURE_2D,null),t.bindRenderbuffer(t.RENDERBUFFER,null),t.bindFramebuffer(t.FRAMEBUFFER,null),this.frameBuffer=s,this.renderbuffer=o,this.initialized=!0},s.prototype.bind=function(){var t=this.gl;t.bindFramebuffer(t.FRAMEBUFFER,this.frameBuffer)},s.prototype.unbind=function(){var t=this.gl;t.bindFramebuffer(t.FRAMEBUFFER,null)},s.prototype.getTexture=function(){return this.frameTexture},s.prototype.getSize=function(){return this.options.size},s.prototype.setSize=function(t){if(this.isInitialized()){var i=this.gl;this.options.size=t,this.initialized=!1,i.deleteFramebuffer(this.frameBuffer),i.deleteRenderbuffer(this.renderbuffer),this.frameTexture.setSize(t),this.init()}},s.prototype.getWidth=function(){return this.options.size[0]},s.prototype.getHeight=function(){return this.options.size[1]},s.prototype.isInitialized=function(){return this.initialized},s.prototype.destroy=function(){if(this.isInitialized()){var t=this.gl;t.deleteFramebuffer(this.frameBuffer),t.deleteRenderbuffer(this.renderbuffer),this.frameTexture.destroy(),this.initialized=!1}},e.exports=s}),define("famous-gl/Material",["require","exports","module","./ShaderMaker","famous-color/Color","famous-gl/Texture","famous-gl/Fbo"],function(t,i,e){function s(t){this.options={color:void 0,texture:void 0,reference:void 0,vertexShader:void 0,vertexDefines:void 0,vertexUniforms:void 0,vertexChunk:void 0,fragmentShader:void 0,fragmentDefines:void 0,fragmentUniforms:void 0,fragmentChunk:void 0,effects:void 0,precision:"mediump",debug:!1},this.setOptions(t),this.texture=this.options.texture,this.options.color=this.options.color||new a(255,255,255,1),this.gl=void 0,this.shader=void 0,this.uniforms={},this.attributes={},this.uniformKeys=[],this.initialized=!1,this.id=-1,this.sid=-1,this.parseEffects()}function o(t){return t instanceof Array?t.length<=1?"float":"vec"+t.length:"number"==typeof t?"float":"boolean"==typeof t?"bool":t instanceof h?"sampler2D":t instanceof u?"sampler2D":void 0}function n(t,i){return"mat4"==i?"uniformMatrix4fv":"mat3"==i?"uniformMatrix3fv":"mat2"==i?"uniformMatrix2fv":"vec4"==i?"uniform4fv":"vec3"==i?"uniform3fv":"vec2"==i?"uniform2fv":"float"==i?"uniform1f":"bool"==i?"uniform1i":"sampler2D"==i?"uniform1i":void 0}var r=t("./ShaderMaker"),a=t("famous-color/Color"),h=t("famous-gl/Texture"),u=t("famous-gl/Fbo");s.prototype.setOptions=function(t){for(var i in t)t.hasOwnProperty(i)&&(this.options[i]=t[i])},s.prototype.parseEffects=function(){var t=this.options.effects;if(void 0!==t)for(var i=0;i<t.length;i++){var e=t[i],s=e.getVertexDefines(),o=e.getVertexUniforms(),n=e.getVertexChunk(),r=e.getFragmentDefines(),a=e.getFragmentUniforms(),h=e.getFragmentChunk();if(void 0!==s){var u=this.options.vertexDefines;void 0===u&&(u=[]);for(var p=0;p<s.length;p++)u.push(s[p]);this.options.vertexDefines=u}if(void 0!==o){var c=this.options.vertexUniforms;void 0===c&&(c={});for(var l=Object.keys(o),p=0;p<l.length;p++)c[l[p]]=o[l[p]];this.options.vertexUniforms=c}if(void 0!==n){var f=this.options.vertexChunk;void 0===f&&(f=[]);for(var p=0;p<n.length;p++)f.push(n[p]);this.options.vertexChunk=f}if(void 0!==r){var d=this.options.fragmentDefines;void 0===d&&(d=[]);for(var p=0;p<r.length;p++)d.push(r[p]);this.options.fragmentDefines=d}if(void 0!==a){var m=this.options.fragmentUniforms;void 0===m&&(m={});for(var l=Object.keys(a),p=0;p<l.length;p++)m[l[p]]=a[l[p]];this.options.fragmentUniforms=m}if(void 0!==h){var g=this.options.fragmentChunk;void 0===g&&(g=[]);for(var p=0;p<h.length;p++)g.push(h[p]);this.options.fragmentChunk=g}}},s.prototype.setContext=function(t,i,e){this.gl=t,this.isInitialized()||this.init(i,e)},s.prototype.init=function(t,i){this.initialized=!0;var e=this.options.reference;if(this.id=s.COUNT,s.COUNT++,e&&e.isInitialized())this.shader=e.getShader(),this.options.vertexShader=e.getVertexShader(),this.options.fragmentShader=e.getFragmentShader(),this.parseShader(),this.sid=e.getShaderID();else{this.sid=s.SHADERCOUNT,s.SHADERCOUNT++;var n=i.length?!0:!1,r=[];r.push("#define HALF_PI 1.5707963268"),r.push("#define PI 3.14159265359"),r.push("#define TWO_PI 6.28318530718"),r.push(""),t.hasPositions&&r.push("attribute vec3 a_position;"),t.hasNormals&&r.push("attribute vec3 a_normal;"),t.hasTexcoords&&r.push("attribute vec2 a_texcoord;"),t.hasColors&&r.push("attribute vec4 a_color;"),r.push(""),r.push("uniform mat4 u_mMatrix;"),r.push("uniform mat4 u_vMatrix;"),r.push("uniform mat4 u_pMatrix;"),t.hasNormals&&r.push("uniform mat3 u_nMatrix;"),r.push(""),r.push("uniform vec3 u_translate;"),r.push("uniform vec3 u_resolution;"),r.push("uniform float u_aspect;"),r.push("uniform float u_pointSize;");var a=this.options.vertexUniforms;if(a){var h=Object.keys(a);r.push("");for(var u=0;u<h.length;u++){var p=a[h[u]],c=o(p.value);r.push("uniform "+c+" "+h[u]+";"),"sampler2D"!==c&&"bool"!==c&&"int"!==c&&r.push("varying "+c+" v_"+h[u]+";")}}r.push(""),t.hasTexcoords&&r.push("varying vec2 v_texcoord;"),t.hasNormals&&r.push("varying vec3 v_normal;"),n&&r.push("varying vec4 v_position;"),r.push("varying vec3 v_resolution;"),r.push("varying float v_aspect;"),r.push("varying vec4 v_pos;"),t.hasColors&&r.push("varying vec4 v_color;"),r.push("");
var l=this.options.vertexDefines;if(l){for(var u=0;u<l.length;u++)r.push(l[u]);r.push("")}r.push("void main() {"),r.push("	vec4 pos = vec4(a_position, 1.0);"),r.push("	vec4 tran = vec4(u_translate/u_resolution, 1.0);"),r.push("	tran.x *= u_aspect;"),r.push("	mat4 model = u_mMatrix;"),r.push("	model[3] = model[3]/vec4(u_resolution, 1.0) + tran;"),r.push("	mat4 view = u_vMatrix;"),r.push("	vec4 vscale = vec4(u_resolution, 1.0);"),r.push("	view[3] /= vscale;"),r.push("	mat4 project = u_pMatrix;"),r.push("	float pointSize = u_pointSize;"),t.hasNormals&&(n?r.push("	v_normal = u_nMatrix * a_normal;"):r.push("	v_normal = a_normal;")),t.hasTexcoords&&r.push("	v_texcoord = a_texcoord;"),t.hasColors&&r.push("	v_color = a_color;");var f=this.options.vertexChunk;if(f&&f.length>0){r.push("");for(var u=0;u<f.length;u++)r.push("	"+f[u]);r.push("")}if(r.push("	v_resolution = u_resolution;"),r.push("	v_aspect = u_aspect;"),r.push("	v_pos = pos;"),r.push("	pos = vec4(pos.xyz/u_resolution, 1.0);"),r.push("	pos.x *= u_aspect;"),r.push("	gl_Position =  project * ( view * model ) * pos;"),n&&r.push("	v_position = ( view * model ) * pos;"),r.push("	gl_PointSize = pointSize;"),a){var h=Object.keys(a);r.push("");for(var u=0;u<h.length;u++){var p=a[h[u]],c=o(p.value);"sampler2D"!==c&&"bool"!==c&&"int"!==c&&r.push("	v_"+h[u]+" = "+h[u]+";")}}r.push("}");var d=[];if(d.push("precision "+this.options.precision+" float;"),d.push(""),d.push("#define HALF_PI 1.5707963268"),d.push("#define PI 3.14159265359"),d.push("#define TWO_PI 6.28318530718"),d.push(""),d.push("uniform vec4 u_color;"),d.push("uniform float u_opacity;"),d.push(""),n){for(var u=0;u<i.length;u++)d.push("uniform vec3 u_pointLightingLocation"+u+";"),d.push("uniform vec4 u_ambientLightColor"+u+";"),d.push("uniform vec4 u_pointLightingColor"+u+";");d.push("")}var m=this.options.fragmentUniforms;if(m){for(var h=Object.keys(m),u=0;u<h.length;u++){var p=m[h[u]],c=o(p.value);d.push("uniform "+c+" "+h[u]+";")}d.push("")}if(t.hasTexcoords&&d.push("varying vec2 v_texcoord;"),n&&d.push("varying vec4 v_position;"),t.hasNormals&&d.push("varying vec3 v_normal;"),t.hasColors&&d.push("varying vec4 v_color;"),d.push("varying vec3 v_resolution;"),d.push("varying float v_aspect;"),d.push("varying vec4 v_pos;"),a){var h=Object.keys(a);d.push("");for(var u=0;u<h.length;u++){var p=a[h[u]],c=o(p.value);"sampler2D"!==c&&"bool"!==c&&"int"!==c&&d.push("varying "+c+" v_"+h[u]+";")}}this.texture&&(this.texture.setContext(this.gl),d.push(""),d.push("uniform sampler2D u_texture;"),d.push(""));var g=this.options.fragmentDefines;if(g){for(var u=0;u<g.length;u++)d.push(g[u]);d.push("")}if(d.push("void main() {"),t.hasColors?d.push("	vec4 color = vec4(v_color.rgb, v_color.a*u_opacity);"):d.push("	vec4 color = vec4(u_color.rgb, u_color.a*u_opacity);"),t.hasTexcoords&&this.texture&&(d.push("	vec4 texColor = texture2D(u_texture, v_texcoord);"),d.push("	color.rgba *= texColor.rgba;")),n&&t.hasNormals){d.push("	vec4 lightWeighting = vec4(0.0);"),d.push("	float directionalLightWeighting = 0.0;"),d.push("	vec3 lightDirection = vec3(0.0);"),d.push("");for(var u=0;u<i.length;u++)d.push("	lightDirection = u_pointLightingLocation"+u+"/v_resolution - v_position.xyz;"),d.push("	directionalLightWeighting = max(dot(v_normal, lightDirection), 0.0);"),d.push("	lightWeighting += u_ambientLightColor"+u+" + u_pointLightingColor"+u+" * directionalLightWeighting;"),d.push("");var v=this.options.fragmentChunk;if(v){d.push("");for(var u=0;u<v.length;u++)d.push("	"+v[u]);d.push("")}d.push("	color.rgb *= lightWeighting.rgb;")}else{var v=this.options.fragmentChunk;if(v){d.push("");for(var u=0;u<v.length;u++)d.push("	"+v[u]);d.push("")}}d.push("	gl_FragColor = color;"),d.push("}"),this.options.vertexShader=r.join("\n"),this.options.fragmentShader=d.join("\n"),this.initShader(),this.parseShader(),this.options.debug&&(console.log(this.options.vertexShader),console.log(this.options.fragmentShader))}},s.prototype.isInitialized=function(){return this.initialized},s.prototype.initShader=function(){(null!==this.options.vertexShader||null!==this.options.fragmentShader)&&(this.shader=r.createShader(this.gl,this.options.vertexShader,this.options.fragmentShader))},s.prototype.parseShader=function(){this.parseUniforms(this.options.vertexShader,this.options.vertexUniforms),this.parseUniforms(this.options.fragmentShader,this.options.fragmentUniforms),this.options.vertexUniforms&&(this.uniformKeys=this.uniformKeys.concat(Object.keys(this.options.vertexUniforms))),this.options.fragmentUniforms&&(this.uniformKeys=this.uniformKeys.concat(Object.keys(this.options.fragmentUniforms)))},s.prototype.parseUniforms=function(t,i){var e=this.gl;this.apply();for(var s=t.split("\n"),o=0;o<s.length;o++){var r=s[o];if(-1!==r.indexOf("attribute ")){var a=r.split(" ");if(void 0!==a[2]){var h=a[2].replace(";","");this.attributes[h]={location:e.getAttribLocation(this.shader,h),type:a[1],value:void 0}}}else if(-1!==r.indexOf("uniform ")){var p=r.split(" ");if(void 0!==p[2]){var c,l=p[2].replace(";",""),f=-1==p[1].indexOf("mat")?!1:!0,d=-1==p[1].indexOf("sampler")?!1:!0,m=!1;i&&i[l]&&(c=i[l],c.value instanceof u&&(d=!1,m=!0)),this.uniforms[l]={location:e.getUniformLocation(this.shader,l),type:p[1],reference:c,fn:n(this.gl,p[1]),isMatrix:f,isTexture:d,isFbo:m}}}}},s.prototype.getColor=function(){return this.options.color},s.prototype.setColor=function(t){this.options.color=t},s.prototype.getShader=function(){return this.shader},s.prototype.apply=function(){this.gl.useProgram(this.shader)},s.prototype.hasTexture=function(){return void 0===this.texture?!1:!0},s.prototype.setTexture=function(t){this.texture?this.texture=t:(this.texture=t,this.initialized=!1)},s.prototype.getTexture=function(){return this.texture},s.prototype.getUniforms=function(){return this.uniforms},s.prototype.getAttributes=function(){return this.attributes},s.prototype.getAttribPointer=function(t){return this.attributes[t].location},s.prototype.getUniform=function(t){return this.uniforms[t]},s.prototype.getUniformLocation=function(t){return this.uniforms[t].location},s.prototype.getVertexShader=function(){return this.options.vertexShader},s.prototype.getFragmentShader=function(){return this.options.fragmentShader},s.prototype.applyCustomUniforms=function(){for(var t=this.gl,i=this.uniforms,e=this.uniformKeys,s=0,o=e.length;o>s;s++){var n=i[e[s]];if(n.isMatrix)t[n.fn](n.location,!1,n.reference.value);else if(n.isTexture){var r=n.reference.value;r&&(r.setContext(t),r.bind(),t.uniform1i(n.location,r.getID()))}else if(n.isFbo){var r=n.reference.value.getTexture();r&&(r.setContext(t),r.bind(),t.uniform1i(n.location,r.getID()))}else t[n.fn](n.location,n.reference.value)}},s.prototype.setUniformValue=function(t,i){this.uniforms[t].reference.value=i},s.prototype.getID=function(){return this.id},s.prototype.getShaderID=function(){return this.sid},s.prototype.destroy=function(){if(this.isInitialized()){var t=this.gl,i=this.options.reference;void 0!==i?(t.deleteProgram(i.getShader()),i=void 0,s.SHADERCOUNT--):(t.deleteProgram(this.shader),this.shader=void 0),this.initialized=!1}},s.COUNT=0,s.SHADERCOUNT=0,e.exports=s}),define("famous-gl/Mesh",["require","exports","module","famous-math/Vector","famous/Modifier","famous/Matrix","./Material"],function(t,i,e){function s(t){this.options={geometry:void 0,material:void 0,position:void 0,modifier:void 0},this.setOptions(t),this.geometry=this.options.geometry,this.material=this.options.material?this.options.material:new r,this.modifier=this.options.modifier||new n,this.position=this.options.position||new o(0,0,0)}var o=t("famous-math/Vector"),n=t("famous/Modifier");t("famous/Matrix");var r=t("./Material");s.prototype.setOptions=function(t){for(var i in t)t.hasOwnProperty(i)&&(this.options[i]=t[i])},s.prototype.getMaterial=function(){return this.material},s.prototype.getGeometry=function(){return this.geometry},s.prototype.setTransform=function(t,i,e){this.modifier.setTransform(t,i,e)},s.prototype.getTransform=function(){return this.modifier.getTransform()},s.prototype.haltTransform=function(){this.modifier.halt()},s.prototype.getFinalTransform=function(){return this.transform.getFinalTransform()},s.prototype.setOpacity=function(t,i,e){this.modifier.setOpacity(t,i,e)},s.prototype.getOpacity=function(){return this.modifier.getOpacity()},s.prototype.getPosition=function(){return this.position},s.prototype.destroy=function(){this.geometry.destroy(),this.material.destroy()},e.exports=s}),define("famous-gl/Scene",["require","exports","module","./Light","./Mesh"],function(t,i,e){function s(t){this.options={},this.setOptions(t),this.meshes=[],this.lights=[]}var o=t("./Light"),n=t("./Mesh");s.prototype.setOptions=function(t){for(var i in t)t.hasOwnProperty(i)&&(this.options[i]=t[i])},s.prototype.add=function(t){t instanceof o&&-1===this.lights.indexOf(t)&&this.lights.push(t),t instanceof n&&-1===this.meshes.indexOf(t)&&this.meshes.push(t)},s.prototype.getMeshes=function(){return this.meshes},s.prototype.getLights=function(){return this.lights},s.prototype.destroy=function(){for(var t=this.meshes,i=0;i<t.length;i++)t[i].destroy();this.meshes=[],this.lights=[]},e.exports=s}),define("famous-gl/Renderer",["require","exports","module","famous/Engine","famous/Matrix","famous-gl/ShaderMaker","famous-utils/Utils"],function(t,i,e){function s(t){this.options={context:void 0},this.setOptions(t),this.gl=this.options.context,this.callbacks={},this.pMatrix=n.identity,this.mMatrix=n.identity,this.vMatrix=n.identity,this.nMatrix=[1,0,0,0,1,0,0,0,1],this.lineWidth=1,this.pointSize=1,this.nearPlane=.0125,this.farPlane=1e3,this.fov=60,this.ortho=!1,this.clear=!0,this.bgColor=[0,0,0,1],this.currentMaterial=void 0,this.currentGeometry=void 0,this.depthTesting=!0,this.width=this.gl.viewportWidth,this.height=this.gl.viewportHeight,this.aspect=this.width/this.height,this.aspectLock=!1,this.viewport=[0,0,this.width,this.height],this.blendMode=s.ALPHA,this.setViewPort(0,0,this.width,this.height),this.setPerspective(this.fov,this.nearPlane,this.farPlane),this.setSize([this.gl.viewportWidth,this.gl.viewportHeight]),this.setBlendMode(s.ALPHA),this.setLineWidth(this.lineWidth),this.setPointSize(this.pointSize),this.setDepthTesting(this.depthTesting)}var o=t("famous/Engine"),n=t("famous/Matrix");t("famous-gl/ShaderMaker");var r=t("famous-utils/Utils");s.prototype.setOptions=function(t){for(var i in t)t.hasOwnProperty(i)&&(this.options[i]=t[i])},s.prototype.bindEvents=function(){for(var t=Object.keys(this.callbacks),i=0;i<t.length;i++)o.on(t[i],this.callbacks[t[i]])},s.prototype.unbindEvents=function(){for(var t=Object.keys(this.callbacks),i=0;i<t.length;i++)o.unbind(t[i],this.callbacks[t[i]])},s.prototype._resize=function(){this.setSize([this.gl.viewportWidth,this.gl.viewportHeight]),this.ortho?this.setOrthographic():this.setPerspective(this.fov)},s.prototype.render=function(t){var i=this.gl,e=t.scene.getMeshes(),s=t.scene.getLights(),o=t.framebuffer,n=o?!0:!1,r=t.viewport,a=t.projection,h=t.camera,u=t.view,p=t.depthTesting,c=t.blendMode,l=t.backgroundColor,f=t.clear;void 0!==c&&this.setBlendMode(c),void 0!==p&&this.setDepthTesting(p),this.currentMaterial=void 0,n&&(o.setContext(i),o.bind()),r?this.setViewPort(r[0],r[1],r[2],r[3]):this.applyViewPort(),a&&this.setProjectionMatrix(a),void 0!==f&&this.setClearBackground(f),l?this.setBackgroundColor(l):this.clear&&this.clearBackground(),h?this.setViewMatrix(h.getMatrix()):u&&this.setViewMatrix(u),this.depthTesting?i.enable(i.DEPTH_TEST):i.disable(i.DEPTH_TEST);for(var d=0;d<e.length;d++)this._render(e[d],s);n&&o.unbind()},s.prototype._render=function(t,i){var e=this.gl,s=!1,o=t.getMaterial(),n=t.getGeometry();n.setContext(e),o.setContext(e,n,i),void 0===this.currentMaterial?(this.currentMaterial=o,this.currentMaterial.apply()):this.currentMaterial.getShader()!==o.getShader()&&(this.currentMaterial=o,this.currentMaterial.apply()),void 0===this.currentGeometry?(this.currentGeometry=n,s=!0):this.currentGeometry!==n&&(this.currentGeometry=n,s=!0),n.hasPositions&&(e.enableVertexAttribArray(o.getAttribPointer("a_position")),e.bindBuffer(e.ARRAY_BUFFER,n.getPositionBuffer()),e.vertexAttribPointer(o.getAttribPointer("a_position"),n.getPositionBuffer().itemSize,e.FLOAT,!1,0,0)),n.hasNormals&&(e.enableVertexAttribArray(o.getAttribPointer("a_normal")),e.bindBuffer(e.ARRAY_BUFFER,n.getNormalBuffer()),e.vertexAttribPointer(o.getAttribPointer("a_normal"),n.getNormalBuffer().itemSize,e.FLOAT,!1,0,0)),n.hasTexcoords&&(e.enableVertexAttribArray(o.getAttribPointer("a_texcoord")),e.bindBuffer(e.ARRAY_BUFFER,n.getTextureCoordBuffer()),e.vertexAttribPointer(o.getAttribPointer("a_texcoord"),n.getTextureCoordBuffer().itemSize,e.FLOAT,!1,0,0)),n.hasColors&&(e.enableVertexAttribArray(o.getAttribPointer("a_color")),e.bindBuffer(e.ARRAY_BUFFER,n.getColorBuffer()),e.vertexAttribPointer(o.getAttribPointer("a_color"),n.getColorBuffer().itemSize,e.FLOAT,!1,0,0));var a=t.getTransform();e.uniformMatrix4fv(o.getUniformLocation("u_pMatrix"),!1,this.pMatrix),e.uniformMatrix4fv(o.getUniformLocation("u_mMatrix"),!1,a),e.uniformMatrix4fv(o.getUniformLocation("u_vMatrix"),!1,this.vMatrix),e.uniform3fv(o.getUniformLocation("u_translate"),t.getPosition().toArray()),e.uniform3f(o.getUniformLocation("u_resolution"),this.width,this.height,this.height),e.uniform1f(o.getUniformLocation("u_aspect"),this.aspect),e.uniform1f(o.getUniformLocation("u_pointSize"),this.pointSize);var h=o.getTexture();if(h&&(h.setContext(e),h.bind(),e.uniform1i(o.getUniformLocation("u_texture"),h.getID())),i.length){r.normalFromFM(this.nMatrix,a),e.uniformMatrix3fv(o.getUniformLocation("u_nMatrix"),!1,this.nMatrix);for(var u=0;u<i.length;u++){var p=i[u],c=p.getPosition(),l=p.getColor().toNormalizeColorArray(),f=p.getAmbientColor().toNormalizeColorArray();e.uniform3fv(o.getUniformLocation("u_pointLightingLocation"+u),c.toArray()),e.uniform4fv(o.getUniformLocation("u_ambientLightColor"+u),f),e.uniform4fv(o.getUniformLocation("u_pointLightingColor"+u),l)}}var d=o.getColor().toNormalizeColorArray();e.uniform4fv(o.getUniformLocation("u_color"),d),e.uniform1f(o.getUniformLocation("u_opacity"),t.getOpacity()),o.applyCustomUniforms(),e.drawArrays(n.getDrawMode(),0,n.getPositionBuffer().numItems),h&&h.unbind(),n.hasPositions&&e.disableVertexAttribArray(o.getAttribPointer("a_position")),n.hasNormals&&e.disableVertexAttribArray(o.getAttribPointer("a_normal")),n.hasTexcoords&&e.disableVertexAttribArray(o.getAttribPointer("a_texcoord")),n.hasColors&&e.disableVertexAttribArray(o.getAttribPointer("a_color"))},s.prototype.setLineWidth=function(t){this.lineWidth=t,this.gl.lineWidth(this.lineWidth)},s.prototype.setPointSize=function(t){this.pointSize=t},s.prototype.setViewMatrix=function(t){this.vMatrix=t},s.prototype.setProjectionMatrix=function(t){this.pMatrix=t},s.prototype.setViewPort=function(t,i,e,s){this.viewport[0]=t,this.viewport[1]=i,this.viewport[2]=e,this.viewport[3]=s,this.applyViewPort()},s.prototype.applyViewPort=function(){var t=this.viewport;this.gl.viewport(t[0],t[1],t[2],t[3])},s.prototype.getBackgroundColor=function(){return this.bgColor},s.prototype.setBackgroundColor=function(t,i,e,s){t instanceof Array?t.length>2?this.bgColor=t:(this.bgColor[0]=t[0],this.bgColor[1]=t[0],this.bgColor[2]=t[0],this.bgColor[3]=t[1]):void 0===e?(this.bgColor[0]=t,this.bgColor[1]=t,this.bgColor[2]=t,this.bgColor[3]=i):void 0===s?(this.bgColor[0]=t,this.bgColor[1]=i,this.bgColor[2]=e,this.bgColor[3]=1):(this.bgColor[0]=t,this.bgColor[1]=i,this.bgColor[2]=e,this.bgColor[3]=s),this.clearBackground()},s.prototype.setClearBackground=function(t){this.clear=t},s.prototype.clearBackground=function(){var t=this.gl,i=this.bgColor;t.clearColor(i[0],i[1],i[2],i[3]),t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT)},s.prototype.setSize=function(t){this.width=t[0],this.height=t[1],this.aspectLock===!1&&(this.aspect=this.width/this.height),this.setViewPort(0,0,this.width,this.height)},s.prototype.disableBlending=function(){this.blendMode=s.DISABLE;var t=this.gl;t.disable(t.BLEND)},s.prototype.enableAlphaBlending=function(){this.blendMode=s.ALPHA;var t=this.gl;t.enable(t.BLEND),t.blendFunc(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA)},s.prototype.enableAdditiveBlending=function(){this.blendMode=s.ADDITIVE;var t=this.gl;t.enable(t.BLEND),t.blendFunc(t.SRC_ALPHA,t.ONE)},s.prototype.enableSubtractBlending=function(){this.blendMode=s.SUBTRACT;var t=this.gl;t.enable(t.BLEND),t.blendFunc(t.SRC_ALPHA,t.ONE)},s.prototype.enableMultiplyBlending=function(){this.blendMode=s.MULTIPLY;var t=this.gl;t.enable(t.BLEND),t.blendFunc(t.DST_COLOR,t.ONE_MINUS_SRC_ALPHA)},s.prototype.enableScreenBlending=function(){this.blendMode=s.SCREEN;var t=this.gl;t.enable(t.BLEND),t.blendFunc(t.ONE_MINUS_DST_COLOR,t.ONE)},s.prototype.setBlendMode=function(t){switch(t){case s.DISABLE:this.disableBlending();break;case s.ALPHA:this.enableAlphaBlending();break;case s.ADDITIVE:this.enableAdditiveBlending();break;case s.SUBTRACT:this.enableSubtractBlending();break;case s.MULTIPLY:this.enableMultiplyBlending();break;case s.SCREEN:this.enableScreenBlending()}},s.prototype.setDepthTesting=function(t){this.depthTesting=t},s.prototype.setSmoothing=function(t){var i=this.gl;t===!0?(i.enable(i.POINT_SMOOTH),i.hint(i.POINT_SMOOTH_HINT,i.NICEST),i.hint(i.LINE_SMOOTH_HINT,i.NICEST)):(i.disable(i.POINT_SMOOTH),i.hint(i.POINT_SMOOTH_HINT,i.FASTEST),i.hint(i.LINE_SMOOTH_HINT,i.FASTEST))},s.prototype.setPerspective=function(t,i,e){var s=this.gl;this.fov=t?t:this.fov,this.nearPlane=i?i:this.nearPlane,this.farPlane=e?e:this.farPlane,this.setProjectionMatrix(r.perspective(r.deg2rad(this.fov),s.viewportWidth/s.viewportHeight,this.nearPlane,this.farPlane)),this.ortho=!1},s.prototype.setOrthographic=function(t,i,e,s,o,n,a){var h="undefined"!=typeof t?t:.25,u="undefined"!=typeof i?i:-h*this.aspect,p="undefined"!=typeof e?e:h*this.aspect,c="undefined"!=typeof s?s:-h,l="undefined"!=typeof o?o:h,f="undefined"!=typeof n?n:-h,d="undefined"!=typeof a?a:h;this.setProjectionMatrix(r.ortho(u,p,c,l,f,d)),this.ortho=!0},s.prototype.setAspectRatio=function(t){this.aspect=t},s.prototype.lockAspectRatio=function(t){this.aspectLock=t},s.DISABLE=0,s.ALPHA=1,s.ADDITIVE=2,s.SUBTRACT=3,s.MULTIPLY=4,s.SCREEN=5,e.exports=s}),define("famous-gl/Primitive",["require","exports","module","famous-utils/Utils","famous/Matrix","famous-math/Vector"],function(t,i,e){function s(t){this.options={obj:void 0,scale:1,drawMode:-1,transform:void 0,positions:void 0,normals:void 0,texcoords:void 0,colors:void 0},this.setOptions(t)}function o(t,i){for(var e=[],s=0;s<t.length;s++)for(var o=i[t[s]],n=0;n<o.length;n++)e.push(o[n]);return e}var n=t("famous-utils/Utils"),r=t("famous/Matrix"),a=t("famous-math/Vector");s.prototype.setOptions=function(t){for(var i in t)t.hasOwnProperty(i)&&(this.options[i]=t[i]);this.drawMode=this.options.drawMode,this.positions=this.options.positions||[],this.normals=this.options.normals||[],this.texcoords=this.options.texcoords||[],this.colors=this.options.colors||[],this.geometryCache=void 0,this.options.obj&&this.loadFromObj(this.options.obj,this.options.scale)},s.prototype.loadFromObj=function(t,i){this.setDrawMode(s.TRIANGLES);var e=[],a=[],h=[],u=[],p=[],c=[],l=t.split("\n");this.options.scale=i?i:1;for(var f=this.options.scale,d=0;d<l.length;d++){var m=l[d];if(-1!==m.indexOf("v ")){var g=m.split(" "),v=parseFloat(g[1])*f,y=parseFloat(g[2])*f,x=parseFloat(g[3])*f;e.push([v,y,x])}else if(-1!==m.indexOf("vt ")){var S=m.split(" "),b=parseFloat(S[1]),w=parseFloat(S[2]);c.push([b,w])}else if(-1!==m.indexOf("vn ")){var T=m.split(" "),M=parseFloat(T[1]),z=parseFloat(T[2]),_=parseFloat(T[3]);a.push([M,z,_])}else if(-1!==m.indexOf("f ")){var C=m.split(" ");if(-1!==C[1].indexOf("//")){var P=C[1].split("//"),O=C[2].split("//"),E=C[3].split("//");h.push(parseFloat(P[0])-1,parseFloat(O[0])-1,parseFloat(E[0])-1),p.push(parseFloat(P[1])-1,parseFloat(O[1])-1,parseFloat(E[1])-1)}else if(-1!==C[1].indexOf("/")){var P=C[1].split("/"),O=C[2].split("/"),E=C[3].split("/");h.push(parseFloat(P[0])-1,parseFloat(O[0])-1,parseFloat(E[0])-1),u.push(parseFloat(P[1])-1,parseFloat(O[1])-1,parseFloat(E[1])-1),p.push(parseFloat(P[2])-1,parseFloat(O[2])-1,parseFloat(E[2])-1)}else h.push(parseFloat(C[1])-1,parseFloat(C[2])-1,parseFloat(C[3])-1)}}var k=this.options.transform;if(void 0!==k){for(var I=e.length,d=0;I>d;d++){var A=e[d],N=r.translate(A[0],A[1],A[2]);N=r.multiply4x4(N,k),e[d][0]=N[12],e[d][1]=N[13],e[d][2]=N[14]}for(var D=n.normalFromFM(r.identity.slice(0),k),R=a.length,d=0;R>d;d++){var F=a[d];a[d][0]=D[0]*F[0]+D[1]*F[1]+D[2]*F[2],a[d][1]=D[3]*F[0]+D[4]*F[1]+D[5]*F[2],a[d][2]=D[6]*F[0]+D[7]*F[1]+D[8]*F[2]}}e=o(h,e),a=o(p,a),c=o(u,c),this.setPositions(e),this.setNormals(a),this.setTextureCoords(c)},s.prototype.setDrawMode=function(t){this.drawMode=t},s.prototype.getDrawMode=function(){return this.drawMode},s.prototype.setPositions=function(t){this.positions=t,this.geometryCache&&this.geometryCache.updatePositions(this.positions)},s.prototype.setNormals=function(t){this.normals=t,this.geometryCache&&this.geometryCache.updateNormals(this.normals)},s.prototype.setColors=function(t){this.colors=t,this.geometryCache&&this.geometryCache.updateColors(this.colors)},s.prototype.setTextureCoords=function(t){this.texcoords=t,this.geometryCache&&this.geometryCache.updateTextureCoords(this.texcoords)},s.prototype.getPositions=function(){return this.positions},s.prototype.getTextureCoords=function(){return this.texcoords},s.prototype.getNormals=function(){return this.normals},s.prototype.getColors=function(){return this.colors},s.prototype.getGeometryCache=function(){return this.geometryCache},s.prototype.setGeometryCache=function(t){this.geometryCache=t},s.prototype.hasCache=function(){return void 0!==this.geometryCache?!0:!1},s.prototype.calculateNormal=function(t,i,e,s,o,n,r,h,u){var p=new a(s-t,o-i,n-e),c=new a(r-t,h-i,u-e),l=new a;return p.cross(c,l),l.normalize(1,l),l.toArray()},s.UNKNOWN=-1,s.POINTS=0,s.LINES=1,s.LINE_LOOP=2,s.LINE_STRIP=3,s.TRIANGLES=4,s.TRIANGLE_STRIP=5,s.TRIANGLE_FAN=6,e.exports=s}),define("famous-gl/Geometry",["require","exports","module","./Primitive"],function(t,i,e){function s(t){this.options={primitive:void 0,drawMode:void 0,dynamicPositions:!1,dynamicColors:!1,dynamicTextureCoords:!1,dynamicNormals:!1},this.setOptions(t),this.drawMode,this.primitive=this.options.primitive,this.gl=void 0,this.positionBuffer=void 0,this.normalBuffer=void 0,this.textureCoordBuffer=void 0,this.colorBuffer=void 0,this.hasNormals=!1,this.hasPositions=!1,this.hasTexcoords=!1,this.hasColors=!1,this.initialized=!1}var o=t("./Primitive");s.prototype.setOptions=function(t){for(var i in t)t.hasOwnProperty(i)&&(this.options[i]=t[i])},s.prototype.parseDrawMode=function(t){var i=null;switch(t){case o.UNKNOWN:i=this.gl.POINTS;break;case o.POINTS:i=this.gl.POINTS;break;case o.LINES:i=this.gl.LINES;break;case o.LINE_LOOP:i=this.gl.LINE_LOOP;break;case o.LINE_STRIP:i=this.gl.LINE_STRIP;break;case o.TRIANGLES:i=this.gl.TRIANGLES;break;case o.TRIANGLE_STRIP:i=this.gl.TRIANGLE_STRIP;break;case o.TRIANGLE_FAN:i=this.gl.TRIANGLE_FAN}return i},s.prototype.getDrawMode=function(){return this.drawMode},s.prototype.setDrawMode=function(t){this.drawMode=t},s.prototype.setPositions=function(t){if(null!==t&&t.length>0){var i=this.gl;this.positionBuffer=i.createBuffer(),i.bindBuffer(i.ARRAY_BUFFER,this.positionBuffer);var e=i.STATIC_DRAW;this.options.dynamicPositions&&(e=i.DYNAMIC_DRAW),i.bufferData(i.ARRAY_BUFFER,new Float32Array(t),e),this.positionBuffer.itemSize=3,this.positionBuffer.numItems=t.length/3,this.hasPositions=!0}},s.prototype.setTextureCoords=function(t){if(null!==t&&t.length>0){var i=this.gl;this.textureCoordBuffer=i.createBuffer(),i.bindBuffer(i.ARRAY_BUFFER,this.textureCoordBuffer);var e=i.STATIC_DRAW;this.options.dynamicTextureCoords&&(e=i.DYNAMIC_DRAW),i.bufferData(i.ARRAY_BUFFER,new Float32Array(t),e),this.textureCoordBuffer.itemSize=2,this.textureCoordBuffer.numItems=t.length/2,this.hasTexcoords=!0}},s.prototype.setNormals=function(t){if(null!==t&&t.length>0){var i=this.gl;this.normalBuffer=i.createBuffer(),i.bindBuffer(i.ARRAY_BUFFER,this.normalBuffer);var e=i.STATIC_DRAW;this.options.dynamicNormals&&(e=i.DYNAMIC_DRAW),i.bufferData(i.ARRAY_BUFFER,new Float32Array(t),e),this.normalBuffer.itemSize=3,this.normalBuffer.numItems=t.length/3,this.hasNormals=!0}},s.prototype.setColors=function(t){if(null!==t&&t.length>0){var i=this.gl;this.colorBuffer=i.createBuffer(),i.bindBuffer(i.ARRAY_BUFFER,this.colorBuffer);var e=i.STATIC_DRAW;this.options.dynamicColors&&(e=i.DYNAMIC_DRAW),i.bufferData(i.ARRAY_BUFFER,new Float32Array(t),e),this.colorBuffer.itemSize=4,this.colorBuffer.numItems=t.length/4,this.hasColors=!0}},s.prototype.updatePositions=function(t){if(this.positionBuffer&&null!==t&&t.length>0){var i=this.gl;i.bindBuffer(i.ARRAY_BUFFER,this.positionBuffer),i.bufferSubData(i.ARRAY_BUFFER,0,new Float32Array(t)),this.positionBuffer.itemSize=3,this.positionBuffer.numItems=t.length/3}},s.prototype.updateTextureCoords=function(t){if(this.textureCoordBuffer&&null!==t&&t.length>0){var i=this.gl;i.bindBuffer(i.ARRAY_BUFFER,this.textureCoordBuffer),i.bufferSubData(i.ARRAY_BUFFER,0,new Float32Array(t)),this.textureCoordBuffer.itemSize=2,this.textureCoordBuffer.numItems=t.length/2}},s.prototype.updateNormals=function(t){if(this.normalBuffer&&null!==t&&t.length>0){var i=this.gl;i.bindBuffer(i.ARRAY_BUFFER,this.normalBuffer),i.bufferSubData(i.ARRAY_BUFFER,0,new Float32Array(t)),this.normalBuffer.itemSize=3,this.normalBuffer.numItems=t.length/3}},s.prototype.updateColors=function(t){if(this.colorBuffer&&null!==t&&t.length>0){var i=this.gl;i.bindBuffer(i.ARRAY_BUFFER,this.colorBuffer),i.bufferSubData(i.ARRAY_BUFFER,0,new Float32Array(t)),this.colorBuffer.itemSize=4,this.colorBuffer.numItems=t.length/4}},s.prototype.getPositionBuffer=function(){return this.positionBuffer},s.prototype.getTextureCoordBuffer=function(){return this.textureCoordBuffer},s.prototype.getNormalBuffer=function(){return this.normalBuffer},s.prototype.getColorBuffer=function(){return this.colorBuffer},s.prototype.setDynamicPositions=function(t){this.options.dynamicPositions=t},s.prototype.setDynamicTextureCoords=function(t){this.options.dynamicTextureCoords=t},s.prototype.setDynamicColors=function(t){this.options.dynamicColors=t},s.prototype.setDynamicNormals=function(t){this.options.dynamicNormals=t},s.prototype.getPrimitive=function(){return this.primitive},s.prototype.isInitialized=function(){return this.initialized},s.prototype.setContext=function(t){this.gl=t,this.isInitialized()||this.init()},s.prototype.init=function(){var t=this.primitive.getGeometryCache();void 0!==t?(this.positionBuffer=t.getPositionBuffer(),this.normalBuffer=t.getNormalBuffer(),this.textureCoordBuffer=t.getTextureCoordBuffer(),this.colorBuffer=t.getColorBuffer()):(this.setPositions(this.primitive.getPositions()),this.setTextureCoords(this.primitive.getTextureCoords()),this.setNormals(this.primitive.getNormals()),this.setColors(this.primitive.getColors()),this.primitive.setGeometryCache(this)),this.drawMode="undefined"!=typeof this.options.drawMode?this.options.drawMode:this.parseDrawMode(this.primitive.getDrawMode()),this.initialized=!0},s.prototype.destroy=function(){if(this.isInitialized()){var t,i,e,s,o=this.gl,n=this.primitive.getGeometryCache();void 0!==n?(t=n.getPositionBuffer(),i=n.getNormalBuffer(),e=n.getTextureCoordBuffer(),s=n.getColorBuffer()):(t=this.getPositionBuffer(),i=this.getNormalBuffer(),e=this.getTextureCoordBuffer(),s=this.getColorBuffer()),void 0!==t?o.deleteBuffer(t):void 0,void 0!==i?o.deleteBuffer(i):void 0,void 0!==e?o.deleteBuffer(e):void 0,void 0!==s?o.deleteBuffer(s):void 0,this.hasNormals=!1,this.hasPositions=!1,this.hasTexcoords=!1,this.hasColors=!1,this.primitive.setGeometryCache(void 0),this.initialized=!1}},e.exports=s}),define("famous-gl/Primitives/PlanePrimitive",["require","exports","module","../Primitive","famous-utils/Utils"],function(t,i,e){function s(t){o.apply(this,t),this.options.width=100,this.options.height=100,this.options.resolution=1,this.options.resolutionX=void 0,this.options.resolutionY=void 0,this.options.vertical=!1,this.options.flipX=!1,this.options.flipY=!1,this.options.uMin=0,this.options.uMax=1,this.options.vMin=0,this.options.vMax=1,this.options.drawMode=o.TRIANGLES,this.setOptions(t),this.setup()}var o=t("../Primitive"),n=t("famous-utils/Utils");s.prototype=Object.create(o.prototype),s.prototype.constructor=s,s.prototype.setup=function(){if(this.options.flipX===!0){var t=this.options.uMin;this.options.uMin=this.options.uMax,this.options.uMax=t}if(this.options.flipY===!0){var t=this.options.vMin;this.options.vMin=this.options.vMax,this.options.vMax=t}this.drawMode===o.LINES?(this.drawMode=o.LINES,this.setupOutlinePlane()):this.drawMode===o.LINE_LOOP||this.drawMode===o.LINE_STRIP?(this.drawMode=o.LINES,this.setupLinePlane()):this.drawMode===o.TRIANGLES||this.drawMode===o.TRIANGLE_STRIP||this.drawMode===o.TRIANGLE_FAN?(this.drawMode=o.TRIANGLES,this.setupFilledPlane()):this.drawMode===o.POINTS&&this.setupPointPlane()},s.prototype.setupFilledPlane=function(){for(var t=[],i=[],e=[],s=this.options.width,o=this.options.height,r=this.options.resolutionX?this.options.resolutionX:this.options.resolution,a=this.options.resolutionY?this.options.resolutionY:this.options.resolution,h=s/r,u=o/a,p=.5*-s,c=.5*o,l=this.options.uMin,f=this.options.uMax,d=this.options.vMin,m=this.options.vMax,g=0;r>g;g++)for(var v=0;a>v;v++){var y=p+g*h,x=c-v*u,S=0,b=p+(g+1)*h,w=c-v*u,T=0,M=p+(g+1)*h,z=c-(v+1)*u,_=0,C=p+g*h,P=c-(v+1)*u,O=0;t.push(y,x,S),i.push(0,0,1),e.push(n.map(y,p,-p,l,f),n.map(x,c,-c,d,m)),t.push(C,P,O),i.push(0,0,1),e.push(n.map(C,p,-p,l,f),n.map(P,c,-c,d,m)),t.push(M,z,_),i.push(0,0,1),e.push(n.map(M,p,-p,l,f),n.map(z,c,-c,d,m)),t.push(y,x,S),i.push(0,0,1),e.push(n.map(y,p,-p,l,f),n.map(x,c,-c,d,m)),t.push(M,z,_),i.push(0,0,1),e.push(n.map(M,p,-p,l,f),n.map(z,c,-c,d,m)),t.push(b,w,T),i.push(0,0,1),e.push(n.map(b,p,-p,l,f),n.map(w,c,-c,d,m))}this.setPositions(t),this.setNormals(i),this.setTextureCoords(e)},s.prototype.setupOutlinePlane=function(){for(var t=[],i=[],e=[],s=this.options.width,o=this.options.height,r=this.options.resolutionX?this.options.resolutionX:this.options.resolution,a=this.options.resolutionY?this.options.resolutionY:this.options.resolution,h=s/r,u=o/a,p=.5*-s,c=.5*o,l=this.options.uMin,f=this.options.uMax,d=this.options.vMin,m=this.options.vMax,g=0;r>g;g++)for(var v=0;a>v;v++){var y=p+g*h,x=c-v*u,S=0,b=p+(g+1)*h,w=c-v*u,T=0,M=p+(g+1)*h,z=c-(v+1)*u,_=0,C=p+g*h,P=c-(v+1)*u,O=0;t.push(y,x,S),i.push(0,0,1),e.push(n.map(y,p,-p,l,f),n.map(x,c,-c,d,m)),t.push(b,w,T),i.push(0,0,1),e.push(n.map(b,p,-p,l,f),n.map(w,c,-c,d,m)),t.push(b,w,T),i.push(0,0,1),e.push(n.map(b,p,-p,l,f),n.map(w,c,-c,d,m)),t.push(M,z,_),i.push(0,0,1),e.push(n.map(M,p,-p,l,f),n.map(z,c,-c,d,m)),t.push(M,z,_),i.push(0,0,1),e.push(n.map(M,p,-p,l,f),n.map(z,c,-c,d,m)),t.push(C,P,O),i.push(0,0,1),e.push(n.map(C,p,-p,l,f),n.map(P,c,-c,d,m)),t.push(C,P,O),i.push(0,0,1),e.push(n.map(C,p,-p,l,f),n.map(P,c,-c,d,m)),t.push(y,x,S),i.push(0,0,1),e.push(n.map(y,p,-p,l,f),n.map(x,c,-c,d,m))}this.setPositions(t),this.setNormals(i),this.setTextureCoords(e)},s.prototype.setupLinePlane=function(){var t=[],i=[],e=[],s=this.options.width,o=this.options.height,r=this.options.resolutionX?this.options.resolutionX:this.options.resolution,a=this.options.resolutionY?this.options.resolutionY:this.options.resolution,h=s/r,u=o/a,p=.5*-s,c=.5*o,l=this.options.uMin,f=this.options.uMax,d=this.options.vMin,m=this.options.vMax;this.options.vertical?r++:a++;for(var g=0;r>g;g++)for(var v=0;a>v;v++){var y=p+g*h,x=c-v*u,S=0;if(t.push(y,x,S),i.push(0,0,1),e.push(n.map(y,p,-p,l,f),n.map(x,c,-c,d,m)),this.options.vertical){var b=p+g*h,w=c-(v+1)*u,T=0;t.push(b,w,T),i.push(0,0,1),e.push(n.map(b,p,-p,l,f),n.map(w,c,-c,d,m))}else{var M=p+(g+1)*h,z=c-v*u,_=0;t.push(M,z,_),i.push(0,0,1),e.push(n.map(M,p,-p,l,f),n.map(z,c,-c,d,m))}}this.setPositions(t),this.setNormals(i),this.setTextureCoords(e)
},s.prototype.setupPointPlane=function(){for(var t=[],i=[],e=[],s=this.options.width,o=this.options.height,r=this.options.resolutionX?this.options.resolutionX:this.options.resolution,a=this.options.resolutionY?this.options.resolutionY:this.options.resolution,h=s/r,u=o/a,p=.5*-s,c=.5*o,l=this.options.uMin,f=this.options.uMax,d=this.options.vMin,m=this.options.vMax,g=0;r>=g;g++)for(var v=0;a>=v;v++){var y=p+g*h,x=c-v*u,S=0;t.push(y,x,S),i.push(0,0,1),e.push(n.map(y,p,-p,l,f),n.map(x,c,-c,d,m))}this.setPositions(t),this.setNormals(i),this.setTextureCoords(e)},s.prototype.setSize=function(t){this.options.width=t[0],this.options.height=t[1],this.setup()},e.exports=s}),define("famous-gl/Effect",["require","exports","module"],function(t,i,e){function s(t){this.options={vertexDefines:void 0,vertexUniforms:void 0,vertexChunk:void 0,fragmentDefines:void 0,fragmentUniforms:void 0,fragmentChunk:void 0},this.setOptions(t)}s.prototype.setOptions=function(t){for(var i in t)t.hasOwnProperty(i)&&(this.options[i]=t[i])},s.prototype.getUniform=function(t){var i=this.options.vertexUniforms,e=this.options.fragmentUniforms;return void 0!==i&&void 0!==i[t]?i[t]:void 0!==e&&void 0!==e[t]?e[t]:void 0},s.prototype.setUniform=function(t,i){var e=this.getUniform(t);e&&(e.value=i)},s.prototype.getVertexUniform=function(){return this.options.vertexUniforms},s.prototype.getFragmentUniform=function(){return this.options.fragmentUniforms},s.prototype.getVertexDefines=function(){return this.options.vertexDefines},s.prototype.getVertexUniforms=function(){return this.options.vertexUniforms},s.prototype.getVertexChunk=function(){return this.options.vertexChunk},s.prototype.getFragmentDefines=function(){return this.options.fragmentDefines},s.prototype.getFragmentUniforms=function(){return this.options.fragmentUniforms},s.prototype.getFragmentChunk=function(){return this.options.fragmentChunk},e.exports=s}),define("famous-gl/Effects/ExposureEffect",["require","exports","module","../Effect"],function(t,i,e){function s(t){o.apply(this,t),this.options={vertexDefines:void 0,vertexUniforms:void 0,vertexChunk:void 0,fragmentDefines:["const float sqrtoftwo = 1.41421356237;"],fragmentUniforms:{exposure:{value:1}},fragmentChunk:["color.rgb *= log2(vec3(pow(exposure + sqrtoftwo, 2.0)));"]},this.setOptions(t)}var o=t("../Effect");s.prototype=Object.create(o.prototype),s.prototype.constructor=s,e.exports=s}),define("famous-gl/Effects/TwirlEffect",["require","exports","module","../Effect"],function(t,i,e){function s(t){o.apply(this,t),this.options={vertexDefines:void 0,vertexUniforms:void 0,vertexChunk:void 0,fragmentDefines:void 0,fragmentUniforms:{twirl:{value:3},size:{value:1},origin:{value:[-.5,-.5]}},fragmentChunk:["vec2 two = vec2(2.0, 2.0);","vec2 torigin = vec2(origin.x*v_aspect, origin.y);","vec2 center = vec2(0.5*v_aspect, 0.5);","vec2 point = vec2(v_texcoord.x*v_aspect, v_texcoord.y);","vec2 normCoord = (two * point) - center;","normCoord += torigin;","float r = length(normCoord);","float phi = atan(normCoord.y, normCoord.x);","phi = phi + (1.0 - smoothstep(-size, size,r)) * twirl;","normCoord.x = r*cos(phi);","normCoord.y = r*sin(phi);","normCoord -= torigin;","vec2 texCoord = ((normCoord + center) / vec2(2.0*v_aspect, 2.0));","color.rgb = texture2D(u_texture, texCoord).rgb;"]},this.setOptions(t)}var o=t("../Effect");s.prototype=Object.create(o.prototype),s.prototype.constructor=s,e.exports=s}),define("app/widgets/BackgroundGLFaderView",["require","exports","module","famous/Engine","famous/Matrix","famous/Modifier","famous-scene/GLScene","famous-utils/Utils","famous-utils/KeyCodes","app/data/TimeHelpers","famous-animation/Timer","famous-animation/Easing","famous-animation/Animation","famous-color/ColorPalettes","famous-color/ColorPalette","famous-color/Color","famous-math/Vector","famous-gl/Scene","famous-gl/Renderer","famous-gl/Material","famous-gl/Geometry","famous-gl/Mesh","famous-gl/Primitive","famous-gl/Primitives/PlanePrimitive","famous-gl/Effects/ExposureEffect","famous-gl/Effects/TwirlEffect"],function(t,i,e){function s(t,i){n.apply(this,arguments),this.timer=new a,this.exposure=new g,this.exposureExposure=this.exposure.getUniform("exposure"),this.exposureExposure.value=.066,this.topColor={value:new h(this.options.colors[0][0]).toNormalizeColorArray()},this.botColor={value:new h(this.options.colors[0][1]).toNormalizeColorArray()},this.numColors=this.options.colors.length-1,this.setAlarm(i)}t("famous/Engine");var o=t("famous/Matrix");t("famous/Modifier");var n=t("famous-scene/GLScene");t("famous-utils/Utils"),t("famous-utils/KeyCodes");var r=t("app/data/TimeHelpers"),a=t("famous-animation/Timer");t("famous-animation/Easing"),t("famous-animation/Animation"),t("famous-color/ColorPalettes"),t("famous-color/ColorPalette");var h=t("famous-color/Color");t("famous-math/Vector");var u=t("famous-gl/Scene"),p=t("famous-gl/Renderer"),c=t("famous-gl/Material"),l=t("famous-gl/Geometry"),f=t("famous-gl/Mesh"),d=t("famous-gl/Primitive"),m=t("famous-gl/Primitives/PlanePrimitive"),g=t("famous-gl/Effects/ExposureEffect");t("famous-gl/Effects/TwirlEffect"),s.prototype=Object.create(n.prototype),s.prototype.constructor=s,s.DEFAULT_OPTIONS={activationTransition:{curve:"inSineNorm",duration:500},activationColor:"#232323",colors:[["#061c29","#0e3b5b"],["#061926","#0e3a5a"],["#061a27","#0e3a59"],["#071a27","#0e3a5a"],["#061a28","#0e3b59"],["#061b28","#0e3b5a"],["#061b29","#0f3b5a"],["#071b29","#0e3b5b"],["#071b2a","#0e3b5a"],["#061c29","#0e3b5b"],["#061c2a","#0e3c5a"],["#061c2a","#0f3b5b"],["#071d2b","#0e3c5b"],["#071d2b","#0e3c5b"],["#071d2c","#0f3b5b"],["#071e2c","#0e3c5b"],["#071e2c","#0f3c5c"],["#071d2d","#0e3d5c"],["#071e2e","#0f3d5c"],["#081f2e","#0f3c5c"],["#081f2f","#0e3d5c"],["#071f2f","#0f3d5d"],["#08202f","#0e3e5d"],["#082030","#0f3d5d"],["#082030","#0f3d5d"],["#082131","#0e3e5d"],["#082131","#0f3d5e"],["#092132","#0f3e5d"],["#082231","#0f3e5e"],["#082232","#0f3e5d"],["#092232","#0f3f5e"],["#092233","#0f3e5e"],["#092333","#0f3e5f"],["#082334","#0f3f5e"],["#092334","#0f3f5f"],["#092435","#0f3f5e"],["#092435","#0f3f5f"],["#0b2337","#18405f"],["#0c2338","#21415f"],["#0d2338","#2a425f"],["#0e233a","#33435f"],["#10233b","#3d445f"],["#12233d","#46455f"],["#12233e","#4f475e"],["#14223f","#58475e"],["#162140","#61485e"],["#172142","#6a4a5f"],["#192143","#734a5e"],["#1a2144","#7c4b5e"],["#1b2145","#864d5f"],["#1d2146","#8f4d5e"],["#1e2148","#984f5f"],["#202049","#a1505f"],["#221f4a","#aa505f"],["#221f4b","#b3525e"],["#241f4d","#bc535e"],["#251f4e","#c5545f"],["#271f50","#cf555e"],["#281f50","#d8565e"],["#291f51","#e1575e"],["#2b1e53","#ea585e"],["#2b1e53","#ea585e"],["#2b1e53","#ea585e"],["#2b1e53","#ea585e"],["#2b1e53","#ea585e"],["#2b1e53","#ea585e"],["#2b1e53","#ea585e"],["#2b1e53","#ea585e"],["#2b1e53","#ea585e"],["#2b1e53","#ea585e"],["#2b1e53","#ea585e"],["#2b1e53","#ea585e"],["#2b1e53","#ea585e"],["#2b1e53","#e05a63"],["#2b1e53","#d75d67"],["#2b1e53","#cd606b"],["#2b1e53","#c36270"],["#2b1e53","#b96574"],["#2b1e53","#af6878"],["#2b1e53","#a66a7d"],["#2b1e53","#9c6d82"],["#2b1e53","#926f87"],["#2b1e53","#89718b"],["#2b1e53","#7f758f"],["#2b1e53","#767794"],["#2b1e53","#6c7998"],["#2b1e53","#627d9c"],["#2b1e53","#597fa0"],["#2b1e53","#4f81a5"],["#2b1e53","#4584aa"],["#2b1e53","#3c86af"],["#2b1e53","#3289b3"],["#2b1e53","#288bb7"],["#2b1e53","#1e8ebc"],["#2b1e53","#1491c0"],["#2b1e53","#0b94c4"],["#2b1e53","#0196c9"],["#292257","#0799cb"],["#28275b","#0e9bcc"],["#262b60","#149ece"],["#253064","#1aa1cf"],["#233569","#21a4d1"],["#22396d","#28a7d2"],["#203c71","#2ea9d4"],["#1f4175","#34acd5"],["#1d457a","#3bafd6"],["#1c4a7e","#41b1d8"],["#1a4e82","#47b4d9"],["#195287","#4eb7db"],["#17578b","#54bbdc"],["#155c8f","#5abdde"],["#146094","#60bfe0"],["#126598","#66c3e1"],["#11699d","#6dc6e3"],["#0f6da1","#73c9e4"],["#0e72a5","#79cbe6"],["#0c76aa","#80cee7"],["#0b7bae","#86d1e8"],["#097eb2","#8cd3ea"],["#0882b6","#93d6eb"],["#0687bb","#9ad9ed"],["#058cbf","#a0dcee"],["#0390c4","#a6dff0"],["#0295c8","#ade1f1"],["#0099cc","#b3e4f3"],["#049bce","#b6e4f2"],["#089dce","#b8e6ef"],["#0c9fd0","#bae7ee"],["#10a1d1","#bde7ec"],["#14a4d2","#bfe8ea"],["#18a6d3","#c2e9e9"],["#1ca8d5","#c5eae7"],["#20aad5","#c6ebe5"],["#24abd7","#c9ebe3"],["#28add8","#cbede1"],["#2cb0d9","#ceeee0"],["#30b1db","#d1eede"],["#34b3db","#d2efdc"],["#38b6dd","#d5f0da"],["#3cb7de","#d8f1d9"],["#40badf","#daf2d7"],["#44bce0","#ddf2d5"],["#48bee2","#e0f3d4"],["#4cc0e2","#e1f5d1"],["#50c2e4","#e4f5d0"],["#50c2e4","#e4f5d0"],["#50c2e4","#e5f5d0"],["#50c2e4","#e4f5d0"],["#50c2e4","#e4f6d0"],["#50c2e4","#e5f6d0"],["#50c2e4","#e5f6d0"],["#50c2e4","#e5f5d0"],["#50c2e4","#e5f5d0"],["#50c2e4","#e5f5d0"],["#50c2e4","#e6f5cf"],["#50c2e4","#e5f6d0"],["#50c2e4","#e6f6d0"],["#50c2e4","#e6f6cf"],["#50c2e4","#e6f6cf"],["#50c2e4","#e6f6d0"],["#50c2e4","#e6f6d0"],["#50c2e4","#e6f6cf"],["#50c2e4","#e7f6d0"],["#50c2e4","#e7f6cf"],["#50c2e4","#e7f6cf"],["#50c2e4","#e7f6d0"],["#50c2e4","#e7f6cf"],["#50c2e4","#e8f6cf"],["#50c2e4","#e7f6d0"],["#50c2e4","#e7f6cf"],["#50c2e4","#e8f7cf"],["#50c2e4","#e8f7d0"],["#50c2e4","#e7f7cf"],["#50c2e4","#e8f7cf"],["#50c2e4","#e8f7d0"],["#50c2e4","#e9f6cf"],["#50c2e4","#e8f6cf"],["#50c2e4","#e8f7d0"],["#50c2e4","#e9f7cf"],["#50c2e4","#e9f7cf"],["#50c2e4","#e9f7cf"],["#50c2e4","#e9f7cf"],["#50c2e4","#e9f7cf"],["#50c2e4","#eaf7ce"],["#50c2e4","#eaf8cf"],["#50c2e4","#e9f8cf"],["#50c2e4","#eaf7ce"],["#50c2e4","#eaf7cf"],["#50c2e4","#ebf7cf"],["#50c2e4","#eaf7ce"],["#50c2e4","#eaf7cf"],["#50c2e4","#ebf8cf"],["#50c2e4","#ebf8ce"],["#50c2e4","#eaf8cf"],["#50c2e4","#ebf8cf"],["#50c2e4","#ebf8ce"],["#50c2e4","#ebf8cf"],["#50c2e4","#ebf8cf"],["#50c2e4","#ebf8ce"],["#50c2e4","#ecf8cf"],["#50c2e4","#ecf8ce"],["#50c2e4","#ecf8ce"],["#50c2e4","#ecf8cf"],["#50c2e4","#ecf8cf"],["#50c2e4","#edf8ce"],["#50c2e4","#edf8ce"],["#50c2e4","#ecf9cf"],["#50c2e4","#edf9ce"],["#50c2e4","#edf9ce"],["#50c2e4","#edf9ce"],["#50c2e4","#edf8ce"],["#50c2e4","#edf8ce"],["#50c2e4","#eef8ce"],["#50c2e4","#eef9ce"],["#50c2e4","#edf9ce"],["#50c2e4","#eef9ce"],["#50c2e4","#eef9ce"],["#5cbdd7","#eff8c8"],["#6bb8ca","#f1f7c1"],["#77b3bd","#f2f6bb"],["#84aeb0","#f4f5b5"],["#91a9a3","#f5f4ae"],["#9ea496","#f6f3a9"],["#ab9f89","#f7f2a3"],["#b89a7c","#f8f19c"],["#c5956f","#faf096"],["#d29062","#fbef8f"],["#e08b55","#fdee89"],["#ec8648","#feed83"],["#d97f4a","#fee980"],["#c4784c","#fee67e"],["#b1714e","#fee37c"],["#9d6b50","#fedf79"],["#8a6452","#fedb78"],["#765e55","#fed875"],["#625757","#fed572"],["#4f5059","#fed171"],["#3b4a5b","#fecd6e"],["#27425d","#feca6c"],["#133c5f","#fec76a"],["#003561","#fec367"],["#00345f","#e9ba6b"],["#00325d","#d3b16f"],["#00315b","#bea972"],["#002e59","#a9a076"],["#002d57","#94987a"],["#002b54","#7f8f7d"],["#002a52","#6a8681"],["#002950","#557e85"],["#00264e","#407589"],["#00254c","#2a6c8d"],["#00234a","#156490"],["#002248","#005b94"],["#002248","#005a92"],["#002248","#005990"],["#002248","#00578f"],["#002248","#00568d"],["#002248","#00548a"],["#002248","#005389"],["#002248","#005288"],["#002248","#005085"],["#002248","#005288"],["#002248","#005085"],["#002248","#004f83"],["#002248","#004e81"],["#002248","#004c80"],["#002248","#004b7e"],["#002247","#014b7d"],["#002145","#014a7b"],["#012144","#024979"],["#012042","#024878"],["#012041","#034776"],["#021f40","#044774"],["#021f3e","#044673"],["#021f3d","#054572"],["#021e3b","#054571"],["#021e3a","#06446f"],["#031d38","#06446d"],["#031e37","#07426c"],["#031e37","#07426c"],["#031e36","#08416a"],["#041d34","#084168"],["#041d33","#094066"],["#041c31","#094065"],["#041c30","#0a3f64"],["#041c2e","#0a3e63"],["#051b2d","#0b3e61"],["#051b2c","#0c3c5f"],["#051a2a","#0c3d5e"],["#061a29","#0d3b5c"],["#061927","#0d3a5a"]]},s.prototype.setup=function(t){var i=new p({context:t});i.enableAlphaBlending(),i.setDepthTesting(!0),i.setLineWidth(2),i.setPointSize(2),i.setOrthographic(),i.setBackgroundColor(new h(this.options.activationColor).toNormalizeColorArray()),i.setViewMatrix(o.identity),this.renderer=i,this.setupScene(t),this.showBackgrounds()},s.prototype.update=function(){this.showBackgrounds()},s.prototype.setupScene=function(t){this.scene=new u,this.planePrimitive=new m({width:t.viewportWidth,height:t.viewportHeight,drawMode:d.TRIANGLES}),this.planeMesh=new f({geometry:new l({primitive:this.planePrimitive}),material:new c({fragmentUniforms:{topColor:this.topColor,botColor:this.botColor},fragmentChunk:["float dist = distance(vec2(0.5, 1.125), v_texcoord);","float gaus = exp(-pow(dist, 2.0)/(2.0*pow(0.5, 2.0)));","color.rgb = mix(topColor, botColor, gaus).rgb;"],effects:[this.exposure]})}),this.scene.add(this.planeMesh)},s.prototype.draw=function(){this.renderer.render({scene:this.scene})},s.prototype.resize=function(){var t=this.gl,i=[t.viewportWidth,t.viewportHeight];this.renderer.setSize(i),this.renderer.setOrthographic(),this.planePrimitive.setSize(i)},s.prototype.deactivate=function(){this.cam.unbindEvents(),this.unbindEvents(),this.scene.destroy()},s.prototype.showBackgrounds=function(){var t=this.numColors*r.getTimePercentage(this.alarm.getTime()),i=Math.floor(t),e=Math.ceil(t),s=t-i,o=new h(this.options.colors[i][0]),n=new h(this.options.colors[i][1]),a=new h(this.options.colors[e][0]),u=new h(this.options.colors[e][1]);this.topColor.value=o.lerp(a,s).toNormalizeColorArray(),this.botColor.value=n.lerp(u,s).toNormalizeColorArray()},s.prototype.getActiveColors=function(t){var i=this.numColors*r.getTimePercentage(t?t.getTime():this.alarm.getTime());return this.options.colors[Math.floor(i)]},s.prototype.getActiveTextColor=function(t){var i=this.getActiveColors(t),e=new h(i[0]),s=e.getLightness();return 50>s&&e.setLightness(70),e.get()},s.prototype.setAlarm=function(t){this.alarm=t},e.exports=s}),define("famous/CanvasSurface",["require","exports","module","./Surface"],function(t,i,e){function s(t){t&&t.canvasSize&&(this.canvasSize=t.canvasSize),a.call(this,t),this.canvasSize||(this.canvasSize=this.getSize()),this.backBuffer=document.createElement("canvas"),this.canvasSize&&(this.backBuffer.width=this.canvasSize[0],this.backBuffer.height=this.canvasSize[1]),this._contextId=void 0}function o(t){for(var i=this.surfaceEvents,e=0;e<i.length;e++)t.removeEventListener(i[e],this.eventForwarder)}function n(t){for(var i=0;i<this._dirtyClasses.length;i++)t.classList.remove(this._dirtyClasses[i]);t.classList.add("surface"),this._dirtyClasses=[]}function r(t){for(var i in this.properties)t.style[i]="";t.style.display="block"}var a=t("./Surface"),h=void 0!==document.body.style.webkitTransform;s.prototype=Object.create(a.prototype),s.prototype.elementType="canvas",s.prototype.elementClass="surface",s.prototype.setContent=function(){},s.prototype.deploy=function(t){this.canvasSize&&(t.width=this.canvasSize[0],t.height=this.canvasSize[1]),"2d"==this._contextId&&(t.getContext(this._contextId).drawImage(this.backBuffer,0,0),this.backBuffer.width=0,this.backBuffer.height=0)},s.prototype.recall=function(t){this.getSize(),this.backBuffer.width=t.width,this.backBuffer.height=t.height,"2d"==this._contextId&&(this.backBuffer.getContext(this._contextId).drawImage(t,0,0),t.width=0,t.height=0)},s.prototype.getContext=function(t){return this._contextId=t,this._currTarget?this._currTarget.getContext(t):this.backBuffer.getContext(t)},s.prototype.setSize=function(t,i){a.prototype.setSize.apply(this,arguments),i&&(this.canvasSize=i.slice(0)),this._currTarget&&(this._currTarget.width=this.canvasSize[0],this._currTarget.height=this.canvasSize[1])},s.prototype.cleanup=function(t){var i=this._currTarget;this.recall(i),i.style.width="",i.style.height="",this._size=void 0,r.call(this,i);var e=this.getClassList();n.call(this,i);for(var s=0;s<e.length;s++)i.classList.remove(e[s]);if(this.elementClass)if(this.elementClass instanceof Array)for(var s=0;s<this.elementClass.length;s++)i.classList.remove(this.elementClass[s]);else i.classList.remove(this.elementClass);o.call(this,i),this._currTarget=void 0,t.deallocate(i),c(i)};var u,p,c;u=h?function(t,i){t.style.webkitTransform=FM.formatCSS(i)}:function(t,i){t.style.transform=FM.formatCSS(i)},p=h?function(t,i){t.style.webkitTransformOrigin=_formatCSSOrigin(i)}:function(t,i){t.style.transformOrigin=_formatCSSOrigin(i)},c=h?function(t){t.style.webkitTransform="scale3d(0.0001,0.0001,1)",t.style.opacity=0}:function(t){t.style.transform="scale3d(0.0001,0.0001,1)",t.style.opacity=0},e.exports=s}),define("famous-animation/CubicBezier",["require","exports","module"],function(t,i,e){function s(t){var i=[[1,0,0,0],[0,0,1,0],[-3,3,-2,-1],[2,-2,1,1]];t=t||[0,1,0,0],this.coef=[0,0,0,0];for(var e=0;4>e;e++)for(var s=0;4>s;s++)this.coef[e]+=i[e][s]*t[s]}s.prototype.create=function(){var t=this;return function(i){i=i||0;var e=t.coef;return e[0]+e[1]*i+e[2]*i*i+e[3]*i*i*i}},e.exports=s}),define("app/widgets/BackgroundFaderView",["require","exports","module","famous/Engine","famous/View","famous/Matrix","famous/Surface","famous/CanvasSurface","famous/Modifier","app/data/TimeHelpers","famous-animation/CubicBezier","famous-color/Color","famous-utils/Utils"],function(t,i,e){function s(t,i){n.apply(this,arguments),this.faderMods=[],this.faderSurfaces=[],this.alarm=i,this._isAndroid=l.isAndroid(),this.animatedCubicBezier=new p([.5,0,.5,1]),this.createCanvasSurfaces().sizeAndColorCanvases().showBackgrounds().events()}var o=t("famous/Engine"),n=t("famous/View"),r=t("famous/Matrix");t("famous/Surface");var a=t("famous/CanvasSurface"),h=t("famous/Modifier"),u=t("app/data/TimeHelpers"),p=t("famous-animation/CubicBezier"),c=t("famous-color/Color"),l=t("famous-utils/Utils");s.prototype=Object.create(n.prototype),s.prototype.constructor=s,s.DEFAULT_OPTIONS={numFaders:6,paddingPercentage:.9,colors:[["#0c536a","#0c2133"],["#cda3ca","#295266"],["#fffdd8","#66e8ff"],["#fffdd8","#66e8ff"],["#f8e27e","#f09237"],["#0c536a","#0c2133"]]},s.prototype.events=function(){this.alarm.on("change:time",this.showBackgrounds.bind(this)),l.debounce(o.on("resize",this.resize.bind(this),500))},s.prototype.resize=function(){this.sizeAndColorCanvases()},s.prototype.createCanvasSurfaces=function(){for(var t=0;t<this.options.numFaders;t++){var i=new h({opacity:0,transform:r.translate(0,0,-2)}),e=new a({size:[window.innerWidth,window.innerHeight],canvasSize:[2*window.innerWidth,2*window.innerHeight]});this.faderMods.push(i),this.faderSurfaces.push(e),this.node.add(i).link(e)}return this},s.prototype.sizeAndColorCanvases=function(){for(var t=0;t<this.faderSurfaces.length;t++){var i=this.faderSurfaces[t];i.setSize([window.innerWidth,window.innerHeight],[2*window.innerWidth,2*window.innerHeight]),this.colorCanvasSurface(i.getContext("2d"),t)}return this},s.prototype.colorCanvasSurface=function(t,i){var e=window.innerWidth,s=window.innerHeight,o=s>e?e:s;if(this._isAndroid)var n=t.createLinearGradient(2*.5*e,0,2*.5*e,2*s);else var n=t.createRadialGradient(2*.5*e,2*s,0,2*.5*e,2.5*s,2.25*o);n.addColorStop(0,this.options.colors[i][0]),n.addColorStop(1,this.options.colors[i][1]),t.fillStyle=n,t.fillRect(0,0,2*window.innerWidth,2*window.innerHeight)},s.prototype.showBackgrounds=function(){var t,i=u.getTimePercentage(this.alarm.getTime()),e=this.faderSurfaces.length,s=1/e,o=s*this.options.paddingPercentage,n=.5*o;0>i&&(percentge=0),i>1&&(i=.99999);for(var r=0;e>r;r++){var a=s*r,h=a-n;startPlusPadding=a+n;var p=a+s,c=p+n,l=p-n;if(h>i)t=0;else if(i>c)t=0;else if(startPlusPadding>i){var f=(i-h)/(startPlusPadding-h);t=f,0==r&&(t=1)}else i>l?(t=f,r==e-1&&(t=1)):t=1;this.faderMods[r].halt(),this.faderMods[r].setOpacity(t)}return this},s.prototype.setAlarm=function(t){this.alarm=t},s.prototype.getActiveColors=function(){for(var t=0,i=0,e=0;e<this.faderMods.length;e++){var s=this.faderMods[e].getOpacity();s>t&&(t=s,i=e)}return this.options.colors[i]},s.prototype.getActiveTextColor=function(){var t=this.getActiveColors(),i=new c(t[0]),e=i.getLightness();return 50>e&&i.setLightness(70),i.get()},s.prototype.setAlarm=function(t){this.alarm=t},e.exports=s}),define("app/scenes/BackgroundScene",["require","exports","module","famous/Engine","famous-utils/Utils","app/widgets/BackgroundGLFaderView","app/widgets/BackgroundFaderView","app/data/RiseData"],function(t,i,e){var s,o=t("famous/Engine"),n=t("famous-utils/Utils"),r=t("app/widgets/BackgroundGLFaderView"),a=t("app/widgets/BackgroundFaderView"),h=t("app/data/RiseData"),u=h.where("name","Quick Alarm");n.supportsWebGL()?(s=new r({},u),o.pipe(s)):s=new a({},u),e.exports=s}),define("app/widgets/AlarmButton",["require","exports","module","famous/View","famous/Matrix","famous/Surface","famous/Modifier","famous/Engine","famous-utils/Utils"],function(t,i,e){function s(){o.apply(this,arguments),this.size=[h.getWidth(),this.options.height],this.setupBackSurface(),this.setupHighlightSurface(),this.setupTitleSurface(),this.events()}var o=t("famous/View");t("famous/Matrix");var n=t("famous/Surface"),r=t("famous/Modifier"),a=t("famous/Engine"),h=t("famous-utils/Utils");s.prototype=Object.create(o.prototype),s.prototype.constructor=s,s.DEFAULT_OPTIONS={title:"",height:64,highlightDirection:"bottom",backSurfaceOptions:{backgroundColor:"rgba(30, 30, 30, 0.85)","border-top":"solid","border-bottom":"none","border-width":"1px","border-color":"#2c2c2c"},titleSurfaceOptions:{color:"#b0b0b0","text-align":"center"}},s.prototype.setupBackSurface=function(){this.backSurface=new n({properties:this.options.backSurfaceOptions,size:this.size}),this.backSurfaceMod=new r({opacity:0}),this.node.add(this.backSurfaceMod).link(this.backSurface)},s.prototype.resizeBackSurface=function(){return this.backSurface.setSize(this.size),this},s.prototype.setupHighlightSurface=function(){this.options.highlightSurfaceOptions={background:"-webkit-linear-gradient("+this.options.highlightDirection+", rgba(255,255,255,0.075) 0%,rgba(255,255,255,0) 25%)"},this.highlightSurface=new n({properties:this.options.highlightSurfaceOptions,size:this.size}),this.highlightSurfaceMod=new r({opacity:0}),this.node.add(this.highlightSurfaceMod).link(this.highlightSurface)},s.prototype.resizeHighlightSurface=function(){return this.highlightSurface.setSize(this.size),this},s.prototype.setupTitleSurface=function(){this.titleSurface=new n({content:"<h4>"+this.options.title+"</h4>",properties:this.options.titleSurfaceOptions,size:this.size}),this.titleSurface.setProperties({"line-height":this.options.height+"px"}),this.node.add(this.titleSurface)},s.prototype.resizeTitleSurface=function(){return this.titleSurface.setSize(this.size),this},s.prototype.events=function(){this.backSurface.pipe(this.eventOutput),this.highlightSurface.pipe(this.eventOutput),this.titleSurface.pipe(this.eventOutput),a.on("resize",this.resize.bind(this))},s.prototype.getHeight=function(){return this.options.height},s.prototype.setBackOpacity=function(t,i){this.backSurfaceMod.setOpacity(t,i)},s.prototype.setHighlightOpacity=function(t,i){this.highlightSurfaceMod.setOpacity(t,i)},s.prototype.setTitleColor=function(t){this.titleSurface.setProperties({color:t})},s.prototype.resize=function(){this.size=[h.getWidth(),this.options.height],this.resizeBackSurface().resizeHighlightSurface().resizeTitleSurface()},e.exports=s}),define("famous-sync/BaseMouseSync",["require","exports","module","famous/EventHandler"],function(t,i,e){function s(t,i){this.options={direction:void 0,rails:!1,scale:1,stallTime:50,propogate:!0},t?this.setOptions(t):this.setOptions(this.options),this.input=new o,this.output=new o,o.setInputHandler(this,this.input),o.setOutputHandler(this,this.output),this._prevCoord=void 0,this._prevTime=void 0,this._prevVel=void 0,this._startTime=void 0,this._relativePosition=[0,0],this._customTargetGet=i?!0:!1,this.targetGet=i||function(){return this._relativePosition}.bind(this)}var o=t("famous/EventHandler");s.DIRECTION_X=0,s.DIRECTION_Y=1,s.prototype._handleStart=function(t){t.preventDefault(),this._customTargetGet||(this._relativePosition=[0,0]),this._prevCoord=[t.clientX,t.clientY],this._prevTime=Date.now(),this._prevVel=void 0!==this.options.direction?0:[0,0],this._startTime=this._prevTime,this.output.emit("start",{event:t,coordinate:this._prevCoord,timestamp:this._startTime})},s.prototype._handleUpdate=function(t){if(this._prevCoord){var i=this._prevCoord,e=this._prevTime,o=[t.clientX,t.clientY],n=Date.now(),r=o[0]-i[0],a=o[1]-i[1];this.options.rails&&(Math.abs(r)>Math.abs(a)?a=0:r=0);var h,u,p=Math.max(n-e,8),c=r/p,l=a/p,f=this.targetGet(),d=this.options.scale;this.options.direction==s.DIRECTION_X?(h=f+d*r,u=d*c):this.options.direction==s.DIRECTION_Y?(h=f+d*a,u=d*l):(h=[f[0]+d*r,f[1]+d*a],u=[d*c,d*l]),this.output.emit("update",{event:t,position:h,velocity:u,coordinate:o,timestamp:n,duration:n-this._startTime}),this._prevCoord=o,this._prevTime=n,this._prevVel=u,this._customTargetGet||(this._relativePosition=h)}},s.prototype._handleEnd=function(t){if(this._prevCoord){var i=this._prevTime,e=Date.now();e-i>this.options.stallTime&&(this._prevVel=void 0==this.options.direction?[0,0]:0);var s=this.targetGet();this.output.emit("end",{event:t,position:s,velocity:this._prevVel,coordinate:[t.clientX,t.clientY],timestamp:e,duration:e-this._startTime}),this._prevCoord=void 0,this._prevTime=void 0,this._prevVel=void 0,this._prevTime=void 0}},s.prototype.getOptions=function(){return this.options},s.prototype._handleLeave=function(){if(this._prevCoord){var t=function(t){this._handleUpdate(t)}.bind(this),i=function(e){this._handleEnd(e),document.removeEventListener("mousemove",t),document.removeEventListener("mouseup",i)}.bind(this);document.addEventListener("mousemove",t),document.addEventListener("mouseup",i)}},s.prototype.setOptions=function(t){void 0!==t.direction&&(this.options.direction=t.direction),void 0!==t.rails&&(this.options.rails=t.rails),void 0!==t.scale&&(this.options.scale=t.scale),void 0!==t.stallTime&&(this.options.stallTime=t.stallTime),void 0!==t.propogate&&(this.options.propogate=t.propogate)},e.exports=s}),define("famous-sync/MouseSync",["require","exports","module","famous/EventHandler","./BaseMouseSync"],function(t,i,e){function s(){o.apply(this,arguments),this.input.on("mousedown",this._handleStart.bind(this)),this.input.on("mousemove",this._handleUpdate.bind(this)),this.input.on("mouseup",this._handleEnd.bind(this)),this.options.propogate?this.input.on("mouseleave",this._handleLeave.bind(this)):this.input.on("mouseleave",this._handleEnd.bind(this))}t("famous/EventHandler");var o=t("./BaseMouseSync");s.prototype=Object.create(o.prototype),s.prototype.constructor=s,e.exports=s}),define("famous-sync/TwoFingerSync",["require","exports","module","famous/EventHandler"],function(t,i,e){function s(t,i){this.targetGet=i,this.options={scale:1},t?this.setOptions(t):this.setOptions(this.options),this.input=new o,this.output=new o,o.setInputHandler(this,this.input),o.setOutputHandler(this,this.output),this.touchAId=void 0,this.posA=void 0,this.timestampA=void 0,this.touchBId=void 0,this.posB=void 0,this.timestampB=void 0,this.input.on("touchstart",this.handleStart.bind(this)),this.input.on("touchmove",this.handleMove.bind(this)),this.input.on("touchend",this.handleEnd.bind(this)),this.input.on("touchcancel",this.handleEnd.bind(this)),this._customTargetGet=i?!0:!1,this._relativePosition=0,this.targetGet=i||function(){return this._relativePosition}}var o=t("famous/EventHandler");s._calcDist=function(t,i){var e=i[0]-t[0],s=i[1]-t[1];return Math.sqrt(e*e+s*s)},s.prototype.getOptions=function(){return this.options},s.prototype.setOptions=function(t){void 0!==t.scale&&(this.options.scale=t.scale)},s.prototype.handleStart=function(t){for(var i=0;i<t.changedTouches.length;i++){var e=t.changedTouches[i];this.touchAId?this.touchBId||(this.touchBId=e.identifier,this.touchB=e,this.posB=[e.pageX,e.pageY],this.timestampB=Date.now(),this._startUpdate()):(this.touchAId=e.identifier,this.touchA=e,this.posA=[e.pageX,e.pageY],this.timestampA=Date.now())}},s.prototype.handleMove=function(t){if(this.touchAId&&this.touchBId){for(var i,e=this.timestampA,s=this.timestampB,o=0;o<t.changedTouches.length;o++){var n=t.changedTouches[o];n.identifier==this.touchAId?(this.touchA=n,this.posA=[n.pageX,n.pageY],this.timestampA=Date.now(),i=this.timestampA-e):n.identifier==this.touchBId&&(this.touchB=n,this.posB=[n.pageX,n.pageY],this.timestampB=Date.now(),i=this.timestampB-s)}i&&this._moveUpdate(i)}},s.prototype.handleEnd=function(t){for(var i=this.targetGet(),e=this.options.scale,s=0;s<t.changedTouches.length;s++){var o=t.changedTouches[s];(o.identifier==this.touchAId||o.identifier==this.touchBId)&&(this.touchAId&&this.touchBId&&this.output.emit("end",{position:i,velocity:e*this._vel,touches:[this.touchA,this.touchB],angle:this._angle,coordinates:[this.posA,this.posB]}),this.touchAId=void 0,this.touchBId=void 0)}},e.exports=s}),define("famous-sync/PinchSync",["require","exports","module","./TwoFingerSync"],function(t,i,e){function s(t,i){o.call(this,t,i),this.options.pinchDistance=t.pinchDistance?t.pinchDistance:100,this._dist=void 0}var o=t("./TwoFingerSync");s.prototype=Object.create(o.prototype),s.prototype._startUpdate=function(){this._customTargetGet||(this._relativePosition=0),this._startDistance=o._calcDist(this.posA,this.posB),this._velocity=0,this._lastDistance=this._startDistance,this.output.emit("start",{count:event.touches.length,touches:[this.touchA,this.touchB],distance:this._startDistance})},s.prototype._moveUpdate=function(t){var i=o._calcDist(this.posA,this.posB),e=i-this._lastDistance,s=e/t,n=this.targetGet(),r=this.options.scale;this._velocity=r*s;var a=n+r*(i-this._startDistance),h=a/this.options.pinchDistance;this.output.emit("update",{position:a,velocity:this._velocity,touches:[this.touchA,this.touchB],distance:i,pinchAmount:h}),this._lastDistance=i,this._customTargetGet||(this._relativePosition=n)},e.exports=s}),define("famous-sync/RotateSync",["require","exports","module","./TwoFingerSync"],function(t,i,e){function s(t,i){n.call(this,t,i),this._angle=void 0}function o(t,i){var e=i[0]-t[0],s=i[1]-t[1];return Math.atan2(s,e)}var n=t("./TwoFingerSync");s.prototype=Object.create(n.prototype),s.prototype._startUpdate=function(){this._customTargetGet||(this._relativePosition=0),this._angle=o(this.posA,this.posB),this._vel=0,this.output.emit("start",{count:event.touches.length,touches:[this.touchA,this.touchB],angle:this._angle})},s.prototype._moveUpdate=function(t){var i=o(this.posA,this.posB),e=i-this._angle,s=e/t,n=this.targetGet(),r=this.options.scale;this.output.emit("update",{position:n+r*e,velocity:r*s,touches:[this.touchA,this.touchB],angle:i}),this._angle=i,this._vel=s,this._customTargetGet||(this._relativePosition=n)},e.exports=s}),define("famous-sync/ScaleSync",["require","exports","module","./TwoFingerSync"],function(t,i,e){function s(t,i){n.call(this,t,i),this._startDist=void 0,this._prevScale=void 0,this.input.on("pipe",o.bind(this))}function o(){this.touchAId=void 0,this.touchBId=void 0}var n=t("./TwoFingerSync");s.prototype=Object.create(n.prototype),s.prototype._startUpdate=function(){this._customTargetGet||(this._relativePosition=0),this._prevScale=1,this._startDist=n._calcDist(this.posA,this.posB),this._vel=0,this.output.emit("start",{count:event.touches.length,touches:[this.touchA,this.touchB],distance:this._startDist})},s.prototype._moveUpdate=function(t){var i=n._calcDist(this.posA,this.posB),e=i/this._startDist,s=e-this._prevScale,o=s/t,r=this.targetGet(),a=this.options.scale,h=r+a*s;this.output.emit("update",{position:h,velocity:a*o,touches:[this.touchA,this.touchB],distance:i}),this._prevScale=e,this._vel=o,this._customTargetGet||(this._relativePosition=h)},e.exports=s}),define("famous-sync/CustomSync",["require","exports","module","famous/EventHandler","famous/Utility","./MouseSync","./PinchSync","./RotateSync","./ScaleSync","./ScrollSync","./TouchSync","./TwoFingerSync"],function(t,i,e){function s(t,i){this._handlers=[],this.targetGet,this._eventsBound=!1,this.eventInput=new h,this.eventOutput=new h,h.setInputHandler(this,this.eventInput),h.setOutputHandler(this,this.eventOutput),this.setTargetGet(i),this.setClasses(t)}function o(){for(var t=0;t<this._handlers.length;t++)this.eventInput.unpipe(this._handlers[t]),this._handlers[t].unpipe(this.eventOutput);
this._eventsBound=!1}function n(){for(var t=0;t<this._handlers.length;t++)this.eventInput.pipe(this._handlers[t]),this._handlers[t].pipe(this.eventOutput);this._eventsBound=!0}function r(t){var i=g[t];void 0==i&&console.warn("no such sync class");var e=new i;this._handlers.push(e)}function a(t){var i=g[t.type],e=t.options||{};void 0==i&&console.warn("no such sync class");var s=new i(e,this.targetGet);this._handlers.push(s)}var h=t("famous/EventHandler");t("famous/Utility");var u=t("./MouseSync"),p=t("./PinchSync"),c=t("./RotateSync"),l=t("./ScaleSync"),f=t("./ScrollSync"),d=t("./TouchSync"),m=t("./TwoFingerSync"),g={Mouse:u,Pinch:p,Rotate:c,Scale:l,Scroll:f,Touch:d,TwoFinger:m};s.prototype.setTargetGet=function(t){return this.targetGet=t,this},s.prototype.setHandler=function(t){h.setInputHandler(t,this.eventInput),h.setOutputHandler(t,this.eventOutput)},s.prototype.bindThis=function(t){this.eventOutput.bindThis(t)},s.prototype.setClasses=function(t){this._handlers&&o.call(this);for(var i=0;i<t.length;i++){var e=t[i];"string"==typeof e?r.call(this,e):a.call(this,e)}return n.call(this),this},s.prototype.setActive=function(){this._eventsBound||n.call(this)},s.prototype.setInactive=function(){this._eventsBound&&o.call(this)},e.exports=s}),define("lib/text",["module"],function(t){var i,e,s,o,n=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],r=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,a=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,h="undefined"!=typeof location&&location.href,u=h&&location.protocol&&location.protocol.replace(/\:/,""),p=h&&location.hostname,c=h&&(location.port||void 0),l={},f=t.config&&t.config()||{};return i={version:"2.0.7",strip:function(t){if(t){t=t.replace(r,"");var i=t.match(a);i&&(t=i[1])}else t="";return t},jsEscape:function(t){return t.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:f.createXhr||function(){var t,i,e;if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;if("undefined"!=typeof ActiveXObject)for(i=0;3>i;i+=1){e=n[i];try{t=new ActiveXObject(e)}catch(s){}if(t){n=[e];break}}return t},parseName:function(t){var i,e,s,o=!1,n=t.indexOf("."),r=0===t.indexOf("./")||0===t.indexOf("../");return-1!==n&&(!r||n>1)?(i=t.substring(0,n),e=t.substring(n+1,t.length)):i=t,s=e||i,n=s.indexOf("!"),-1!==n&&(o="strip"===s.substring(n+1),s=s.substring(0,n),e?e=s:i=s),{moduleName:i,ext:e,strip:o}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(t,e,s,o){var n,r,a,h=i.xdRegExp.exec(t);return h?(n=h[2],r=h[3],r=r.split(":"),a=r[1],r=r[0],!(n&&n!==e||r&&r.toLowerCase()!==s.toLowerCase()||(a||r)&&a!==o)):!0},finishLoad:function(t,e,s,o){s=e?i.strip(s):s,f.isBuild&&(l[t]=s),o(s)},load:function(t,e,s,o){if(o.isBuild&&!o.inlineText)return s(),void 0;f.isBuild=o.isBuild;var n=i.parseName(t),r=n.moduleName+(n.ext?"."+n.ext:""),a=e.toUrl(r),l=f.useXhr||i.useXhr;!h||l(a,u,p,c)?i.get(a,function(e){i.finishLoad(t,n.strip,e,s)},function(t){s.error&&s.error(t)}):e([r],function(t){i.finishLoad(n.moduleName+"."+n.ext,n.strip,t,s)})},write:function(t,e,s){if(l.hasOwnProperty(e)){var o=i.jsEscape(l[e]);s.asModule(t+"!"+e,"define(function () { return '"+o+"';});\n")}},writeFile:function(t,e,s,o,n){var r=i.parseName(e),a=r.ext?"."+r.ext:"",h=r.moduleName+a,u=s.toUrl(r.moduleName+a)+".js";i.load(h,s,function(){var e=function(t){return o(u,t)};e.asModule=function(t,i){return o.asModule(t,u,i)},i.write(t,h,e,n)},n)}},"node"===f.env||!f.env&&"undefined"!=typeof process&&process.versions&&process.versions.node?(e=require.nodeRequire("fs"),i.get=function(t,i,s){try{var o=e.readFileSync(t,"utf8");0===o.indexOf("")&&(o=o.substring(1)),i(o)}catch(n){s(n)}}):"xhr"===f.env||!f.env&&i.createXhr()?i.get=function(t,e,s,o){var n,r=i.createXhr();if(r.open("GET",t,!0),o)for(n in o)o.hasOwnProperty(n)&&r.setRequestHeader(n.toLowerCase(),o[n]);f.onXhr&&f.onXhr(r,t),r.onreadystatechange=function(){var i,o;4===r.readyState&&(i=r.status,i>399&&600>i?(o=new Error(t+" HTTP status: "+i),o.xhr=r,s(o)):e(r.responseText),f.onXhrComplete&&f.onXhrComplete(r,t))},r.send(null)}:"rhino"===f.env||!f.env&&"undefined"!=typeof Packages&&"undefined"!=typeof java?i.get=function(t,i){var e,s,o="utf-8",n=new java.io.File(t),r=java.lang.System.getProperty("line.separator"),a=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(n),o)),h="";try{for(e=new java.lang.StringBuffer,s=a.readLine(),s&&s.length()&&65279===s.charAt(0)&&(s=s.substring(1)),null!==s&&e.append(s);null!==(s=a.readLine());)e.append(r),e.append(s);h=String(e.toString())}finally{a.close()}i(h)}:("xpconnect"===f.env||!f.env&&"undefined"!=typeof Components&&Components.classes&&Components.interfaces)&&(s=Components.classes,o=Components.interfaces,Components.utils["import"]("resource://gre/modules/FileUtils.jsm"),i.get=function(t,i){var e,n,r={},a=new FileUtils.File(t);try{e=s["@mozilla.org/network/file-input-stream;1"].createInstance(o.nsIFileInputStream),e.init(a,1,0,!1),n=s["@mozilla.org/intl/converter-input-stream;1"].createInstance(o.nsIConverterInputStream),n.init(e,"utf-8",e.available(),o.nsIConverterInputStream.DEFAULT_REPLACEMENT_CHARACTER),n.readString(e.available(),r),n.close(),e.close(),i(r.value)}catch(h){throw new Error((a&&a.path||"")+": "+h)}}),i}),define("lib/text!app/templates/Alarm",[],function(){return'<div>\n  <div class="alarm-name left" style="padding-left:{{paddingLeft}}px">\n      {{alarm}}\n  </div>\n  <div class="alarm-time right medium" style="padding-right:{{paddingRight}}px">\n      {{time}} <span style="font-size: 12px;" class="thin">{{ampm}}</span>\n  </div>\n</div> \n'}),define("lib/text!app/templates/CustomAlarm",[],function(){return'<div class="alarm-container left" style="padding-left:{{paddingLeft}}px; \n	padding-right:{{paddingRight}}px; padding-top:{{paddingTop}}px">\n  <div> \n    <div class=\'alarm-name\'>\n      {{alarm}}\n    </div>\n    <div class=\'alarm-time medium\'>\n      {{time}} <span style="font-size: 12px;" class="thin">{{ampm}}</span>  \n    </div>\n  </div>\n  <div class="clear" style="padding-top:2px"> \n    {{#each days}}\n  		<div class="right padl5"><b style="font-size: 12px">{{this}}</b></div>\n  	{{/each}}    \n  </div>\n<div>\n'}),define("app/widgets/CustomAlarmView",["require","exports","module","famous/View","famous/Matrix","famous/Surface","famous/Engine","famous/RenderNode","famous/Modifier","famous/TweenTransition","famous-utils/Utils","famous-sync/CustomSync","famous-animation/Easing","famous-animation/Timer","app/scenes/BackgroundScene","lib/text!app/templates/Alarm","lib/text!app/templates/CustomAlarm","app/data/Alarm","app/data/RiseData"],function(t,i,e){function s(t,i){o.apply(this,arguments),this.backgrounds=m,this.alarm=i,this.timer=new d,this.touchTime=-1,this.direction=s.DIRECTION.UNKNOWN,this.posX=0,this.startPosX=0,this.deleteAlarm=!1,this.toggleAlarm=!1,this.yScale=new p,this.yScale.set(this.options.cellSize),this.content=this.getHTMLContent(),this.setupSurfaces(),this.setupActiveIndicator(),this.events(),this.updateSurfaces(!1),this.updateIndicators()}var o=t("famous/View"),n=t("famous/Matrix"),r=t("famous/Surface"),a=t("famous/Engine"),h=t("famous/RenderNode"),u=t("famous/Modifier"),p=t("famous/TweenTransition"),c=t("famous-utils/Utils"),l=t("famous-sync/CustomSync"),f=t("famous-animation/Easing"),d=t("famous-animation/Timer"),m=t("app/scenes/BackgroundScene"),g=t("lib/text!app/templates/Alarm"),v=t("lib/text!app/templates/CustomAlarm"),y=t("app/data/Alarm"),x=t("app/data/RiseData");s.prototype=Object.create(o.prototype),s.prototype.constructor=s,s.DIRECTION={UNKNOWN:-1,RIGHT:0,LEFT:1},s.DEFAULT_OPTIONS={padding:16,cellSize:64,longPressDuration:1e3,swipeBackTransition:{curve:"outBounceNorm",duration:300},alarmStateTransition:{curve:"inOutBackNorm",duration:600},indicatorPopTransition:{curve:"outQuadNorm",duration:300},indicatorOpacityTransition:{curve:"inOutExpoNorm",duration:300},backSurfaceProperties:{backgroundColor:"#252525","border-color":"#2c2c2c","border-width":"2px","border-style":"solid","font-family":"Avenir Next W10 Thin",color:"#939393","font-size":"16px"},highlightSurfaceProperties:{backgroundColor:"#2f2f2f","border-color":"#2c2c2c","border-width":"2px","border-style":"solid","font-family":"Avenir Next W10 Thin","font-size":"16px"},deleteSurfaceProperties:{backgroundColor:"#5a2d2d","border-color":"#2c2c2c","border-width":"2px","border-style":"solid","font-family":"Avenir Next W10 Thin","font-size":"16px"}},s.prototype.getHTMLContent=function(){if(this.isQuickAlarm=this.alarm.get("type")===y.TYPE.QUICK?!0:!1,this.isQuickAlarm){var t=Handlebars.compile(g);return t({alarm:this.alarm.get("name"),time:moment(this.alarm.get("time")).format("h:mm"),ampm:moment(this.alarm.get("time")).format("A"),paddingLeft:this.options.padding,paddingRight:this.options.padding})}var t=Handlebars.compile(v),i=this.parseDays(this.alarm.get("days"));return t({alarm:this.alarm.get("name"),time:moment(this.alarm.get("time")).format("h:mm"),ampm:moment(this.alarm.get("time")).format("A"),days:i,paddingLeft:this.options.padding,paddingRight:this.options.padding,paddingTop:this.options.padding-2})},s.prototype.parseDays=function(t){var i=t.reverse(),e=[];if(2===i.length&&-1!==i.indexOf(5)&&-1!==i.indexOf(6))return["WEEKEND"];if(5===i.length&&-1!==i.indexOf(0)&&-1!==i.indexOf(1)&&-1!==i.indexOf(2)&&-1!==i.indexOf(3)&&-1!==i.indexOf(4))return["WEEKDAYS"];if(7===i.length)return["EVERYDAY"];for(var s=0;s<i.length;s++)e.push(y.DAYS[i[s]]);return e},s.prototype.setupSurfaces=function(){var t={"border-radius":this.options.padding/1.5+"px"};this.isQuickAlarm&&(t["line-height"]=this.options.cellSize+"px");var i=[c.getWidth()-2*this.options.padding,this.options.cellSize];this.backSurface=new r({content:this.content,properties:this.options.backSurfaceProperties,size:i}),this.backSurface.setProperties(t),this.backSurfaceMod=new u,this.highlightSurface=new r({content:this.content,properties:this.options.highlightSurfaceProperties,size:i}),this.highlightSurface.setProperties(t),this.highlightSurface.setProperties({color:this.backgrounds.getActiveTextColor(this.alarm)}),this.highlightSurfaceMod=new u,this.deleteSurface=new r({content:this.content,properties:this.options.deleteSurfaceProperties,size:i}),this.deleteSurface.setProperties(t),this.deleteSurface.setProperties({color:"#f94c4c"}),this.deleteSurfaceMod=new u,this.surfaces=new h,this.surfacesMod=new u,this.surfaces.add(this.backSurfaceMod).link(this.backSurface),this.surfaces.add(this.highlightSurfaceMod).link(this.highlightSurface),this.surfaces.add(this.deleteSurfaceMod).link(this.deleteSurface),this.node.add(this.surfacesMod).link(this.surfaces)},s.prototype.resize=function(){var t=[c.getWidth()-2*this.options.padding,this.options.cellSize];this.backSurface.setSize(t),this.highlightSurface.setSize(t),this.deleteSurface.setSize(t),this.indicatorsEndPosition=.5*c.getWidth()+this.options.padding,this.indicatorsStartPosition=this.indicatorsEndPosition+this.options.padding,this.indicatorsDeltaPosition=this.indicatorsEndPosition-this.indicatorsStartPosition,this.indicatorsMod.setTransform(n.translate(this.indicatorsStartPosition,0,0))},s.prototype.updateSurfacesContent=function(){this.content=this.getHTMLContent(),this.backSurface.setContent(this.content),this.highlightSurface.setContent(this.content),this.deleteSurface.setContent(this.content)},s.prototype.setupActiveIndicator=function(){var t=2/3*this.options.cellSize,i=[.5,.5],e=n.translate(0,(this.options.cellSize-t)/2,0),s=this.backgrounds.getActiveTextColor(this.alarm),o=t+"px";this.indicatorSize=[t,t],this.indicatorsEndPosition=.5*c.getWidth()+this.options.padding,this.indicatorsStartPosition=this.indicatorsEndPosition+this.options.padding,this.indicatorsDeltaPosition=this.indicatorsEndPosition-this.indicatorsStartPosition,this.indicatorsStartOpacity=.25,this.indicatorsEndOpacity=1,this.indicatorsPopScale=1.125,this.onIndicator=new r({content:"ON",properties:{"padding-top":"1px",color:"#232323",backgroundColor:s,"border-radius":o,"line-height":o,"text-align":"center"},size:this.indicatorSize}),this.onIndicatorMod=new u({origin:i}),this.offIndicator=new r({content:"OFF",properties:{"padding-top":"1px",color:s,"border-style":"solid","border-width":"1px","border-color":s,"border-radius":o,"line-height":o,"text-align":"center"},size:this.indicatorSize}),this.offIndicatorMod=new u({origin:i}),this.deleteIndicator=new r({content:'<img src="img/trash.svg" style="width:100%; height:100%"></img>',properties:{backgroundColor:"#ff4d4d","border-radius":o},size:this.indicatorSize}),this.deleteIndicatorMod=new u({origin:i}),this.indicators=new h,this.indicatorsPopMod=new u({origin:[.5,.5]}),this.indicatorsMod=new u({size:this.indicatorSize,transform:n.translate(this.indicatorsStartPosition,0,0),opacity:this.indicatorsStartOpacity}),this.indicators.add(this.onIndicatorMod).link(this.onIndicator),this.indicators.add(this.offIndicatorMod).link(this.offIndicator),this.indicators.add(this.deleteIndicatorMod).link(this.deleteIndicator),this.surfaces.add(new u({transform:e})).link(this.indicatorsMod).link(this.indicatorsPopMod).link(this.indicators)},s.prototype.events=function(){this.callbacks={},this.bindUpdate(),this.sync=new l(["Mouse","Touch"]),this.sync.bindThis(this),this.sync.pipe(this.eventInput),this.backSurface.pipe(this.sync),this.highlightSurface.pipe(this.sync),this.deleteSurface.pipe(this.sync),this.eventInput.on("start",this.touchStart.bind(this)),this.eventInput.on("update",this.touchMove.bind(this)),this.eventInput.on("end",this.touchEnd.bind(this)),this.alarm.on("change:days",this.updateSurfacesContent.bind(this)),this.alarm.on("change:time",this.updateSurfacesContent.bind(this)),this.alarm.on("change:name",this.updateSurfacesContent.bind(this)),this.alarm.on("change:active",this.updateSurfaces.bind(this,!0)),a.on("resize",this.resize.bind(this))},s.prototype.update=function(){this.isQuickAlarm===!1&&this.touched===!0&&this.timer.getTime()-this.touchTime>this.options.longPressDuration&&(this.unbindUpdate(),this.eventOutput.emit("edit"),this.touched=!1)},s.prototype.touchStart=function(t){this.startPosX=t.coordinate[0],this.updateIndicators(),this.touched=!0,this.touchTime=this.timer.getTime()},s.prototype.touchMove=function(t){this.touched=!1;var i=t.coordinate[0],e=.1,o=1-e,r=.15,a=c.getWidth()*r,h=Math.abs(this.posX);o*=h>a?f.inQuadNorm(c.map(h-a,0,a,1,0,!0)):1;var u=i-this.startPosX;this.direction===s.DIRECTION.UNKNOWN&&i!==this.startPosX&&(this.direction=i>this.startPosX?s.DIRECTION.RIGHT:s.DIRECTION.LEFT,this.setIndicatorStartPosition()),this.toggleAlarm===!1&&h>a&&(this.toggleAlarm=!0,this.toggleActive(),this.popIndicator(!0)),this.isQuickAlarm===!1&&h>=2*a&&this.deleteAlarm===!1&&(this.deleteAlarm=!0,this.activateDeleteMode(!0)),this.posX+=(e+o)*u;var p=f.inQuad(c.map(h,0,a,0,1,!0),this.indicatorsStartPosition,this.indicatorsDeltaPosition,1);this.indicatorsMod.setTransform(n.translate(p,0,0)),this.surfacesMod.setTransform(n.translate(this.posX,0,0)),this.startPosX=i},s.prototype.touchEnd=function(t){this.touched===!0&&this.startPosX===t.coordinate[0]&&(this.touched=!1,this.unbindUpdate(),this.eventOutput.emit("click")),this.touched=!1,this.direction=s.DIRECTION.UNKNOWN,this.posX=0,this.toggleAlarm=!1;var i;this.deleteAlarm===!0&&(this.deactivateDeleteMode(!0),i=this.destroy.bind(this)),this.indicatorsMod.setTransform(n.translate(this.indicatorsStartPosition,0,0),this.options.swipeBackTransition,function(){this.indicatorsMod.setOpacity(this.indicatorsStartOpacity)}.bind(this)),this.surfacesMod.setTransform(n.identity,this.options.swipeBackTransition,i)},s.prototype.setIndicatorStartPosition=function(){this.direction===s.DIRECTION.RIGHT?(this.indicatorsEndPosition=.5*-c.getWidth()-this.options.padding,this.indicatorsStartPosition=this.indicatorsEndPosition-this.options.padding,this.indicatorsDeltaPosition=this.indicatorsEndPosition-this.indicatorsStartPosition):(this.indicatorsEndPosition=.5*c.getWidth()+this.options.padding,this.indicatorsStartPosition=this.indicatorsEndPosition+this.options.padding,this.indicatorsDeltaPosition=this.indicatorsEndPosition-this.indicatorsStartPosition)},s.prototype.updateIndicators=function(){this.alarm.get("active")?(this.onIndicatorMod.setOpacity(0),this.offIndicatorMod.setOpacity(1),this.deleteIndicatorMod.setOpacity(0)):(this.onIndicatorMod.setOpacity(1),this.offIndicatorMod.setOpacity(0),this.deleteIndicatorMod.setOpacity(0))},s.prototype.toggleActive=function(){this.alarm.set("active",!this.alarm.get("active")),x.save()},s.prototype.popIndicator=function(t){var i=t?this.options.indicatorOpacityTransition:void 0,e=t?this.options.indicatorPopTransition:void 0;this.indicatorsMod.setOpacity(this.indicatorsEndOpacity,i),this.indicatorsPopMod.setTransform(n.scale(this.indicatorsPopScale,this.indicatorsPopScale,1),e,function(t){this.indicatorsPopMod.setTransform(n.identity,t)}.bind(this,e))},s.prototype.updateSurfaces=function(t){this.alarm.get("active")?this.activateAlarm(t):this.deactivateAlarm(t)},s.prototype.activateAlarm=function(t){var i=t?this.options.alarmStateTransition:void 0;this.haltAnimations(),this.backSurfaceMod.setOpacity(0,i),this.highlightSurfaceMod.setOpacity(1,i),this.deleteSurfaceMod.setOpacity(0)},s.prototype.deactivateAlarm=function(t){var i=t?this.options.alarmStateTransition:void 0;this.haltAnimations(),this.backSurfaceMod.setOpacity(1,i),this.highlightSurfaceMod.setOpacity(0,i),this.deleteSurfaceMod.setOpacity(0)},s.prototype.activateDeleteMode=function(t){var i=t?this.options.alarmStateTransition:void 0,e=t?this.options.indicatorOpacityTransition:void 0;this.haltAnimations(),this.deleteSurfaceMod.setOpacity(1,i),this.backSurfaceMod.setOpacity(0,i),this.highlightSurfaceMod.setOpacity(0,i),this.onIndicatorMod.setOpacity(0,e),this.offIndicatorMod.setOpacity(0,e),this.deleteIndicatorMod.setOpacity(1,e)},s.prototype.deactivateDeleteMode=function(t){var i=t?this.options.alarmStateTransition:void 0,e=t?this.options.indicatorOpacityTransition:void 0;this.haltAnimations(),this.deleteSurfaceMod.setOpacity(0,i),this.alarm.get("active")?(this.backSurfaceMod.setOpacity(0,i),this.highlightSurfaceMod.setOpacity(1,i),this.offIndicatorMod.setOpacity(0,e)):(this.onIndicatorMod.setOpacity(0,e),this.backSurfaceMod.setOpacity(1,i),this.highlightSurfaceMod.setOpacity(0,i)),this.deleteIndicatorMod.setOpacity(0,e)},s.prototype.haltAnimations=function(){this.deleteSurfaceMod.halt(),this.backSurfaceMod.halt(),this.highlightSurfaceMod.halt()},s.prototype.destroy=function(){this.unbindUpdate(),this.eventOutput.emit("delete")},s.prototype.bindUpdate=function(){this.callbacks.update=this.update.bind(this),a.on("prerender",this.callbacks.update)},s.prototype.unbindUpdate=function(){a.unbind("prerender",this.callbacks.update),this.callbacks.update=void 0},s.prototype.getSize=function(){return this.backSurface.getSize()},s.prototype.getAlarm=function(){return this.alarm},e.exports=s}),define("app/scenes/AlarmScene",["require","exports","module","famous/Surface","famous/ImageSurface","famous/RenderNode","famous/Matrix","famous/Modifier","famous/Engine","famous/Transitionable","famous-utils/Utils","app/SceneTransitions","app/SceneController","famous-scene/Scene","app/data/Alarm","app/data/RiseData","famous-views/Scrollview","app/scenes/BackgroundScene","app/widgets/AlarmButton","app/widgets/CustomAlarmView"],function(t,i,e){function s(){d.apply(this,arguments),this.deleteNode=void 0,this.deleteNodeIndex=-1,this.removingAlarm=!1,this.parseAlarms(),this.setupBackgrounds(),this.setupBackSurface(),this.setupAlarmButton(),this.setupDoneButton(),this.setupScrollView(),this.events()}function o(t,i,e){i.setOpacity(0,this.options.fadeTransition,n.bind(this,t,i,e))}function n(t,i,e){this.removingAlarm=!0;var s=new c(e.getSize()[1]);s.set(-this.options.itemSpacing,this.options.scaleTransition,this.removeCustomAlarm.bind(this,t,i,e)),e.getSize=function(){return[0,s.get()]}.bind(e)}var r=t("famous/Surface");t("famous/ImageSurface");var a=t("famous/RenderNode"),h=t("famous/Matrix"),u=t("famous/Modifier"),p=t("famous/Engine"),c=t("famous/Transitionable"),l=t("famous-utils/Utils");t("app/SceneTransitions");var f=t("app/SceneController"),d=t("famous-scene/Scene"),m=t("app/data/Alarm"),g=t("app/data/RiseData"),v=t("famous-views/Scrollview"),y=t("app/scenes/BackgroundScene"),x=t("app/widgets/AlarmButton"),S=t("app/widgets/CustomAlarmView");s.prototype=Object.create(d.prototype),s.prototype.constructor=s,s.DEFAULT_OPTIONS={spacerHeight:2,padding:12,itemSpacing:16,cellSize:64,plusSize:18,resizeTransition:{curve:"inOutExpoNorm",duration:600},backSurfaceTransitionIn:{curve:"inOutExpoNorm",duration:600},buttonTransitionIn:{curve:"inOutElasticNorm",duration:1e3},scrollviewTransitionIn:{curve:"outBackNorm",duration:500},fadeTransition:{curve:"inOutQuadNorm",duration:200},scaleTransition:{curve:"inOutQuadNorm",duration:200},scrollviewTransitionOut:{curve:"outQuadNorm",duration:300},transitionOut:{curve:"inOutQuadNorm",duration:600},plusEventBlockerSize:60},s.prototype.parseAlarms=function(){this.quickAlarm,this.customAlarms=[];for(var t=g.getAlarmModels(),i=0;i<t.length;i++){var e=t[i];e.get("type")===m.TYPE.QUICK?this.quickAlarm=e:this.customAlarms.push(e)}},s.prototype.update=function(){this.removingAlarm===!0&&(this.scrollViewContentHeight=this.getScrollViewContentHeight(),-1!==this.deleteNodeIndex&&(this.scrollviewNodes.splice(this.deleteNodeIndex,1),this.deleteNode=void 0,this.deleteNodeIndex=-1,this.removingAlarm=!1)),this.updateButtonBackgrounds()},s.prototype.events=function(){this.doneButton.on("click",function(){f.setScene("Home")}.bind(this)),this.plusEventBlocker.on("click",function(){g.setCurrentAlarm(void 0),f.setScene("NewAlarm")}.bind(this))},s.prototype.updateButtonBackgrounds=function(){var t=this.scrollview.getCurrentNode().index,i=this.getScrollviewAbsolutePosition(t)+this.scrollview.getPosition(),e=this.scrollViewContentHeight,s=this.options.itemSpacing,o=this.doneButtonY,n=-i+e,r=o-n;i>0?s>i?(this.alarmButton.setBackOpacity(0),this.alarmButton.setHighlightOpacity(i/s)):(this.alarmButton.setHighlightOpacity(0),this.alarmButton.setBackOpacity(1)):(this.alarmButton.setHighlightOpacity(0),this.alarmButton.setBackOpacity(0)),r>0?s>r?(this.doneButton.setBackOpacity(0),this.doneButton.setHighlightOpacity(1-r/s)):(this.doneButton.setBackOpacity(0),this.doneButton.setHighlightOpacity(0)):(this.doneButton.setBackOpacity(1),this.doneButton.setHighlightOpacity(0))},s.prototype.setupBackgrounds=function(){this.backgrounds=y,this.backgroundsMod=new u({transform:h.translate(0,0,-1)}),this.node.add(this.backgroundsMod).link(this.backgrounds)},s.prototype.setupBackSurface=function(){this.backSurface=new r({properties:{backgroundColor:"#232323"},size:[l.getWidth(),l.getHeight()]}),this.backSurfaceMod=new u({transform:h.translate(0,-l.getHeight(),-1)}),this.node.add(this.backSurfaceMod).link(this.backSurface)},s.prototype.setupAlarmButton=function(){this.alarmButton=new x({title:"Alarms",backSurfaceOptions:{"border-top":"none","border-bottom":"solid"}}),this.alarmButtonMod=new u({transform:h.translate(0,-this.alarmButton.getHeight(),.5)}),this.setupPlusButton(),this.alarmNode=new a,this.alarmNode.add(this.plusSurfaceMod).link(this.plusSurface),this.alarmNode.add(this.alarmButton),this.alarmNode.add(this.plusEventBlockerMod).link(this.plusEventBlocker),this.node.add(this.alarmButtonMod).link(this.alarmNode)},s.prototype.setupPlusButton=function(){var t=this.options.plusSize,i=2.125,e=(t-i)/2,s='<svg style="fill:'+this.backgrounds.getActiveTextColor()+'">'+'<rect x="'+e+'" width="'+i+'" height="'+t+'"/>'+'<rect y="'+e+'" width="'+t+'" height="'+i+'"/>'+"</svg>";this.plusSurface=new r({content:s,size:[t,t]}),this.plusSurfaceMod=new u({transform:h.translate(l.getWidth()-2*t,t,.5)}),this.plusEventBlocker=new r({size:[this.options.plusEventBlockerSize,this.options.plusEventBlockerSize],properties:{backgroundColor:"red"}}),this.plusEventBlockerMod=new u({opacity:0,transform:h.translate(l.getWidth()-this.options.plusEventBlockerSize,0,1)})},s.prototype.placePlusButton=function(){return this.plusSurfaceMod.setTransform(h.translate(l.getWidth()-2*this.options.plusSize,this.options.plusSize,.5),this.options.resizeTransition),this.plusEventBlockerMod.setTransform(h.translate(l.getWidth()-this.options.plusEventBlockerSize,0,1),this.options.resizeTransition),this},s.prototype.setupDoneButton=function(){this.doneButton=new x({title:"Done",highlightDirection:"top"}),this.doneButtonMod=new u({transform:h.translate(0,l.getHeight(),.5)}),this.doneButton.setTitleColor(this.backgrounds.getActiveTextColor()),this.node.add(this.doneButtonMod).link(this.doneButton)},s.prototype.setupScrollView=function(){this.scrollviewContentHeight=0,this.scrollviewClipSize=l.getHeight()-this.doneButton.getHeight()-this.options.itemSpacing,this.scrollview=new v({itemSpacing:this.options.itemSpacing,clipSize:this.scrollviewClipSize}),this.scrollviewNodes=[],this.scrollviewNodes.push(new r({size:[l.getWidth(),this.options.cellSize]})),this.addAlarm(this.quickAlarm),this.spacer=new r({properties:{backgroundColor:"#2c2c2c"},size:[l.getWidth()-4*this.options.padding,this.options.spacerHeight]});var t=new u({transform:h.translate(2*this.options.padding,0,0)}),i=new a;i.add(t).link(this.spacer),i.getSize=this.spacer.getSize.bind(this.spacer),this.scrollviewNodes.push(i);for(var e=this.customAlarms,s=0;s<e.length;s++)this.addAlarm(e[s]);this.scrollviewMod=new u({transform:h.translate(0,l.getHeight(),-1),opacity:0}),this.scrollview.sequenceFrom(this.scrollviewNodes),p.pipe(this.scrollview),this.node.add(this.scrollviewMod).link(this.scrollview),this.scrollViewContentHeight=this.getScrollViewContentHeight()},s.prototype.addAlarm=function(t){var i=new S({},t),e=new u({origin:[.5,0]}),s=new a;s.add(e).link(i),s.getSize=i.getSize.bind(i),this.scrollviewNodes.push(s),i.on("delete",o.bind(this,i,e,s)),i.on("click",this.switchToCurrentAlarmScene.bind(this,i)),i.on("edit",this.switchToEditAlarmScene.bind(this,i))},s.prototype.switchToEditAlarmScene=function(t){g.setCurrentAlarm(t.getAlarm()),f.setScene("NewAlarm")},s.prototype.switchToCurrentAlarmScene=function(t){g.setCurrentAlarm(t.getAlarm()),f.setScene("Home")},s.prototype.removeCustomAlarm=function(t,i,e){this.deleteNode=e,this.deleteNodeIndex=this.scrollviewNodes.indexOf(this.deleteNode),g.getAlarms().remove(t.getAlarm()),g.save()},s.prototype.getScrollviewAbsolutePosition=function(t){for(var i=0,e=this.options.itemSpacing,s=this.scrollviewNodes,o=0;t>o;o++)i+=s[o].getSize()[1],i+=e;return i},s.prototype.getScrollViewContentHeight=function(){for(var t=0,i=this.options.itemSpacing,e=this.scrollviewNodes,s=0;s<e.length;s++)t+=e[s].getSize()[1],t+=i;return t-=i},s.prototype.resize=function(){this.backSurface.setSize([l.getWidth(),l.getHeight()]),this.placePlusButton(),this.doneButtonY=l.getHeight()-this.doneButton.getHeight(),this.doneButtonMod.setTransform(h.translate(0,this.doneButtonY,.5),this.options.buttonTransitionIn),this.spacer.setSize([l.getWidth()-4*this.options.padding,this.options.spacerHeight])},s.prototype.activate=function(t){this.backSurfaceMod.setTransform(h.translate(0,0,-.5),this.options.backSurfaceTransitionIn,function(){this.scrollviewMod.setTransform(h.translate(0,0,0),this.options.scrollviewTransitionIn),this.scrollviewMod.setOpacity(1,this.options.scrollviewTransitionIn,t)}.bind(this)),this.alarmButtonY=0,this.doneButtonY=l.getHeight()-this.doneButton.getHeight(),this.alarmButtonMod.setTransform(h.translate(0,this.alarmButtonY,.5),this.options.buttonTransitionIn),this.doneButtonMod.setTransform(h.translate(0,this.doneButtonY,.5),this.options.buttonTransitionIn)},s.prototype.deactivate=function(t){this.scrollviewMod.setOpacity(0,this.options.scrollviewTransitionOut),this.alarmButtonMod.setOpacity(0,this.options.transitionOut),this.backSurfaceMod.setOpacity(0,this.options.transitionOut),this.backgroundsMod.setOpacity(0,this.options.transitionOut),this.doneButtonMod.setOpacity(0,this.options.transitionOut),this.plusSurfaceMod.setOpacity(0,this.options.transitionOut,t)},e.exports=s}),define("famous/EventArbiter",["require","exports","module","./EventHandler"],function(t,i,e){function s(t){this.dispatchers={},this.currMode=void 0,this.setMode(t)}var o=t("./EventHandler");s.prototype.setMode=function(t){if(t!=this.currMode){var i=this.currMode;this.dispatchers[this.currMode]&&this.dispatchers[this.currMode].emit("unpipe"),this.currMode=t,this.dispatchers[t]&&this.dispatchers[t].emit("pipe"),this.emit("change",{from:i,to:t})}},s.prototype.forMode=function(t){return this.dispatchers[t]||(this.dispatchers[t]=new o),this.dispatchers[t]},s.prototype.emit=function(t,i){if(void 0==this.currMode)return!1;i||(i={});var e=this.dispatchers[this.currMode];return e?e.emit(t,i):void 0},e.exports=s}),define("app/widgets/TimeUntil",["require","exports","module","famous/Engine","famous/View","famous/Matrix","famous/Surface","famous/Modifier","famous-utils/Utils","famous/Timer"],function(t,i,e){function s(t){this.alarm=t,this._contentListener,this.resetAlarmContent=this._resetAlarmContent.bind(this),this.alarm.on("change:time",r.debounce(this.resetAlarmContent,500)),this.alarm.on("change:active",this.contentTimeout.bind(this)),n.call(this,{size:void 0,content:this.getAlarmContent(),classes:["timeUntil"]})}var o=t("famous/Engine");t("famous/View"),t("famous/Matrix");var n=t("famous/Surface");t("famous/Modifier");var r=t("famous-utils/Utils"),a=t("famous/Timer");s.prototype=Object.create(n.prototype),s.prototype.constructor=s,s.prototype.getAlarmContent=function(){return this.alarm.getTimeStringFromNow()},s.prototype._resetAlarmContent=function(){return this.setContent(this.getAlarmContent())},s.prototype.contentTimeout=function(){this.alarm.get("active")&&!this._contentListener?this._contentListener=a.setInterval(this.resetAlarmContent,6e4):this._contentListener&&(o.unbind("prerender",this._contentListener),this._contentListener=void 0)},e.exports=s}),define("app/widgets/MoveableTimeView",["require","exports","module","famous/View","famous/Matrix","famous/Surface","famous/Modifier","famous-utils/Utils","famous-color/Color","famous-sync/CustomSync","famous/Engine","app/data/TimeHelpers","app/widgets/TimeUntil"],function(t,i,e){function s(t,i,e){n.apply(this,arguments),this.alarm=i,this.parentBG=e,this.timeYMod,this.timeXMod,this.timeScaleMod,this.timeSurface,this.backgroundMod,this.backgroundScaleMod,this.background,this.eventMod,this.eventSurface,this.timeUntil,this.timeUntilMod,this.sync,this._state={alarmActive:this.alarm.get("active"),textColored:!1,timeState:void 0,alarmTimeLength:void 0,relativeTime:void 0,offsetPixelRelative:0,offsetRelativeTime:0,animating:!1},this._calcs={window:[window.innerWidth,window.innerHeight],verticalPadding:void 0,timeSize:void 0},this.initTime().initTimeUntil().initBackground().initEventBlocker().initSync().resize().events().updateTimeColors().placeTime()}function o(){return~~(this.timeSurface.getSize()[1]*this.options.timeFontSize)}var n=t("famous/View"),r=t("famous/Matrix"),a=t("famous/Surface"),h=t("famous/Modifier"),u=t("famous-utils/Utils"),p=t("famous-color/Color"),c=t("famous-sync/CustomSync"),l=t("famous/Engine"),f=t("app/data/TimeHelpers"),d=t("app/widgets/TimeUntil");s.prototype=Object.create(n.prototype),s.prototype.constructor=s,s.TIME_STATE={RIGHT:0,LEFT:1},s.DEFAULT_OPTIONS={verticalPaddingPercentage:.08,horizontalPaddingPercentage:.04,backgroundScaleMatrix:r.scale(1,1.5),backgroundContent:"",backgroundClasses:["moveable-bg"],backgroundProperties:{},timeClasses:[],placeTimeTransition:{method:"spring",period:600,dampingRatio:.8,v:0},syncClasses:["Touch","Mouse"],timeFontSize:.8,timeScaleDownMatrix:r.scale(.5,.5),timeScaleDownTransition:{curve:"inOutBackNorm",duration:750},timeScaleUpTransition:{curve:"inOutBackNorm",duration:750},timeXPositionTransition:{curve:"inOutBackNorm",duration:750},useScroll:!0,scrollOptions:{scale:-.02},timeUntilFontPercentage:.35,placeTimeUntilTransition:{method:"wall",period:800,dampingRatio:.45,v:0},opacityTimeUntilTransition:{curve:"inSineNorm",duration:800},opacityTimeOutTransition:{curve:"inSineNorm",duration:300},backgroundVisibleOpacity:.6,backgroundVisibleTransition:{curve:"inOutBackNorm",duration:750},backgroundHiddenOpacity:0,backgroundHiddenTransition:{curve:"inOutBackNorm",duration:750},backgroundScaleUpTransition:{curve:"inOutBackNorm",duration:750},timeZDepth:1,minColorLightness:35},s.prototype.initTime=function(){return this.timeYMod=new h,this.timeXMod=new h,this.timeScaleMod=new h,this.timeSurface=new a({classes:this.options.timeClasses}),this.node.add(this.timeYMod).link(this.timeXMod).link(this.timeScaleMod).link(this.timeSurface),this
},s.prototype.initBackground=function(){return this.backgroundMod=new h({opacity:0}),this.backgroundScaleMod=new h({transform:this.options.backgroundScaleMatrix}),this.background=new a({classes:this.options.backgroundClasses,content:this.options.backgroundContent,properties:this.options.backgroundProperties}),this.node.add(this.backgroundMod).link(this.backgroundScaleMod).link(this.background),this},s.prototype.initEventBlocker=function(){return this.eventMod=new h({transform:r.translate(0,0,2),opacity:0}),this.eventSurface=new a,this.node.add(this.eventMod).link(this.eventSurface),this},s.prototype.initTimeUntil=function(){return this.timeUntil=new d(this.alarm),this.timeUntilMod=new h({opacity:0}),this.node.add(this.timeUntilMod).link(this.timeUntil),this},s.prototype.initSync=function(){return this.sync=new c(this.options.syncClasses),this.options.useScroll&&(this.windowSync=new c([{type:"Scroll",options:this.options.scrollOptions}])),this},s.prototype.resize=function(){return this._calcs.window=[window.innerWidth,window.innerHeight],this._calcs.verticalPadding=this._calcs.window[1]*this.options.verticalPaddingPercentage,this.resizeTimeSurface().updateTimeContent().resizeBackground().resizeEventBlocker().resizeTimeUntil().checkTimeUntilActivation().placeTime(),this},s.prototype.resizeTimeSurface=function(){return this._calcs.timeSize=[this._calcs.window[0],~~(.1*this._calcs.window[1])],this.timeSurface.setSize(this._calcs.timeSize),this.timeSurface.setProperties({lineHeight:this._calcs.timeSize[1]+"px"}),this},s.prototype.resizeBackground=function(){return this.background.setSize(this._calcs.timeSize),this},s.prototype.resizeEventBlocker=function(){return this.eventSurface.setSize([this._calcs.timeSize[0],2*this._calcs.timeSize[1]]),this},s.prototype.resizeTimeUntil=function(){var t=this._calcs.timeSize;return this.timeUntil.setSize(t),this.timeUntil.setProperties({fontSize:t[1]*this.options.timeUntilFontPercentage+"px"}),this},s.prototype.updateTimeContent=function(){var t=this.alarm.getHourTime(),i=o.call(this);return this.timeSurface.setContent('<span class="left medium" style="font-size:'+i+'px;">'+t[0]+"</span> "+'<span class="left thin" style="font-size:'+.5*i+"px; line-height:"+1.3*this.timeSurface.getSize()[1]+'px">&nbsp;'+t[1]+"</span>"),this},s.prototype.events=function(){return this.eventSurface.pipe(this.sync),this.sync.bindThis(this),this.sync.on("start",this.handleStart),this.sync.on("update",this.handleUpdate),this.sync.on("end",this.handleEnd),this.onAlarmChangeTime=this._onAlarmChangeTime.bind(this),this.alarm.on("change:time",this.onAlarmChangeTime),this.onAlarmChangeActive=this._onAlarmChangeActive.bind(this),this.alarm.on("change:active",this.onAlarmChangeActive),l.on("resize",this.resize.bind(this)),this.options.useScroll&&(l.pipe(this.windowSync),this.windowSync.bindThis(this),this.windowSync.on("start",this.handleStart),this.windowSync.on("update",this.handleUpdate),this.windowSync.on("end",this.handleEnd)),this},s.prototype.unbindEvents=function(){this.alarm.unbind("change:time",this.onAlarmChangeTime),this.alarm.unbind("change:active",this.onAlarmChangeActive)},s.prototype._onAlarmChangeTime=function(){this.placeTime(!0),this.updateTimeContent()},s.prototype._onAlarmChangeActive=function(){this.getAlarmState(),this.placeTime(),this.checkTimeUntilActivation(),this.updateTimeColors()},s.prototype.handleStart=function(t){this.getAlarmState(),1!=this._state.alarmActive&&(t.event.preventDefault(),t.event.stopPropagation(),this._state.animating=!0,this._state.yPos=this.getYPosition(),this.timeScaleDown().backgroundVisible().backgroundScaleDown().checkXPosition(t,!0))},s.prototype.handleUpdate=function(t){1!=this._state.alarmActive&&(t.event.preventDefault(),t.event.stopPropagation(),this.checkXPosition(t,!0).checkYPosition(t))},s.prototype.handleEnd=function(t){1!=this._state.alarmActive&&(t.event&&(t.event.preventDefault(),t.event.stopPropagation()),this.timeScaleUp().backgroundHidden().backgroundScaleUp().timeCenterX(),this._state.timeState=void 0,this.eventOutput.emit("end"),this._state.animating=!1)},s.prototype.getAlarmState=function(){return this._state.alarmActive=this.alarm.get("active"),this},s.prototype.checkXPosition=function(t,i){var e=t.coordinate?t.coordinate[0]:0,o=e>.5*this._calcs.window[0]?s.TIME_STATE.LEFT:s.TIME_STATE.RIGHT,n=this.alarm.getHourTime()[0].length,r=n!==this._state.alarmTimeLength&&this._state.timeState==s.TIME_STATE.RIGHT;return(o!==this._state.timeState||r)&&(this._state.timeState=o,this._state.alarmTimeLength=n,this.animateXPosition(i)),this},s.prototype._getOffsetToCenterOfTime=function(t){var i=r.getTranslate(this.eventMod.getFinalTransform()),e=i[1]+.5*this._calcs.timeSize[1]-t;this._state.differenceToCenter=e},s.prototype.checkYPosition=function(t){this._state.topPadding=this._calcs.verticalPadding,this._state.bottomPadding=this._calcs.window[1]-this._calcs.verticalPadding-1.5*this._calcs.timeSize[1];var i=this._calcs.verticalPadding,e=this._calcs.window[1]-this._calcs.verticalPadding-1.5*this._calcs.timeSize[1],s=t.position[1],o=this._state.yPos+s;return i>o?(this.alarm.get()!==f.formattedNextDayStartTime&&this.alarm.set("time",f.formattedNextDayStartTime),this.eventOutput.emit("extended",o-i)):o>e?(this.alarm.get()!==f.formattedEndTime&&this.alarm.set("time",f.formattedEndTime),this.eventOutput.emit("extended",o-e)):(this.placeTimeInstantly(o),this.updateTimeFromYPosition(this._state.yPos+s)),this},s.prototype.updateTimeFromYPosition=function(t){var i=u.map(t,this._state.topPadding,this._state.bottomPadding,0,f.oneDay,!0);i=this._roundToIncrement(i,f.FIVE_MINUTES),i!==this._state.relativeTime&&(this.alarm.set("time",f.getFormattedTimeToSetTo(i)),this._state.relativeTime=i)},s.prototype._roundToIncrement=function(t,i){return Math.round(t/i)*i},s.prototype.checkTimeUntilActivation=function(){return 1==!this.alarm.get("active")&&this.deactivateTimeUntil(),this},s.prototype.timeScaleDown=function(){return this.timeScaleMod.halt(),this.timeScaleMod.setTransform(r.move(this.options.timeScaleDownMatrix,[0,.25*this.timeSurface.getSize()[1]]),this.options.timeScaleDownTransition),this},s.prototype.timeScaleUp=function(){return this.timeScaleMod.halt(),this.timeScaleMod.setTransform(r.identity,this.options.timeScaleUpTransition),this},s.prototype.backgroundVisible=function(){return this.backgroundMod.halt(),this.backgroundMod.setOpacity(this.options.backgroundVisibleOpacity,this.options.backgroundVisibleTransition),this},s.prototype.backgroundHidden=function(){return this.backgroundMod.halt(),this.backgroundMod.setOpacity(this.options.backgroundHiddenOpacity,this.options.backgroundHiddenTransition),this},s.prototype.backgroundScaleDown=function(){return this.backgroundScaleMod.halt(),this.backgroundScaleMod.setTransform(r.identity,this.options.backgroundScaleUpTransition),this},s.prototype.backgroundScaleUp=function(){return this.backgroundScaleMod.halt(),this.backgroundScaleMod.setTransform(this.options.backgroundScaleMatrix,this.options.backgroundScaleUpTransition),this},s.prototype.activateTimeUntil=function(){if(!this.alarm.get("active"))return this;var t=.33*this._calcs.window[0],i=this._calcs.timeSize[1],e=.5*(this._calcs.window[1]-2*this._calcs.verticalPadding-i)+i;return this.timeUntilMod.halt(),0==this.timeUntilMod.getOpacity()&&this.timeUntilMod.setTransform(r.translate(t,e-.5*i)),this.timeUntilMod.setTransform(r.translate(t,e),this.options.placeTimeUntilTransition),this.timeUntilMod.setOpacity(1,this.options.opacityTimeUntilTransition),this},s.prototype.deactivateTimeUntil=function(){var t=.33*this._calcs.window[0];return this.timeUntilMod.halt(),this.timeUntilMod.setOpacity(0,this.options.opacityTimeOutTransition),this.timeUntilMod.setTransform(r.translate(t,this._calcs.window[1]-2*this._calcs.verticalPadding),this.options.placeTimeUntilTransition),this},s.prototype.animateXPosition=function(t){var i=t?this.options.timeXPositionTransition:void 0,e=o.call(this),n=this.alarm.getHourTime(),a=.25*e*n[0].length+.25*e*n[1].length,h=this._state.timeState==s.TIME_STATE.RIGHT?r.translate(this._calcs.window[0]-this._calcs.window[0]*this.options.horizontalPaddingPercentage-a,0):r.translate(this._calcs.window[0]*this.options.horizontalPaddingPercentage,0);return this.timeXMod.halt(),this.timeXMod.setTransform(h,i),this},s.prototype.placeTime=function(t){return this._state.animating?this:(this._state.alarmActive?this.placeTimeWhileAlarmOn():t?this.placeTimeInstantly():this.placeTimeNormally(),this)},s.prototype.placeTimeNormally=function(){var t=this.getYPosition();return this.timeYMod.halt(),this.timeYMod.setTransform(r.translate(0,t,this.options.timeZDepth),this.options.placeTimeTransition),this.timeXMod.setTransform(r.translate(.33*this._calcs.window[0],0)),this.backgroundMod.halt(),this.backgroundMod.setTransform(r.translate(0,t),this.options.placeTimeTransition),this.eventMod.halt(),this.eventMod.setTransform(r.translate(0,t-.5*this.timeSurface.getSize()[1],2)),this},s.prototype.placeTimeInstantly=function(t){return t=t?t:this.getYPosition(),this.timeYMod.setTransform(r.translate(0,t,this.options.timeZDepth)),this.backgroundMod.setTransform(r.translate(0,t)),this.eventMod.setTransform(r.translate(0,t-.5*this.timeSurface.getSize()[1],2)),this},s.prototype.placeTimeWhileAlarmOn=function(){var t=this._calcs.timeSize[1],i=.5*(this._calcs.window[1]-2*this._calcs.verticalPadding-t);this.timeXMod.setTransform(r.translate(.33*this._calcs.window[0],0)),this.eventMod.halt(),this.eventMod.setTransform(r.translate(0,i)),this.backgroundMod.halt(),this.backgroundMod.setTransform(r.translate(0,i)),this.timeYMod.halt(),this.timeYMod.setTransform(r.translate(0,i,this.options.timeZDepth),this.options.placeTimeTransition,function(){this.activateTimeUntil()}.bind(this))},s.prototype.timeCenterX=function(){this.timeXMod.halt(),this.timeXMod.setTransform(r.translate(.33*this._calcs.window[0],0),this.options.placeTimeTransition)},s.prototype.getYPosition=function(){var t=this.getTimePercentage(),i=u.map(t,0,1,this._calcs.verticalPadding,this._calcs.window[1]-this._calcs.verticalPadding-1.5*this._calcs.timeSize[1],!0);return i},s.prototype.updateTimeColors=function(){if(this.alarm.get("active")){var t=this.parentBG.getActiveColors();console.log(t);var i=new p(t[0]),e=new p(t[1]),s=[i.getLightness(),e.getLightness()];if(s[0]<this.options.minColorLightness||s[1]<this.options.minColorLightness){var o=this.options.minColorLightness-Math.min(s[0],s[1]);i.setLightness(~~(s[0]+o)),e.setLightness(~~(s[1]+o))}var n={background:"-webkit-linear-gradient("+i.get()+", "+e.get()+")",webkitBackgroundClip:"text",webkitTextFillColor:"transparent"}}else var n={color:"white",background:"transparent",webkitBackgroundClip:"border-box",webkitTextFillColor:"white"};return this.timeSurface.setProperties(n),this.timeUntil.setProperties(n),this},s.prototype.getTimePercentage=function(){return f.getTimePercentage(this.alarm.getTime())},s.prototype.getSize=function(){return this.eventSurface.getSize()},s.prototype.getPosition=function(){return r.getTranslate(this.timeYMod.getFinalTransform())},s.prototype.setTimeColor=function(t){return this.timeSurface.setProperties({color:t}),this},e.exports=s}),define("app/widgets/ActivationBackground",["require","exports","module","famous/View","famous/Matrix","famous/Surface","famous/Modifier","famous/Engine"],function(t,i,e){function s(t,i){o.apply(this,arguments),this.alarm=i,this.activationBg,this.activationMod,this.initBackground().events().toggleActivationBackground()}var o=t("famous/View"),n=t("famous/Matrix"),r=t("famous/Surface"),a=t("famous/Modifier"),h=t("famous/Engine");s.prototype=Object.create(o.prototype),s.prototype.constructor=s,s.DEFAULT_OPTIONS={activationColor:"#222526",activationTransition:{curve:"inSineNorm",duration:500}},s.prototype.initBackground=function(){return this.activationBG=new r({properties:{backgroundColor:this.options.activationColor},classes:["activationbg"]}),this.activationMod=new a({transform:n.translate(0,0,-1)}),this.node.add(this.activationMod).link(this.activationBG),this},s.prototype.events=function(){return this.alarm.on("change:active",this.toggleActivationBackground.bind(this)),h.on("resize",this.resize.bind(this)),this},s.prototype.toggleActivationBackground=function(){return this.alarm.get("active")?this.showActivationBG():this.hideActivationBG(),this},s.prototype.showActivationBG=function(){this.activationMod.halt(),this.activationMod.setOpacity(1,this.options.activationTransition)},s.prototype.hideActivationBG=function(){this.activationMod.halt(),this.activationMod.setOpacity(0,this.options.activationTransition)},s.prototype.resize=function(){return this},e.exports=s}),define("app/widgets/CurrentTimeView",["require","exports","module","famous/View","famous/Matrix","famous/Surface","famous/Modifier","famous/Timer"],function(t,i,e){function s(){o.apply(this,arguments),this.time=new n({content:this.getCurrentTimeString(),size:[.25*window.innerWidth,50],properties:{color:"#ffffff",lineHeight:"25px"}}),this.time.pipe(this.eventOutput),r.setInterval(this._updateTimeContent.bind(this),6e4),this.node.add(this.time)}var o=t("famous/View");t("famous/Matrix");var n=t("famous/Surface");t("famous/Modifier");var r=t("famous/Timer");s.prototype=Object.create(o.prototype),s.prototype.constructor=s,s.DEFAULT_OPTIONS={},s.prototype._updateTimeContent=function(){this.time.setContent(this.getCurrentTimeString())},s.prototype.getCurrentTimeString=function(){return'<h5 class="left">'+moment().format("h:mm")+"</h5>"+'<h6 class="left" style="padding: 3px 0 0 4px">'+moment().format("a").toUpperCase()+"</h6>"},s.prototype.getColor=function(){return""},e.exports=s}),define("app/widgets/CurrentTimelineView",["require","exports","module","famous/View","famous/Matrix","famous/Surface","famous/Modifier","famous-utils/Utils","famous/Engine","famous/Timer","app/data/TimeHelpers"],function(t,i,e){function s(){o.apply(this,arguments),this.resize=this._resize.bind(this),this.initTimeline()._resize().events()}var o=t("famous/View"),n=t("famous/Matrix"),r=t("famous/Surface"),a=t("famous/Modifier"),h=t("famous-utils/Utils"),u=t("famous/Engine"),p=t("famous/Timer"),c=t("app/data/TimeHelpers");s.prototype=Object.create(o.prototype),s.prototype.constructor=s,s.DEFAULT_OPTIONS={verticalPaddingPercentage:.08,properties:{color:"#aaaaaa"},size:[60,24]},s.prototype.initTimeline=function(){return this.timeline=new r({properties:this.options.properties,content:this.getCurrentTimeString(),size:this.options.size,classes:["timeline-main"]}),this.timelineMod=new a({origin:[.05,0]}),this.node.add(this.timelineMod).link(this.timeline),this},s.prototype.events=function(){return u.on("resize",h.debounce(this._resize.bind(this,!0),250)),p.setInterval(this.resize,6e4),this},s.prototype._resize=function(t){return this._window=[window.innerWidth,window.innerHeight],this.VERTICAL_PADDING=this._window[1]*this.options.verticalPaddingPercentage,this.placeTimeline(t).updateTimeContent(),this},s.prototype.updateTimeContent=function(){return this.timeline.setContent(this.getCurrentTimeString()),this},s.prototype.placeTimeline=function(t){var i=this.getCurrentTimePercentage(),e=h.map(i,0,1,this.VERTICAL_PADDING,this._window[1]-this.VERTICAL_PADDING-.5*this.timeline.getSize()[1],!0),s=t?{curve:"inOutBackNorm",duration:500}:void 0;return this.timelineMod.halt(),this.timelineMod.setTransform(n.translate(0,e,-1),s),this},s.prototype.getCurrentTimePercentage=function(){return c.getTimePercentage(moment())},s.prototype.getCurrentTimeString=function(){return'<div style="line-height:24px"><h5 class="left">'+moment().format("h:mm")+"&nbsp;"+"</h5>"+'<h6 class="left" style="line-height:28px">'+moment().format("a").toUpperCase()+"</h6></div>"},e.exports=s}),define("lib/text!app/templates/AlarmActivatorButton",[],function(){return'<div style="border-radius: {{ borderRadius }}px; -webkit-border-radius: {{borderRadius}}px; width: 100%; height: 100%; line-height: {{lineHeight}}px; text-align: {{textAlign}}; font-size: {{fontSize}}px; background-color:{{backgroundColor}}; color: {{color}}; {{#if borderColor}} border: {{borderColor}};{{/if}}">\n    {{text}}\n</div>\n'}),define("app/widgets/AlarmActivatorView",["require","exports","module","famous/View","famous/Matrix","famous/Surface","famous/Engine","famous/Modifier","app/SceneController","famous-utils/Utils","famous-color/Color","lib/text!app/templates/AlarmActivatorButton"],function(t,i,e){function s(t,i){n.apply(this,arguments),this.eventInput.bindThis(this),this.eventInput.on("update",this.handleUpdate),this.eventInput.on("end",this.handleEnd),this._isFirst=!0,this.alarm=t,this.parentBG=i,this.leftButtonMod,this.leftButton,this.rightButtonMod,this.rightButton,this.template=Handlebars.compile(f),this.initButtons().resize().events()}function o(t,i,e){var s=this.parentBG.getActiveColors(),o=new l(s[1]),n={borderRadius:~~(.5*i[0]),lineHeight:i[0],textAlign:"center",fontSize:~~(.25*i[0]),text:t};if(e){var r=o.setLightness(60).get();n.backgroundColor="transparent",n.color=r,n.borderColor="1px solid "+r}else n.backgroundColor=s[1],n.color=o.getLightness()>50?o.setLightness(20).get():n.color=o.setLightness(80).get();return this.template(n)}var n=t("famous/View"),r=t("famous/Matrix"),a=t("famous/Surface"),h=t("famous/Engine"),u=t("famous/Modifier"),p=t("app/SceneController"),c=t("famous-utils/Utils"),l=t("famous-color/Color"),f=t("lib/text!app/templates/AlarmActivatorButton");s.prototype=Object.create(n.prototype),s.prototype.constructor=s,s.DEFAULT_OPTIONS={windowScale:.35,touchScaledDown:.1,activationScale:.6,defaultOpacity:.5,defaultScale:r.scale(.5,.5)},s.prototype.events=function(){this.alarm.on("change:active",this.buttonContent.bind(this)),this.alarm.on("change:time",c.debounce(this.buttonContent.bind(this),250)),h.on("resize",c.debounce(this.resize.bind(this),250))},s.prototype.initButtons=function(){return this.leftButtonMod=new u({origin:[0,.5],opacity:this.options.defaultOpacity}),this.leftButton=new a,this.rightButtonMod=new u({origin:[1,.5],opacity:this.options.defaultOpacity}),this.rightButton=new a,this.scaleMod=new u(this.options.defaultScale),this.node.add(this.scaleMod).link(this.leftButtonMod).link(this.leftButton),this.node.add(this.scaleMod).link(this.rightButtonMod).link(this.rightButton),this},s.prototype.handleStart=function(){this.sceneTransform=p.getActiveTransform(),this.sceneTransform.halt(),this.windowScale=window.innerWidth*this.options.windowScale,this.activateDistance=this.windowScale*this.options.activationScale,this.activated=!1,this.leftButtonMod.setOpacity(this.options.defaultOpacity),this.rightButtonMod.setOpacity(this.options.defaultOpacity),this.scaleMod.setTransform(this.options.defaultScale)},s.prototype.handleUpdate=function(t){if(this._isFirst)this._isFirst=!1,this.handleStart(t);else{var i=t.position[0],e=Math.abs(i);e>this.windowScale&&(i=i>0?this.windowScale+(i-this.windowScale)*this.options.touchScaledDown:-this.windowScale+(i+this.windowScale)*this.options.touchScaledDown),this.sceneTransform.setTransform(r.translate(i,0)),!this.activated&&e>this.activateDistance?(this.activate(i),this.activated=!0):this.activated&&e<this.activateDistance&&(this.deactivate(i),this.activated=!1)}},s.prototype.handleEnd=function(){this._isFirst=!0,this.sceneTransform.halt(),this.sceneTransform.setTransform(r.identity,{method:"wall",period:400,dampingRatio:.25},this.checkActivate.bind(this))},s.prototype.checkActivate=function(){if(this.activated){var t=!this.alarm.get("active");this.alarm.set("active",t)}},s.prototype.resize=function(){return this.sizeButtons().buttonContent().placeButtons(),this},s.prototype.sizeButtons=function(){var t=.1*window.innerHeight;return t=[t,t],this.leftButton.setSize(t),this.rightButton.setSize(t),this},s.prototype.buttonContent=function(){var t=this.alarm.get("active"),i=this.leftButton.getSize(),e=1==t?"OFF":"ON";return this.leftButton.setContent(o.call(this,e,i,t)),this.rightButton.setContent(o.call(this,e,i,t)),this},s.prototype.placeButtons=function(){var t=this.leftButton.getSize();this.leftButtonMod.setTransform(r.translate(1.25*-t[0],0)),this.rightButtonMod.setTransform(r.translate(1.25*t[0],0))},s.prototype.activate=function(t){t>0?(this.leftButtonMod.halt(),this.leftButtonMod.setOpacity(1,{curve:"outExpoNorm",duration:400})):(this.leftButtonMod.halt(),this.rightButtonMod.setOpacity(1,{curve:"outExpoNorm",duration:400})),this.scaleMod.halt(),this.scaleMod.setTransform(r.identity,{curve:"outBackNorm",duration:500})},s.prototype.deactivate=function(t){t>0?(this.leftButtonMod.halt(),this.leftButtonMod.setOpacity(this.options.defaultOpacity,{curve:"outExpoNorm",duration:400})):(this.leftButtonMod.halt(),this.rightButtonMod.setOpacity(this.options.defaultOpacity,{curve:"outExpoNorm",duration:400})),this.scaleMod.halt(),this.scaleMod.setTransform(this.options.defaultScale,{curve:"inOutBackNorm",duration:500})},e.exports=s}),define("famous-ui/PanelScrollview",["require","exports","module","famous-views/Scrollview"],function(t,i,e){function s(t){this.panelOpts=Object.create(s.DEFAULT_OPTIONS),t&&this.setPanelOptions(t),n.call(this,this.panelOpts.scrollviewOptions),this.uiItems=[],this._sequenced=!1}function o(t){this.uiItems.push(t),this._sequenced===!1&&(this.sequenceFrom(this.uiItems),this._sequenced=!0),t.setSize&&t.setSize([this.panelOpts.width,this.panelOpts.sliderHeight]),t.pipe&&t.pipe(this)}var n=t("famous-views/Scrollview");s.DEFAULT_OPTIONS={scrollviewOptions:{direction:"y",itemSpacing:8},width:256,sliderHeight:16},s.prototype=Object.create(n.prototype),s.prototype.setPanelOptions=function(t){for(var i in s.DEFAULT_OPTIONS)void 0!==t[i]&&(this.panelOpts[i]=t[i])},s.prototype.reset=function(){this.uiItems=[],this._sequenced=!1},s.prototype.setSize=function(t){this.panelOpts.width=t[0],this.panelOpts.sliderHeight=t[1];for(var i=0;i<this.uiItems.length;i++)this.uiItems[i].setSize([this.panelOpts.width,this.panelOpts.sliderHeight])},s.prototype.add=function(t){if(t instanceof Array)for(var i=0;i<t.length;i++)o.call(this,t[i]);else o.call(this,t)},e.exports=s}),define("famous-ui/Toggles/BoolToggle",["require","exports","module","famous/Surface","famous/Matrix","famous/EventHandler","famous/Modifier","famous/Modifier","famous-animation/Easing","famous/RenderNode","famous-utils/Utils","famous/View"],function(t,i,e){function s(t){t||(t={}),p.apply(this,arguments),this.eventInput.pipe(this.eventOutput),this.value=t.value,this.name=t.name,this.init()}function o(){this.toggle()}function n(){this.transform.halt();var t=this.value?a.scale(1,1,1):a.move(a.scale(1e-4,1e-4,1e-4),[.5*this.options.size[1],.5*this.options.size[1],0]),i=this.value?1:0;this.transform.setTransform(t,this.options.transition),this.transform.setOpacity(i,this.options.transition)}var r=t("famous/Surface"),a=t("famous/Matrix");t("famous/EventHandler"),t("famous/Modifier");var h=t("famous/Modifier"),u=t("famous-animation/Easing");t("famous/RenderNode"),t("famous-utils/Utils");var p=t("famous/View");s.prototype=Object.create(p.prototype),s.prototype.constructor=s,s.DEFAULT_OPTIONS={size:void 0,value:!0,name:"bool toggle",transition:{duration:250,curve:u.inOutBackNorm},padding:20},s.prototype.init=function(){void 0==this.options.size&&(this.options.size=[void 0,void 0]);var t=1==this.options.value?1:0;this.label=new r({size:this.options.size,content:this.getLabelContent(),properties:{fontSize:.75*this.options.size[1]+"px"}}),this.fill=new r({size:[this.options.size[1],this.options.size[1]],properties:{backgroundColor:"#ffffff"}}),this.transform=new h({opacity:t,transform:a.translate(0,0,1),size:[this.options.size[1],this.options.size[1]]}),this.labelTransform=new h({transform:a.translate(0,0,1)}),this.fill.pipe(this),this.label.pipe(this),this.on("click",o.bind(this)),this.node.add(this.transform).link(this.fill),this.node.add(this.labelTransform).link(this.label),this.set(this.options.value)},s.prototype.silentSet=function(t){this.value=t,n.call(this)},s.prototype.toggle=function(){this.set(!this.value)},s.prototype.set=function(t){this.value!==t&&(this.value=t,this.emit("change",{value:this.value}),n.call(this))},s.prototype.resize=function(){this.resizeLabel().resizeFill().resizeTransform()},s.prototype.resizeLabel=function(){return this.label.setSize(this.options.size),this.label.setContent(this.getLabelContent()),this.label.setProperties({fontSize:.75*this.options.size[1]+"px"}),this},s.prototype.resizeFill=function(){return this.fill.setSize([this.options.size[1],this.options.size[1]]),this},s.prototype.resizeTransform=function(){return this.transform.setSize(this.options.size),this},s.prototype.get=function(){return this.value},s.prototype.getSize=function(){return this.options.size},s.prototype.setSize=function(t){this.options.size=t,this.resize()},s.prototype.getLabelContent=function(){return'<div style="border: 1px solid #ffffff; width:'+(this.options.size[1]-1)+"px; height: "+(this.options.size[1]-1)+'px; float: left;"></div>'+'<div class="slider-label" style="float: left; margin-left:'+.5*this.options.size[1]+"px;margin-top:"+.1*this.options.size[1]+'px">'+this.name+"</div>"},e.exports=s}),define("famous-ui/Toggles/MultiBoolToggle",["require","exports","module","famous/Surface","famous/RenderNode","famous/Matrix","famous/Modifier","famous/Transitionable","famous/EventHandler","famous/View","famous-animation/Easing","./BoolToggle"],function(t,i,e){function s(){c.apply(this,arguments),this.eventInput.pipe(this.eventOutput),this.value,this.label,this.labelTransform,this.usingLabel=!1,this.bools=[],this.boolValues=[],this.transforms=[]}function o(){void 0!==this.options.name&&(this.label=new a({size:this.options.size,content:'<div class="slider-label" style="margin-top:'+.1*this.options.size[1]+'px">'+this.options.name+"</div>"}),this.label.setProperties({"font-size":.75*this.options.size[1]+"px"}),this.labelTransform=new u,this.transforms.push(this.labelTransform),this.usingLabel=!0,this.node.add(this.labelTransform).link(this.label),r.call(this))}function n(){for(var t=0;t<this.options.values.length;t++){var i=t==this.options.defaultSelected?!0:!1;i&&(this.value=this.options.values[t]),this._addToggle(i,this.options.values[t],!0)}}function r(){this.sizeState.halt();var t=this.transforms.length,i=t*this.options.size[1]+(t-1)*this.options.padding;this.sizeState.set([this.options.size[0],i],this.options.sizeTransition)}var a=t("famous/Surface");t("famous/RenderNode");var h=t("famous/Matrix"),u=t("famous/Modifier"),p=t("famous/Transitionable");t("famous/EventHandler");var c=t("famous/View"),l=t("famous-animation/Easing"),f=t("./BoolToggle");s.prototype=Object.create(c.prototype),s.prototype.constructor=s,s.DEFAULT_OPTIONS={size:void 0,values:[],defaultSelected:0,name:void 0,padding:20,sizeTransition:{curve:l.inOutBackNorm,duration:400},opacityTransition:{curve:l.inOutBackNorm,duration:400}},s.prototype.init=function(){void 0==this.options.size&&(this.options.size=[void 0,void 0]),this.sizeState=new p([this.options.size[0],0]),o.call(this),n.call(this)},s.prototype.setSelectedToggle=function(t){for(var i=0;i<this.bools.length;i++)i==t?(this.bools[i].silentSet(!0),this.boolValues[i]=!0,this.value=this.options.values[i],this.emit("change",{value:this.options.values[i]})):(this.bools[i].silentSet(!1),this.boolValues[i]=!1)},s.prototype.set=function(t){var i=this.options.values.indexOf(t);this.setSelectedToggle(i)},s.prototype.get=function(){return this.value},s.prototype._addToggle=function(t,i,e){var s=this.transforms.length,o=new f({size:this.options.size,value:t,name:i});o.init(),o.pipe(this),e||this.options.values.push(i);var n=new u({transform:h.translate(0,this.options.size[1]*s+this.options.padding*s),opacity:0});n.setOpacity(1,this.options.opacityTransition),this.bools.push(o),this.transforms.push(n),this.node.add(n).link(o),o.silentSet(t),this.boolValues.push(t),o.on("change",function(t){1==this.boolValues[t]?this.bools[t].silentSet(!0):this.setSelectedToggle(t)}.bind(this,this.usingLabel?s-1:s)),r.call(this)},s.prototype.getSize=function(){return this.sizeState?this.sizeState.get():void 0},s.prototype.setSize=function(t){this.options.size=t;for(var i=0;i<this.bools.length;i++)this.bools[i].setSize(t)},s.prototype.removeToggle=function(t){var i,e;"number"==typeof t?i=t:"string"==typeof t&&(i=this.options.values.indexOf(t)),i>=0&&(e=this.usingLabel?i+1:i,this.transforms[e].setOpacity(0,this.options.sizeTransition,function(t,i){this.branches.splice(i,1),this.bools.splice(t,1),this.options.values.splice(t,1),this.transforms.splice(i,1),r.call(this)}.bind(this,i,e)))},e.exports=s}),define("famous-ui/Easing/CanvasDrawer",["require","exports","module"],function(t,i,e){function s(t,i,e,s,o){t.beginPath(),t.moveTo(i,e),t.lineTo(s,o),t.stroke(),t.closePath()}function o(t,i,e,s,o){t.beginPath(),t.rect(i,e,s,o),t.fill(),t.closePath()}e.exports={lineTo:s,rect:o}}),define("famous-ui/Easing/EasingVisualizer",["require","exports","module","famous-animation/Easing","famous/CanvasSurface","./CanvasDrawer"],function(t,i,e){function s(t){this.opts={size:[1e3,1e3],strokeColor:"#33ccff",fillColor:"#333",fn:n.inOutBackNorm,divisions:30},this.setOpts(t),this.opts.canvasSize=[2*this.opts.size[0],2*this.opts.size[1]],this.opts.gutter=Math.floor(.35*this.opts.size[0]),r.call(this,{size:this.opts.size,canvasSize:this.opts.canvasSize}),this.update()}function o(){var t=document.createElement("canvas");t.width=this.opts.canvasSize[0],t.height=this.opts.canvasSize[1];var i=t.getContext("2d");i.strokeStyle=this.opts.strokeColor,i.lineWidth=2,i.fillStyle=this.opts.fillColor,a.rect(i,0,0,this.opts.canvasSize[0],this.opts.canvasSize[1]);for(var e=1/this.opts.divisions,s=this.opts.canvasSize[0]-this.opts.gutter,o=this.opts.canvasSize[1]-this.opts.gutter,n=.5*this.opts.gutter,r=1;r<this.opts.divisions;r++){var h=e*(r-1),u=e*r,p=h*s+n,c=u*s+n,l=o-this.opts.fn(h)*(o-this.opts.gutter),f=o-this.opts.fn(u)*(o-this.opts.gutter);a.lineTo(i,p,l,c,f)}return t}var n=t("famous-animation/Easing"),r=t("famous/CanvasSurface"),a=t("./CanvasDrawer");s.prototype=Object.create(r.prototype),s.prototype.constructor=s,s.prototype.setOpts=function(t,i){i||(i=this.opts);for(var e in t)i[e]=t[e]},s.prototype.setCurve=function(t){this.opts.fn=t,this.update()},s.prototype.update=function(){var t=o.call(this),i=this.getContext("2d");i.drawImage(t,0,0)},e.exports=s}),define("famous-ui/Easing/EasingBool",["require","exports","module","./EasingVisualizer","famous/EventHandler"],function(t,i,e){function s(t,i){this.easingOpts={value:!1,selectedProperties:{border:"3px solid #33ccff"},normalProperties:{border:"none"}},n.apply(this,arguments),this.setOptions(i,this.easingOpts),this.on("click",this.toggle.bind(this)),o.call(this)}function o(){var t=this.easingOpts.value?this.easingOpts.selectedProperties:this.easingOpts.normalProperties;this.setProperties(t)}var n=t("./EasingVisualizer");t("famous/EventHandler"),s.prototype=Object.create(n.prototype),s.prototype.constructor=s,s.prototype.silentSet=function(t){this.easingOpts.value=t,o.call(this)},s.prototype.toggle=function(){this.set(!this.value)},s.prototype.set=function(t){this.easingOpts.value=t,this.emit("boolChange",{value:this.easingOpts.value}),o.call(this)},e.exports=s}),define("famous-ui/Easing/MultiEasingToggle",["require","exports","module","./EasingBool","famous-animation/Easing","famous/View","famous/Modifier","famous/Matrix"],function(t,i,e){function s(){h.apply(this,arguments),this.value=this.options.easingFns[this.options.defaultSelected],this.height=0,this.bools=[],this.initialized=!1}function o(){for(var t=this.options.easingFns.length,i=[],e=0,s=-1,o=0;t>o;o++)s=o%this.options.columns,0===s&&0!==o&&e++,i.push(p.translate(s*this.options.easingBoolSize[0],e*this.options.easingBoolSize[1],0)),o==t-1&&(this.options.size[1]=(e+1)*this.options.easingBoolSize[1]);return i}function n(t,i){for(var e=!i,s=0;s<this.bools.length;s++)s==t?this.bools[s].silentSet(i):this.bools[s].silentSet(e);this.value=this.options.easingFns[t],this.eventOutput.emit("change",{value:this.value})
}var r=t("./EasingBool"),a=t("famous-animation/Easing"),h=t("famous/View"),u=t("famous/Modifier"),p=t("famous/Matrix");s.prototype=Object.create(h.prototype),s.prototype.constructor=s,s.DEFAULT_OPTIONS={easingFns:[a.inOutBackNorm,a.outBounceNorm,a.inOutBackNorm,a.outBounceNorm],columns:3,size:void 0,panelSize:216,easingAspect:[1.25,1],defaultSelected:0,easingBoolSize:[void 0,void 0],selectedProperties:void 0,normalProperties:void 0},s.prototype.init=function(){for(var t=o.call(this),i=0;i<this.options.easingFns.length;i++){value=i==this.options.defaultSelected?!0:!1;var e={value:value};this.options.selectedProperties&&(e.selectedProperties=this.options.selectedProperties),this.options.normalProperties&&(e.normalProperties=this.options.normalProperties);var s=new r({fn:this.options.easingFns[i],size:this.options.easingBoolSize},e);s.on("boolChange",n.bind(this,i)),s.pipe(this.eventOutput),this.node.add(new u(t[i])).link(s),this.bools.push(s)}this.initialized=!0},s.prototype.set=function(t){var i=this.options.easingFns.indexOf(t);n.call(this,i,!0)},s.prototype.get=function(){return this.value},s.prototype.setSize=function(t){this.options.easingBoolSize[0]=Math.floor(t[0]/this.options.columns),this.options.easingBoolSize[1]=Math.floor(this.options.easingBoolSize[0]/this.options.easingAspect[0]),this.options.size=[],this.options.size[0]=t[0]},s.prototype.getSize=function(){return this.initialized?this.options.size:void 0},e.exports=s}),define("famous-ui/Dropdown/DropdownItem",["require","exports","module","famous/View","famous/Matrix","famous/Modifier","famous/Surface","famous-animation/Easing","famous-utils/Utils","famous-views/Scrollview"],function(t,i,e){function s(t,i,e){n.apply(this,arguments),this.eventInput.pipe(this.eventOutput),this.value=i,this._isSelected=e||!1,this._styleType,this.options.itemContent.unshift(this.options.name),this.surface=new h({size:this.options.itemSize,content:this.options.template.apply(this,this.options.itemContent)}),this.transform=new a,o.call(this),this.surface.pipe(this),this.surface.on("click",this.emit.bind(this,"selection",{value:this.value,origin:this})),this.node.link(this.transform).link(this.surface)}function o(){this.transform.halt(),this._isSelected?(this.surface.setProperties(this.options.selectedProperties),this._styleType=!0,this.transform.setTransform(r.move(r.scale(.7,.7),[.125*this.options.itemSize[0],.125*this.options.itemSize[1]])),this.transform.setTransform(r.identity,this.options.squishCurve,this.emit.bind(this,"selectionEnd"))):(this.surface.setProperties(this.options.properties),this._styleType=!1,this.transform.getFinalTransform()!==r.identity&&this.transform.setTransform(r.identity))}var n=t("famous/View"),r=t("famous/Matrix"),a=t("famous/Modifier"),h=t("famous/Surface"),u=t("famous-animation/Easing");t("famous-utils/Utils"),t("famous-views/Scrollview"),s.prototype=Object.create(n.prototype),s.prototype.constructor=s,s.DEFAULT_OPTIONS={name:"Food",itemSize:[216,50],classes:[],properties:{color:"#ffffff","background-color":"#333",border:"1px solid #ccc"},selectedProperties:{},template:function(t){return'<h2 style="padding: 10px;">'+t+"</h2>"},defaultCurve:{curve:u.inOutBackNorm,duration:400},squishCurve:{curve:u.outBounceNorm,duration:400},itemContent:[]},s.prototype.setTemplate=function(){},s.prototype.setSelected=function(t){this._isSelected=t,o.call(this)},s.prototype.getSize=function(){return this.surface.getSize()},s.prototype.setSize=function(t){return this.options.itemSize=t,this.surface.setSize(t),this.surface.setContent(this.options.template.call(this)),this},s.prototype.getName=function(){return this.options.name},e.exports=s}),define("famous/ContainerSurface",["require","exports","module","./Surface","./Context"],function(t,i,e){function s(t){o.call(this,t),this._container=document.createElement("div"),this._container.classList.add("group"),this._container.style.width="100%",this._container.style.height="100%",this._container.style.position="relative",this._shouldRecalculateSize=!1,this.context=new n(this._container),this.setContent(this._container)}var o=t("./Surface"),n=t("./Context");s.prototype=Object.create(o.prototype),s.prototype.elementType="div",s.prototype.elementClass="surface",s.prototype.link=function(){return this.context.link.apply(this.context,arguments)},s.prototype.add=function(){return this.context.add.apply(this.context,arguments)},s.prototype.mod=function(){return this.context.mod.apply(this.context,arguments)},s.prototype.render=function(){return this._sizeDirty&&(this._shouldRecalculateSize=!0),o.prototype.render.call(this)},s.prototype.commit=function(){var t=o.prototype.commit.apply(this,arguments);return this._shouldRecalculateSize&&(this.context.setSize(),this._shouldRecalculateSize=!1),this.context.update(),t},e.exports=s}),define("famous-ui/Dropdown/Dropdown",["require","exports","module","famous/View","famous/Matrix","famous/Modifier","famous/Transitionable","famous/Surface","famous-animation/Easing","famous-utils/Utils","famous-views/Scrollview","./DropdownItem","famous/ContainerSurface"],function(t,i,e){function s(){f.apply(this,arguments),this.eventInput.pipe(this.eventOutput),this.options.scrollviewOpts.clipSize=this.options.height,this.label=void 0,this.defaultMtx=void 0,this.closedMtx=void 0,this.arrowClosedPos=void 0,this.arrowOpenPos=void 0,this.labelTemplate=void 0,this.itemTemplate=void 0,this.itemOpts=void 0,this.sizeState=new g([0,0]),this.items=[],this._isOpen=!1,this.initialized=!1,this.init()}function o(){this.label=new v({content:this._getLabelContent(this.options.defaultSelected),size:this.options.itemSize}),this.label.setProperties(this.options.labelProperties),this.labelTransform=new m,this.node.add(this.labelTransform).link(this.label),this.label.on("click",this.toggleMenu.bind(this))}function n(){this.arrow=new v({size:this.options.arrowSize,content:this.options.arrowContent}),this.arrowTransform=new m({transform:this.arrowClosedPos}),this.node.add(this.arrowTransform).link(this.arrow)}function r(){this.scrollviewContainer=new b({size:[this.options.itemSize[0],this.options.height],properties:{overflow:"hidden"}}),this.scrollview=new x(this.options.scrollviewOpts),this.scrollview.sequenceFrom(this.items),this.scrollviewTransform=new m({transform:this.closedMtx,opacity:0,size:[this.options.itemSize[0],this.options.itemSize[1]]}),this.node.add(this.scrollviewTransform).link(this.scrollviewContainer),this.scrollviewContainer.add(this.scrollview)}function a(){for(var t=0;t<this.options.items.length;t++){var i=this.options.items[t];this.addItem(i.name,i.value,i.content)}this.value=this.items[this.options.defaultSelected].value}function h(t){var i=t?this.arrowOpenPos:this.arrowClosedPos;this.arrowTransform.setTransform(i,this.options.defaultCurve)}function u(t){var i=t?1:1e-6,e=t?[this.options.itemSize[0],this.options.height]:[this.options.itemSize[0],this.options.itemSize[1]],s=t?this.defaultMtx:this.closedMtx;this.scrollviewTransform.setOpacity(i,this.options.defaultCurve),this.scrollviewTransform.setTransform(s,this.options.defaultCurve),this.sizeState.set(e,this.options.defaultCurve)}function p(t){var i=this.items.indexOf(t.origin),e=this.items[i];e&&this.set(e.value,i)}function c(t){for(var i=0;i<this.items.length;i++)t==i?this.items[i].setSelected(!0):this.items[i].setSelected(!1)}function l(t){for(var i=0;i<this.items.length;i++)if(this.items[i].value==t)return i;return-1}var f=t("famous/View"),d=t("famous/Matrix"),m=t("famous/Modifier"),g=t("famous/Transitionable"),v=t("famous/Surface"),y=t("famous-animation/Easing");t("famous-utils/Utils");var x=t("famous-views/Scrollview"),S=t("./DropdownItem"),b=t("famous/ContainerSurface");s.prototype=Object.create(f.prototype),s.prototype.constructor=s,s.DEFAULT_OPTIONS={items:[{name:"Apples",value:"apples"},{name:"Oranges",value:"oranges"}],defaultSelected:0,itemSize:[216,50],labelProperties:{color:"#ffffff","background-color":"#333",border:"1px solid #ccc"},itemClasses:[],itemProperties:{color:"#ccc","background-color":"#fff",border:"1px solid #ccc"},itemSelectedProperties:{border:"3px solid #33ccff"},scrollviewOpts:{direction:1,clipSize:void 0},height:125,defaultCurve:{curve:y.inOutBackNorm,duration:500},labelFadeCurve:{curve:y.inOutSineNorm,duration:200},arrowSize:[20,20],arrowPadding:[5,10,1],arrowContent:'<img src="js/famous-ui/img/arrowRight.svg"></img>',itemTemplate:function(t){return'<h4 style="line-height:'+this.options.itemSize[1]+'px; padding-left: 10px;">'+t+"</h4>"},labelTemplate:function(t){return'<h3 style="line-height:'+this.options.itemSize[1]+'px; padding-left: 10px;">'+t+"</h3>"},autoClose:!1},s.prototype.init=function(){this.defaultMtx=d.translate(0,this.options.itemSize[1],0),this.closedMtx=d.move(d.scale(1,.01),[0,this.options.itemSize[1],0]),this.arrowClosedPos=d.translate(this.options.itemSize[0]-this.options.arrowSize[0]-this.options.arrowPadding[0],this.options.arrowPadding[1],this.options.arrowPadding[2]),this.arrowOpenPos=d.move(d.rotateZ(.5*Math.PI),[this.options.itemSize[0]-.25*this.options.arrowSize[0]-this.options.arrowPadding[0],this.options.arrowPadding[1],this.options.arrowPadding[2]]),this.options.itemTemplate=this.options.itemTemplate.bind(this),this.options.labelTemplate=this.options.labelTemplate.bind(this),this.itemOpts={itemSize:this.options.itemSize,itemProperties:this.options.itemProperties,selectedProperties:this.options.itemSelectedProperties,template:this.options.itemTemplate,classes:this.options.itemClasses},n.call(this),r.call(this),a.call(this),o.call(this),this.arrow.setSize(this.options.arrowSize),this.arrowTransform.setTransform(this.arrowClosedPos),this.sizeState.set(this.options.itemSize),this.initialized=!0},s.prototype.addItem=function(t,i,e){var s=this.itemOpts;s.name=t,e&&(s.itemContent=e);var o=new S(s,i,!1);o.setTemplate(this.itemTemplate),o.transform.setOpacity(0),o.transform.setOpacity(1,this.options.defaultCurve),this.items.push(o),o.pipe(this.scrollview),o.on("selection",p.bind(this)),this.options.autoClose&&o.on("selectionEnd",this.closeMenu.bind(this))},s.prototype.openMenu=function(){this._isOpen=!0,h.call(this,this._isOpen),u.call(this,this._isOpen)},s.prototype.closeMenu=function(){this._isOpen=!1,h.call(this,this._isOpen),u.call(this,this._isOpen)},s.prototype.toggleMenu=function(){this._isOpen?this.closeMenu():this.openMenu()},s.prototype.get=function(){return this.value},s.prototype._getLabelContent=function(t){var i=this.items[t],e=i.options.itemContent,s=this.options.labelTemplate.apply(this,e);return s},s.prototype.set=function(t){var i=l.call(this,t),e=this.items[i];this.value=e.value,c.call(this,i);var s=this._getLabelContent(i);this.updateLabel(s),this.emit("change",{value:this.value})},s.prototype.setHeight=function(t){this.options.height=t,this.options.scrollviewOpts.clipSize=t,this.scrollview.options.clipSize=t,this.scrollviewContainer.setSize(this.options.itemSize[0],t)},s.prototype.removeItem=function(t){var i;"string"==typeof t?i=l.call(this,t):"number"==typeof t&&(i=t),-1!==i&&this.items[i].transform.setOpacity(0,this.options.defaultCurve,function(t){this.items.splice(t,1)}.bind(this,i))},s.prototype.updateLabel=function(t){var i=function(t){this.label.setContent(t),this.labelTransform.setOpacity(1,this.options.labelFadeCurve)};this.labelTransform.setOpacity(0,this.options.labelFadeCurve,i.bind(this,t))},s.prototype.setSize=function(t){this.options.itemSize=[t[0],2*t[1]],this.resize()},s.prototype.resize=function(){this.defaultMtx=d.translate(0,this.options.itemSize[1],0),this.closedMtx=d.move(d.scale(1,.01),[0,this.options.itemSize[1],0]),this.arrowClosedPos=d.translate(this.options.itemSize[0]-this.options.arrowSize[0]-this.options.arrowPadding[0],this.options.arrowPadding[1],this.options.arrowPadding[2]),this.arrowOpenPos=d.move(d.rotateZ(.5*Math.PI),[this.options.itemSize[0]-.25*this.options.arrowSize[0]-this.options.arrowPadding[0],this.options.arrowPadding[1],this.options.arrowPadding[2]]),this._resizeItems()._resizeArrow()._resizeScrollview()._resizeLabel(),this.sizeState.set(this.options.itemSize)},s.prototype._resizeItems=function(){for(var t=0;t<this.items.length;t++)this.items[t].setSize(this.options.itemSize);return this},s.prototype._resizeArrow=function(){return this.arrow.setSize(this.options.arrowSize),this.arrowTransform.setTransform(this.arrowClosedPos),this},s.prototype._resizeScrollview=function(){return this.scrollviewContainer.setSize([this.options.itemSize[0],this.options.height]),this.scrollviewTransform.setTransform(this.closedMtx),this.scrollviewTransform.setSize(this.options.itemSize),this},s.prototype._resizeLabel=function(){return this.label.setSize(this.options.itemSize),this.label.setContent(this.options.itemTemplate.call(this)),this},s.prototype.getSize=function(){return this.initialized?this.sizeState.get():void 0},e.exports=s}),define("famous-ui/Slider",["require","exports","module","famous/Surface","famous/Matrix","famous/EventHandler","famous-utils/Utils","famous/Engine","famous/View"],function(t,i,e){function s(){x.apply(this,arguments),this.eventInput.pipe(this.eventOutput),void 0===this.options.defaultValue&&(this.options.defaultValue=.5*(this.options.range[0]+this.options.range[1])),this.pos=[],this.value=this.options.defaultValue,this._dirty=!0,this._init,this.currTouchId=null,this.init()}function o(t){t.preventDefault(),t.stopPropagation()}function n(t){if(o(t),!this.currTouchId){var i=t.changedTouches[0];this.currTouchId=i.identifier,this._handleStart(i)}}function r(t){o(t),y.on("mousemove",this._mouseMove),y.on("mouseup",this._mouseUp),y.on("mouseout",this._mouseLeave),this._handleStart(t)}function a(t){this._dirty&&(this.pos=v.getSurfacePosition(this.back),this._dirty=!1),this.set(v.map((t.pageX-this.pos[0])/this.options.size[0],0,1,this.options.range[0],this.options.range[1],!0))}function h(t){o(t);for(var i=0;i<t.changedTouches.length;i++){var e=t.changedTouches[i];if(e.identifier==this.currTouchId){this._handleMove(e);break}}}function u(t){o(t),this._handleMove(t)}function p(t){this.set(v.map((t.pageX-this.pos[0])/this.options.size[0],0,1,this.options.range[0],this.options.range[1],!0))}function c(t){o(t);for(var i=0;i<t.changedTouches.length;i++)if(t.changedTouches[i].identifier==this.currTouchId){this.currTouchId=void 0;break}}function l(t){o(t),this._endMouse()}function f(t){var i=t.relatedTarget||t.toElement;i&&"HTML"!=i.nodeName||this._endMouse()}function d(){return this.options.name+" <span class='slider-value' style='float:right'>"+this.value+"</span>"}var m=t("famous/Surface"),g=t("famous/Matrix");t("famous/EventHandler");var v=t("famous-utils/Utils"),y=t("famous/Engine"),x=t("famous/View");s.prototype=Object.create(x.prototype),s.prototype.constructor=s,s.DEFAULT_OPTIONS={size:[200,20],range:[0,10],defaultValue:void 0,precision:void 0,name:"Slider",backOpacity:1},s.prototype.init=function(){this.fill=new m({size:this.options.size,classes:["slider-fill","no-user-select"]}),this.back=new m({size:this.options.size,classes:["slider-back","no-user-select"]}),this.backMatrix=g.translate(0,0,1),this.label=new m({size:this.options.size,classes:["slider-label","no-user-select"],properties:{fontSize:.75*this.options.size[1]+"px",lineHeight:this.options.size[1]+"px"},content:d.call(this)}),this.labelMatrix=g.translate(0,this.options.size[1],1.2),this.back.pipe(this),this.label.pipe(this),this.fill.pipe(this),this.on("touchstart",n.bind(this)),this.on("touchmove",h.bind(this)),this.on("touchend",c.bind(this)),this.on("touchcancel",c.bind(this)),this.on("mousedown",r.bind(this)),this.on("mousedown",r.bind(this)),this._mouseMove=u.bind(this),this._mouseUp=l.bind(this),this._mouseLeave=f.bind(this),this._handleStart=a.bind(this),this._handleMove=p.bind(this),this._add(this.fill),this._add(this.back),this._add(this.label)},s.prototype._endMouse=function(){y.unbind("mousemove",this._mouseMove),y.unbind("mouseup",this._mouseUp),y.unbind("mouseout",this._mouseLeave)},s.prototype.get=function(){return this.value},s.prototype.getRange=function(){return this.options.range},s.prototype.setSize=function(t){this.options.size=t,this.resize()},s.prototype.resize=function(){this._resizeFill()._resizeBack()._resizeLabel()},s.prototype._resizeFill=function(){return this.fill.setSize(this.options.size),this},s.prototype._resizeBack=function(){return this.back.setSize(this.options.size),this},s.prototype._resizeLabel=function(){return this.label.setSize(this.options.size),this.label.setProperties({fontSize:.75*this.options.size[1]+"px",lineHeight:this.options.size[1]+"px"}),this.labelMatrix=g.translate(0,this.options.size[1],1.2),this},s.prototype.getSize=function(){return this.options.size?[this.options.size[0],2*this.options.size[1]]:void 0},s.prototype.set=function(t){return void 0!==this.options.precision&&(t=parseFloat(t.toFixed(this.options.precision))),this.value=Math.min(Math.max(this.options.range[0],t),this.options.range[1]),this.setLabelContent(),this.emit("change",{value:this.get(),range:this.range}),this},s.prototype.setLabelContent=function(){this.label.setContent(d.call(this))},s.prototype.render=function(){var t=(this.get()-this.options.range[0])/(this.options.range[1]-this.options.range[0]);return[{transform:this.backMatrix,opacity:this.options.backOpacity,target:this.back.render()},{transform:g.move(g.scale(t,1,1),[0,0,2]),target:this.fill.render()},{transform:this.labelMatrix,target:this.label.render()}]},e.exports=s}),define("famous-ui/ColorPicker/ColorButton",["require","exports","module","famous/EventHandler","famous/CanvasSurface"],function(t,i,e){function s(t,i){this.size=t,this.canvasSize=[2*this.size[0],2*this.size[1]],o.call(this,{size:this.size,canvasSize:this.canvasSize}),this.color=i,this.colorSurface(this.color.getHex())}t("famous/EventHandler");var o=t("famous/CanvasSurface");s.prototype=Object.create(o.prototype),s.prototype.colorSurface=function(t){var i=this.getContext("2d");i.clearRect(0,0,this.canvasSize[0],this.canvasSize[1]),i.fillStyle=t,i.fillRect(0,0,this.canvasSize[0],this.canvasSize[1])},e.exports=s}),define("famous-ui/ColorPicker/CanvasPicker",["require","exports","module","famous/Surface","famous/CanvasSurface","famous/Matrix","famous/EventHandler","famous/Modifier","famous-utils/Utils","famous-color/Color","famous/Engine","famous-animation/Easing","./ColorButton","famous/View"],function(t,i,e){function s(t,i,e){b.call(this,e),this.eventInput.pipe(this.eventOutput),this.size=t,this.color=i.clone(),this.name=name,this.pos=[],this._dirty=!0,this.canvasSize=[2*this.size[0],2*this.size[1]],this._selectedCoords=[v.map(this.options.pickerPosX,0,1,0,this.size[0]-1,!0),v.map(this.options.pickerPosY,0,1,0,this.size[1]-1,!0)],this.gradient=new d({size:[this.size[0],this.size[0]],canvasSize:[2*this.size[0],2*this.size[0]]});var s=n.call(this,this.size[0]*this.options.pickerPosX,this.size[1]*this.options.pickerPosY);this.pickerTransform=new g({transform:m.translate(s[0],s[1],0)}),this.picker=this.options.colorPicker?new S(this.options.pickerSize,this.color):new f({size:this.options.pickerSize,classes:["ui-color-picker"]}),this.picker.setProperties(this.options.pickerProperties),this._mousemove=h.bind(this),this._mouseup=u.bind(this),this.gradient.on("mousedown",r.bind(this)),this.picker.on("mousedown",r.bind(this)),this.gradient.on("touchstart",a.bind(this)),this.picker.on("touchstart",a.bind(this)),this.gradient.on("touchmove",p.bind(this)),this.picker.on("touchmove",p.bind(this)),this.gradient.on("click",c),this.picker.on("click",c),this.on("updatePosition",this.updateColor.bind(this)),this.on("updatePosition",o.bind(this)),this.node.add(this.pickerTransform).link(this.picker),this.node.add(this.gradient)}function o(t){var i=n.call(this,this._selectedCoords[0],this._selectedCoords[1]);this.options.railsY&&(i[1]=0),this.pickerTransform.halt(),t.shouldAnimate?this.pickerTransform.setTransform(m.translate(i[0],i[1],this.options.pickerZ),this.options.transition):this.pickerTransform.setTransform(m.translate(i[0],i[1],this.options.pickerZ))}function n(t,i){var e=.5*this.options.pickerSize[0];return[v.map(t,0,this.size[0],-e,this.size[0]-e,!0),this.options.railsY?0:v.map(i,0,this.size[1],-e,this.size[1]-e,!0)]}function r(t){t.preventDefault(),t.stopPropagation(),this._dirty=!0,l.call(this,t,!0),y.on("mousemove",this._mousemove),y.on("mouseup",this._mouseup)}function a(t){this._dirty=!0,t.preventDefault(),t.stopPropagation(),l.call(this,t.touches[0])}function h(t){t.preventDefault(),t.stopPropagation(),l.call(this,t)}function u(t){t.preventDefault(),t.stopPropagation(),y.unbind("mousemove",this._mousemove),y.unbind("mouseup",this._mouseup)}function p(t){t.preventDefault(),t.stopPropagation(),l.call(this,t.touches[0])}function c(t){t.preventDefault(),t.stopPropagation()}function l(t,i){this._dirty&&(this.pos=v.getSurfacePosition(this.gradient),this._dirty=!1),this._selectedCoords=[v.clamp(t.pageX-this.pos[0],0,this.size[0]-1),v.clamp(t.pageY-this.pos[1],0,this.size[1]-1)],this.emit("updatePosition",{shouldAnimate:i})}var f=t("famous/Surface"),d=t("famous/CanvasSurface"),m=t("famous/Matrix");t("famous/EventHandler");var g=t("famous/Modifier"),v=t("famous-utils/Utils");t("famous-color/Color");var y=t("famous/Engine"),x=t("famous-animation/Easing"),S=t("./ColorButton"),b=t("famous/View");s.prototype=Object.create(b.prototype),s.prototype.constructor=s,s.DEFAULT_OPTIONS={pickerSize:[4,25],transition:{curve:x.inSineNorm,duration:50},pickerPosX:0,pickerPosY:0,pickerZ:2,railsY:!1,pickerProperties:{},colorPicker:!1},s.prototype.drawGradient=function(){},s.prototype.getColor=function(){return this.color},s.prototype.getSize=function(){return this.size},s.prototype.updateColor=function(){var t=this.gradient.getContext("2d"),i=t.getImageData(2*this._selectedCoords[0],2*this._selectedCoords[1],1,1).data;this.color.setFromRGBA(i[0],i[1],i[2]),this.emit("change",{value:this.color})},e.exports=s}),define("famous-ui/ColorPicker/GradientPicker",["require","exports","module","famous-color/Color","./CanvasPicker"],function(t,i,e){function s(t,i){var e=i.getSaturation()/100,s=i.getBrightness()/100;i.setSaturation(100),n.call(this,t,i,{pickerSize:[26,26],pickerProperties:{borderRadius:"13px",border:"1px solid white"},pickerPosX:e,pickerPosY:1-s}),this.drawGradient(this.color.getCSSColor())}function o(t,i,e,s,o){var n=t.createLinearGradient(this.canvasSize[0]*s[0],this.canvasSize[1]*s[1],this.canvasSize[0]*o[0],this.canvasSize[1]*o[1]);n.addColorStop(0,i),n.addColorStop(1,e),t.fillStyle=n,t.fillRect(0,0,this.canvasSize[0],this.canvasSize[1])}t("famous-color/Color");var n=t("./CanvasPicker");s.prototype=Object.create(n.prototype),s.prototype.drawGradient=function(t){var i=this.gradient.getContext("2d");i.clearRect(0,0,this.canvasSize[0],this.canvasSize[1]),o.call(this,i,"rgba(255, 255, 255, 1)",t,[0,.5],[1,.5]),o.call(this,i,"rgba(0, 0, 0, 1)","rgba(0, 0, 0, 0)",[.5,1],[.5,0]),this.updateColor()},e.exports=s}),define("famous-ui/ColorPicker/HuePicker",["require","exports","module","famous-color/Color","./CanvasPicker"],function(t,i,e){function s(t,i,e){var s=new n,o=i.getHue();s.setFromHSL(o,100,50);var a=e||[35,35];r.call(this,t,s,{railsY:!0,pickerProperties:{border:"2px solid white",borderRadius:t[0]/2+"px",boxShadow:"0px 1px 0px #888",marginTop:"2px"},pickerPosX:1-o/360,pickerSize:a,colorPicker:!0,normalizedColors:!0}),this.drawGradient(this.color.getCSSColor()),this.on("change",this.drawPickerColor.bind(this)),this.pickerColor}function o(t,i,e){var s=t.createLinearGradient(this.canvasSize[0]*i[0],this.canvasSize[1]*i[1],this.canvasSize[0]*e[0],this.canvasSize[1]*e[1]);s.addColorStop(0,"rgb(255,   0,   0)"),s.addColorStop(.16,"rgb(255,   0, 255)"),s.addColorStop(.33,"rgb(0,     0, 255)"),s.addColorStop(.5,"rgb(0,   255, 255)"),s.addColorStop(.67,"rgb(0,   255,   0)"),s.addColorStop(.83,"rgb(255, 255,   0)"),s.addColorStop(1,"rgb(255,   0,   0)"),t.fillStyle=s,t.fillRect(0,0,this.canvasSize[0],this.canvasSize[1])}var n=t("famous-color/Color"),r=t("./CanvasPicker");s.prototype=Object.create(r.prototype),s.prototype.drawPickerColor=function(t){this.pickerColor!==t.value.hex&&(this.picker.colorSurface(t.value.hex),this.pickerColor=t.value.hex)},s.prototype.drawGradient=function(){var t=this.gradient.getContext("2d");t.clearRect(0,0,this.canvasSize[0],this.canvasSize[1]),o.call(this,t,[0,.5],[1,.5])},e.exports=s}),define("famous-ui/ColorPicker/AlphaPicker",["require","exports","module","famous/Surface","famous-color/Color","./CanvasPicker","famous-ui/Easing/CanvasDrawer"],function(t,i,e){function s(t,i,e){var s=e||[35,35];r.call(this,t,i,{railsY:!0,pickerProperties:{border:"3px solid white",borderRadius:t[0]/2+"px",boxShadow:"0px 1px 0px #888",marginTop:"2px"},pickerPosX:i.a,pickerSize:s,colorPicker:!0,normalizedColors:!0}),this.alpha=this.color.a,this.backgroundCanvas=n.call(this),this.drawGradient(),this.on("change",this.drawPickerColor.bind(this)),this.pickerColor}function o(t,i,e,s){colorAlpha=s.substring(0,s.length-2);var o=t.createLinearGradient(this.canvasSize[0]*i[0],this.canvasSize[1]*i[1],this.canvasSize[0]*e[0],this.canvasSize[1]*e[1]);o.addColorStop(0,colorAlpha+"0)"),o.addColorStop(1,colorAlpha+"1)"),t.fillStyle=o,t.fillRect(0,0,this.canvasSize[0],this.canvasSize[1])}function n(){var t=document.createElement("canvas");t.width=this.canvasSize[0],t.height=this.canvasSize[1];var i=t.getContext("2d");i.fillStyle="#ffffff",a.rect(i,0,0,this.canvasSize[0],this.canvasSize[1]),i.fillStyle="#cccccc";for(var e=16,s=2,o=height=this.canvasSize[0]/e,n=0;e>n;n++)for(var r=0;s>r;r++)0==n%2&&0==r%2?a.rect(i,o*n,r*height,o,height):1==n%2&&1==r%2&&a.rect(i,o*n,r*height,o,height);return t}t("famous/Surface"),t("famous-color/Color");var r=t("./CanvasPicker"),a=t("famous-ui/Easing/CanvasDrawer");s.prototype=Object.create(r.prototype),s.prototype.drawPickerColor=function(t){this.picker.colorSurface(t.value.getCSSColor())},s.prototype.setColor=function(t){this.color=t,this.drawGradient(),this.drawPickerColor({value:this.color})},s.prototype.drawGradient=function(){var t=this.gradient.getContext("2d");t.clearRect(0,0,this.canvasSize[0],this.canvasSize[1]),t.drawImage(this.backgroundCanvas,0,0);var i=this.color.clone();i.a=0,o.call(this,t,[0,0],[1,1],i.getCSSColor())},s.prototype.updateColor=function(){var t=parseFloat((this._selectedCoords[0]/this.size[0]).toFixed(2));this.color.a=t,this.emit("change",{value:this.color})},e.exports=s}),define("famous-ui/ColorPicker/ColorPicker",["require","exports","module","famous/Surface","famous/CanvasSurface","famous/Matrix","famous/EventHandler","famous/Modifier","famous/Transitionable","famous-utils/Utils","famous-color/Color","famous/View","famous/Engine","famous-animation/Easing","famous-utils/Time","./GradientPicker","./HuePicker","./AlphaPicker","./ColorButton"],function(t,i,e){function s(){f.apply(this,arguments),this.color=this.options.defaultColor,this.sizeState=new c([0,0]),this.visible=!1,this.boundListener=!1,this._closeListen=this.hide.bind(this)}function o(t){var i=t.value.getCSSColor();this.gradientPicker.drawGradient(i),a.call(this)}function n(){a.call(this)}function r(){a.call(this)}function a(){var t=this.gradientPicker.getColor();this.options.useAlpha&&(t.a=this.alphaPicker.getColor().a,this.alphaPicker.setColor(t)),this.color=t,h.call(this,{value:this.color}),this.eventOutput.emit("change",{value:this.color})}function h(t){var i=t.value.getCSSColor();this.openingSurface.colorSurface(i)}t("famous/Surface"),t("famous/CanvasSurface");var u=t("famous/Matrix");t("famous/EventHandler");var p=t("famous/Modifier"),c=t("famous/Transitionable");t("famous-utils/Utils");var l=t("famous-color/Color"),f=t("famous/View"),d=t("famous/Engine"),m=t("famous-animation/Easing");t("famous-utils/Time");var g=t("./GradientPicker"),v=t("./HuePicker"),y=t("./AlphaPicker"),x=t("./ColorButton");s.prototype=Object.create(f.prototype),s.prototype.constructor=s,s.DEFAULT_OPTIONS={transition:{curve:m.inOutBackNorm,duration:400},hueSize:30,pickerSize:[25,25],size:void 0,defaultColor:new l(80,255,255),name:"",useAlpha:!0,padding:5},s.prototype.init=function(){this.defaultPositions={gradientPicker:u.translate(0,this.options.size[1],1),huePicker:u.translate(0,this.options.size[1]+this.options.size[0],1),alphaPicker:u.translate(0,2*this.options.size[1]+this.options.size[0]+3*this.options.padding,1)},this.gradientPicker=new g([this.options.size[0],this.options.size[0]],this.color),this.gradientTransform=new p({transform:this.defaultPositions.gradientPicker}),this.huePicker=new v([this.options.size[0],this.options.hueSize],this.color,this.options.pickerSize),this.hueTransform=new p({transform:this.defaultPositions.huePicker}),this.openingSurface=new x(this.options.size,this.color,this.options.name),this.openingTransform=new p,this.node.add(this.hueTransform).link(this.huePicker),this.node.add(this.openingTransform).link(this.openingSurface),this.node.add(this.gradientTransform).link(this.gradientPicker),this.openingSurface.on("click",this.togglePicker.bind(this)),this.huePicker.on("change",o.bind(this)),this.gradientPicker.on("change",n.bind(this)),this.on("change",h.bind(this)),this.options.useAlpha&&(this.alphaPicker=new y([this.options.size[0],this.options.hueSize],this.color,this.options.pickerSize),this.alphaTransform=new p({transform:this.defaultPositions.alphaPicker}),this.node.add(this.alphaTransform).link(this.alphaPicker),this.alphaPicker.on("change",r.bind(this))),this.hide()},s.prototype.set=function(){},s.prototype.get=function(){return this.color},s.prototype.togglePicker=function(){0==this.visible?this.show():this.hide()},s.prototype.hide=function(){this.visible=!1;var t=u.multiply(u.scale(1,1e-7),this.defaultPositions.gradientPicker);this.hueTransform.halt(),this.hueTransform.setOpacity(0,this.options.transition),this.hueTransform.setTransform(t,this.options.transition),this.gradientTransform.halt(),this.gradientTransform.setOpacity(0,this.options.transition),this.gradientTransform.setTransform(t,this.options.transition),this.options.useAlpha&&(this.alphaTransform.halt(),this.alphaTransform.setOpacity(0,this.options.transition),this.alphaTransform.setTransform(t,this.options.transition)),this.sizeState.set([this.options.size[0],this.options.size[1]],this.options.transition),1==this.boundListener&&this.unbindClickClose()},s.prototype.show=function(){this.emit("showing"),this.visible=!0,this.hueTransform.halt(),this.hueTransform.setOpacity(1,this.options.transition),this.hueTransform.setTransform(this.defaultPositions.huePicker,this.options.transition),this.gradientTransform.halt(),this.gradientTransform.setOpacity(1,this.options.transition),this.gradientTransform.setTransform(this.defaultPositions.gradientPicker,this.options.transition),this.options.useAlpha?(this.alphaTransform.halt(),this.alphaTransform.setOpacity(1,this.options.transition),this.alphaTransform.setTransform(this.defaultPositions.alphaPicker,this.options.transition),this.sizeState.set([this.options.size[0],this.gradientPicker.getSize()[1]+this.huePicker.getSize()[1]+this.openingSurface.getSize()[1]+this.alphaPicker.getSize()[1]],this.options.transition)):this.sizeState.set([this.options.size[0],this.gradientPicker.getSize()[1]+this.huePicker.getSize()[1]+this.openingSurface.getSize()[1]],this.options.transition),d.defer(this.bindClickClose.bind(this))},s.prototype.setSize=function(t){this.options.size=t},s.prototype.getSize=function(){return this.options.size?this.sizeState.get():void 0},s.prototype.bindClickClose=function(){d.on("click",this._closeListen),this.boundListener=!0},s.prototype.unbindClickClose=function(){d.unbind("click",this._closeListen),this.boundListener=!1},s.prototype.render=function(){return{size:this.sizeState.get(),target:this.node.render()}},e.exports=s}),define("famous-ui/Text/Label",["require","exports","module","famous/Surface","famous/Matrix","famous/Engine","famous/EventHandler"],function(t,i,e){function s(t){this.options={size:void 0,content:"",properties:{},classes:["ui-label"]};for(var i in t)this.options[i]=t[i];
this._resizeDirty,this.surface,this._checkHeight=o.bind(this),this.init()}function o(){this._resizeDirty&&this.surface._currTarget&&(this.options.size=[this.options.size[0],this.surface._currTarget.firstChild.clientHeight],this.surface.setSize(this.options.size),this._resizeDirty=!1)}var n=t("famous/Surface"),r=t("famous/Matrix"),a=t("famous/Engine"),h=t("famous/EventHandler");s.prototype.init=function(){this.surface=new n({size:this.options.size,content:"<div>"+this.options.content+"</div>",classes:this.options.classes,properties:this.options.properties}),h.setInputHandler(this,this.surface),h.setOutputHandler(this,this.surface),this._setDirty()},s.prototype.setContent=function(t){this.options.content=t,this.surface.setContent("<div>"+this.options.content+"</div>")},s.prototype.setSize=function(t){this.options.size=[t[0],0],this._setDirty()},s.prototype._setDirty=function(){this._resizeDirty=!0,a.on("postrender",this._checkHeight)},s.prototype.getSize=function(){return this.options.size?this.options.size:void 0},s.prototype.render=function(){return{transform:r.translate(0,0,1),target:this.surface.render()}},e.exports=s}),define("famous-ui/AutoUI",["require","exports","module","famous/View","famous/Matrix","famous/Modifier","famous-animation/Easing","famous-ui/PanelScrollview","famous-ui/Toggles/BoolToggle","famous-ui/Toggles/MultiBoolToggle","famous-ui/Easing/MultiEasingToggle","famous-ui/Dropdown/Dropdown","famous-ui/Slider","famous-ui/ColorPicker/ColorPicker","famous-ui/Text/Label"],function(t,i,e){function s(){n.apply(this,arguments),this.eventInput.pipe(this.eventOutput),this.panel=new h(this.options.panelOptions),this.pipe(this.panel),this.autoUIElements=[],this.autoUIElementsMap={},this.panelModifier=new a({transform:this.options.defaultMatrix}),this._add(this.panelModifier).link(this.panel),this.options.defaultSelected&&this.setCurrentObject(this.options.defaultSelected)}function o(t){for(var i=0;i<t.length;i++){var e=t[i];e.type&&this._optionToUI(e)}}var n=t("famous/View"),r=t("famous/Matrix"),a=t("famous/Modifier");t("famous-animation/Easing");var h=t("famous-ui/PanelScrollview"),u=t("famous-ui/Toggles/BoolToggle"),p=t("famous-ui/Toggles/MultiBoolToggle"),c=t("famous-ui/Easing/MultiEasingToggle"),l=t("famous-ui/Dropdown/Dropdown"),f=t("famous-ui/Slider"),d=t("famous-ui/ColorPicker/ColorPicker"),m=t("famous-ui/Text/Label"),g=0;s.prototype=Object.create(n.prototype),s.prototype.constructor=s,s.DEFAULT_OPTIONS={saveValues:!1,panelOptions:{},defaultSelected:void 0,defaultMatrix:r.translate(0,0)},s.UI_ELEMENTS={slider:f,dropdown:l,colorPicker:d,toggle:u,multiBoolToggle:p,easing:c,label:m},s.registerElement=function(t,i){s.UI_ELEMENTS[t]=i},s.prototype.setCurrentObject=function(t,i){t!==this.currentObj&&(this.currentObject=t,i=i?i:t.autoUI,o.call(this,i))},s.prototype.setScrollviewOptions=function(t){return this.panel.setOptions(t)},s.prototype.toJSON=function(){for(var t=0;t<this.autoUIElements.length;t++);},s.prototype.reset=function(){this.panel.reset(),this.autoUIElements=[],this.autoUIElementsMap={}},s.prototype.getSize=function(){return[this.panel.panelOpts.width,void 0]},s.prototype.setSize=function(t,i){i?this.panel.setSize([t,i]):this.panel.setSize([t,this.panel.panelOpts.sliderHeight])},s.prototype.clear=function(t){this.reset(),t&&t()},s.prototype._optionToUI=function(t){var i=s.UI_ELEMENTS[t.type],e=new i(t.uiOptions);if(this.panel.add(e),window.panel=this.panel,this.autoUIElements.push(e),this.autoUIElementsMap[t.key]?this.autoUIElementsMap[t.key+g++]=e:this.autoUIElementsMap[t.key]=e,t.key){var o=t.object?t.object:this.currentObject;e.on("change",function(t,i,e){this.optionsManager?this.optionsManager.set(t,e.value):void 0!==this.setOptions?this.setOptions({key:e.value}):this.options[t]&&(this.options[t]=e.value),i&&i.call(this,e.value)}.bind(o,t.key,t.callback))}else t.callback&&e.on("change",function(t,i){t.call(this,i.value)}.bind(this.currentObject,t.callback))},s.prototype.getUIElementsMap=function(){return this.autoUIElementsMap},s.prototype.get=function(t){return this.autoUIElementsMap[t]},e.exports=s}),define("app/widgets/ButtonSlider",["require","exports","module","famous/Surface","famous/Modifier","famous/Matrix","famous-utils/Utils","famous/Engine","famous/View","famous-sync/CustomSync"],function(t,i,e){function s(){u.apply(this,arguments),this.background,this.backgroundMod,this.buttonMod,this.button,this.eventMod,this.eventBlocker,this.sync,this.value=this.options.defaultValue,this.initBackground().initButton().initFill().initSync().initEventBlocker().events().resize()}function o(t){t.preventDefault(),t.stopPropagation()}var n=t("famous/Surface"),r=t("famous/Modifier"),a=t("famous/Matrix"),h=t("famous-utils/Utils");t("famous/Engine");var u=t("famous/View"),p=t("famous-sync/CustomSync");s.prototype=Object.create(u.prototype),s.prototype.constructor=s,s.DEFAULT_OPTIONS={defaultValue:0,size:[200,20],backgroundHeight:20,backgroundProperties:{},backgroundClasses:[],fillProperties:{},fillClasses:[],buttonProperties:{},buttonClasses:[],syncClasses:["Touch","Mouse"],range:[0,10],precision:void 0},s.prototype.initBackground=function(){return this.backgroundMod=new r,this.background=new n({classes:this.options.backgroundClasses,properties:this.options.backgroundProperties}),this.node.add(this.backgroundMod).link(this.background),this},s.prototype.initFill=function(){return this.fillMod=new r,this.fill=new n({classes:this.options.fillClasses,properties:this.options.fillProperties}),this.node.add(this.fillMod).link(this.fill),this},s.prototype.initButton=function(){return this.buttonMod=new r,this.button=new n({classes:this.options.buttonClasses,properties:this.options.buttonProperties}),this.node.add(this.buttonMod).link(this.button),this},s.prototype.initSync=function(){return this.sync=new p(this.options.syncClasses),this},s.prototype.initEventBlocker=function(){return this.eventBlocker=new n({size:this.options.size}),this.eventMod=new r({transform:a.translate(0,0,3),opacity:0}),this.node.add(this.eventMod).link(this.eventBlocker),this},s.prototype.events=function(){return this.sync.bindThis(this),this.button.pipe(this.sync),this.background.pipe(this.sync),this.eventBlocker.pipe(this.sync),this.sync.on("start",this._handleStart),this.sync.on("update",this._handleUpdate),this.sync.on("end",this._handleEnd),this},s.prototype._handleStart=function(t){o(t.event),this.pos=h.getSurfacePosition(this.background),this._handleSet(t)},s.prototype._handleSet=function(t){this.set(h.map((t.coordinate[0]-this.pos[0])/this.options.size[0],0,1,this.options.range[0],this.options.range[1],!0))},s.prototype._handleUpdate=function(t){o(t.event),this._handleSet(t)},s.prototype._handleEnd=function(t){o(t.event)},s.prototype.setSize=function(t){return this.options.size=t.slice(0),this.resize(),this},s.prototype.resize=function(){return this.sizeBackground().placeBackground().sizeButton().placeButton().sizeFill().placeFill().sizeEventBlocker(),this},s.prototype.sizeBackground=function(){return this.background.setSize([this.options.size[0],this.options.backgroundHeight]),this},s.prototype.placeBackground=function(){return this.backgroundMod.setTransform(a.translate(0,.5*(this.options.size[1]-this.options.backgroundHeight),1)),this},s.prototype.sizeButton=function(){return this.button.setSize([this.options.size[1],this.options.size[1]]),this},s.prototype.placeButton=function(){var t=h.map(this.get(),this.options.range[0],this.options.range[1],0,this.options.size[0]-this.button.getSize()[1],!0);return this.buttonMod.setTransform(a.translate(t,0,1)),this},s.prototype.sizeFill=function(){return this.fill.setSize(this.background.getSize()),this},s.prototype.placeFill=function(){var t=(this.get()-this.options.range[0])/(this.options.range[1]-this.options.range[0]),i=.5*(this.options.size[1]-this.options.backgroundHeight);return this.fillMod.setTransform(a.move(a.scale(t,1),[0,i,1.25])),this},s.prototype.sizeEventBlocker=function(){return this.eventBlocker.setSize(this.options.size),this},s.prototype.get=function(){return this.value},s.prototype.getSize=function(){return this.options.size},s.prototype.set=function(t){return void 0!==this.options.precision&&(t=parseFloat(t.toFixed(this.options.precision))),this.value=Math.min(Math.max(this.options.range[0],t),this.options.range[1]),this.eventOutput.emit("change",{value:this.get(),range:this.options.range}),this.placeButton().placeFill(),this},e.exports=s}),define("app/widgets/SettingsMenuView",["require","exports","module","famous/View","famous/Matrix","famous/Surface","famous/Engine","famous/Modifier","famous/ImageSurface","famous-color/Color","famous-ui/AutoUI","app/widgets/ButtonSlider","app/data/RiseData"],function(t,i,e){function s(t,i){o.apply(this,arguments),this.parentBG=i,this.titleMod,this.title,this.settingsIcon,this.settingsMod,this.settingsOpacityMod,this.background,this.initUI().initSettingsButton().initTitle().initBackground().resize(!0).events()}var o=t("famous/View"),n=t("famous/Matrix"),r=t("famous/Surface"),a=t("famous/Engine"),h=t("famous/Modifier"),u=t("famous/ImageSurface");t("famous-color/Color");var p=t("famous-ui/AutoUI"),c=t("app/widgets/ButtonSlider"),l=t("app/data/RiseData");p.registerElement("buttonSlider",c),s.prototype=Object.create(o.prototype),s.prototype.constructor=s,s.DEFAULT_OPTIONS={settingsYOffset:-50,extendedTransition:{method:"wall",dampingRatio:.45,period:800},fadeTransition:{curve:"inSineNorm",duration:500},uiWidthPercentage:.8},s.prototype.events=function(){return this.eventInput.bindThis(this),this.eventInput.on("opening",this.updateColors),this.eventInput.on("opening",this.fadeOutIcon),this.eventInput.on("closing",this.fadeInIcon),this.eventInput.on("extended",this.extend),this.eventInput.on("end",this.extendEnd),a.on("resize",this.resize.bind(this)),this},s.prototype.initSettingsButton=function(){return this.settingsIcon=new u({size:[20,20],content:"./img/settings.svg"}),this.settingsMod=new h({origin:[.5,0],transform:n.translate(0,this.options.settingsYOffset)}),this.settingsOpacityMod=new h({opacity:1}),this.node.add(this.settingsMod).link(this.settingsOpacityMod).link(this.settingsIcon),this},s.prototype.initTitle=function(){return this.titleMod=new h,this.title=new r({content:'<span class="settings-title bold"> Settings </span>',properties:{textAlign:"center"}}),this.node.add(this.titleMod).link(this.title),this},s.prototype.initBackground=function(){return this.background=new r({properties:{backgroundColor:"#1f2a2d",borderTop:"2px solid #0a485c"}}),this.node.add(new h({transform:n.translate(0,0,-1)})).link(this.background),this},s.prototype.resize=function(){return this.resizeBackground().resizeTitle().placeTitle().resizeUI().placeUI(),this.eventOutput.emit("resize"),this},s.prototype.initUI=function(){return this.ui=new p({panelOptions:{width:.8*window.innerWidth,sliderHeight:.05*window.innerWidth}}),this.autoUI=[{type:"label",uiOptions:{content:"Volume",classes:[]}},{type:"buttonSlider",callback:function(t){l.appSettings.set("volume",t)},uiOptions:{name:"Volume",range:[0,1],precision:2,buttonProperties:{borderRadius:"50px",backgroundColor:"white",boxShadow:"rgb(49, 43, 43) 0px 0px 5px 2px"},backgroundProperties:{backgroundColor:"#777",borderRadius:"10px"},fillProperties:{backgroundColor:"white",borderRadius:"10px"},backgroundHeight:.0125*window.innerWidth}}],this.ui.setCurrentObject(this),this.uiMod=new h,this.node.add(this.uiMod).link(this.ui),this},s.prototype.resizeUI=function(){return this.ui.setSize(window.innerWidth*this.options.uiWidthPercentage,.05*window.innerWidth),this},s.prototype.placeUI=function(){this.uiMod.setTransform(n.translate(window.innerWidth*.5*(1-this.options.uiWidthPercentage),1.5*this.title.getSize()[1]))},s.prototype.resizeBackground=function(){return this.background.setSize([void 0,window.innerHeight-20]),this},s.prototype.resizeTitle=function(){var t=.1*window.innerHeight;return this.title.setSize([void 0,t]),this.title.setProperties({fontSize:~~(.5*t)+"px"}),this},s.prototype.placeTitle=function(){return this.titleMod.setTransform(n.translate(0,.5*this.title.getSize()[1],1),{curve:"outExpoNorm",duration:800}),this},s.prototype.updateColors=function(){this.parentBG&&this.title.setProperties({color:this.parentBG.getActiveTextColor()})},s.prototype.getSize=function(){return this.background.getSize()},s.prototype.extend=function(t){this.settingsMod.setTransform(n.translate(0,t+this.options.settingsYOffset))},s.prototype.extendEnd=function(){this.settingsMod.setTransform(n.translate(0,this.options.settingsYOffset),this.options.extendedTransition)},s.prototype.fadeOutIcon=function(){this.settingsOpacityMod.halt(),this.settingsOpacityMod.setOpacity(0,this.options.fadeTransition)},s.prototype.fadeInIcon=function(){this.settingsOpacityMod.halt(),this.settingsOpacityMod.setOpacity(1,this.options.fadeTransition)},e.exports=s}),define("app/widgets/SwipeEventSwitcher",["require","exports","module","famous/Matrix","famous/Surface","famous/Modifier","famous/EventArbiter","famous-sync/CustomSync","famous/OptionsManager","famous/Utility","famous/Engine"],function(t,i,e){function s(t){this.options=Object.create(this.constructor.DEFAULT_OPTIONS),this.optionsManager=new r(this.options),t&&this.setOptions(t),this.eventArbiter=new o,this.sync=new n(this.options.syncClasses),this.sync.setHandler(this),this.on("start",this.handleStart),this.on("update",this.handleUpdate),this.on("end",this.handleEnd),this.clearArbiter=this._clearArbiter.bind(this)}t("famous/Matrix"),t("famous/Surface"),t("famous/Modifier");var o=t("famous/EventArbiter"),n=t("famous-sync/CustomSync"),r=t("famous/OptionsManager"),a=t("famous/Utility"),h=t("famous/Engine");s.DEFAULT_OPTIONS={syncClasses:["Touch","Mouse"]},s.prototype.handleStart=function(t){this._directionChosen=!1,this._startCoordinate=t.coordinate},s.prototype.handleUpdate=function(t){if(!this._directionChosen){this.pipe(this.eventArbiter);var i=this._getDirection(t.coordinate);this.setDirection(i),this._directionChosen=!0,this.eventArbiter.forMode(i).emit("start",t)}},s.prototype.handleEnd=function(){h.nextTick(this.clearArbiter)},s.prototype._clearArbiter=function(){this.eventArbiter.setMode(void 0),this.unpipe(this.eventArbiter)},s.prototype.setLeftRight=function(t){var i=this.eventArbiter.forMode(a.Direction.X);i.pipe(t)},s.prototype.setUpDown=function(t){var i=this.eventArbiter.forMode(a.Direction.Y);i.pipe(t)},s.prototype._getDirection=function(t){var i=Math.abs(this._startCoordinate[0]-t[0]),e=Math.abs(this._startCoordinate[1]-t[1]);return i>e?a.Direction.X:a.Direction.Y},s.prototype.setDirection=function(t){this.eventArbiter.setMode(t)},e.exports=s}),define("app/widgets/PhysicsDrawer",["require","exports","module","famous/View","famous/Matrix","famous/Surface","famous/Modifier","famous/Engine","famous/RenderNode","famous-utils/Utils","famous/Utility"],function(t,i,e){function s(){o.apply(this,arguments),this.closePos,this.openPos,this.pos,this.state="closed",this._calcPositions();var t="closed"==this.options.defaultPosition?this.getCloseTransform():this.getOpenTransform();this.mod=new r({transform:t}),this.physicsNode=new h,this.node.link(this.mod).link(this.physicsNode),this.events().resize()}var o=t("famous/View"),n=t("famous/Matrix");t("famous/Surface");var r=t("famous/Modifier"),a=t("famous/Engine"),h=t("famous/RenderNode"),u=t("famous-utils/Utils"),p=t("famous/Utility");s.prototype=Object.create(o.prototype),s.prototype.constructor=s,s.DEFAULT_OPTIONS={direction:"l",openTransition:{method:"wall",period:800,dampingRatio:.25},closeTransition:{method:"wall",period:800,dampingRatio:.25},defaultPosition:"closed",size:[window.innerWidth,window.innerHeight],activationDistance:.1*window.innerWidth,minimumVelocity:1.2,zDepth:0},s.prototype.events=function(){return a.on("resize",u.debounce(this.resize.bind(this),250)),this.eventInput.bindThis(this),this.eventInput.on("start",this._handleStart),this.eventInput.on("update",this._handleUpdate),this.eventInput.on("end",this._handleEnd),this},s.prototype.resize=function(){this._calcPositions(),"open"==this.state?this.open():this.close()},s.prototype.link=function(t){return this.physicsNode.link(t)},s.prototype._calcPositions=function(){return this.axis="l"==this.options.direction||"r"==this.options.direction?p.Direction.X:p.Direction.Y,"l"==this.options.direction?(this.closePos=-this.options.size[0],this.openPos=0):"r"==this.options.direction?(this.closePos=window.innerWidth,this.openPos=window.innerWidth-this.options.size[0]):"b"==this.options.direction?(this.closePos=window.innerHeight,this.openPos=window.innerHeight-this.options.size[1]):"t"==this.options.direction&&(this.closePos=-this.options.size[1],this.openPos=0),this},s.prototype._handleStart=function(){this.pos=n.getTranslate(this.mod.getTransform()),this.mod.halt()},s.prototype._handleUpdate=function(t){var i=[this.pos[0]+t.position[0],this.pos[1]+t.position[1]],e=this.axis==p.Direction.X?n.translate(i[0],0,this.options.zDepth):n.translate(0,i[1],this.options.zDepth);this.mod.setTransform(e)},s.prototype._handleEnd=function(t){var i=Math.abs(t.position[this.axis]);i>this.options.activationDistance||Math.abs(t.velocity[this.axis])>this.options.minimumVelocity?"open"==this.state?this.close():this.open():"open"==this.state?this.open():this.close()},s.prototype.open=function(){return this.mod.setTransform(this.getOpenTransform(),this.options.openTransition,function(){this.eventOutput.emit("opened")}.bind(this)),this.state="open",this.eventOutput.emit("opening"),this},s.prototype.getOpenTransform=function(){return this.axis==p.Direction.X?n.translate(this.openPos,0,this.options.zDepth):n.translate(0,this.openPos,this.options.zDepth)},s.prototype.close=function(){return this.mod.setTransform(this.getCloseTransform(),this.options.closeTransition,function(){this.eventOutput.emit("closed")}.bind(this)),this.eventOutput.emit("closing"),this.state="closed",this},s.prototype.getCloseTransform=function(){return this.axis==p.Direction.X?n.translate(this.closePos,0,this.options.zDepth):n.translate(0,this.closePos,this.options.zDepth)},s.prototype.getState=function(){return this.state},e.exports=s}),define("app/scenes/HomeScene",["require","exports","module","famous/Surface","famous/Matrix","famous/RenderNode","famous/Modifier","famous/Engine","famous-utils/Utils","famous/EventArbiter","app/SceneTransitions","app/SceneController","famous-scene/Scene","app/data/Alarm","app/data/RiseData","app/widgets/MoveableTimeView","app/widgets/ActivationBackground","app/widgets/CurrentTimeView","app/widgets/CurrentTimelineView","app/scenes/BackgroundScene","app/widgets/AlarmActivatorView","app/widgets/SettingsMenuView","famous-sync/CustomSync","app/widgets/SwipeEventSwitcher","app/widgets/PhysicsDrawer","famous-color/Color"],function(t,i,e){function s(){d.apply(this,arguments),m.getAlarms(),this.alarm=m.getCurrentAlarm(),this.alarm||(this.alarm=m.where("name","Quick Alarm")),this.currentTimeLine,this.smallTime,this.smallTimeMod,this.moveableTime,this.eventArbiter,this.settingsNode=new a,this.settingsMod=new h,this.mainNode=new a,this.mainMod=new h,this.node.add(this.settingsMod).link(this.settingsNode),this.node.add(this.mainMod).link(this.mainNode),this.initBackground().initSmallTime().initMoveableTimeView().initAlarmSync().initAlarmName().initSwipeSwitcher().initAlarmActivatorView().initSettingsMenuView().initActivationBackground().events()}function o(t,i,e){var s=Math.PI;t/=100,i/=100,e/=100;var o=(Math.sin(2*s*(t+.25))+Math.cos(t))/2;return o=Math.min(Math.max(o,i),e),100*o}var n=t("famous/Surface"),r=t("famous/Matrix"),a=t("famous/RenderNode"),h=t("famous/Modifier"),u=t("famous/Engine"),p=t("famous-utils/Utils"),c=t("famous/EventArbiter"),l=t("app/SceneTransitions"),f=t("app/SceneController"),d=t("famous-scene/Scene");t("app/data/Alarm");var m=t("app/data/RiseData"),g=t("app/widgets/MoveableTimeView"),v=t("app/widgets/ActivationBackground"),y=t("app/widgets/CurrentTimeView"),x=t("app/widgets/CurrentTimelineView"),S=t("app/scenes/BackgroundScene"),b=t("app/widgets/AlarmActivatorView"),w=t("app/widgets/SettingsMenuView"),T=t("famous-sync/CustomSync"),M=t("app/widgets/SwipeEventSwitcher"),z=t("app/widgets/PhysicsDrawer"),_=t("famous-color/Color");s.prototype=Object.create(d.prototype),s.prototype.constructor=s,s.DEFAULT_OPTIONS={tapDuration:100,transitionOut:{curve:"outExpoNorm",duration:350}},s.EVENTS_NORMAL=0,s.EVENTS_SETTINGS=1,s.prototype.events=function(){this.debouncedSaveAlarm=p.debounce(this._saveAlarm.bind(this),500),this.extendedCheck=this._extendedCheck.bind(this),this.updateMoveableTimeColor=this._updateMoveableTimeColor.bind(this),this.alarm.on("change:time",this.debouncedSaveAlarm),this.alarm.on("change:time",this.extendedCheck),this.alarm.on("change:time",this.updateMoveableTimeColor),this.eventArbiter=new c,u.pipe(this.eventArbiter),this.normalEvents(),this.settingsEvents(),u.pipe(this.timeSync),this.timeSync.on("end",this.adjustAlarm.bind(this)),this.eventArbiter.setMode(s.EVENTS_NORMAL),this.smallTime.on("click",function(t){t.preventDefault(),t.stopPropagation(),f.setScene("Time")}),this.alarmName.on("click",function(t){t.preventDefault(),t.stopPropagation(),f.setScene("Alarm")}),this.settingsMenu.on("resize",function(){this.settingsDrawer.setOptions({size:this.settingsMenu.getSize()})}.bind(this)),this.moveableTime.pipe(this.settingsMenu),this.moveableTime.on("extended",this.extend.bind(this)),this.moveableTime.on("end",this.extendEnd.bind(this))},s.prototype.normalEvents=function(){var t=this.eventArbiter.forMode(s.EVENTS_NORMAL);t.pipe(this.swipeSwitcher),this.timeSync=new T(["Touch","Mouse"]),this.swipeSwitcher.setLeftRight(this.alarmActivator),this.swipeSwitcher.setUpDown(this.settingsDrawer),this.settingsDrawer.on("closing",function(){u.nextTick(this.eventArbiter.setMode.bind(this.eventArbiter,s.EVENTS_NORMAL))}.bind(this))},s.prototype.settingsEvents=function(){var t=this.eventArbiter.forMode(s.EVENTS_SETTINGS),i=new T(["Touch","Mouse"]);t.pipe(i),i.pipe(this.settingsDrawer),this.settingsDrawer.on("opening",function(){u.nextTick(this.eventArbiter.setMode.bind(this.eventArbiter,s.EVENTS_SETTINGS))}.bind(this))},s.prototype.unbindEvents=function(){u.unpipe(this.eventArbiter),u.unpipe(this.timeSync),this.alarm.unbind("change:time",this.debouncedSaveAlarm),this.alarm.unbind("change:time",this.extendedCheck),this.alarm.unbind("change:time",this.updateMoveableTimeColor),this.moveableTime.unpipe(this.settingsMenu),this.moveableTime.unbindEvents()},s.prototype.initAlarmSync=function(){return this.timeSync=new T(["Touch","Mouse"]),this},s.prototype.adjustAlarm=function(t){if(!(t.duration>this.options.tapDuration||this.alarm.get("active"))){var i=this.moveableTime.getPosition()[1];t.coordinate[1]>i?this.alarm.set("time",this.alarm.getTime().add(5,"minutes").format()):this.alarm.set("time",this.alarm.getTime().subtract(5,"minutes").format())}},s.prototype._saveAlarm=function(){m.save()},s.prototype.extend=function(t){this.mainMod.halt();var i=r.translate(0,t);this.mainMod.setTransform(i),this.extended=!0},s.prototype.extendEnd=function(){this.extended&&(this.mainMod.halt(),this.mainMod.setTransform(r.identity,{method:"wall",dampingRatio:.45,period:800}),this.extended=!1)},s.prototype._updateMoveableTimeColor=function(){var t=new _(this.backgrounds.getActiveColors()[0]),i=t.getLightness(),e=o(i+10,35,80);t.setLightness(e),this.moveableTime.setTimeColor(t.get())},s.prototype._extendedCheck=function(){this.extended&&(this.mainMod.halt(),this.mainMod.setTransform(r.identity,{curve:"inSineNorm",duration:200}),this.extended=!1)},s.prototype.initSmallTime=function(){return this.smallTime=new y({},this.alarm),this.smallTimeMod=new h({origin:[.05,.04]}),this.mainNode.add(this.smallTimeMod).link(this.smallTime),this},s.prototype.initActivationBackground=function(){return this.activationBg=new v({},this.alarm),this.mainNode.add(this.activationBg),this},s.prototype.initMoveableTimeView=function(){return this.moveableTime=new g({backgroundContent:'<div class="moveable-innerBG"></div>',backgroundVisibleOpacity:.1,timeXPositionTransition:{curve:"inOutQuadNorm",duration:250},timeScaleDownTransition:{curve:"inOutQuadNorm",duration:250},timeScaleUpTransition:{curve:"inOutQuadNorm",duration:250}},this.alarm,this.backgrounds),this.mainNode.add(this.moveableTime),this},s.prototype.initBackground=function(){return this.backgrounds=S,this.backgrounds.setAlarm(this.alarm),this.mainNode.add(new h({transform:r.translate(0,0,-1)})).link(this.backgrounds),this},s.prototype.initCurrentTimeViewLine=function(){return this.currentTimeLine=new x,this.mainNode.add(this.currentTimeLine),this},s.prototype.initSwipeSwitcher=function(){return this.swipeSwitcher=new M,this},s.prototype.initAlarmName=function(){var t=m.getCurrentAlarm()?m.getCurrentAlarm().get("name"):"Quick Alarm";return this.alarmName=new n({size:[.5*window.innerWidth,50],properties:{color:"#ffffff",lineHeight:"25px",textAlign:"right"},content:t}),this.alarmModifier=new h({origin:[.86,.04]}),this.mainNode.add(this.alarmModifier).link(this.alarmName),this},s.prototype.initSettingsMenuView=function(){return this.settingsMenu=new w,this.settingsDrawer=new z({direction:"b",size:this.settingsMenu.getSize(),zDepth:3,openTransition:{method:"spring",period:800,dampingRatio:.85}}),this.settingsDrawer.link(this.settingsMenu),this.settingsNode.add(this.settingsDrawer),this},s.prototype.initAlarmActivatorView=function(){return this.alarmActivator=new b(this.alarm,this.backgrounds),this.mainNode.add(this.alarmActivator),this},s.prototype.activate=function(t){l.fadeIn(t)},s.prototype.deactivate=function(t){this.unbindEvents(),l.fadeOut(t,this.options.transitionOut)},e.exports=s}),define("app/widgets/DayManager",["require","exports","module","famous/View","famous/Engine","famous/Matrix","famous/Surface","famous/Modifier","famous-utils/Utils","famous/ContainerSurface","famous/RenderNode","famous-sync/CustomSync"],function(t,i,e){function s(t,i){o.apply(this,arguments),this.alarm=i,this.dayXMods=[],this.dayYMods=[],this.days=[],this.childNode=new p,this.container=new u,this.node.add(this.container),this.container.add(this.childNode),this.boundResize=this.resize.bind(this),this.checkDayChange=this._checkDayChange.bind(this),this.sync,this._calcs={numChars:function(){for(var t=0,i=0;i<s.Days.length;i++)t+=s.Days[i].length;return t}(),xPositions:[],horizPadding:0,padding:0},this._state={daysToChange:[],daysActive:[]},this.initDays().events().resize().baseYPositions()}var o=t("famous/View"),n=t("famous/Engine"),r=t("famous/Matrix"),a=t("famous/Surface"),h=t("famous/Modifier");t("famous-utils/Utils");var u=t("famous/ContainerSurface"),p=t("famous/RenderNode"),c=t("famous-sync/CustomSync");s.prototype=Object.create(o.prototype),s.prototype.constructor=s,s.DEFAULT_OPTIONS={padding:.05,horizPadding:.0125,verticalDisplacement:.05,verticalPadding:.025,offOpacity:.3,defaultTransition:{curve:"outExpoNorm",duration:800},minHeight:50},s.Days=["MON","TUE","WED","THU","FRI","SAT","SUN"],s.DaysOffset=[0,.06,.02,.05,.05,.01,0],s.prototype.events=function(){return n.on("resize",this.boundResize),this.alarm.on("change:days",this.checkDayChange),this.sync=new c(["Touch","Mouse"]),this.sync.bindThis(this),this.container.pipe(this.sync),this.sync.on("start",this._handleStart),this.sync.on("update",this._handleUpdate),this.sync.on("end",this._handleEnd),this},s.prototype.unbindEvents=function(){this.alarm.unbind("change:days",this.checkDayChange),n.unbind("resize",this.boundResize)},s.prototype._handleStart=function(t){this._state.daysToChange=[],this._checkDays(this._getClosestDay(t.coordinate[0]))},s.prototype._handleUpdate=function(t){this._checkDays(this._getClosestDay(t.coordinate[0]))},s.prototype._handleEnd=function(){},s.prototype._checkDays=function(t){-1==this._state.daysToChange.indexOf(t)&&(this._state.daysToChange.push(t),this.toggleDay(t))},s.prototype.toggleDay=function(t){var i=this.alarm.get("days");-1==i.indexOf(t)?this.alarm.addDay(t):this.alarm.removeDay(t)},s.prototype._checkDayChange=function(t){for(var i=t.value,e=0;e<i.length;e++)-1==this._state.daysActive.indexOf(i[e])&&(this.dayOn(i[e],this.options.defaultTransition),this._state.daysActive.push(i[e]));for(var e=0;e<this._state.daysActive.length;e++)-1==i.indexOf(this._state.daysActive[e])&&(this.dayOff(this._state.daysActive[e],this.options.defaultTransition),this._state.daysActive.splice(e,1))},s.prototype.dayOn=function(t,i){var e=this.dayYMods[t];i&&e.halt(),e.setOpacity(1,i),e.setTransform(r.identity,i)},s.prototype.dayOff=function(t,i){var e=this.container.getSize()[1],s=this.dayYMods[t];i&&s.halt(),s.setOpacity(this.options.offOpacity,i),s.setTransform(r.translate(0,.5*e,0),i)},s.prototype.initDays=function(){for(var t=0;t<s.Days.length;t++){var i=new a({content:'<span class="medium">'+s.Days[t]+"</span>",properties:{color:"white"}}),e=new h,o=new h;this.dayXMods.push(e),this.dayYMods.push(o),this.days.push(i),this.childNode.add(e).link(o).link(i)}return this},s.prototype.baseYPositions=function(){for(var t=this.alarm.get("days"),i=0;i<this.dayYMods.length;i++)this.dayYMods[i],-1!==t.indexOf(i)?this.dayOn(i):this.dayOff(i);return this},s.prototype.resize=function(){return this.calcs(),this.updateAndPlaceDays().updateContainer(),this},s.prototype.calcs=function(){this._calcs.window=[window.innerWidth,window.innerHeight],this._calcs.horizPadding=this._calcs.window[0]*this.options.horizPadding,this._calcs.padding=this._calcs.window[0]*this.options.padding},s.prototype.updateAndPlaceDays=function(){var t=this._calcFontSize(),i=(this._calcs.window[0]-2*this._calcs.padding)/s.Days.length;this._calcs.xPositions=[];for(var e=0;e<this.days.length;e++){var o=this.dayXMods[e];this.days[e].setProperties({fontSize:~~t+"px"}),this.days[e].setSize([t*s.Days[e].length+20,2*t]),e*this._calcs.horizPadding;var n=this._calcs.padding+e*i;n+=s.DaysOffset[e]*n,o.setTransform(r.translate(n,0,0)),this._calcs.xPositions[e]=n}return this._updateXPositionCalcs(),this},s.prototype._updateXPositionCalcs=function(){for(var t=0;t<this._calcs.xPositions.length;t++){var i=this._calcs.xPositions[t],e=this._calcs.xPositions[t+1];if(e){var s=e-i;this._calcs.xPositions[t]=i+.5*s}else{var o=this._calcs.xPositions[t-1],s=i-o;this._calcs.xPositions[t]=i+.5*s}}},s.prototype.updateContainer=function(){this.container.setSize([void 0,Math.max(this._calcs.window[1]*this.options.verticalDisplacement+2*this._calcs.window[1]*this.options.verticalPadding,this.options.minHeight)])},s.prototype._calcFontSize=function(){var t=this._calcs.window[0]*this.options.padding,i=(this._calcs.window[0]-2*t)/this._calcs.numChars;return i},s.prototype._getClosestDay=function(t){for(var i,e=1e4,s=0;s<this._calcs.xPositions.length;s++){var o=Math.abs(t-this._calcs.xPositions[s]);e>o&&(e=o,i=s)}return i},s.prototype.getSize=function(){return this.container.getSize()},e.exports=s}),define("famous-views/InputSurface",["require","exports","module","famous/Surface"],function(t,i,e){function s(t){this._placeholder=t.placeholder||"",this._value=t.value||"",this._type=t.type||"text",o.apply(this,arguments),this.on("click",this.focus.bind(this))}var o=t("famous/Surface");s.prototype=Object.create(o.prototype),s.prototype.surfaceEvents=o.prototype.surfaceEvents.concat(["keypress","keyup","keydown","focus","blur"]),s.prototype.elementType="input",s.prototype.elementClass="famous-surface",s.prototype.setPlaceholder=function(t){return this._placeholder=t,this._contentDirty=!0,this},s.prototype.focus=function(){return this._currTarget?this._currTarget.focus():this},s.prototype.blur=function(){return this._currTarget?this._currTarget.blur():this},s.prototype.setValue=function(t){return this._value=t,this._contentDirty=!0,this},s.prototype.setType=function(t){return this._type=t,this._contentDirty=!0,this},s.prototype.getValue=function(){return this._currTarget?this._currTarget.value:this._value},s.prototype.deploy=function(t){""!==this._placeholder&&(t.placeholder=this._placeholder),t.value=this._value,t.type=this._type
},e.exports=s}),define("app/widgets/InputNameView",["require","exports","module","famous/View","famous/Matrix","famous/Surface","famous/Engine","famous/Modifier","famous-views/InputSurface","famous-utils/Utils","famous-utils/KeyCodes"],function(t,i,e){function s(t,i){o.apply(this,arguments),this.alarm=i,this.onClick=this._onClick.bind(this),this.resize=a.debounce(this._resize.bind(this),25),this._state={focused:!1},this.initInput()._resize().events()}var o=t("famous/View");t("famous/Matrix"),t("famous/Surface");var n=t("famous/Engine");t("famous/Modifier");var r=t("famous-views/InputSurface"),a=t("famous-utils/Utils"),h=t("famous-utils/KeyCodes");s.prototype=Object.create(o.prototype),s.prototype.constructor=s,s.DEFAULT_OPTIONS={},s.prototype.events=function(){return n.on("resize",this.resize),n.on("click",this.onClick),this.input.on("click",function(t){t.stopPropagation(),this.input.focus()}.bind(this)),this.input.on("focus",function(){this._state.focused=!0}.bind(this)),this.input.on("blur",function(){this._state.focused=!1}.bind(this)),this.input.on("keyup",this._handleKeyup.bind(this)),this},s.prototype.unbindEvents=function(){n.unbind("click",this.onClick),n.unbind("resize",this.resize)},s.prototype._onClick=function(){this._state.focused&&this.input.blur()},s.prototype._resize=function(){return this._state.focused?this:(this.resizeInput(),this)},s.prototype._handleKeyup=function(t){t.keyCode==h.ENTER&&this.input.blur(),this._setName()},s.prototype._setName=function(){var t=this.input.getValue();this.alarm.set("name",t)},s.prototype.resizeInput=function(){var t=.035*window.innerHeight;return this.input.setSize([.5*window.innerWidth,t]),this.input.setProperties({fontSize:.8*t+"px"}),this},s.prototype.initInput=function(){var t=this.alarm.get("name")||"My New Alarm";return this.input=new r({placeHolder:t,value:t,classes:["input-name","medium"],properties:{backgroundColor:"transparent",color:"white",pointerEvents:"all"}}),this.node.add(this.input),this},s.prototype.getSize=function(){return this.input.getSize()},e.exports=s}),define("app/widgets/ResponsiveSurface",["require","exports","module","famous/Surface","famous/Engine"],function(t,i,e){function s(t){t.size&&(this._savedSize=t.size),o.apply(this,arguments),n.on("resize",this._resize.bind(this))}var o=t("famous/Surface"),n=t("famous/Engine");s.prototype=Object.create(o.prototype),s.prototype.resize=function(){},s.prototype._resize=function(){this.setSize(this._savedSize),this.resize()},s.prototype.setSize=function(t){this._savedSize=t.slice(0);for(var i=0;i<this._savedSize.length;i++){var e=0==i?window.innerWidth:window.innerHeight,s=this._savedSize[i];"string"==typeof s&&(t[i]=parseFloat(s)/100*e)}this.size=t?t.slice(0,2):void 0,this._sizeDirty=!0},e.exports=s}),define("app/templates/checkmark",["require","exports","module"],function(t,i,e){e.exports={start:'<svg x="0px" y="0px" width="100%" height="100%" viewBox="0 0 30 30" enable-background="new 0 0 100 100" xml:space="preserve"> <path fill="',end:'" d="M29.145,6.542l-1.468-1.376c-0.554-0.517-1.421-0.488-1.938,0.063L11.051,20.918l-6.498-6.5 c-0.536-0.536-1.403-0.536-1.938-0.001l-1.424,1.424c-0.534,0.535-0.535,1.403,0,1.938l7.493,7.493 c0.027,0.031,0.04,0.071,0.071,0.101L9.211,25.8l0.891,0.894c0.158,0.156,0.349,0.254,0.548,0.318 c0.508,0.205,1.112,0.098,1.511-0.328L29.209,8.479C29.726,7.927,29.699,7.059,29.145,6.542z"/>'}}),define("app/templates/xMark",["require","exports","module"],function(t,i,e){e.exports={start:'<svg x="0px" y="0px" width="100%" height="100%" viewbox="0 0 100 100" enable-background="new 0 0 100 100" xml:space="preserve"> <path fill="',end:'" d="M93.272,79.374L64.216,50.317l29.057-29.056c2.181-2.184,2.187-5.725,0-7.915l-5.903-5.9 c-2.187-2.189-5.733-2.189-7.92-0.003L50.396,36.497L21.345,7.444c-2.192-2.189-5.734-2.186-7.92,0.003l-5.903,5.9 c-2.187,2.189-2.187,5.729,0,7.915l29.053,29.056L7.52,79.374c-2.189,2.191-2.187,5.733,0.003,7.92l5.9,5.902 c2.189,2.187,5.729,2.187,7.915,0l29.059-29.062l29.059,29.062c2.186,2.182,5.728,2.187,7.914,0l5.903-5.902 C95.459,85.107,95.459,81.56,93.272,79.374z"/> </svg>'}}),define("app/scenes/NewAlarmScene",["require","exports","module","famous/Surface","famous/Matrix","famous/RenderNode","famous/Modifier","famous/Engine","famous-utils/Utils","famous/EventArbiter","app/SceneTransitions","app/SceneController","famous-scene/Scene","app/data/Alarm","app/data/RiseData","app/widgets/MoveableTimeView","app/widgets/BackgroundFaderView","app/widgets/CurrentTimeView","app/widgets/CurrentTimelineView","app/scenes/BackgroundScene","app/widgets/DayManager","app/widgets/InputNameView","app/widgets/ResponsiveSurface","app/templates/checkmark","app/templates/xMark"],function(t,i,e){function s(){c.apply(this,arguments),void 0==f.getCurrentAlarm()?(this._isNewAlarm=!0,this.alarm=new l({name:"My New Alarm!",type:l.TYPE.CUSTOM})):(this._isNewAlarm=!1,this.alarm=f.getCurrentAlarm()),this.moveableTime,this.initBackgroundFaderViews().initMoveableTimeView().initDayManager().initInputName().initConfirm().initClose().events().resize()}var o=t("famous/Surface"),n=t("famous/Matrix");t("famous/RenderNode");var r=t("famous/Modifier"),a=t("famous/Engine"),h=t("famous-utils/Utils");t("famous/EventArbiter");var u=t("app/SceneTransitions"),p=t("app/SceneController"),c=t("famous-scene/Scene"),l=t("app/data/Alarm"),f=t("app/data/RiseData"),d=t("app/widgets/MoveableTimeView");t("app/widgets/BackgroundFaderView"),t("app/widgets/CurrentTimeView"),t("app/widgets/CurrentTimelineView");var m=t("app/scenes/BackgroundScene"),g=t("app/widgets/DayManager"),v=t("app/widgets/InputNameView"),y=t("app/widgets/ResponsiveSurface"),x=t("app/templates/checkmark"),S=t("app/templates/xMark");s.prototype=Object.create(c.prototype),s.prototype.constructor=s,s.DEFAULT_OPTIONS={resizeTransition:{curve:"inOutExpoNorm",duration:300}},s.prototype.events=function(){return this.extendedCheck=this._extendedCheck.bind(this),this.alarm.on("change:time",this.extendedCheck),this.updateIcons=this._updateIcons.bind(this),this.alarm.on("change:time",this.updateIcons),this.confirmBlocker.on("click",function(){this._saveAlarm(),p.setScene("Alarm")}.bind(this)),this.negateBlocker.on("click",function(){p.setScene("Alarm")}),this._debouncedResize=h.debounce(this.resize.bind(this),150),a.on("resize",this._debouncedResize),this},s.prototype.unbindEvents=function(){this.alarm.unbind("change:time",this.extendedCheck),this.alarm.unbind("change:time",this.updateIcons),a.unbind("resize",this._debouncedResize),this.moveableTime.unbindEvents(),this.dayManager.unbindEvents(),this.inputName.unbindEvents()},s.prototype.resize=function(){this.placeDayManager().placeInput().resizeNegateBlocker().resizeConfirmBlocker()},s.prototype._saveAlarm=function(){if(this._isNewAlarm){var t=f.getAlarms();t.add(this.alarm)}f.save()},s.prototype.extend=function(t){this.mainMod.halt();var i=n.translate(0,t);this.mainMod.setTransform(i),this.extended=!0},s.prototype.extendEnd=function(){this.extended&&(this.mainMod.halt(),this.mainMod.setTransform(n.identity,{method:"wall",dampingRatio:.45,period:800}),this.extended=!1)},s.prototype._extendedCheck=function(){this.extended&&(this.mainMod.halt(),this.mainMod.setTransform(n.identity,{curve:"inSineNorm",duration:200}),this.extended=!1)},s.prototype.initMoveableTimeView=function(){return this.moveableTime=new d({},this.alarm,this.backgrounds),this.node.add(this.moveableTime),this},s.prototype.initDayManager=function(){return this.dayManager=new g({},this.alarm,this.backgrounds),this.dayManagerMod=new r({transform:n.translate(0,window.innerHeight+200)}),this.node.add(this.dayManagerMod).link(this.dayManager),this},s.prototype.initInputName=function(){return this.inputName=new v({},this.alarm),this.inputNameMod=new r,this.node.add(this.inputNameMod).link(this.inputName),this},s.prototype.placeInput=function(){return this.inputNameMod.setTransform(n.translate(.5*(window.innerWidth-this.inputName.getSize()[0]),.05*this.height,4),this.options.resizeTransition),this},s.prototype.initConfirm=function(){return this.confirmMod=new r({origin:[.9,.03]}),this.confirmSurface=new y({size:[void 0,"5%"],content:x.start+this.backgrounds.getActiveTextColor()+x.end}),this.confirmSurface.resize=function(){var t=this.getSize()[1];this.size=[t,t],this._sizeDirty=!0},this.confirmSurface.resize(),this.node.add(this.confirmMod).link(this.confirmSurface),this.confirmBlocker=new o,this.confirmBlockerMod=new r({opacity:0,transform:n.translate(0,0,1)}),this.node.add(this.confirmBlockerMod).link(this.confirmBlocker),this},s.prototype.resizeConfirmBlocker=function(){var t=.1875*window.innerWidth;return this.confirmBlocker.setSize([t,.1*window.innerHeight]),this.confirmBlockerMod.setTransform(n.translate(window.innerWidth-t,0,1)),this},s.prototype.initClose=function(){return this.negateMod=new r({origin:[.1,.03]}),this.negateSurface=new y({size:[void 0,"5%"],content:S.start+this.backgrounds.getActiveTextColor()+S.end}),this.negateSurface.resize=function(){var t=this.getSize()[1];this.size=[t,t],this._sizeDirty=!0},this.negateSurface.resize(),this.node.add(this.negateMod).link(this.negateSurface),this.negateBlocker=new o({properties:{backgroundColor:"red"}}),this.negateBlockerMod=new r({origin:[0,0],opacity:0,transform:n.translate(0,0,1)}),this.node.add(this.negateBlockerMod).link(this.negateBlocker),this},s.prototype.resizeNegateBlocker=function(){return this.negateBlocker.setSize([.1875*window.innerWidth,.1*window.innerHeight]),this},s.prototype.placeDayManager=function(){return this.dayManagerMod.halt(),this.dayManagerMod.setTransform(n.translate(0,window.innerHeight-this.dayManager.getSize()[1]),{curve:"inOutBackNorm",duration:650}),this},s.prototype._updateIcons=function(){this.confirmSurface.setContent(x.start+this.backgrounds.getActiveTextColor()+x.end),this.negateSurface.setContent(S.start+this.backgrounds.getActiveTextColor()+S.end)},s.prototype.initBackgroundFaderViews=function(){return this.backgrounds=m,this.backgrounds.setAlarm(this.alarm),this.node.add(new r({transform:n.translate(0,0,-1)})).link(this.backgrounds),this},s.prototype.activate=function(t){u.fadeIn(t)},s.prototype.deactivate=function(t){this.unbindEvents(),u.fadeOut(t,{curve:"outExpoNorm",duration:300})},e.exports=s}),define("surface-extensions/ExpandingSurface",["require","exports","module","famous/Surface","famous/Engine"],function(t,i,e){function s(t){this.getCustomSize=t.getCustomSize?t.getCustomSize:function(t){return[this.size[0],t.firstChild.clientHeight]},this._resizeDirty=!0,this._checkHeight=o.bind(this),r.on("postrender",this._checkHeight),n.apply(this,arguments)}function o(){if(this._resizeDirty&&this._currTarget){var t=this.getCustomSize.call(this,this._currTarget);this.setSize(t),this.emit("resize",t),this._resizeDirty=!1,r.unbind("postrender",this._checkHeight)}}var n=t("famous/Surface"),r=t("famous/Engine");s.prototype=Object.create(n.prototype),s.prototype.constructor=s,s.prototype.setHeightDirty=function(){this._resizeDirty=!0,r.on("postrender",this._checkHeight)},s.prototype.setContent=function(t){if(this.content!=t){if("string"==typeof t)this.content='<div style="float:left">'+t+"</div>";else{var i=document.createElement("div");i.style.float="left",i.appendChild(t),this.content=i}this._contentDirty=!0}this.setHeightDirty()},e.exports=s}),define("app/scenes/TimeScene",["require","exports","module","famous/Surface","famous/Matrix","famous/Modifier","famous/Engine","famous/Transitionable","famous-utils/Utils","surface-extensions/ExpandingSurface","famous-sync/CustomSync","famous-color/Color","famous-animation/Easing","app/SceneTransitions","app/SceneController","famous-scene/Scene","app/data/Alarm","app/data/RiseData","app/widgets/MoveableTimeView","app/widgets/CurrentTimeView","app/widgets/CurrentTimelineView","app/widgets/AlarmActivatorView","app/widgets/SettingsMenuView","app/widgets/SwipeEventSwitcher","app/scenes/BackgroundScene"],function(t,i,e){function s(){m.apply(this,arguments),this.currentTime=new g({time:moment().format()}),this.currentTime.set("active",!0),this.nextAlarm=this.getNextActiveAlarm(),this._lastTime=this.currentTime.getTime().clone(),this.animateDimmer=!1,this.updateSurfaces=this._updateSurfaces.bind(this),this.startPosY=0,this.setupBackgrounds(),this.setupSurfaces(),this.events()}var o=t("famous/Surface"),n=t("famous/Matrix"),r=t("famous/Modifier");t("famous/Engine");var a=t("famous/Transitionable"),h=t("famous-utils/Utils"),u=t("surface-extensions/ExpandingSurface"),p=t("famous-sync/CustomSync"),c=t("famous-color/Color"),l=t("famous-animation/Easing"),f=t("app/SceneTransitions"),d=t("app/SceneController"),m=t("famous-scene/Scene"),g=t("app/data/Alarm"),v=t("app/data/RiseData");t("app/widgets/MoveableTimeView"),t("app/widgets/CurrentTimeView"),t("app/widgets/CurrentTimelineView"),t("app/widgets/AlarmActivatorView"),t("app/widgets/SettingsMenuView"),t("app/widgets/SwipeEventSwitcher");var y=t("app/scenes/BackgroundScene");s.prototype=Object.create(m.prototype),s.prototype.constructor=s,s.DEFAULT_OPTIONS={sunSize:32,ampmPadding:8,cellSize:80,sunOpacity:.85,ampmOpacity:.66,currentTimeOffsetX:12,lineSize:[96,1],resizeTransition:{curve:"inOutBackNorm",duration:900},riseTimeTransitionIn:{curve:"inOutBackNorm",duration:900},currentTimeTransitionIn:{curve:"inExpoNorm",duration:600},ampmTransitionIn:{curve:"inExpoNorm",duration:600},backgroundsTransitionIn:{curve:"inExpoNorm",duration:300},sunSurfaceTransitionIn:{curve:"inExpoNorm",duration:300},lineSurfaceTransitionIn:{curve:"inExpoNorm",duration:300},dimmerTransition:{curve:"inOutQuadNorm",duration:400},transitionOut:{curve:"outExpoNorm",duration:400}},s.DAYS={0:"Monday",1:"Tuesday",2:"Wednesday",3:"Thursday",4:"Friday",5:"Saturday",6:"Sunday"},s.prototype.getTextColor=function(){var t=this.backgrounds.getActiveColors(),i=new c(t[0]);return i.setLightness(Math.abs(100-i.getLightness())%100),i.get()},s.prototype.setupBackgrounds=function(){this.backgroundsInit=!1,this.backgrounds=y,this.backgrounds.setAlarm(this.currentTime),this.backgroundsMod=new r({opacity:0}),this.node.add(this.backgroundsMod).link(this.backgrounds)},s.prototype.setupSurfaces=function(){this.setupRiseSurface(),this.setupCurrentTimeSurfaces(),this.setupSunSurface(),this.setupLineSurface(),this.setupDimmerSurface()},s.prototype.setupRiseSurface=function(){this.riseTimeSurface=new o({content:this.generateDurationFromNowString(),properties:{"font-size":"18px",color:this.getTextColor(),"text-align":"center","line-height":this.options.cellSize+"px"},classes:["thin"],size:[h.getWidth(),this.options.cellSize]}),this.riseTimeSurfaceMod=new r({transform:n.translate(0,h.getHeight(),0)}),this.node.add(this.riseTimeSurfaceMod).link(this.riseTimeSurface)},s.prototype.resizeRiseSurface=function(){return this.riseTimeSurface.setSize([h.getWidth(),this.options.cellSize]),this},s.prototype.setupCurrentTimeSurfaces=function(){var t=this.options.cellSize+"px",i=.33*this.options.cellSize+"px";this.currentTimeSurface=new u({content:this.generateTimeString(),properties:{"font-size":t,color:"#FFFFFF","letter-spacing":"-4px"},classes:["regular"],getCustomSize:function(t){return t&&t.firstChild?[t.firstChild.clientWidth,t.firstChild.clientHeight]:[0,0]}}),this.currentTimeSurfaceInit=!1,this.currentTimeSurface.on("resize",function(){this.currentTimeSurfaceInit=!0,this.positionCurrentTimeSurfaces()}.bind(this)),this.currentTimeSurfaceMod=new r({opacity:0}),this.node.add(this.currentTimeSurfaceMod).link(this.currentTimeSurface),this.ampmSurface=new u({content:this.generateTimeAMPMString(),properties:{"font-size":i,color:"#FFFFFF"},classes:["regular"],getCustomSize:function(t){return t&&t.firstChild?[t.firstChild.clientWidth,t.firstChild.clientHeight]:[0,0]}}),this.ampmSurfaceInit=!1,this.ampmSurface.on("resize",function(){this.ampmSurfaceInit=!0,this.positionCurrentTimeSurfaces()}.bind(this)),this.ampmSurfaceMod=new r({opacity:0}),this.node.add(this.ampmSurfaceMod).link(this.ampmSurface)},s.prototype.setupSunSurface=function(){this.sunSurface=new o({content:'<img src="img/sun.svg" style="width:'+this.options.sunSize+"px; height:"+this.options.sunSize+'px"></img>',properties:{overflow:"hidden"},size:[this.options.sunSize,1.5*this.options.sunSize]}),this.sunSurfaceMod=new r({opacity:0}),this.sunSurfaceOffsetMod=new r({transform:n.translate(.5*(h.getWidth()-this.options.sunSize),this.options.sunSize,1),opacity:this.options.sunOpacity}),this.node.add(this.sunSurfaceMod).link(this.sunSurfaceOffsetMod).link(this.sunSurface),this.dimmerTrans=new a(0),this.sunSurface.on("click",function(){this.animateDimmer=!0,this.dimmerTrans.set(1,this.options.dimmerTransition,function(){this.dimmerTrans.set(0,this.options.dimmerTransition,function(){this.animateDimmer=!1}.bind(this))}.bind(this))}.bind(this))},s.prototype.resizeSunSurface=function(){return this.sunSurfaceOffsetMod.setTransform(n.translate(.5*(h.getWidth()-this.options.sunSize),this.options.sunSize,0),this.options.resizeTransition),this},s.prototype.setupLineSurface=function(){this.lineSurface=new o({properties:{backgroundColor:"#FFFFFF"},size:this.options.lineSize}),this.lineSurfaceMod=new r({transform:n.translate(.5*(h.getWidth()-this.options.lineSize[0]),2.5*this.options.sunSize,0),opacity:0}),this.node.add(this.lineSurfaceMod).link(this.lineSurface)},s.prototype.resizeLineSurface=function(){return this.lineSurfaceMod.setTransform(n.translate(.5*(h.getWidth()-this.options.lineSize[0]),2.5*this.options.sunSize,0),this.options.resizeTransition),this},s.prototype.setupDimmerSurface=function(){this.dimmerSurface=new o({properties:{backgroundColor:"rgba(0, 0, 0, 1.0)"},size:[h.getWidth(),h.getHeight()],classes:["dimmer"]}),this.dimmerSurfaceMod=new r({transform:n.translate(0,0,.5),opacity:0}),this.node.add(this.dimmerSurfaceMod).link(this.dimmerSurface)},s.prototype.resizeDimmerSurface=function(){return this.dimmerSurface.setSize([h.getWidth(),h.getHeight()]),this},s.prototype.getNextActiveAlarm=function(){var t,i=v.getAlarmModels(),e=1e9,s=moment();this.getCurrentDay();for(var o=0;o<i.length;o++){var n=i[o],r=n.get("type")==g.TYPE.QUICK?!0:!1,a=r?[0,1,2,3,4,5,6]:n.get("days");if(n.get("active")===!0){var h=r===!0?0:24*this.daysFromToday(this.calculateClosestDay(a)),u=24*h+moment.duration(n.getTime().diff(s)).asHours();e>u&&(e=u,t=n)}}return t},s.prototype.daysFromToday=function(t){var i=this.getCurrentDay(),e=t-i;return 0>e&&(e=7-e),e},s.prototype.calculateClosestDay=function(t){for(var i=1e6,e=0,s=this.getCurrentDay(),o=0;o<t.length;o++){var n=t[o]-s;0>n&&(n=7-n),i>n&&(i=n,e=t[o])}return e},s.prototype.getCurrentDay=function(){var t=moment().day()-1;return-1===t?6:t},s.prototype.generateTimeString=function(){return moment().format("h:mm")},s.prototype.generateTimeAMPMString=function(){return this.currentTime.getTime().format("A")},s.prototype.generateDurationFromNowString=function(){if(void 0!==this.nextAlarm){var t=moment();this.getCurrentDay();var i=this.nextAlarm.get("type")===g.TYPE.QUICK?!0:!1,e=i?[0,1,2,3,4,5,6]:this.nextAlarm.get("days"),o=this.calculateClosestDay(e),n=this.daysFromToday(o);if(n>0)return"This "+s.DAYS[o];var r=24*n+moment.duration(this.nextAlarm.getTime().diff(t)).asHours(),a=Math.floor(r),h=Math.floor(60*(r-a)),u="";return a>0&&(u+=a+" ",u+=a>1?"hrs":"hr",u+=" and "),h>0&&(u+=h+" ",u+=h>1?"mins":"min"),u+=" until Rise"}return""},s.prototype.setTimeSurfacesDirty=function(){this.currentTimeSurfaceInit=!1,this.ampmSurfaceInit=!1,this.currentTimeSurface.setContent(this.generateTimeString()),this.ampmSurface.setContent(this.generateTimeAMPMString())},s.prototype.positionCurrentTimeSurfaces=function(){if(this.ampmSurfaceInit===!0&&this.currentTimeSurfaceInit===!0&&1==this.backgroundsInit){var t=this.currentTimeSurface.getSize(),i=this.ampmSurface.getSize(),e=.5*(h.getWidth()-t[0])-this.options.currentTimeOffsetX,s=.5*(h.getHeight()-t[1]),o=.5*(h.getWidth()+t[0])+this.options.ampmPadding-this.options.currentTimeOffsetX,r=.5*(h.getHeight()+t[1])-1.45*i[1];this.currentTimeSurfaceMod.setTransform(n.translate(e,s,0)),this.ampmSurfaceMod.setTransform(n.translate(o,r,0)),this.currentTimeSurfaceMod.setOpacity(1,this.options.currentTimeTransition),this.ampmSurfaceMod.setOpacity(this.options.ampmOpacity,this.options.ampmTransition)}},s.prototype.update=function(){this.currentTime.set("time",moment().format()),this.animateDimmer&&this.setDimmerOpacity(this.dimmerTrans.get())},s.prototype.events=function(){this.sync=new p(["Mouse","Touch"]),this.sync.bindThis(this),this.dimmerSurface.pipe(this.sync),this.sync.on("start",this.touchStart),this.sync.on("update",this.touchMove),this.sync.on("end",this.touchEnd),this.currentTime.on("change:time",this.updateSurfaces)},s.prototype.unbindEvents=function(){this.currentTime.unbind("change:time",this.updateSurfaces)},s.prototype.touchStart=function(t){this.touchMoved=!1,this.startPosY=t.coordinate[1]},s.prototype.touchMove=function(t){this.touchMoved=!0;var i=h.limit(this.dimmerSurfaceMod.getOpacity()+.75*(t.coordinate[1]-this.startPosY)/this.height,0,1);this.setDimmerOpacity(i),this.startPosY=t.coordinate[1]},s.prototype.touchEnd=function(t){this.touchMoved===!1&&this.startPosY===t.coordinate[1]&&d.setScene("Home")},s.prototype.setDimmerOpacity=function(t){this.dimmerSurfaceMod.setOpacity(t);var i=h.map(t,0,1,0,2*this.options.sunSize);this.sunSurface.setProperties({"padding-top":i+"px"}),this.sunSurfaceMod.setOpacity(l.inQuadNorm(1-t)*this.options.sunOpacity),this.lineSurfaceMod.setOpacity(l.outQuadNorm(t))},s.prototype._updateSurfaces=function(){this.currentTime.getTime().diff(this._lastTime)>6e4&&(this._lastTime=this.currentTime.getTime().clone(),this.riseTimeSurface.setContent(this.generateDurationFromNowString()),this.riseTimeSurface.setProperties({color:this.getTextColor()}),this.setTimeSurfacesDirty())},s.prototype.activate=function(t){this.riseTimeSurfaceMod.setTransform(n.translate(0,h.getHeight()-this.options.cellSize,0),this.options.riseTimeTransitionIn,t),this.backgroundsMod.setOpacity(1,this.options.backgroundsTransitionIn,function(){this.backgroundsInit=!0,this.setTimeSurfacesDirty(),this.sunSurfaceMod.setOpacity(this.options.sunOpacity,this.options.sunSurfaceTransitionIn)}.bind(this))},s.prototype.resize=function(){this.positionCurrentTimeSurfaces(),this.resizeRiseSurface().resizeSunSurface().resizeLineSurface().resizeDimmerSurface()},s.prototype.deactivate=function(t){this.unbindEvents(),f.fadeOut(t,this.options.transitionOut)},e.exports=s}),define("famous-audio/BufferLoader",["require","exports","module"],function(t,i,e){function s(t,i,e){this.context=t,this.urlList=i,this.onload=e,this.bufferList=[],this.loadCount=0}s.prototype.loadBuffer=function(t,i){var e=new XMLHttpRequest;e.open("GET",t,!0),e.responseType="arraybuffer";var s=this;e.onload=function(){s.context.decodeAudioData(e.response,function(e){return e?(s.bufferList[i]=e,++s.loadCount==s.urlList.length&&s.onload(s.bufferList),void 0):(console.log("error decoding file data: "+t),void 0)})},e.onerror=function(){console.log("BufferLoader: XHR error")},e.send()},s.prototype.load=function(){for(var t=0;t<this.urlList.length;++t)this.loadBuffer(this.urlList[t],t)},e.exports=s}),define("famous-audio/SoundPlayer",["require","exports","module","./BufferLoader"],function(t,i,e){function s(t,i){this.context,this.node,this.buffersActive=[];try{window.AudioContext=window.AudioContext||window.webkitAudioContext,this.context=new AudioContext,this.bufferLoader=new o(this.context,t,this.setSounds.bind(this)),this.sounds,this.callback=i||void 0,this.bufferLoader.load()}catch(e){}}var o=t("./BufferLoader");s.prototype.setSounds=function(t){this.sounds=t,void 0!=this.callback&&this.callback()},s.prototype.isPlaying=function(){return this.buffersActive.length>0?!0:!1},s.prototype.stopPlaying=function(){var t=this.buffersActive.length;if(t>0)for(var i=0;t>i;i++){var e=this.buffersActive[i];e.stop(0)}},s.prototype.getContext=function(){return this.context},s.prototype.addNode=function(t){this.node=t},s.prototype.playSound=function(t,i,e){if(this.context&&this.sounds){var s=this.context.createBufferSource(),o=this.context.createGainNode?this.context.createGainNode():this.context.createGain();o.gain.value="undefined"==typeof i?.5:i,s.buffer=this.sounds[t],s.connect(o);var n=o;this.node&&(n.connect(this.node),n=this.node),n.connect(this.context.destination),s.start(0),s.onended=function(){var t=this.buffersActive.indexOf(s);-1!==t&&this.buffersActive.splice(t,1),e&&e()}.bind(this,s),this.buffersActive.push(s)}},e.exports=s}),define("app/widgets/AlarmRinger",["require","exports","module","famous/View","famous/Matrix","famous/Surface","famous/Modifier","famous/Engine","famous-utils/Utils","famous-audio/SoundPlayer","app/data/RiseData"],function(t,i,e){function s(t){this.options=o.extend({},s.DEFAULT_OPTIONS),o.extend(this.options,t),this.alarms=r.getAlarms(),this.soundPlayer=new n(r.appSettings.getSoundArray()),this.processAlarms().events()}t("famous/View"),t("famous/Matrix"),t("famous/Surface"),t("famous/Modifier"),t("famous/Engine");var o=t("famous-utils/Utils"),n=t("famous-audio/SoundPlayer"),r=t("app/data/RiseData");s.DEFAULT_OPTIONS={},s.prototype.events=function(){return this.alarms.on("singular:add",this._listenToModel.bind(this)),this},s.prototype.processAlarms=function(){for(var t=this.alarms.getModels(),i=0;i<t.length;i++)this._listenToModel(t[i]);return this},s.prototype._listenToModel=function(t){t.on("change:ringing",this._toggleSound.bind(this,t))},s.prototype._toggleSound=function(t){1==t.get("ringing")?this.playSound(t):this.stopSound()},s.prototype.playSound=function(t){0!=t.get("ringing")&&this.soundPlayer.playSound(r.appSettings.getActiveSoundIndex(),r.appSettings.get("volume"),this.playSound.bind(this,t))},s.prototype.stopSound=function(){this.soundPlayer.stopPlaying()};var a=new s;e.exports=a}),define("app/widgets/EmptyClass",["require","exports","module","famous/View","famous/Matrix","famous/Surface","famous/Modifier","famous/Engine"],function(t,i,e){function s(){o.apply(this,arguments)}var o=t("famous/View");t("famous/Matrix"),t("famous/Surface"),t("famous/Modifier");var n=t("famous/Engine");s.prototype=Object.create(o.prototype),s.prototype.constructor=s,s.DEFAULT_OPTIONS={},s.prototype.events=function(){return n.on("resize",this.resize.bind(this)),this},s.prototype.resize=function(){return this},e.exports=s}),define("app/ID",["require","exports","module"],function(t,i,e){e.exports=1004}),define("core/ExpandingSurface",["require","exports","module","famous/Surface","famous/Engine"],function(t,i,e){function s(){n.apply(this,arguments),this._resizeDirty=!0,this._checkHeight=o.bind(this),r.on("postrender",this._checkHeight)}function o(){if(this._resizeDirty&&this._currTarget){var t=[this.size[0],this._currTarget.firstChild.clientHeight];this.setSize(t),this.emit("resize",t),this._dirty=!1,r.unbind("postrender",this._checkHeight)}}var n=t("famous/Surface"),r=t("famous/Engine");s.prototype=Object.create(n.prototype),s.prototype.constructor=s,s.prototype.setHeightDirty=function(){this._resizeDirty=!0,r.on("postrender",this._checkHeight)},e.exports=s}),define("core/GA",["require","exports","module"],function(t,i,e){var s=s||[];s.push(["_setAccount","UA-34653957-1"]),s.push(["_setCampSourceKey","utm_source"]),s.push(["_setCampMediumKey","utm_medium"]),s.push(["_setCampContentKey","utm_keyword"]),s.push(["_setCampTermKey","utm_keyword"]),s.push(["_setCampNameKey","utm_campaign"]),s.push(["_trackPageview"]),function(){var t=document.createElement("script");t.type="text/javascript",t.async=!0,t.src=("https:"==document.location.protocol?"https://ssl":"http://www")+".google-analytics.com/ga.js";var i=document.getElementsByTagName("script")[0];i.parentNode.insertBefore(t,i)}(),e.exports=s}),define("famous-physics/constraints/StiffSpring",["require","exports","module","famous-physics/constraints/Constraint","../math/Vector","famous/EventHandler"],function(t,i,e){function s(t){this.opts={length:0,anchor:void 0,dampingRatio:1,period:1e3,restTolerance:1e-5},t&&this.setOpts(t),this.pDiff=new h,this.vDiff=new h,this.n=new h,this.impulse1=new h,this.impulse2=new h,this.eventOutput=void 0,this._atRest=!1}function o(t,i){t<this.opts.restTolerance?(this._atRest||this.eventOutput.emit("atRest",{particle:i}),this._atRest=!0):this._atRest=!1}function n(t,i,e){var s=Math.abs(t.dot(i)/e);return s}function r(){this.eventOutput=new u,this.eventOutput.bindThis(this),u.setOutputHandler(this,this.eventOutput)}var a=t("famous-physics/constraints/Constraint"),h=t("../math/Vector"),u=t("famous/EventHandler");s.prototype=Object.create(a.prototype),s.prototype.constructor=a,s.prototype.setOpts=function(t){void 0!==t.anchor&&(t.anchor instanceof h&&(this.opts.anchor=t.anchor),t.anchor.p instanceof h&&(this.opts.anchor=t.anchor.p),t.anchor instanceof Array&&(this.opts.anchor=new h(t.anchor))),void 0!==t.length&&(this.opts.length=t.length),void 0!==t.dampingRatio&&(this.opts.dampingRatio=t.dampingRatio),void 0!==t.period&&(this.opts.period=t.period),void 0!==t.restTolerance&&(this.opts.restTolerance=t.restTolerance)},s.prototype.setAnchor=function(t){void 0===this.opts.anchor&&(this.opts.anchor=new h),this.opts.anchor.set(t)},s.prototype.applyConstraint=function(t,i,e){for(var s=this.opts,r=this.pDiff,a=this.vDiff,h=this.impulse1,u=this.impulse2,p=s.length,c=s.anchor||i.p,l=s.period,f=s.dampingRatio,d=0;d<t.length;d++){var m=t[d],g=m.p,v=m.v,y=m.m,x=m.mInv;r.set(g.sub(c));var S=r.norm()-p;if(i){var b=i.mInv,w=i.v;a.set(v.sub(w));var T=1/(x+b)}else{a.set(v);var T=y}if(0==this.opts.period)var M=0,z=1;else var _=4*T*Math.PI*Math.PI/(l*l),C=4*T*Math.PI*f/l,z=e*_/(C+e*_),M=1/(C+e*_);var P=z/e*S;if(r.normalize(-P).sub(a).mult(e/(M+e/T)).put(h),m.applyImpulse(h),i&&(h.mult(-1).put(u),i.applyImpulse(u)),this.eventOutput){var O=m.getEnergy()+n(h,r,e);o.call(this,O,m)}}},s.prototype.getEnergy=function(t,i){var e=this.opts,s=e.length,o=e.period,n=e.anchor||i.p;if(0===o)return 0;var r=4*t.m*Math.PI*Math.PI/(o*o),a=n.sub(t.p),h=a.norm()-s;return.5*r*h*h},s.prototype.on=function(){return r.call(this),this.on.apply(this,arguments)},s.prototype.unbind=function(){return r.call(this),this.unbind.apply(this,arguments)},s.prototype.pipe=function(){return r.call(this),this.pipe.apply(this,arguments)},s.prototype.unpipe=function(){return r.call(this),this.unpipe.apply(this,arguments)},e.exports=s}),define("famous-physics/constraints/Wall",["require","exports","module","famous-physics/constraints/Constraint","../math/Vector","famous/EventHandler"],function(t,i,e){function s(t){this.opts={restitution:.7,k:0,n:new r,d:0,onContact:s.ON_CONTACT.REFLECT},t&&this.setOpts(t),this.diff=new r,this.impulse=new r,this.slop=-1,this.eventOutput=void 0}function o(){this.eventOutput=new a,this.eventOutput.bindThis(this),a.setOutputHandler(this,this.eventOutput)}var n=t("famous-physics/constraints/Constraint"),r=t("../math/Vector"),a=t("famous/EventHandler");s.prototype=Object.create(n.prototype),s.prototype.constructor=n,s.ON_CONTACT={REFLECT:0,WRAP:1,ABSORB:2},s.prototype.setOpts=function(t){void 0!==t.restitution&&(this.opts.restitution=t.restitution),void 0!==t.k&&(this.opts.k=t.k),void 0!==t.d&&(this.opts.d=t.d),void 0!==t.onContact&&(this.opts.onContact=t.onContact),void 0!==t.n&&this.opts.n.set(t.n)},s.prototype.getNormalVelocity=function(t){var i=this.opts.n;return t.dot(i)},s.prototype.getDistance=function(t){var i=this.opts.n,e=this.opts.d;return t.dot(i)+e},s.prototype.onEnter=function(t,i,e){var o=t.p,n=t.v,r=t.m,a=this.opts.n,h=this.opts.onContact,u=this.opts.restitution,p=this.impulse,c=this.opts.k,l=0;if(this.eventOutput){var f={particle:t,wall:this,overlap:i};this.eventOutput.emit("preCollision",f),this.eventOutput.emit("collision",f)}switch(h){case s.ON_CONTACT.REFLECT:var d=i<this.slop?-((1+u)*a.dot(n)+c/e*(i-this.slop))/(r*e+l):-((1+u)*a.dot(n))/(r*e+l);p.set(a.mult(e*d)),t.applyImpulse(p),o.add(a.mult(-i),o);break;case s.ON_CONTACT.ABSORB:var d=a.dot(n)/(r*e+l);p.set(a.mult(e*d)),t.applyImpulse(p),o.add(a.mult(-i),o),n.clear();
break;case s.ON_CONTACT.WRAP:if(i<-t.r)break}this.eventOutput&&this.eventOutput.emit("postCollision",f)},s.prototype.onExit=function(t,i){var e=this.opts.onContact,o=t.p,n=this.opts.n;e==s.ON_CONTACT.REFLECT?o.add(n.mult(-i),o):e==s.ON_CONTACT.WRAP||e==s.ON_CONTACT.ABSORB},s.prototype.applyConstraint=function(t,i,e){for(var s=this.opts.n,o=0;o<t.length;o++){var n=t[o],r=n.p,a=n.v,h=n.r||0,u=this.getDistance(r.add(s.mult(-h))),p=this.getNormalVelocity(a);0>u&&(0>p?this.onEnter(n,u,e):this.onExit(n,u,e))}},s.prototype.on=function(){return o.call(this),this.on.apply(this,arguments)},s.prototype.unbind=function(){return o.call(this),this.unbind.apply(this,arguments)},s.prototype.pipe=function(){return o.call(this),this.pipe.apply(this,arguments)},s.prototype.unpipe=function(){return o.call(this),this.unpipe.apply(this,arguments)},e.exports=s}),define("famous-physics/utils/PhysicsTransition",["require","exports","module","famous-physics/PhysicsEngine","famous-physics/constraints/StiffSpring","famous-physics/constraints/Wall","famous-physics/math/Vector"],function(t,i,e){function s(t){this.defaultDefinition={spring:{period:300,dampingRatio:.5},v:0,wall:!1},t=t||0,this._anchor=new y(t,0,0),this.endState=t,this.prevState=void 0,this.direction=void 0,this.atRest=!0,this.spring=new g({anchor:this._anchor}),this.wall=new v({restitution:.5,k:0,n:new y(-1,0,0)}),this.attachedWall=void 0,this.PE=new m,this.particle=this.PE.createParticle({p:[t,0,0]}),this.attachedSpring=this.PE.attach(this.spring,this.particle)}function o(){if(!this.atRest){this.PE.step();var t=n.call(this);x>t&&(this.atRest=!0,p.call(this,this.endState),this.callback&&this.callback())}}function n(){return this.particle.getEnergy()+this.spring.getEnergy(this.particle)}function r(t){this.spring.setOpts(t.spring),c.call(this,t.v),t.wall?h.call(this):u.call(this)}function a(t){this.prevState=this.endState,this.endState=t,this.direction=this.endState-this.prevState>0?1:this.endState<0?-1:0,void 0!==this.attachedSpring&&(this._anchor.x=t),void 0!==this.attachedWall&&this.wall.setOpts({d:Math.abs(t),n:[-this.direction,0,0]}),c.call(this,this.direction*f.call(this))}function h(){this.attachedWall=this.PE.attach(this.wall,this.particle)}function u(){void 0!==this.attachedWall&&this.PE.detach(this.attachedWall)}function p(t){this.particle.p.x=t}function c(t){this.particle.v.x=t}function l(){return this.particle.p.x}function f(){return this.particle.v.x}function d(t){this.callback=t}var m=t("famous-physics/PhysicsEngine"),g=t("famous-physics/constraints/StiffSpring"),v=t("famous-physics/constraints/Wall"),y=t("famous-physics/math/Vector");s.forceFunctions=g.forceFunctions;var x=1e-5;s.prototype.reset=function(t,i){t=t||0,i=i||0,this.prevState=void 0,p.call(this,t),c.call(this,i),a.call(this,t),d.call(this,void 0)},s.prototype.getVelocity=function(){return o.call(this),f.call(this)},s.prototype.halt=function(){this.set(this.get())},s.prototype.get=function(){return o.call(this),l.call(this)},s.prototype.set=function(t,i,e){return i?(this.atRest=!1,r.call(this,i),a.call(this,t),d.call(this,e),void 0):(this.reset(t),e&&e(),void 0)},e.exports=s}),define("famous-ui/Buttons/ButtonBase",["require","exports","module","famous/Surface","famous/View","famous/Matrix","famous/Modifier","famous-animation/Easing"],function(t,i,e){function s(){n.apply(this,arguments),this.eventInput.pipe(this.eventOutput),this.eventInput.bindThis(this),this.surface=new o(this.options.surfaceOptions),this.transform=new a({size:this.surface.getSize()}),this.surface.pipe(this),this.surface.on("click",this._handleClick),this._state=!1,this.node.link(this.transform).link(this.surface)}var o=t("famous/Surface"),n=t("famous/View"),r=t("famous/Matrix"),a=t("famous/Modifier"),h=t("famous-animation/Easing");s.prototype=Object.create(n.prototype),s.prototype.constructor=s,s.DEFAULT_OPTIONS={surfaceOptions:{},openState:r.identity,closeState:r.rotateZ(.75*Math.PI),transition:{curve:h.inOutBackNorm,duration:500}},s.prototype._handleClick=function(){},s.prototype.halt=function(){this.transform.halt()},s.prototype.setTransform=function(){this.transform.setTransform.apply(this.transform,arguments)},s.prototype.setOpacity=function(){this.transform.setOpacity.apply(this.transform,arguments)},s.prototype.getSize=function(){return this.surface.getSize()},e.exports=s}),define("famous-ui/Buttons/RotateButton",["require","exports","module","famous/Surface","famous/View","famous/Matrix","famous/Modifier","famous-animation/Easing","./ButtonBase"],function(t,i,e){function s(){r.apply(this,arguments),this.transform.setOrigin([.5,.5]),this._state=!1}t("famous/Surface"),t("famous/View");var o=t("famous/Matrix");t("famous/Modifier");var n=t("famous-animation/Easing"),r=t("./ButtonBase");s.prototype=Object.create(r.prototype),s.prototype.constructor=s,s.DEFAULT_OPTIONS={surfaceOptions:{},openState:o.identity,closeState:o.rotateZ(.75*Math.PI),transition:{curve:n.inOutBackNorm,duration:500}},s.prototype._handleClick=function(t){t.stopPropagation(),this.toggle()},s.prototype.getSize=function(){return this.surface.getSize()},s.prototype.toggle=function(){0==this._state?this.open():this.close()},s.prototype.open=function(){this._state=!0,this.transform.halt(),this.emit("open"),this.transform.setTransform(this.options.closeState,this.options.transition)},s.prototype.close=function(){this._state=!1,this.transform.halt(),this.emit("close"),this.transform.setTransform(this.options.openState,this.options.transition)},e.exports=s}),define("core/NextButton",["require","exports","module","famous/View","famous/Matrix","famous/Surface","famous/Modifier","famous/Utility","famous-utils/Utils","famous-animation/Easing","famous-ui/Buttons/RotateButton","app/ID","famous-utils/Time"],function(t,i,e){function s(){o.apply(this,arguments),this.nextButton,this.nextButtonModifier,this.nextButtonX,this.nextButtonY,this.hidden=!1,this.descriptionVisible=!1,this.descriptionInit=!1,this.nextDescriptionMod,this.nextDescription,this.sceneWidth,this.sceneHeight,this.positions(),this.initButton(),this._ajaxNext(),this.show()}var o=t("famous/View"),n=t("famous/Matrix"),r=t("famous/Surface"),a=t("famous/Modifier"),h=t("famous/Utility"),u=t("famous-utils/Utils");t("famous-animation/Easing"),t("famous-ui/Buttons/RotateButton");var p=t("app/ID"),c=t("famous-utils/Time");s.prototype=Object.create(o.prototype),s.prototype.constructor=s,s.DEFAULT_OPTIONS={offset:[0,0],buttonSize:[0,0],showTransition:{curve:"inOutBackNorm",duration:400},hideTransition:{curve:"inOutBackNorm",duration:400},hoverTransition:{curve:"inOutSineNorm",duration:800},nextDescriptionSize:[200,60],descriptionInTransition:{method:"physics",spring:{period:800,dampingRatio:.41},wall:!0,v:0},descriptionOutTransition:{method:"physics",spring:{period:400,dampingRatio:.5},wall:!1,v:0},position:"tr"},s.prototype.resize=function(){this.positions(),this.descriptionVisible?(this.descriptionVisible=!this.descriptionVisible,this.showNextDescription()):(this.descriptionVisible=!this.descriptionVisible,this.hideNextDescription()),this.show()},s.prototype.positions=function(){var t=window.innerWidth;window.innerHeight,"tr"==this.options.position?(this.hiddenPositions={next:n.translate(t-this.options.offset[0]-this.options.buttonSize[0],-this.options.buttonSize[1],0),nextDescription:n.translate(t,this.options.offset[1],0)},this.shownPositions={next:n.translate(t-this.options.offset[0]-this.options.buttonSize[0],this.options.offset[1],0),nextDescription:n.translate(t-this.options.nextDescriptionSize[0],this.options.offset[1],0)}):"tc"==this.options.position&&(this.hiddenPositions={next:n.translate(.5*t-.5*this.options.buttonSize[0],-this.options.buttonSize[1],0),nextDescription:n.translate(.5*t+.5*this.options.buttonSize[0],-this.options.nextDescriptionSize[1],0)},this.shownPositions={next:n.translate(.5*t-.5*this.options.buttonSize[0],this.options.offset[1],0),nextDescription:n.translate(.5*t+.5*this.options.buttonSize[0],0,0)})},s.prototype.show=function(){if(!this.hidden){var t=this.shownPositions.next,i=this.nextButton.getSize();this.nextButtonX=t[12]+.5*i[0],this.nextButtonY=t[13]+.5*i[1],this.nextButtonModifier.halt(),this.nextButtonModifier.setTransform(t,this.options.showTransition)}},s.prototype.showAll=function(){this.hidden=!1,this.show()},s.prototype.hideAll=function(){this.hidden=!0,this.hideNextDescription(),this.hide()},s.prototype.hide=function(){this.nextButtonModifier.halt(),this.nextButtonModifier.setTransform(this.hiddenPositions.next,this.options.hideTransition)},s.prototype.hideNextDescription=function(){this.descriptionInit&&this.descriptionVisible&&(this.show(),this.nextDescriptionMod.halt(),this.nextDescriptionMod.setTransform(this.hiddenPositions.nextDescription,this.options.descriptionOutTransition),this.descriptionVisible=!1)},s.prototype.showNextDescription=function(){this.descriptionInit&&(this.descriptionVisible||(this.hide(),this.nextDescriptionMod.halt(),c.setTimeout(function(){1==this.descriptionVisible&&this.nextDescriptionMod.setTransform(this.shownPositions.nextDescription,this.options.descriptionInTransition)}.bind(this),110),this.descriptionVisible=!0))},s.prototype.mousemove=function(t,i){var e=u.distance(t.pageX,t.pageY,this.nextButtonX,this.nextButtonY);i>e?this.showNextDescription():this.hideNextDescription()},s.prototype._ajaxNext=function(){h.loadURL("http://signup.famo.us/fsrv?f=getNextDemo&currentID="+p+"&source="+window.location.host+"&glEnabled="+u.supportsWebGL(),function(t){if(t){var i=JSON.parse(t);this.demoData=i.demoData,this.nextDemo=i.nextDemoData,this.nextDemo&&this.demoData&&this.initNextDescription()}}.bind(this))},s.prototype.initButton=function(){this.nextButton=new r({properties:{backgroundColor:"rgba( 0, 0, 0, 0.0)"},content:'<img draggable="false" class="no-user-select" src="js/core/next.svg" height="'+this.options.buttonSize[1]+'"></img>',size:this.options.buttonSize}),this.nextButtonModifier=new a({size:this.nextButton.getSize(),transform:this.hiddenPositions.next,opacity:this.nextButtonOpacity}),this.node.add(this.nextButtonModifier).link(this.nextButton)},s.prototype.initNextDescription=function(){this.descriptionInit=!0;var t="s.codepen.io"==window.location.host?this.nextDemo.codepenURL:this.nextDemo.staticURL;this.nextButton.setContent('<a href="'+t+'">'+this.nextButton.getContent()+"</a>");var i=this.nextDemo.name,e="http://notAvailableYet"!==this.nextDemo.thumbSRC?this.nextDemo.thumbSRC:"https://s3-us-west-1.amazonaws.com/disrupt.famo.us/widgets-lightbox/thumb.jpg";this.nextDescription=new r({content:'<a target="_blank" style=" text-decoration: none; float: left;" href="'+t+'">'+'<img style="float: left; width: 50px;" src="'+e+'" width="50"></img>'+'<div style="float: left; padding-left: 5px;">'+'<span class="core-next-demo">NEXT DEMO:</span><br><span class="core-next-name">'+i+"</span>"+"</div>"+"</a>",size:this.options.nextDescriptionSize,classes:["core-nextDescription"],properties:{padding:"5px",backgroundColor:"#000"}}),this.nextDescription.on("click",function(t,i){i.preventDefault(),window.location.href=t}.bind(this,t)),this.nextDescriptionMod=new a({transform:this.hiddenPositions.nextDescription}),this.node.add(this.nextDescriptionMod).link(this.nextDescription),this.descriptionVisible=!1},e.exports=s}),define("core/Fader",["require","exports","module","famous/Surface","famous/View","famous/Modifier"],function(t,i,e){function s(){n.apply(this,arguments),this.fade=new o({properties:{backgroundColor:this.options.color},classes:["background-fader"]}),this.fadeMod=new r({opacity:this.options.visible?this.options.fadePercent:0}),this.node.link(this.fadeMod).link(this.fade)}var o=t("famous/Surface"),n=t("famous/View"),r=t("famous/Modifier");s.prototype=Object.create(n.prototype),s.prototype.constructor=s,s.DEFAULT_OPTIONS={color:"#000000",fadePercent:.8,visible:!0,fadeTransition:{curve:"outExpoNorm",duration:500},fadePercent:.8},s.prototype.show=function(){this.fadeMod.setOpacity(this.options.fadePercent,this.options.fadeTransition)},s.prototype.hide=function(){this.fadeMod.setOpacity(0,this.options.fadeTransition)},e.exports=s}),define("core/Submit",["require","exports","module","famous/Surface","famous-utils/Time"],function(t,i,e){function s(){this._submitDelay=200,this.submit=new n({properties:{backgroundColor:"rgba( 255, 255, 255, 1.0)",color:"rgba( 0, 0, 0, 1.0 )",textAlign:"center"},classes:["submit"],content:"JOIN!",size:this._submitSize}),this.loadingIndex=2}function o(){if(this.isLoading){for(var t="",i=1;i<this.loadingIndex;i++)t+=".";this.loadingIndex=(this.loadingIndex+1)%4+1,this.submit.setContent(t),r.setTimeout(this._boundLoading,this._submitDelay)}}var n=t("famous/Surface"),r=t("famous-utils/Time");s.prototype.render=function(){return this.submit.render()},s.prototype.on=function(t,i){return this.submit.on(t,i)},s.prototype.setLoading=function(){this.isLoading=!0,this._boundLoading=o.bind(this),o.call(this)},s.prototype.setSuccess=function(){this.isLoading=!1,this.submit.setContent("SENT")},s.prototype.setDefault=function(){this.isLoading=!1,this.submit.setContent("JOIN!")},e.exports=s}),define("core/SignupData",["require","exports","module","famous/EventHandler","famous/Utility","app/ID","./GA"],function(t,i,e){function s(t){this.options={formId:"",emailId:"",githubId:"",twitterId:""};for(var i in t)this.options[i]=t[i];this.form,this.email,this.github,this.twitter,this.eventHandler=new n,n.setInputHandler(this,this.eventHandler),n.setOutputHandler(this,this.eventHandler),this._onSubmit=o.bind(this),this.registerView(),this.reset()}function o(t){t.preventDefault(),this.sendData()}var n=t("famous/EventHandler"),r=t("famous/Utility"),a=t("app/ID"),h=t("./GA");s.prototype.reset=function(){this.form=document.getElementById(this.options.formId),this.email=document.getElementById(this.options.emailId),this.github=document.getElementById(this.options.githubId),this.twitter=document.getElementById(this.options.twitterId),this.events()},s.prototype.events=function(){this.form.addEventListener("submit",this._onSubmit)},s.prototype._getData=function(){var t={};return this.email&&(t.email=this.email.value),this.github&&(t.github=this.github.value),this.twitter&&(t.twitter=this.twitter.value),t},s.prototype.registerView=function(){if(!(window.location.host.search("localhost")>-1)){var t="http://signup.famo.us/fsrv?f=registerView&demoID="+a;r.loadURL(t)}},s.prototype.sendData=function(){var t=this._getData(),i="http://signup.famo.us/fsrv?f=registerUserforNewsletter&email="+t.email+"&demoID="+a;t.github&&(i+="&github="+t.github),t.twitter&&(i+="&twitter="+t.twitter),this.emit("loadingStart"),h.push(["_trackEvent","sign-up","submit",,1,!0]),r.loadURL(i,function(t){this.signupResponse=JSON.parse(t),this.parseResponse()}.bind(this))},s.prototype.parseResponse=function(){this.emit("loadingEnd"),null==this.signupResponse.error?this.emit("success"):this.emit("error",this.signupResponse.error)},e.exports=s}),define("core/SignupContent",["require","exports","module"],function(t,i,e){var s="",o='<span class = "famous-signup-label">Twitter</span> <span class = "famous-signup-optional">optional</span>',n='<span class = "famous-signup-label">Github</span ><span class  = "famous-signup-optional">optional</span>',r="Email Address",a="Handle",h="Name",u="Join",p="Sign up for Beta",c="LOADING",l="SENT!",f="famo.us is a free and open source Javascript platform for building apps, games and interfaces in DOM, Canvas and WebGL.",d="",m="",g=!1,v=!1;e.exports={getEmailLabel:function(){return s},setEmailLabel:function(t){s=t},getEmailMessage:function(){return r},setEmailMessage:function(t){r=t},getTwitterMessage:function(){return a},setTwitterMessage:function(t){a=t},getEmailMessage:function(){return r},setEmailMessage:function(t){r=t},getGithubMessage:function(){return h},setGithubMessage:function(t){h=t},getHeadLine:function(){return f},setHeadline:function(t){f=t},getSubHeadLine:function(){return d},setSubHeadline:function(t){d=t},getMainText:function(){return m},setMainText:function(t){m=t},getSignupButton:function(){return u},setSignupButton:function(t){u=t},getOpenMessage:function(){return p},setOpenMessage:function(t){p=t},useGithub:function(){return g},setGithub:function(t){g=t},useTwitter:function(){return v},setTwitter:function(t){v=t},getLoadingStart:function(){return c},setLoadingStart:function(t){c=t},getLoadingEnd:function(){return l},setLoadingEnd:function(t){l=t},getContent:function(){var t='<div class="famous-signup-backing" style="float: left;">';return""!==f&&(t+='<span class="famous-signup-spacer famous-signup-headline">'+f+"</span>"),""!==d&&(t+='<span class="famous-signup-spacer famous-signup-sub-headline">'+d+"</span>"),""!==m&&(t+='<span class="famous-signup-main-text">'+m+"</span>"),t+='<form class="famous-signup-spacer" id="famous-signup-form" style="float: left;"><div class="" style="width: 100%; float: left;">',0==g&&0==v?(t+='<input class="famous-signup-input" id="famous-signup-email" type="email" size="50" style="float: left; width: 65%;" name="email" maxlength="75" placeholder="'+r+'">',t+='<div style="width: 30%; float: left; margin-left: 5%; " ><input class="famous-signup-button" style="float: left; width: 100%;"type="submit" value="'+u+'">'+"</div>"+"</form>"+"</div>"):(t+=""!==s?'<label for="email" style="width: 30%;float: left;padding-top: 15px;">'+s+"</label>"+'<input class="famous-signup-input" id="famous-signup-email" type="email" size="50" style="float: left; width: 70%;" name="email" maxlength="75" placeholder="'+r+'">'+"<br>"+"</div>":'<input class="famous-signup-input" id="famous-signup-email" type="email" size="50" style="float: left; width: 100%;" name="email" maxlength="75" placeholder="'+r+'">',g&&(t+='<div style="width: 100%;float: left;" class="famous-signup-spacer" ><label for="github" style="width: 30%; float: left;padding-top: 15px;">'+n+"</label>"+'<input class="famous-signup-input" id="famous-signup-github" type="text" size="30" style="float: left;width: 70%;"  name="github" maxlength="75" placeholder="'+h+'">'+"<br>"+"</div>"),v&&(t+='<div style="width: 100%; float: left;" class="famous-signup-spacer"><label for="twitter" style="width: 30%; float: left;padding-top: 15px;">'+o+"</label>"+'<input class="famous-signup-input" id="famous-signup-twitter" type="text" size="30" style="float: left;width: 70%;" name="twitter" maxlength="75" placeholder="'+a+'">'+"</div>"),t+='<div style="width: 100%; float: left;" ><input class="famous-signup-button" style="float: left; width: 100%;"type="submit" value="'+u+'">'+"</div>"+"</form>"+"</div>"),t}}}),define("core/Signup",["require","exports","module","famous/Engine","famous/View","famous/Matrix","famous/ImageSurface","famous/Surface","./ExpandingSurface","famous/Modifier","famous/Utility","./Fader","famous-animation/Easing","famous-utils/Utils","famous-utils/KeyCodes","app/ID","famous-utils/Time","./Submit","famous/RenderNode","app/SceneController","./SignupData","./SignupContent","famous/Transitionable","famous-physics/utils/PhysicsTransition"],function(t,i,e){function s(){h.apply(this,arguments),this.close,this.closeMod,this.signupBacking,this.signupBackingMod,this._signupSize,this.openForm,this.openFormMod,this.error,this.errorMod,this.signupData,this._initData=r.bind(this),this._isVisible=!0,this.initSignup(),this.events()}function o(){this._originalSignupMessage=l.getSignupButton(),l.setSignupButton(l.getLoadingStart()),this.resetBackingContent()}function n(){l.setSignupButton(l.getLoadingEnd()),this.resetBackingContent()}function r(){this.signupData=new c({formId:"famous-signup-form",emailId:"famous-signup-email",githubId:"famous-signup-github",twitterId:"famous-signup-twitter"}),this.eventOutput.emit("dataAdded",this.signupData),this.dataEvents(),a.unbind("postrender",this._initData)}var a=t("famous/Engine"),h=t("famous/View");t("famous/Matrix"),t("famous/ImageSurface"),t("famous/Surface");var u=t("./ExpandingSurface"),p=t("famous/Modifier");t("famous/Utility"),t("./Fader"),t("famous-animation/Easing"),t("famous-utils/Utils"),t("famous-utils/KeyCodes"),t("app/ID"),t("famous-utils/Time"),t("./Submit"),t("famous/RenderNode"),t("app/SceneController");var c=t("./SignupData"),l=t("./SignupContent"),f=t("famous/Transitionable"),d=t("famous-physics/utils/PhysicsTransition");f.registerMethod("physics",d),s.prototype=Object.create(h.prototype),s.prototype.constructor=s,s.DEFAULT_OPTIONS={animateScene:!0,closeSize:[50,50],hideOpen:!1,hideOpenOnMobile:!0,openButtonZPos:2,errorFailedProperties:{color:"rgb(253, 98, 85)"},errorSuccessProperties:{color:"rgb(90, 226, 132)"}},s.prototype.events=function(){a.on("postrender",this._initData),this.signupBacking.on("resize",function(t){this._signupSize=t,this.signupData&&this.signupData.reset(),this.eventOutput.emit("resize")}.bind(this))},s.prototype.dataEvents=function(){this.signupData.on("loadingStart",o.bind(this)),this.signupData.on("loadingEnd",n.bind(this))},s.prototype.resetBackingContent=function(){this.signupBacking.setContent(l.getContent()),this.signupBacking.setHeightDirty()},s.prototype.initSignup=function(){this._signupSize=[256,20],this.signupBacking=new u({content:l.getContent(),size:this._signupSize}),this.signupBackingMod=new p({opacity:1}),this.node.add(this.signupBackingMod).link(this.signupBacking)},s.prototype.setVisible=function(t){this._isVisible=t},s.prototype.getSize=function(){return this.signupBacking.getSize()},e.exports=s}),define("core/SignupError",["require","exports","module","famous/Engine","famous/View","famous/Matrix","famous/ImageSurface","famous/Surface","./ExpandingSurface","famous/Modifier","famous/Utility","./Fader","famous-animation/Easing","famous-utils/Utils","famous-utils/KeyCodes","app/ID","famous-utils/Time","./Submit","famous/RenderNode","app/SceneController","./SignupData","./SignupContent","famous/Transitionable","famous-physics/utils/PhysicsTransition"],function(t,i,e){function s(){a.apply(this,arguments),this.error,this.errorMod,this.signupData,this._isVisible=!0,this.initError(),this.events()}function o(t){this.signupData=t,this.dataEvents()}function n(t){this.setErrorFailed(),this.setErrorContent(t),this.showError()}function r(){this.setErrorSuccess(),this.setErrorContent("Success!"),this.showError()}t("famous/Engine");var a=t("famous/View"),h=t("famous/Matrix");t("famous/ImageSurface");var u=t("famous/Surface");t("./ExpandingSurface");var p=t("famous/Modifier");t("famous/Utility"),t("./Fader"),t("famous-animation/Easing"),t("famous-utils/Utils"),t("famous-utils/KeyCodes"),t("app/ID");var c=t("famous-utils/Time");t("./Submit"),t("famous/RenderNode"),t("app/SceneController"),t("./SignupData"),t("./SignupContent");var l=t("famous/Transitionable"),f=t("famous-physics/utils/PhysicsTransition");l.registerMethod("physics",f),s.prototype=Object.create(a.prototype),s.prototype.constructor=s,s.DEFAULT_OPTIONS={signup:void 0,animateScene:!0,closeSize:[50,50],hideOpen:!1,hideOpenOnMobile:!0,openButtonZPos:2,errorFailedProperties:{color:"rgb(253, 98, 85)"},errorSuccessProperties:{color:"rgb(90, 226, 132)"}},s.prototype.events=function(){this.options.signup.on("dataAdded",o.bind(this))},s.prototype.dataEvents=function(){this.signupData.on("success",r.bind(this)),this.signupData.on("error",n.bind(this))},s.prototype.initError=function(){this.error=new u({size:window.innerWidth>1400?[.25*window.innerWidth,100]:[.75*window.innerWidth,100],classes:["famous-signup-error"]}),this.errorMod=new p({transform:h.move(h.scale(1e-5,1e-5),[0,0,3]),origin:[.5,0],opacity:0}),this.node.add(this.errorMod).link(this.error)},s.prototype.showError=function(){var t={curve:"outExpoNorm",duration:500};this.errorMod.setOpacity(1,t),this.errorMod.setOrigin([.5,.25],t),this.errorMod.setTransform(h.translate(0,0,4),t),c.setTimeout(this.hideError.bind(this),3e3)},s.prototype.hideError=function(){var t={curve:"inOutExpoNorm",duration:500};this.errorMod.halt(),this.errorMod.setOrigin([.5,0],t),this.errorMod.setOpacity(0,t),this.errorMod.setTransform(h.move(h.scale(1e-5,1e-5),[0,0,4]),t)},s.prototype.setErrorContent=function(t){this.error.setContent(t)},s.prototype.setErrorFailed=function(){this.error.setProperties(this.options.errorFailedProperties)},s.prototype.setErrorSuccess=function(){this.error.setProperties(this.options.errorSuccessProperties)},s.prototype.setVisible=function(t){this._isVisible=t},s.prototype.getSize=function(){return this.error.getSize()},e.exports=s}),define("core/UI",["require","exports","module","famous/View","famous/Matrix","famous/Surface","famous/Utility","famous/Modifier","famous/Engine","famous/ContainerSurface","famous-animation/Easing","famous-ui/AutoUI","famous-ui/Buttons/RotateButton","./Signup","./SignupError","famous-utils/Time","famous-utils/Utils"],function(t,i,e){function s(){n.apply(this,arguments),this.buttonOpacity=.25,this.uiShowMatrix,this.uiHideMatrix,this.shownPositions,this.hiddenPositions,this.button,this.buttonModifier,this.ui,this.uiModifier,this.backingPanel,this.backingModifier,this.signup,this.error,this.positions(),this.initSignup(),this.backingShowMatrix,this.uiHideMatrix,this.uiShowMatrix,this.shownPositions,this.hiddenPositions,this._uiAdded=!1,this._uiVisible=!1,this.initButton(),this.initUI(),this.initBacking(),this.events(),this.showButton(),this.showAll(),m.isMobile()&&this.button.close()}function o(t){t.stopPropagation()}var n=t("famous/View"),r=t("famous/Matrix"),a=t("famous/Surface");t("famous/Utility");var h=t("famous/Modifier");t("famous/Engine");var u=t("famous/ContainerSurface"),p=t("famous-animation/Easing"),c=t("famous-ui/AutoUI"),l=t("famous-ui/Buttons/RotateButton"),f=t("./Signup"),d=t("./SignupError");t("famous-utils/Time");var m=t("famous-utils/Utils");s.prototype=Object.create(n.prototype),s.prototype.constructor=s,s.DEFAULT_OPTIONS={buttonSize:[40,40],offset:[20,20],uiFadeTransition:{curve:p.inOutBackNorm,duration:400},uiScaleTransition:{curve:p.inOutCubicNorm,duration:400},hoverTransition:{curve:p.inOutSineNorm,duration:800},backingFade:.7},s.prototype.positions=function(){var t=this.signup?this.signup.getSize():[0,0],i=2*this.options.offset[1]+this.options.buttonSize[1]+t[1];this.uiShowMatrix=r.translate(this.options.offset[0],2*this.options.offset[1]+this.options.buttonSize[1],2),this.uiHideMatrix=r.multiply(r.scale(1,1e-4,1),this.uiShowMatrix),this.backingShowMatrix=r.translate(0,0,1),this.backingHide=r.multiply(r.scale(1,1e-4,1),this.backingShowMatrix),this.signupShowMatrix=r.translate(this.options.offset[0],3*this.options.offset[1]+this.options.buttonSize[1]+window.innerHeight-i,2),this.signupHideMatrix=r.multiply(r.scale(1,1e-4,1),this.signupShowMatrix),this.shownPositions={button:r.translate(this.options.offset[0],this.options.offset[1],2)},this.hiddenPositions={button:r.translate(this.options.offset[0],-(this.options.buttonSize[0]+this.options.offset[1]),2)},this.ui&&this.uiContainer.setSize([t[0],Math.max(window.innerHeight-i,0)]),this._uiVisible&&this.showAll()},s.prototype.initSignup=function(){this.signup=new f,this.signupMod=new h({transform:this.signupHideMatrix,opacity:0}),this.error=new d({signup:this.signup}),this.node.add(this.error),this.node.add(this.signupMod).link(this.signup),this.signup.on("resize",this.resize.bind(this))},s.prototype.initButton=function(){this.button=new l({surfaceOptions:{properties:{backgroundColor:"rgba( 0, 0, 0, 0.0)"},content:'<img draggable="false" class="no-user-select" src="js/core/plus.svg" height="'+this.options.buttonSize[1]+'"></img>',size:this.options.buttonSize}}),this.buttonModifier=new h({size:this.options.buttonSize,transform:this.hiddenPositions.button,opacity:this.buttonOpacity}),this.node.add(this.buttonModifier).link(this.button)},s.prototype.initUI=function(){this.ui=new c,this.uiContainer=new u({size:[256,void 0],properties:{overflow:"hidden"}}),this.uiContainer.pipe(this.ui),this.uiContainer.on("mousewheel",o),this.uiContainer.on("wheel",o),this.uiContainer.on("touchmove",o),this.uiContainer.on("touchstart",o),this.uiContainer.on("touchend",o),this.uiModifier=new h({transform:this.uiHideMatrix,opacity:0}),this.node.add(this.uiModifier).link(this.uiContainer),this.uiContainer.link(new h({transform:r.translate(0,0,1)})).link(this.ui)},s.prototype.initBacking=function(){var t=this.ui.getSize();this.backingPanel=new a({properties:{backgroundColor:"#000000"},size:[t[0]+2*this.options.offset[0],window.innerHeight]}),this.backingModifier=new h({transform:this.backingHide,opacity:0}),this.node.add(this.backingModifier).link(this.backingPanel)},s.prototype.getUI=function(){return this.ui},s.prototype.events=function(){this.button.on("open",this.showUI.bind(this,void 0)),this.button.on("close",this.hideUI.bind(this,void 0))},s.prototype.mousemove=function(t,i){var e=m.distance(t.pageX,t.pageY,this.buttonX,this.buttonY);i>e||this.uiModifier.getOpacity()>.01?1!=this.buttonOpacity&&(this.buttonOpacity=1,this.buttonModifier.halt(),this.buttonModifier.setOpacity(this.buttonOpacity,this.options.hoverTransition)):.5!=this.buttonOpacity&&(this.buttonOpacity=.5,this.buttonModifier.halt(),this.buttonModifier.setOpacity(this.buttonOpacity,this.options.hoverTransition))},s.prototype.resize=function(){this.positions(),this.backingPanel.setSize([this.ui.getSize()[0]+2*this.options.offset[0],window.innerHeight])},s.prototype.showAll=function(){this._uiVisible||this.showUI(),this.showButton(),this.button.open()},s.prototype.hideAll=function(){this._uiVisible&&this.hideUI(),this.hideButton()},s.prototype.showButton=function(){var t=this.shownPositions.button,i=this.options.buttonSize;this.buttonX=t[12]+.5*i[0],this.buttonY=t[13]+.5*i[1],this.buttonModifier.halt(),this.buttonModifier.setTransform(t,this.options.uiFadeTransition)},s.prototype.showUI=function(){this._uiVisible=!0,this.uiModifier.halt(),this.uiModifier.setTransform(this.uiShowMatrix,this.options.uiScaleTransition),this.uiModifier.setOpacity(1,this.options.uiFadeTransition),this.backingModifier.halt(),this.backingModifier.setOpacity(this.options.backingFade,this.options.uiFadeTransition),this.backingModifier.setTransform(this.backingShowMatrix,this.options.uiScaleTransition),this.signupMod.halt(),this.signupMod.setOpacity(1,this.options.uiFadeTransition),this.signupMod.setTransform(this.signupShowMatrix,this.options.uiScaleTransition),this.eventOutput.emit("showUI")},s.prototype.hideButton=function(){this.button.close();var t=this.hiddenPositions.button,i=this.options.buttonSize;this.buttonX=t[12]+.5*i[0],this.buttonY=t[13]+.5*i[1],this.buttonModifier.halt(),this.buttonModifier.setTransform(t,this.options.uiFadeTransition)},s.prototype.hideUI=function(){this._uiVisible=!1,this.uiModifier.halt(),this.uiModifier.setTransform(this.uiHideMatrix,this.options.uiScaleTransition),this.uiModifier.setOpacity(0,this.options.uiFadeTransition),this.backingModifier.halt(),this.backingModifier.setTransform(this.uiHideMatrix,this.options.uiScaleTransition),this.backingModifier.setOpacity(0,this.options.uiFadeTransition),this.signupMod.halt(),this.signupMod.setOpacity(0,this.options.uiFadeTransition),this.signupMod.setTransform(this.signupHideMatrix,this.options.uiScaleTransition),this.eventOutput.emit("hideUI")},s.prototype.setCurrentObject=function(t){this.ui.setCurrentObject(t)},s.prototype.getButton=function(){return this.button},e.exports=s}),define("core/InterfaceContainer",["require","exports","module","famous/Engine","famous/ContainerSurface"],function(t,i,e){var s=t("famous/Engine"),o=t("famous/ContainerSurface"),n=s.createContext();n.setPerspective(0),n.container.style.zIndex="10000",n.container.style.position="absolute",n.container.style.transformStyle="flat",n.container.style.webkitTransformStyle="flat";var r=new o({properties:{pointerEvents:"none",zIndex:"10001",position:"absolute",transformStyle:"flat",webkitTransformStyle:"flat"}});n.add(r),e.exports=r}),define("core/Interface",["require","exports","module","famous/ContainerSurface","famous/Surface","famous/Modifier","famous/Matrix","famous/Utility","famous-scene/Scene","famous-utils/Utils","famous-utils/KeyCodes","famous-animation/Easing","famous-utils/Time","famous/Transitionable","famous-physics/utils/PhysicsTransition","./NextButton","./Signup","./UI","./InterfaceContainer"],function(t,i,e){function s(){o.apply(this,arguments),l.context.srcNode.set(void 0),this.options.useUI&&(this.UI=new c({offset:this.options.offset,buttonSize:this.options.buttonSize}),this.UI.pipe(this.eventOutput),l.add(this.UI)),this.options.useNext&&"s.codepen.io"!==window.location.host&&(this.nextButton=new u({offset:this.options.offset,buttonSize:this.options.buttonSize,position:this.options.nextPosition}),l.add(this.nextButton)),this.options.useSignup&&(this.signup=new p({offset:this.options.offset,buttonSize:this.options.buttonSize,textInputScale:this.options.textInputScale,submitScale:this.options.submitScale}),l.add(this.signup)),this._uiHidden=!1,this.initForm=this.options.useSignup?!1:!0
}t("famous/ContainerSurface"),t("famous/Surface"),t("famous/Modifier"),t("famous/Matrix"),t("famous/Utility");var o=t("famous-scene/Scene"),n=t("famous-utils/Utils");t("famous-utils/KeyCodes");var r=t("famous-animation/Easing");t("famous-utils/Time");var a=t("famous/Transitionable"),h=t("famous-physics/utils/PhysicsTransition");a.registerMethod("physics",h);var u=t("./NextButton"),p=t("./Signup"),c=t("./UI"),l=t("./InterfaceContainer");s.prototype=Object.create(o.prototype),s.prototype.constructor=s,s.DEFAULT_OPTIONS={useUI:!0,useNext:!0,useSignup:!1,buttonSize:[40,40],offset:[20,20],nextPosition:"tr",submitScale:2,textInputScale:6,uiFadeTransition:{curve:r.inOutBackNorm,duration:400},uiScaleTransition:{curve:r.inOutCubicNorm,duration:400},hoverTransition:{curve:r.inOutSineNorm,duration:800},hideAllTransition:{curve:r.inOutBackNorm,duration:800}},s.prototype.hideAllUI=function(){this._uiHidden=!0,this.signup&&this.signup.hideAll(),this.UI&&this.UI.hideAll(),this.nextButton&&this.nextButton.hideAll()},s.prototype.showAllUI=function(){this._uiHidden=!1,this.signup&&this.signup.showAll(),this.UI&&this.UI.showButton(),this.nextButton&&this.nextButton.showAll()},s.prototype.getAutoUI=function(){return this.UI?this.UI.getUI():void 0},s.prototype.getUI=function(){return this.UI},s.prototype.setCurrentObject=function(t){this.UI.setCurrentObject(t)},s.prototype.resize=function(){this.width=n.getWidth(),this.height=n.getHeight(),!this._uiHidden&&this.signup&&this.signup.showLogo(),this.nextButton&&this.nextButton.resize(),this.signup&&this.signup.resize(),this.UI&&this.UI.resize()},s.prototype.mousemove=function(t){if(!this._uiHidden){var i=Math.max(this.height/3,this.options.buttonSize[0]*(this.options.textInputScale+this.options.submitScale)+3*this.options.offset[0]);this.UI&&this.UI.mousemove(t,i),this.nextButton&&this.nextButton.mousemove(t,i)}},s.prototype.update=function(){},e.exports=s}),define("famous/SceneCompiler",["require","exports","module","./Matrix"],function(t,i,e){function s(t){var i={varCounter:0},e=[],s=h.call(i,t,e);return e.push("return "+s+";"),new Function(["FT","RenderNode","RN_link","RN_include","id","transforms"],e.join("\n"))}function o(t,i){return"var "+t+" = "+i+";"}function n(t,i){return"id."+t+" = "+i+";"}function r(t){return"transforms.push("+t+");"}function a(){return"_"+this.varCounter++}function h(t,i){var e;if(t instanceof Array)e=u.call(this,t,i);else if(e=a.call(this),t.target){var s=h.call(this,t.target,i),c=p.call(this,t,i);i.push(o(e,"new RenderNode("+c+")")),i.push("RN_link.call("+e+", "+s+");"),t.id&&i.push(n(t.id,c)),i.push(r(c))}else t.id&&(i.push(o(e,"new RenderNode()")),i.push(n(t.id,e)));return e}function u(t,i){var e=a.call(this);i.push(o(e,"new RenderNode()"));for(var s=0;s<t.length;s++){var n=h.call(this,t[s],i);n&&i.push("RN_include.call("+e+", "+n+");")}return e}function p(t,i){var e=t.transform,s=t.opacity,n=t.origin,r=t.size;t.target;var h=l.identity;if(e instanceof Array)if(16==e.length&&"number"==typeof e[0])h=e;else for(var u=0;u<e.length;u++)h=l.multiply(h,c(e[u]));else e instanceof Object&&(h=c(e));var p=a.call(this),f="["+h.join(",")+"]",d=n?"["+n.join(",")+"]":void 0,m=r?"["+r.join(",")+"]":void 0;return i.push(o(p,"new FT("+f+","+s+","+d+","+m+")")),p}function c(t){for(var i in f)if(i in t){var e=t[i];return e instanceof Array||(e=[e]),f[i].apply(this,e)}}var l=t("./Matrix"),f={translate:l.translate,rotate:l.rotate,rotateX:l.rotateX,rotateY:l.rotateY,rotateZ:l.rotateZ,rotateAxis:l.rotateAxis,scale:l.scale,skew:l.skew,matrix3d:function(){return arguments}};e.exports={compile:s}}),define("famous/Scene",["require","exports","module","./RenderNode","./Modifier","./SceneCompiler"],function(t,i,e){function s(t){this.id={},this.transforms=[],this.node=new o,this._def=void 0,t&&this.load(t)}var o=t("./RenderNode"),n=t("./Modifier"),r=t("./SceneCompiler"),a=o.prototype.link,h=o.prototype.add;s.prototype.create=function(){return new s(this._def)},s.prototype.load=function(t){t instanceof s?t=t._def:t instanceof Function||(t=r.compile(t)),this.node=t(n,o,a,h,this.id,this.transforms),this._def=t},s.prototype.getTransforms=function(){return this.transforms},s.prototype.add=function(){return this.node.add.apply(this.node,arguments)},s.prototype.mod=function(){return this.node.mod.apply(this.node,arguments)},s.prototype.link=function(){return this.node.link.apply(this.node,arguments)},s.prototype.render=function(){return this.node.render.apply(this.node,arguments)},e.exports=s}),define("famous/VideoSurface",["require","exports","module","./Surface"],function(t,i,e){function s(t){this.autoplay=t.autoplay||!1,this.videoUrl=void 0,o.apply(this,arguments)}var o=t("./Surface");s.prototype=Object.create(o.prototype),s.prototype.elementType="video",s.prototype.elementClass="surface",s.prototype.setContent=function(t){this.videoUrl=t,this.contentDirty=!0},s.prototype.deploy=function(t){t.src=this.videoUrl,t.autoplay=this.autoplay},s.prototype.recall=function(t){t.src=""},e.exports=s}),define("famous-animation/Idle",["require","exports","module"],function(t,i,e){function s(t,i){this.idleFn=t,this.timeout=i,this.enabled=i>0,this.reset()}s.prototype.timeoutIn=function(t){this.lastTouchTime=(new Date).getTime()-this.timeout+t},s.prototype.enable=function(){this.enabled=!0},s.prototype.disable=function(){this.enabled=!1},s.prototype.setIdleFunction=function(t){this.idleFn=t},s.prototype.update=function(){if(!this.idling&&this.enabled&&this.idleFn){var t=(new Date).getTime();t-this.lastTouchTime>this.timeout&&(this.idling=!0,this.idleFn.call(this))}},s.prototype.isIdling=function(){return this.idling},s.prototype.reset=function(){this.lastTouchTime=(new Date).getTime(),this.idling=!1},s.prototype.emit=function(){this.reset()},e.exports=s}),define("famous-animation/LayoutEngine",["require","exports","module","famous/Engine","famous-utils/Utils"],function(t,i,e){function s(){p.on("resize",c.debounce(r.bind(this),400)),this.layouts=[],this.screenSize,n.call(this)}function o(t){return this.layouts.indexOf(t)}function n(){this.screenSize=[window.innerWidth,window.innerHeight]}function r(){n.call(this);for(var t=0;t<this.layouts.length;t++)a.call(this,t)}function a(t){var i=this.layouts[t],e=h.call(this,i);e&&u.call(this,e)}function h(t){var i,e,s=[];for(var o in t)t[o].minWidth<this.screenSize[0]&&t[o].maxWidth>this.screenSize[0]&&s.push(o);if(0==s.length)return console.warn("No possible layout"),void 0;for(var n=0;n<s.length;n++)if(i){var r=t[s[n]];r.maxWidth>i&&(e=s[n],i=r.maxWidth)}else i=t[s[n]].maxWidth,e=s[n];return t[e]}function u(t){for(var i=t.layouts,e=0;e<i.length;e++){var s=i[e];if(s.transform&&(s.matrix&&s.transform.setTransform(s.matrix,s.transition,s.transformCallback),s.origin&&s.transform.setOrigin(s.origin,s.originTransition,s.originCallback),s.opacity&&s.transform.setOpacity(s.opacity,s.opacityTransition,s.opacityCallback),s.size&&s.transform.setSize(s.size,s.sizeTransition,s.sizeCallback)),s.fns)if(c.isArray(s.fns))for(var e=0;e<s.fns.length;e++)s.fns[e]();else s.fns()}}var p=t("famous/Engine"),c=t("famous-utils/Utils");s.prototype.add=function(t){this.layouts.push(t)},s.prototype.remove=function(t){var i=o(t);-1!==i&&this.layouts.splice(1,i)},s.prototype.triggerLayout=function(t){if(t){var i=o.call(this,t);-1!==i&&a.call(this,i)}else r.call(this)},s.prototype.getScreenSize=function(){return this.screenSize};var l=new s;e.exports=l}),define("famous-animation/PiecewiseCubicBezier",["require","exports","module","./CubicBezier"],function(t,i,e){function s(t){t=t||{},this.split=t.split||.5;var i=t.overshoot||0,e=t.vLeft||[0,1+i,0,0],s=t.vRight||[1+i,1,0,0];this.bezLeft=new o(e).create(),this.bezRight=new o(s).create()}var o=t("./CubicBezier");s.prototype.create=function(){var t=this;return function(i){i=i||0;var e,s=t.split;return s>i?(e=i/s,t.bezLeft(e)):(e=(i-s)/(1-s),t.bezRight(e))}},e.exports=s}),define("famous-animation/RegisterEasing",["require","exports","module","./Easing","famous/TweenTransition"],function(t){function i(){for(var t=/norm/gi,i=e(o).filter(function(i){return t.test(i)}).sort(),s={},n=0;n<i.length;n++)s[i[n]]=o[i[n]];return s}function e(t){var i=[];for(key in t)t.hasOwnProperty(key)&&i.push(key);return i}function s(){var t=i();for(var e in t)n.registerCurve(e,t[e])}var o=t("./Easing"),n=t("famous/TweenTransition");s()}),define("famous-animation/Sequence",["require","exports","module"],function(t,i,e){function s(){this.startTime=0,this.setupPos=0,this.schedule=[],this.seqLoc=-1}s.prototype._execute=function(t){for(this.seqLoc<0&&(this.seqLoc=0);this.seqLoc<this.schedule.length&&this.schedule[this.seqLoc].pos<=t;)this.schedule[this.seqLoc].action.call(this),this.seqLoc++},s.prototype.update=function(){if(!(this.seqLoc<0||this.seqLoc>=this.schedule.length)){var t=(new Date).getTime()-this.startTime;this._execute(t)}},s.prototype.at=function(t,i){this.schedule.push({pos:t,action:i}),this.setupPos=t},s.prototype.after=function(t,i){this.at(this.setupPos+t,i)},s.prototype.play=function(t){this.schedule.sort(function(t,i){return t.pos-i.pos}),this.startTime=(new Date).getTime();for(var i=0;i<this.schedule.length&&this.schedule[i].pos<t;)i++;this.seqLoc=i},s.prototype.fastForward=function(t){"undefined"==typeof t&&(t=1/0),this._execute(t)},s.prototype.stop=function(){this.seqLoc=-1},e.exports=s}),define("famous-css/StyleManager",["require","exports","module"],function(t,e){function s(){for(x in document.styleSheets){var t=document.styleSheets[x],e=t.cssRules?t.cssRules:t.rules;if(e)for(i=0;i<e.length;i++){var s=e[i].selectorText;if(s in n)for(key in n[s])"height"==key?e[i].style.height=n[s][key]:"width"==key?e[i].style.width=n[s][key]:"line-height"==key?e[i].style.lineHeight=n[s][key]:"margin-top"==key?e[i].style.marginTop=n[s][key]:"margin-bottom"==key?e[i].style.marginBottom=n[s][key]:"margin-right"==key?e[i].style.marginRight=n[s][key]:"min-height"==key?e[i].style.minHeight=n[s][key]:"left"==key?e[i].style.left=n[s][key]:"right"==key?e[i].style.right=n[s][key]:"padding"==key?e[i].style.padding=n[s][key]:"top"==key?e[i].style.top=n[s][key]:"bottom"==key?e[i].style.bottom=n[s][key]:"text-shadow"==key?e[i].style.textShadow=n[s][key]:"font-family"==key?e[i].style.fontFamily=n[s][key]:"font-size"==key?e[i].style.fontSize=n[s][key]:"background-size"==key?e[i].style.backgroundSize=n[s][key]:"margin"==key?e[i].style.margin=n[s][key]:"padding-left"==key?e[i].style.paddingLeft=n[s][key]:"padding-right"==key?e[i].style.paddingRight=n[s][key]:"padding-top"==key?e[i].style.paddingTop=n[s][key]:"padding-bottom"==key?e[i].style.paddingBottom=n[s][key]:"letter-spacing"==key?e[i].style.letterSpacing=n[s][key]:"margin-left"==key?e[i].style.marginLeft=n[s][key]:"min-width"==key?e[i].style.minWidth=n[s][key]:"max-height"==key?e[i].style.maxHeight=n[s][key]:"border-top"==key?e[i].style.borderTop=n[s][key]:"border"==key?e[i].style.border=n[s][key]:"-webkit-perspective"==key?e[i].style["-webkit-perspective"]=n[s][key]:"perspective"==key?e[i].style.perspective=n[s][key]:"background"==key?(e[i].style["background-color"]=n[s][key],e[i].style.background=n[s][key]):"box-shadow"==key?(e[i].style["-webkit-box-shadow"]=n[s][key],e[i].style["-moz-box-shadow"]=n[s][key],e[i].style["box-shadow"]=n[s][key]):"border-top-right-radius"==key?(e[i].style["border-top-right-radius"]=n[s][key],e[i].style["-webkit-border-top-right-radius"]=n[s][key],e[i].style["-moz-border-radius-topright"]=n[s][key]):"border-radius"==key?(e[i].style["-moz-border-radius"]=n[s][key],e[i].style["-webkit-border-radius"]=n[s][key],e[i].style.borderRadius=n[s][key]):console.log("Cant set CSS variable. No function associated with: "+key)}}n={},e=null,t=null}function o(t,i,e){t in n||(n[t]={}),e=e.toString().toLowerCase(),e.indexOf("rgb")<0&&e.indexOf("px")<0&&e.indexOf("%")<0&&e.indexOf(!1)&&(e+="px"),n[t][i]=e}var n={};e.setStyles=s,e.setRule=o}),define("famous-css/StyleSheet",["require","exports","module","./StyleManager"],function(t,i){function e(){s.setRule("body","font-size",.02*window.innerWidth),s.setRule("body","background","#000000"),s.setStyles()}var s=t("./StyleManager");i.buildStyleSheet=e}),define("famous-generative/Box",["require","exports","module","famous/Surface","famous/Matrix","famous-utils/Utils","famous/RenderNode"],function(t,i,e){function s(t,i,e){this.nodes=[],this.result=[],this.top=new o({size:[t,e]}),this.bottom=new o({size:[t,e]}),this.left=new o({size:[e,i]}),this.right=new o({size:[e,i]}),this.front=new o({size:[t,i]}),this.back=new o({size:[t,i]}),this.top.addClass("box-top"),this.bottom.addClass("box-bottom"),this.left.addClass("box-left"),this.right.addClass("box-right"),this.front.addClass("box-front"),this.back.addClass("box-back"),this.top.addClass("backfaceVisible"),this.bottom.addClass("backfaceVisible"),this.right.addClass("backfaceVisible"),this.left.addClass("backfaceVisible"),this.front.addClass("backfaceVisible"),this.back.addClass("backfaceVisible"),this.sides=[this.top,this.bottom,this.left,this.right,this.front,this.back],this.result.push({transform:n.multiply(n.translate(0,0,.5*i),n.rotateX(.5*Math.PI)),opacity:1,target:this.top.render()}),this.result.push({transform:n.multiply(n.translate(0,0,.5*i),n.rotateX(.5*-Math.PI)),opacity:1,target:this.bottom.render()}),this.result.push({transform:n.multiply(n.translate(0,0,.5*t),n.rotateY(.5*-Math.PI)),opacity:1,target:this.left.render()}),this.result.push({transform:n.multiply(n.translate(0,0,.5*t),n.rotateY(.5*Math.PI)),opacity:1,target:this.right.render()}),this.result.push({transform:n.translate(0,0,.5*e),opacity:1,target:this.front.render()}),this.result.push({transform:n.translate(0,0,.5*-e),opacity:1,target:this.back.render()})}var o=t("famous/Surface"),n=t("famous/Matrix"),r=t("famous-utils/Utils");t("famous/RenderNode"),s.prototype.setColor=function(t,i,e,s){for(var o=0;o<this.sides.length;o++)this.sides[o].setProperties({backgroundColor:r.color(t,i,e,s)})},s.prototype.setFrontColor=function(t,i,e,s){this.front.setProperties(r.backgroundColor(t,i,e,s))},s.prototype.setBackColor=function(t,i,e,s){this.back.setProperties(r.backgroundColor(t,i,e,s))},s.prototype.setRightColor=function(t,i,e,s){this.right.setProperties(r.backgroundColor(t,i,e,s))},s.prototype.setLeftColor=function(t,i,e,s){this.left.setProperties(r.backgroundColor(t,i,e,s))},s.prototype.setTopColor=function(t,i,e,s){this.top.setProperties(r.backgroundColor(t,i,e,s))},s.prototype.setBottomColor=function(t,i,e,s){this.bottom.setProperties(r.backgroundColor(t,i,e,s))},s.prototype.render=function(){return this.result},e.exports=s}),define("famous-generative/Axis",["require","exports","module","famous/Surface","famous/Matrix","./Box"],function(t,i,e){function s(){this.radius=256,this.box=new r(this.radius,this.radius,this.radius),this.xyPlane=new o({size:[this.radius,this.radius]}),this.xyPlane.addClass("plane-xy"),this.xyTransform=n.rotateX(Math.PI/2),this.zxPlane=new o({size:[this.radius,this.radius]}),this.zxPlane.addClass("plane-zx"),this.zxTransform=n.rotateY(Math.PI/2),this.yzPlane=new o({size:[this.radius,this.radius]}),this.yzPlane.addClass("plane-yz"),this.yzTransform=n.rotateZ(Math.PI/2),this.transform=n.identity,this.opacity=1,this.results=[],this.results.push({transform:this.transform,opacity:this.opacity,target:this.box.render()}),this.results.push({transform:this.xyTransform,opacity:this.opacity,target:this.xyPlane.render()}),this.results.push({transform:this.zxTransform,opacity:this.opacity,target:this.zxPlane.render()}),this.results.push({transform:this.yzTransform,opacity:this.opacity,target:this.yzPlane.render()})}var o=t("famous/Surface"),n=t("famous/Matrix"),r=t("./Box");s.prototype.render=function(){return this.results},e.exports=s}),define("famous-math/Quaternion",["require","exports","module","famous/Matrix"],function(t,i,e){function s(t,i,e,s){return this.w=void 0!==t?t:1,this.x=i||0,this.y=e||0,this.z=s||0,this}t("famous/Matrix"),s.prototype.makeFromAngleAndAxis=function(t,i){i.normalize();var e=.5*t,s=Math.sin(e);return this.x=s*i.x,this.y=s*i.y,this.z=s*i.z,this.w=Math.cos(e),this},s.prototype.clone=function(){return new s(this.w,this.x,this.y,this.z)},s.prototype.setWXYZ=function(t,i,e,s){return this.w=t,this.x=i,this.y=e,this.z=s,this},s.prototype.set=function(t){return this.w=t.w,this.x=t.x,this.y=t.y,this.z=t.z,this},s.prototype.clear=function(){return this.w=1,this.x=0,this.y=0,this.z=0,this},s.prototype.normalize=function(){var t=Math.sqrt(this.w*this.w+this.x*this.x+this.y*this.y+this.z*this.z);if(0==t)this.w=1,this.x=this.y=this.z=0;else{var i=1/t;this.w*=i,this.x*=i,this.y*=i,this.z*=i}return this},s.prototype.getMatrix=function(){return this.normalize(),[1-2*this.y*this.y-2*this.z*this.z,2*this.x*this.y-2*this.z*this.w,2*this.x*this.z+2*this.y*this.w,0,2*this.x*this.y+2*this.z*this.w,1-2*this.x*this.x-2*this.z*this.z,2*this.y*this.z-2*this.x*this.w,0,2*this.x*this.z-2*this.y*this.w,2*this.y*this.z+2*this.x*this.w,1-2*this.x*this.x-2*this.y*this.y,0,0,0,0,1]},s.prototype.multiply=function(t,i){return i=i||this.register,i.w=this.w*t.w-this.x*t.x-this.y*t.y-this.z*t.z,i.x=this.w*t.x+this.x*t.w+this.y*t.z-this.z*t.y,i.y=this.w*t.y-this.x*t.z+this.y*t.w+this.z*t.x,i.z=this.w*t.z+this.x*t.y-this.y*t.x+this.z*t.w,i},s.prototype.isEqual=function(t){return t.w==this.w&&t.x==this.x&&t.y==this.y&&t.z==this.z?!0:!1},s.prototype.dot=function(t){return this.w*t.w+this.x*t.x+this.y*t.y+this.z*t.z},s.prototype.add=function(t,i){return i=i||this.register,i.w=this.w+t.w,i.x=this.x+t.x,i.y=this.y+t.y,i.z=this.z+t.z,i},s.prototype.sub=function(t,i){return i=i||this.register,i.w=this.w-t.w,i.x=this.x-t.x,i.y=this.y-t.y,i.z=this.z-t.z,i},s.prototype.normSquared=function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},s.prototype.norm=function(){return Math.sqrt(this.normSquared())},s.prototype.conj=function(t){return t=t||this.register,t.w=this.w,t.x=-this.x,t.y=-this.y,t.z=-this.z,t},s.prototype.inverse=function(t){return t=t||this.register,this.conj(t),t.scalarDivide(this.normSquared(),t),t},s.prototype.scalarDivide=function(t,i){return i=i||this.register,t=1/t,i.w=this.w*t,i.x=this.x*t,i.y=this.y*t,i.z=this.z*t,i},s.prototype.scalarMult=function(t,i){return i=i||this.register,i.w=this.w*t,i.x=this.x*t,i.y=this.y*t,i.z=this.z*t,i},s.prototype.isZero=function(){return 0==this.x&&0==this.y&&0==this.z&&1==this.w?!0:!1},s.prototype.negate=function(){return this.w=-this.w,this.x=-this.x,this.y=-this.y,this.z=-this.z,this},s.prototype.zeroRotation=function(){return this.x=0,this.y=0,this.z=0,this.w=1,this},s.prototype.slerp=function(t,i,e){e=e||this.register;var s,o,n,r,a;return this.to.set(t),this.from.set(this),o=this.dot(t),0>o&&(o=-o,this.to.negate()),1-o>this.epsilon?(s=Math.acos(o),n=Math.sin(s),r=Math.sin((1-i)*s)/n,a=Math.sin(i*s)/n):(r=1-i,a=i),this.from.scalarMult(r,this.from),this.to.scalarMult(a,this.to),this.from.add(this.to,e),e},s.prototype.epsilon=1e-5,s.prototype.from=new s(0,0,0,0),s.prototype.to=new s(0,0,0,0),s.prototype.register=new s(0,0,0,0),s.prototype.zero=new s(0,0,0,0),s.prototype.one=new s(1,1,1,1),e.exports=s}),define("famous-generative/Line",["require","exports","module","famous/Surface","famous/Matrix","famous-utils/Utils","famous/RenderNode","famous-math/Quaternion","famous-math/Vector"],function(t,i,e){function s(t){t||(t={}),this.result=[],this.width=t.width||2,this.opacity=t.opacity||1,this.calculateTransform("undefined"==typeof t.x1?0:t.x1,"undefined"==typeof t.y1?0:t.y1,"undefined"==typeof t.z1?0:t.z1,"undefined"==typeof t.x2?0:t.x2,"undefined"==typeof t.y2?0:t.y2,"undefined"==typeof t.z2?0:t.z2),this.halfPi=.5*Math.PI,this.surface=new o({size:[500,500]}),this.surface.addClass("line"),this.surface.setProperties({"background-color":"rgba(255, 255, 255, 1.0)"})}var o=t("famous/Surface"),n=t("famous/Matrix"),r=t("famous-utils/Utils");t("famous/RenderNode"),t("famous-math/Quaternion"),t("famous-math/Vector"),s.prototype.setProperties=function(t){this.surface.setProperties(t)},s.prototype.setLineWidth=function(t){return this.width=t,this},s.prototype.getLineWidth=function(){return this.width},s.prototype.setColor=function(t,i,e,s){return this.surface.setProperties(r.backgroundColor(t,i,e,1)),this.opacity=s,this},s.prototype.setOpacity=function(t){return this.opacity=t,this},s.prototype.render=function(){var t={transform:this.transform,opacity:this.opacity,origin:[.5,.5],target:this.surface.render()};return t},s.prototype.setP1=function(t,i,e){this.calculateTransform(t,i,e,this.x2,this.y2,this.z2)},s.prototype.setP2=function(t,i,e){this.calculateTransform(this.x1,this.y1,this.z1,t,i,e)},s.prototype.set=function(t,i,e,s,o,n){this.calculateTransform(t,i,e,s,o,n)},s.prototype.setX1=function(t){this.calculateTransform(t,this.y1,this.z1,this.x2,this.y2,this.z2)},s.prototype.setY1=function(t){this.calculateTransform(this.x1,t,this.z1,this.x2,this.y2,this.z2)},s.prototype.setZ1=function(t){this.calculateTransform(this.x1,this.y1,t,this.x2,this.y2,this.z2)},s.prototype.setX2=function(t){this.calculateTransform(this.x1,this.y1,this.z1,t,this.y2,this.z2)},s.prototype.setY2=function(t){this.calculateTransform(this.x1,this.y1,this.z1,this.x2,t,this.z2)},s.prototype.setZ2=function(t){this.calculateTransform(this.x1,this.y1,this.z1,this.x2,this.y2,t)},s.prototype.setX=function(t,i){this.calculateTransform(t,this.y1,this.z1,i,this.y2,this.z2)},s.prototype.setY=function(t,i){this.calculateTransform(this.x1,t,this.z1,this.x2,i,this.z2)},s.prototype.setZ=function(t,i){this.calculateTransform(this.x1,this.y1,t,this.x2,this.y2,i)},s.prototype.getX1=function(){return this.x1},s.prototype.getX2=function(){return this.x2},s.prototype.getY1=function(){return this.y1},s.prototype.getY2=function(){return this.y2},s.prototype.getZ1=function(){return this.z1},s.prototype.getZ2=function(){return this.z2},s.prototype.getX=function(){return[this.x1,this.x2]},s.prototype.getY=function(){return[this.y1,this.y2]},s.prototype.getZ=function(){return[this.z1,this.z2]},s.prototype.getP1=function(){return[this.x1,this.y1,this.z1]},s.prototype.getP2=function(){return[this.x2,this.y2,this.z2]},s.prototype.getLength=function(){return this.length},s.prototype.calculateTransform=function(t,i,e,s,o,a){this.x1=t,this.y1=i,this.z1=e,this.x2=s,this.y2=o,this.z2=a,this.length=r.distance3D(this.x1,this.y1,this.z1,this.x2,this.y2,this.z2),this.lengthX=this.x2-this.x1,this.lengthY=this.y2-this.y1,this.lengthZ=this.z2-this.z1,this.centerX=.5*this.lengthX+this.x1,this.centerY=.5*this.lengthY+this.y1,this.centerZ=.5*this.lengthZ+this.z1,this.angleZ=Math.atan2(this.lengthY,this.lengthX),this.angleY=Math.asin(this.lengthZ/this.length),isNaN(this.angleZ)&&(this.angleZ=.5*Math.PI),isNaN(this.angleY)&&(this.angleY=.5*Math.PI),this.transform=n.multiply(n.identity,n.rotateY(-this.angleY)),this.transform=n.multiply(this.transform,n.rotateZ(this.angleZ)),this.transform=n.multiply(this.transform,n.translate(this.centerX,this.centerY,this.centerZ)),this.transform=n.multiply(n.scale(this.length/500,this.width/500,1),this.transform)},e.exports=s}),define("famous-generative/DebugTriangle",["require","exports","module","famous/Surface","famous/Matrix","famous-utils/Utils","famous/RenderNode","famous-math/Quaternion","famous-math/Vector","./Line"],function(t,i,e){function s(t){t||(t={}),this.x1=t.x1||0,this.y1=t.y1||0,this.z1=t.z1||0,this.x2=t.x2||0,this.y2=t.y2||0,this.z2=t.z2||0,this.x3=t.x3||0,this.y3=t.y3||0,this.z3=t.z3||0,this.mtx=n.identity,this.result=[],this.opacity=t.opacity||1,this.size=1e3,this.halfSize=.5*this.size,this.invSize=1/this.size,this.halfPi=.5*Math.PI,this.surface=new o({size:[this.size,this.size]}),this.surface.addClass("DebugTriangle"),this.surface.setProperties({"background-color":"rgba(0, 0, 0, 0.0)","border-radius":"0px","border-top":"0px solid","border-right":.5*this.size+"px solid red","border-left":.5*this.size+"px solid blue","border-bottom":this.size+"px solid rgba(255, 255, 255, .75)"}),this.line0=new h({x1:this.x1,y1:this.y1,x2:this.x2,y2:this.y2,width:2,opacity:.5}),this.line1=new h({x1:this.x2,y1:this.y2,x2:this.x3,y2:this.y3,width:2,opacity:.5}),this.line2=new h({x1:this.x3,y1:this.y3,x2:this.x1,y2:this.y1,width:2,opacity:.5}),this.line0.setLineWidth(4);var i="font-size: 24px; ";i+="line-height: 30px; ",i+="margin: 0px; ";var e=.75,s=30;this.p1Surf=new o({size:[s,s]}),this.p1Surf.setProperties(r.backgroundColor(255,255,255,1)),this.p1Surf.setProperties(r.borderRadius(s)),this.p1Surf.setContent('<p class="triangleIndex" style="'+i+'">'+1+"</p>"),this.p1Surf.mtx=n.identity,this.p1Surf.opacity=e,this.p2Surf=new o({size:[s,s]}),this.p2Surf.setProperties(r.backgroundColor(255,255,255,1)),this.p2Surf.setProperties(r.borderRadius(s)),this.p2Surf.setContent('<p class="triangleIndex" style="'+i+'">'+2+"</p>"),this.p2Surf.mtx=n.identity,this.p2Surf.opacity=e,this.p3Surf=new o({size:[s,s]}),this.p3Surf.setProperties(r.backgroundColor(255,255,255,1)),this.p3Surf.setProperties(r.borderRadius(s)),this.p3Surf.setContent('<p class="triangleIndex" style="'+i+'">'+3+"</p>"),this.p3Surf.mtx=n.identity,this.p3Surf.opacity=e,this.calculateTransform()}var o=t("famous/Surface"),n=t("famous/Matrix"),r=t("famous-utils/Utils");t("famous/RenderNode"),t("famous-math/Quaternion");var a=t("famous-math/Vector"),h=t("./Line");s.prototype.setProperties=function(t){this.surface.setProperties(t)},s.prototype.setColor=function(t,i,e,s){return this.surface.setProperties(r.backgroundColor(t,i,e,1)),this.opacity=s,this},s.prototype.setOpacity=function(t){return this.opacity=t,this},s.prototype.render=function(){var t=[{transform:this.mtx,opacity:this.opacity,origin:[.5,.5],target:this.surface.render()}];return t.push(this.line0.render()),t.push(this.line1.render()),t.push(this.line2.render()),t.push({transform:this.p1Surf.mtx,opacity:this.p1Surf.opacity,origin:[.5,.5],target:this.p1Surf.render()}),t.push({transform:this.p2Surf.mtx,opacity:this.p2Surf.opacity,origin:[.5,.5],target:this.p2Surf.render()}),t.push({transform:this.p3Surf.mtx,opacity:this.p3Surf.opacity,origin:[.5,.5],target:this.p3Surf.render()}),t},s.prototype.setP1=function(t,i,e){this.set(t,i,e,this.x2,this.y2,this.z2,this.x3,this.y3,this.z3)},s.prototype.setP2=function(t,i,e){this.set(this.x1,this.y1,this.z1,t,i,e,this.x3,this.y3,this.z3)},s.prototype.setP3=function(t,i,e){this.set(this.x1,this.y1,this.z1,this.x2,this.y2,this.z2,t,i,e)},s.prototype.set=function(t,i,e,s,o,n,r,a,h){this.x1=t,this.y1=i,this.z1=e,this.x2=s,this.y2=o,this.z2=n,this.x3=r,this.y3=a,this.z3=h,this.calculateTransform()},s.prototype.getP1=function(){return[this.x1,this.y1,this.z1]},s.prototype.getP2=function(){return[this.x2,this.y2,this.z2]},s.prototype.getP3=function(){return[this.x3,this.y3,this.z3]},s.prototype.getLength=function(){return this.length},s.prototype.calculateTransform=function(){var t=0,i=0,e=0,s=0,o=0,h=0,u=0,p=0,c=0,l=r.distance3D(this.x1,this.y1,this.z1,this.x2,this.y2,this.z2),f=r.distance3D(this.x1,this.y1,this.z1,this.x3,this.y3,this.z3),d=r.distance3D(this.x2,this.y2,this.z2,this.x3,this.y3,this.z3),m=0;if(l>f?l>d?(this.y1<this.y2?(t=this.x1,i=this.y1,e=this.z1,s=this.x2,o=this.y2,h=this.z2):(t=this.x2,i=this.y2,e=this.z2,s=this.x1,o=this.y1,h=this.z1),u=this.x3,p=this.y3,c=this.z3,m=l):(this.y2<this.y3?(t=this.x2,i=this.y2,e=this.z2,s=this.x3,o=this.y3,h=this.z3):(t=this.x3,i=this.y3,e=this.z3,s=this.x2,o=this.y2,h=this.z2),u=this.x1,p=this.y1,c=this.z1,m=d):f>d?(this.y1<this.y3?(t=this.x1,i=this.y1,e=this.z1,s=this.x3,o=this.y3,h=this.z3):(t=this.x3,i=this.y3,e=this.z3,s=this.x1,o=this.y1,h=this.z1),u=this.x2,p=this.y2,c=this.z2,m=f):(this.y2<this.y3?(t=this.x2,i=this.y2,e=this.z2,s=this.x3,o=this.y3,h=this.z3):(t=this.x3,i=this.y3,e=this.z3,s=this.x2,o=this.y2,h=this.z2),u=this.x1,p=this.y1,c=this.z1,m=d),s>=t){var g=t,v=i,y=e;t=s,i=o,e=h,s=g,o=v,h=y}this.p1Surf.mtx=n.move(n.identity,[t,i,e]),this.p2Surf.mtx=n.move(n.identity,[s,o,h]),this.p3Surf.mtx=n.move(n.identity,[u,p,c]),this.line0.set(t,i,e,s,o,h),this.line0.setColor(255,255,0,1),this.line1.set(t,i,e,u,p,c),this.line1.setColor(255,0,255,1),this.line2.set(s,o,h,u,p,c),this.line2.setColor(0,255,255,1);var x=1,S=1,b=0,w=0,T=Math.atan((o-i)/(s-t));isNaN(T)&&(T=this.halfPi);var M=.5*(l+f+d),z=Math.sqrt(M*(M-l)*(M-f)*(M-d)),_=2*z/m,C=Math.asin(_/r.distance3D(t,i,e,u,p,c)),P=Math.asin(_/r.distance3D(s,o,h,u,p,c)),O=_/Math.tan(P)/m,E=_/Math.tan(C)/m,k=new a(s-t,o-i,h-e),I=new a(s-u,o-p,h-c),A=new a;if(k.cross(I,A),A.z>0&&(x=-1),t==s){x*=-1;var N=E;E=O,O=N}var D=this.invSize*_,R=this.invSize*m;rot=n.multiply(n.identity,n.rotate(b,w,T)),this.surface.setProperties({"border-radius":"0px","border-right":this.size*E+"px solid rgba(255, 0, 0, .50)","border-left":this.size*O+"px solid rgba(0, 0, 255, .50)","border-bottom":this.size+"px solid rgba(0, 255, 0, .50)"});var F=.5*(t+s)-.5*x*_*Math.sin(-T),B=.5*(i+o)-.5*x*_*Math.cos(Math.abs(T)),L=n.move(n.identity,[F,B,0]);this.mtx=n.multiply(n.identity,n.scale(R*S,D*x,1),rot,L)},e.exports=s}),define("famous-generative/EasyCamera",["require","exports","module","famous/Engine","famous-utils/Utils","famous/Matrix","famous-math/Vector","famous-math/Quaternion"],function(t,i,e){function s(){this.renderMatrix=r.identity,this.doubleClickToReset=!0,this.touchTime=(new Date).getTime(),this.clickTime=(new Date).getTime(),this.deltaTime=200,this.viewWidth=n.getWidth(),this.viewHeight=n.getHeight(),this.radius=.5*Math.max(this.viewWidth,this.viewHeight),this.center=new a(.5*this.viewWidth,.5*this.viewHeight,0),this.axis=new a(0,1,0),this.theta=0,this.flipX=1,this.flipY=1,this.flipZ=1,this.t1=new a,this.t2=new a,this.pt1=new a,this.pt2=new a,this.damping=.95,this.zAcc=0,this.zVel=0,this.dt=0,this.pdt=0,this.distance=-100,this.position=new a(0,0,this.distance),this.rotation=new a(0,0,0),this.e_mtx=r.identity,this.q_rot=new h,this.q_mtx=r.identity,this.quat=new h,this.d_mtx=r.identity,this.sensitivityRotation=3,this.sensitivityZoom=3,this.touchDown=!1,this.mouseDown=!1,o.on("prerender",this._update.bind(this)),o.on("touchstart",this.touchstart.bind(this)),o.on("touchmove",this.touchmove.bind(this)),o.on("touchend",this.touchend.bind(this)),o.on("resize",this.resize.bind(this)),o.on("mousedown",this.mousedown.bind(this)),o.on("mousemove",this.mousemove.bind(this)),o.on("mouseup",this.mouseup.bind(this)),window.addEventListener("mousewheel",this.mousewheel.bind(this)),this.updateMatrix()}var o=t("famous/Engine"),n=t("famous-utils/Utils"),r=t("famous/Matrix"),a=t("famous-math/Vector"),h=t("famous-math/Quaternion");s.prototype._update=function(){this.update(),!this.mouseDown&&!this.touchDown&&this.theta>1e-4&&(this.quat.makeFromAngleAndAxis(this.theta*this.sensitivityRotation,this.axis),this.q_rot=this.q_rot.multiply(this.quat),this.q_mtx=this.q_rot.getMatrix(),this.updateMatrix(),this.theta*=this.damping)},s.prototype.update=function(){},s.prototype.setFlipX=function(t){this.flipX=t?-1:1},s.prototype.setFlipY=function(t){this.flipY=t?-1:1},s.prototype.setFlipZ=function(t){this.flipZ=t?-1:1},s.prototype.setSensitivityZoom=function(t){this.sensitivityZoom=t},s.prototype.setSensitivityRotation=function(t){this.sensitivityRotation=t},s.prototype.setDistance=function(t){this.distance=t,this.position.z=this.distance,this.setPosition(this.position)},s.prototype.setPosition=function(t){this.position.set(t),this.updateMatrix()},s.prototype.applyQuaternionRotation=function(t){this.q_rot=this.q_rot.multiply(t),this.q_mtx=this.q_rot.getMatrix(),this.updateMatrix()},s.prototype.applyEulerRotation=function(t,i,e){this.rotation.setXYZ(t,i,e),this.e_mtx=r.rotate(t,i,e),this.updateMatrix()},s.prototype.updateMatrix=function(){this.renderMatrix=r.move(r.multiply(this.q_mtx,this.e_mtx),this.position.toArray())},s.prototype.getRotationMatrix=function(){return this.q_mtx},s.prototype.getMatrix=function(){return this.renderMatrix},s.prototype.reset=function(){this.theta=0,this.q_rot.clear(),this.q_mtx=this.d_mtx,this.position.clear(),this.position.setXYZ(0,0,this.distance),this.updateMatrix()},s.prototype.setDefaultMatrix=function(t){this.d_mtx=t
},s.prototype.clickCheckForCameraRestart=function(){var t=(new Date).getTime();t-this.clickTime<this.deltaTime&&this.doubleClickToReset&&this.reset(),this.clickTime=t},s.prototype.touchCheckForCameraRestart=function(){var t=(new Date).getTime();t-this.touchTime<this.deltaTime&&this.doubleClickToReset&&this.reset(),this.touchTime=t},s.prototype.touchstart=function(t){1==t.touches.length?(this.touchDown=!0,this.touchCheckForCameraRestart(),this.theta=0,this.t1.clear(),this.pt1.clear(),this.quat.clear(),this.setArcBallVector(t.touches[0].clientX,t.touches[0].clientY)):2==t.touches.length&&(this.t1.setXYZ(t.touches[0].clientX,t.touches[0].clientY,0),this.t2.setXYZ(t.touches[1].clientX,t.touches[1].clientY,0),this.pt1.set(this.t1),this.pt2.set(this.t2),this.dt=n.distance(this.t1.x,this.t1.y,this.t2.x,this.t2.y),this.pdt=this.dt)},s.prototype.touchmove=function(t){1==t.touches.length?(this.setArcBallVector(t.touches[0].clientX,t.touches[0].clientY),this.updateArcBallRotation()):2==t.touches.length&&(this.t1.setXYZ(t.touches[0].clientX,t.touches[0].clientY,0),this.t2.setXYZ(t.touches[1].clientX,t.touches[1].clientY,0),this.dt=n.distance(this.t1.x,this.t1.y,this.t2.x,this.t2.y),this.position.z+=this.flipZ*(this.dt-this.pdt)/this.sensitivityZoom,this.updateMatrix(),this.pt1.set(this.t1),this.pt2.set(this.t2),this.pdt=this.dt)},s.prototype.touchend=function(t){1==t.touches.length?(this.t1.clear(),this.pt1.clear(),this.quat.clear()):2==t.touches.length&&(this.t1.clear(),this.pt1.clear(),this.t2.clear(),this.pt2.clear(),this.dt=0,this.pdt=0)},s.prototype.setArcBallVector=function(t,i){this.pt1.set(this.t1),this.t1.clear(),this.t1.x=-1*this.flipX*(t-this.center.x)/this.radius,this.t1.y=-1*this.flipY*(i-this.center.y)/this.radius;var e=this.t1.norm();e>1?this.t1.normalize(1,this.t1):this.t1.z=Math.sqrt(1-e)},s.prototype.updateArcBallRotation=function(){this.theta=Math.acos(this.t1.dot(this.pt1)),this.axis=this.pt1.cross(this.t1,this.axis),this.quat.makeFromAngleAndAxis(this.theta*this.sensitivityRotation,this.axis),this.q_rot=this.q_rot.multiply(this.quat),this.q_mtx=this.q_rot.getMatrix(),this.updateMatrix()},s.prototype.emit=function(t,i){"prerender"==t?this.update(i):"touchstart"==t?this.touchstart(i):"touchmove"==t?this.touchmove(i):"touchend"==t?this.touchend(i):"resize"==t&&this.resize(i)},s.prototype.mousemove=function(t){this.mouseDown&&(this.setArcBallVector(t.clientX,t.clientY),this.updateArcBallRotation())},s.prototype.mousedown=function(t){this.mouseDown=!0,this.clickCheckForCameraRestart(),this.theta=0,this.t1.clear(),this.pt1.clear(),this.quat.clear(),this.setArcBallVector(t.clientX,t.clientY)},s.prototype.mouseup=function(){this.mouseDown=!1},s.prototype.mousewheel=function(t){this.position.z+=.01*this.flipZ*n.limit(t.wheelDelta,-500,500)*this.sensitivityZoom,this.updateMatrix()},s.prototype.resize=function(){this.viewWidth=n.getWidth(),this.viewHeight=n.getHeight(),this.center=new a(.5*this.viewWidth,.5*this.viewHeight,0),this.radius=.5*Math.min(this.viewWidth,this.viewHeight)},s.prototype.setDamping=function(t){this.damping=t},s.prototype.render=function(t){return{transform:this.renderMatrix,origin:[.5,.5],target:t}},e.exports=s}),define("famous-generative/Integrator",["require","exports","module"],function(t,i,e){function s(t,i,e,s,o){this.targeting=!0,this.target=i||0,this.pos=t||0,this.delta=this.target-this.pos,this.vel=0,this.acc=0,this.damping=e||.125,this.extForce=0,this.extForceInQue=!1,this.velLimit=s||.125,this.accLimit=o||.0125}s.prototype.setPhysics=function(t,i,e){this.damping=t,this.velLimit=i,this.accLimit=e},s.prototype.update=function(){return this.targeting&&(this.acc=0,this.acc+=this.goToTarget(),this.extForceInQue&&(this.acc+=this.extForce,this.extForceInQue=!1,this.extForce=0),this.accLimitCheck(),this.acc-=this.vel*this.damping,this.vel+=this.acc,this.velLimitCheck(),this.pos+=this.vel),this.pos},s.prototype.setTarget=function(t){this.target=t},s.prototype.setTargetAndHome=function(t){this.target=t,this.pos=t},s.prototype.getValue=function(){return this.pos},s.prototype.goToTarget=function(){return this.delta=this.target-this.pos,this.delta},s.prototype.addForce=function(t){this.extForceInQue=!0,this.extForce+=t},s.prototype.accLimitCheck=function(){Math.abs(this.acc)>this.accLimit&&(this.acc=this.acc>0?this.accLimit:-this.accLimit)},s.prototype.velLimitCheck=function(){Math.abs(this.vel)>this.velLimit&&(this.vel=this.vel>0?this.velLimit:-this.velLimit)},e.exports=s}),define("famous-generative/Particle",["require","exports","module","famous-math/Vector"],function(t,i,e){function s(){this.theta=0,this.speed=.01,this.home=new o(0,0,0),this.ppos=new o(0,0,0),this.pos=new o(0,0,0),this.vel=new o(0,0,0),this.acc=new o(0,0,0),this.velLimit=10,this.accLimit=.25,this.radius=.5}var o=t("famous-math/Vector");s.prototype.update=function(){this.ppos.set(this.pos),this.ppos.sub(this.pos,this.vel),this.vel.add(this.acc.cap(this.accLimit),this.vel),this.pos.add(this.vel.cap(this.velLimit),this.pos)},e.exports=s}),define("famous-generative/SimplexNoise",["require","exports","module"],function(t,i,e){function s(t,i,e,s){this.x=t||0,this.y=i||0,this.z=e||0,this.w=s||0}function o(t,i,e){return t.x*i+t.y*e}function n(t,i,e,s){return t.x*i+t.y*e+t.z*s}function r(t,i,e,s,o){return t.x*i+t.y*e+t.z*s+t.w*o}function a(){this.F2=.5*(Math.sqrt(3)-1),this.G2=(3-Math.sqrt(3))/6,this.F3=1/3,this.G3=1/6,this.F4=(Math.sqrt(5)-1)/4,this.G4=(5-Math.sqrt(5))/20,this.grad3=[new s(1,1,0),new s(-1,1,0),new s(1,-1,0),new s(-1,-1,0),new s(1,0,1),new s(-1,0,1),new s(1,0,-1),new s(-1,0,-1),new s(0,1,1),new s(0,-1,1),new s(0,1,-1),new s(0,-1,-1)],this.grad4=[new s(0,1,1,1),new s(0,1,1,-1),new s(0,1,-1,1),new s(0,1,-1,-1),new s(0,-1,1,1),new s(0,-1,1,-1),new s(0,-1,-1,1),new s(0,-1,-1,-1),new s(1,0,1,1),new s(1,0,1,-1),new s(1,0,-1,1),new s(1,0,-1,-1),new s(-1,0,1,1),new s(-1,0,1,-1),new s(-1,0,-1,1),new s(-1,0,-1,-1),new s(1,1,0,1),new s(1,1,0,-1),new s(1,-1,0,1),new s(1,-1,0,-1),new s(-1,1,0,1),new s(-1,1,0,-1),new s(-1,-1,0,1),new s(-1,-1,0,-1),new s(1,1,1,0),new s(1,1,-1,0),new s(1,-1,1,0),new s(1,-1,-1,0),new s(-1,1,1,0),new s(-1,1,-1,0),new s(-1,-1,1,0),new s(-1,-1,-1,0)],this.p=[];for(var t=0;255>=t;t++)this.p[t]=Math.floor(255*Math.random());this.perm=[],this.permMod12=[];for(var t=0;512>t;t++)this.perm[t]=this.p[255&t],this.permMod12[t]=this.perm[t]%12}a.prototype.noise2D=function(t,i){var e,s,n=0,r=0,a=0,h=(t+i)*this.F2,u=Math.floor(t+h),p=Math.floor(i+h),c=(u+p)*this.G2,l=u-c,f=p-c,d=t-l,m=i-f;d>m?(e=1,s=0):(e=0,s=1);var g=d-e+this.G2,v=m-s+this.G2,y=d-1+2*this.G2,x=m-1+2*this.G2,S=255&u,b=255&p,w=.5-d*d-m*m;if(w>=0){var T=this.permMod12[S+this.perm[b]];w*=w,n=w*w*o(this.grad3[T],d,m)}var M=.5-g*g-v*v;if(M>=0){var z=this.permMod12[S+e+this.perm[b+s]];M*=M,r=M*M*o(this.grad3[z],g,v)}var _=.5-y*y-x*x;if(_>=0){var C=this.permMod12[S+1+this.perm[b+1]];_*=_,a=_*_*o(this.grad3[C],y,x)}return 70*(n+r+a)},a.prototype.noise3D=function(t,i,e){var s,o,r,a,h,u,p=0,c=0,l=0,f=0,d=(t+i+e)*this.F3,m=Math.floor(t+d),g=Math.floor(i+d),v=Math.floor(e+d),y=(m+g+v)*this.G3,x=m-y,S=g-y,b=v-y,w=t-x,T=i-S,M=e-b;w>=T?T>=M?(s=1,o=0,r=0,a=1,h=1,u=0):w>=M?(s=1,o=0,r=0,a=1,h=0,u=1):(s=0,o=0,r=1,a=1,h=0,u=1):M>T?(s=0,o=0,r=1,a=0,h=1,u=1):M>w?(s=0,o=1,r=0,a=0,h=1,u=1):(s=0,o=1,r=0,a=1,h=1,u=0);var z=w-s+this.G3,_=T-o+this.G3,C=M-r+this.G3,P=w-a+2*this.G3,O=T-h+2*this.G3,E=M-u+2*this.G3,k=w-1+3*this.G3,I=T-1+3*this.G3,A=M-1+3*this.G3,N=255&m,D=255&g,R=255&v,F=.6-w*w-T*T-M*M;if(F>=0){var B=this.permMod12[N+this.perm[D+this.perm[R]]];F*=F,p=F*F*n(this.grad3[B],w,T,M)}var L=.6-z*z-_*_-C*C;if(L>=0){var U=this.permMod12[N+s+this.perm[D+o+this.perm[R+r]]];L*=L,c=L*L*n(this.grad3[U],z,_,C)}var V=.6-P*P-O*O-E*E;if(V>=0){var H=this.permMod12[N+a+this.perm[D+h+this.perm[R+u]]];V*=V,l=V*V*n(this.grad3[H],P,O,E)}var q=.6-k*k-I*I-A*A;if(q>=0){var G=this.permMod12[N+1+this.perm[D+1+this.perm[R+1]]];q*=q,f=q*q*n(this.grad3[G],k,I,A)}return 32*(p+c+l+f)},a.prototype.noise4D=function(t,i,e,s){var o=0,n=0,a=0,h=0,u=0,p=(t+i+e+s)*this.F4,c=Math.floor(t+p),l=Math.floor(i+p),f=Math.floor(e+p),d=Math.floor(s+p),m=(c+l+f+d)*this.G4,g=c-m,v=l-m,y=f-m,x=d-m,S=t-g,b=i-v,w=e-y,T=s-x,M=0,z=0,_=0,C=0;S>b?M++:z++,S>w?M++:_++,S>T?M++:C++,b>w?z++:_++,b>T?z++:C++,w>T?_++:C++;var P,O,E,k,I,A,N,D,R,F,B,L;P=M>=3?1:0,O=z>=3?1:0,E=_>=3?1:0,k=C>=3?1:0,I=M>=2?1:0,A=z>=2?1:0,N=_>=2?1:0,D=C>=2?1:0,R=M>=1?1:0,F=z>=1?1:0,B=_>=1?1:0,L=C>=1?1:0;var U=S-P+this.G4,V=b-O+this.G4,H=w-E+this.G4,q=T-k+this.G4,G=S-I+2*this.G4,Y=b-A+2*this.G4,X=w-N+2*this.G4,j=T-D+2*this.G4,W=S-R+3*this.G4,Z=b-F+3*this.G4,Q=w-B+3*this.G4,K=T-L+3*this.G4,J=S-1+4*this.G4,$=b-1+4*this.G4,ti=w-1+4*this.G4,ii=T-1+4*this.G4,ei=255&c,si=255&l,oi=255&f,ni=255&d,ri=.6-S*S-b*b-w*w-T*T;if(ri>=0){var ai=this.perm[ei+this.perm[si+this.perm[oi+this.perm[ni]]]]%32;ri*=ri,o=ri*ri*r(this.grad4[ai],S,b,w,T)}var hi=.6-U*U-V*V-H*H-q*q;if(hi>=0){var ui=this.perm[ei+P+this.perm[si+O+this.perm[oi+E+this.perm[ni+k]]]]%32;hi*=hi,n=hi*hi*r(this.grad4[ui],U,V,H,q)}var pi=.6-G*G-Y*Y-X*X-j*j;if(pi>=0){var ci=this.perm[ei+I+this.perm[si+A+this.perm[oi+N+this.perm[ni+D]]]]%32;pi*=pi,a=pi*pi*r(this.grad4[ci],G,Y,X,j)}var li=.6-W*W-Z*Z-Q*Q-K*K;if(li>=0){var fi=this.perm[ei+R+this.perm[si+F+this.perm[oi+B+this.perm[ni+L]]]]%32;li*=li,h=li*li*r(this.grad4[fi],W,Z,Q,K)}var di=.6-J*J-$*$-ti*ti-ii*ii;if(0>di){var mi=this.perm[ei+1+this.perm[si+1+this.perm[oi+1+this.perm[ni+1]]]]%32;di*=di,u=di*di*r(this.grad4[mi],J,$,ti,ii)}return 27*(o+n+a+h+u)},e.exports=a}),define("famous-generative/Touch",["require","exports","module","famous/Surface","famous/Matrix","famous-math/Vector","./Integrator","famous-utils/Utils"],function(t,i,e){function s(){this.identifier=-1,this.modAmp=.05,this.modSpeed=.2,this.angle=0,this.alive=!1,this.radius=64,this.surface=new o({size:[2*this.radius,2*this.radius]}),this.surface.addClass("touch"),this.pos=new r,this.mtx=n.identity,this.opacity=0,this.damping=.3,this.velLimit=.25,this.accLimit=.1,this.integrator=new a(0,0,this.damping,this.velLimit,this.accLimit),this.modulator=new a(0,0),this.scale=0,this.surfaceBack=new o({size:[2*this.radius,2*this.radius]}),this.surfaceBack.addClass("touch-back"),this.mtxBack=n.identity,this.opacityBack=0,this.backAlpha=4,this.backIntegrator=new a(0,0,.75,.25,.025)}var o=t("famous/Surface"),n=t("famous/Matrix"),r=t("famous-math/Vector"),a=t("./Integrator"),h=t("famous-utils/Utils");s.prototype.setIdentifier=function(t){this.identifier=t},s.prototype.setRadius=function(t){this.radius=t,this.surface.setSize([2*this.radius,2*this.radius]),this.surfaceBack.setSize([2*this.radius,2*this.radius])},s.prototype.isAlive=function(){return this.alive||this.integrator.getValue()>1e-7?!0:!1},s.prototype.update=function(){this.alive&&(this.angle+=this.modSpeed*this.modulator.update(),this.integrator.addForce(this.modAmp*Math.sin(this.angle))),this.opacity=this.integrator.update(),this.scale=this.integrator.getValue(),this.mtx=n.multiply(n.scale(this.scale,this.scale,1),n.move(n.identity,this.pos.toArray()));var t=h.clamp(this.backIntegrator.update(),0,1);this.opacityBack=-this.backAlpha*t*t+this.backAlpha*t,this.mtxBack=n.multiply(n.scale(.5*this.angle,.5*this.angle,1),n.move(n.identity,this.pos.toArray()))},s.prototype.render=function(){return{transform:this.mtx,origin:[.5,.5],opacity:this.opacity,target:this.surface.render()}},s.prototype.renderBack=function(){return{transform:this.mtxBack,origin:[.5,.5],opacity:this.opacityBack,target:this.surfaceBack.render()}},s.prototype.touchstart=function(t,i){this.angle=0,this.freed=!1,this.alive=!0,this.integrator.setTarget(1),this.integrator.setPhysics(this.damping,this.velLimit,this.accLimit),this.backIntegrator.setTarget(1),this.modulator.setTarget(1),t=t-.5*h.getWidth()+this.radius,i=i-.5*h.getHeight()+this.radius,this.pos.setXYZ(t-this.radius,i-this.radius,0)},s.prototype.touchmove=function(t,i){t=t-.5*h.getWidth()+this.radius,i=i-.5*h.getHeight()+this.radius,this.pos.setXYZ(t-this.radius,i-this.radius,0)},s.prototype.touchend=function(){this.alive=!1,this.integrator.setTarget(0),this.integrator.setPhysics(.1,.25,.0125),this.modulator.setTargetAndHome(0),this.backIntegrator.setTargetAndHome(0)},e.exports=s}),define("famous-generative/TouchVisualizer",["require","exports","module","./Touch"],function(t,i,e){function s(){this.touches=[],this.cachedTouches=[],this.unActiveTouches=[],this.activeIdentifies=[];for(var t=0;20>t;t++)this.cachedTouches[t]=new o(this),this.unActiveTouches[t]=this.cachedTouches[t]}var o=t("./Touch");s.prototype.update=function(){for(var t=0;t<this.activeIdentifies.length;t++){var i=this.activeIdentifies[t];void 0!=this.touches[i]&&this.touches[i].update()}},s.prototype.render=function(){for(var t=[],i=0;i<this.activeIdentifies.length;i++){var e=this.activeIdentifies[i];void 0!=this.touches[e]&&this.touches[e].isAlive()?(t.push(this.touches[e].render()),t.push(this.touches[e].renderBack())):this.touchFreed(this.touches[e])}return t},s.prototype.emit=function(t,i){"touchstart"==t?this.touchstart(i):"touchmove"==t?this.touchmove(i):"touchend"==t?this.touchend(i):"prerender"==t&&this.update(i)},s.prototype.getCachedTouch=function(){return this.unActiveTouches.pop()},s.prototype.touchstart=function(t){for(var i=0;i<t.changedTouches.length;i++){var e=t.changedTouches[i].identifier;void 0==this.touches[e]&&this.cachedTouches.length>0&&(-1==this.activeIdentifies.indexOf(e)&&this.activeIdentifies.push(e),this.touches[e]=this.getCachedTouch(),this.touches[e].setIdentifier(e)),this.touches[e].touchstart(t.changedTouches[i].clientX,t.changedTouches[i].clientY)}},s.prototype.touchmove=function(t){for(var i=0;i<t.changedTouches.length;i++){var e=t.changedTouches[i].identifier;void 0!=this.touches[e]&&this.touches[e].touchmove(t.changedTouches[i].clientX,t.changedTouches[i].clientY)}},s.prototype.touchend=function(t){for(var i=0;i<t.changedTouches.length;i++){var e=t.changedTouches[i].identifier;void 0!=this.touches[e]&&this.touches[e].touchend()}},s.prototype.touchFreed=function(t){if(void 0!=t){var i=t.identifier,e=this.activeIdentifies.indexOf(i);this.activeIdentifies.splice(e,1),this.unActiveTouches.push(t),this.touches[i]=void 0}},e.exports=s}),define("famous-generative/Triangle",["require","exports","module","famous/Surface","famous/Matrix","famous-utils/Utils","famous/RenderNode","famous-math/Quaternion","famous-math/Vector","./Line"],function(t,i,e){function s(t){t||(t={}),this.x1=t.x1||0,this.y1=t.y1||0,this.z1=t.z1||0,this.x2=t.x2||0,this.y2=t.y2||0,this.z2=t.z2||0,this.x3=t.x3||0,this.y3=t.y3||0,this.z3=t.z3||0,this.mtx=n.identity,this.result=[],this.red="undefined"==typeof t.red?255:t.red,this.green="undefined"==typeof t.green?255:t.green,this.blue="undefined"==typeof t.blue?255:t.blue,this.opacity="undefined"==typeof t.opacity?1:t.opacity,this.size=1e3,this.halfSize=.5*this.size,this.invSize=1/this.size,this.halfPi=.5*Math.PI,this.surface=new o({size:[this.size,this.size]}),this.surface.addClass("Triangle"),this.surface.setProperties({"background-color":"rgba(0, 0, 0, 0.0)","border-radius":"0px","border-top":"0px solid","border-right":.5*this.size+"px solid transparent","border-left":.5*this.size+"px solid transparent","border-bottom":this.size+"px solid rgba("+this.red+", "+this.green+", "+this.blue+", 1.0)"}),this.calculateTransform()}var o=t("famous/Surface"),n=t("famous/Matrix"),r=t("famous-utils/Utils");t("famous/RenderNode"),t("famous-math/Quaternion");var a=t("famous-math/Vector");t("./Line"),s.prototype.setProperties=function(t){this.surface.setProperties(t)},s.prototype.setColor=function(t,i,e,s){return this.red=Math.abs(Math.floor(t)),this.green=Math.abs(Math.floor(i)),this.blue=Math.abs(Math.floor(e)),this.opacity=s,this.surface.setProperties({"border-bottom":this.size+"px solid rgba("+this.red+", "+this.green+", "+this.blue+", 1.0)"}),this},s.prototype.setOpacity=function(t){return this.opacity=t,this},s.prototype.render=function(){var t={transform:this.mtx,opacity:this.opacity,origin:[.5,.5],target:this.surface.render()};return t},s.prototype.setP1=function(t,i,e){this.set(t,i,e,this.x2,this.y2,this.z2,this.x3,this.y3,this.z3)},s.prototype.setP2=function(t,i,e){this.set(this.x1,this.y1,this.z1,t,i,e,this.x3,this.y3,this.z3)},s.prototype.setP3=function(t,i,e){this.set(this.x1,this.y1,this.z1,this.x2,this.y2,this.z2,t,i,e)},s.prototype.set=function(t,i,e,s,o,n,r,a,h){this.x1=t,this.y1=i,this.z1=e,this.x2=s,this.y2=o,this.z2=n,this.x3=r,this.y3=a,this.z3=h,this.calculateTransform()},s.prototype.getP1=function(){return[this.x1,this.y1,this.z1]},s.prototype.getP2=function(){return[this.x2,this.y2,this.z2]},s.prototype.getP3=function(){return[this.x3,this.y3,this.z3]},s.prototype.getLength=function(){return this.length},s.prototype.calculateTransform=function(){var t=0,i=0,e=0,s=0,o=0,h=0,u=0,p=0,c=0,l=r.distance3D(this.x1,this.y1,this.z1,this.x2,this.y2,this.z2),f=r.distance3D(this.x1,this.y1,this.z1,this.x3,this.y3,this.z3),d=r.distance3D(this.x2,this.y2,this.z2,this.x3,this.y3,this.z3),m=0;if(l>f?l>d?(this.y1<this.y2?(t=this.x1,i=this.y1,e=this.z1,s=this.x2,o=this.y2,h=this.z2):(t=this.x2,i=this.y2,e=this.z2,s=this.x1,o=this.y1,h=this.z1),u=this.x3,p=this.y3,c=this.z3,m=l):(this.y2<this.y3?(t=this.x2,i=this.y2,e=this.z2,s=this.x3,o=this.y3,h=this.z3):(t=this.x3,i=this.y3,e=this.z3,s=this.x2,o=this.y2,h=this.z2),u=this.x1,p=this.y1,c=this.z1,m=d):f>d?(this.y1<this.y3?(t=this.x1,i=this.y1,e=this.z1,s=this.x3,o=this.y3,h=this.z3):(t=this.x3,i=this.y3,e=this.z3,s=this.x1,o=this.y1,h=this.z1),u=this.x2,p=this.y2,c=this.z2,m=f):(this.y2<this.y3?(t=this.x2,i=this.y2,e=this.z2,s=this.x3,o=this.y3,h=this.z3):(t=this.x3,i=this.y3,e=this.z3,s=this.x2,o=this.y2,h=this.z2),u=this.x1,p=this.y1,c=this.z1,m=d),s>=t){var g=t,v=i,y=e;t=s,i=o,e=h,s=g,o=v,h=y}var x=1,S=1,b=Math.atan((o-i)/(s-t)),w=.5*(l+f+d),T=Math.sqrt(w*(w-l)*(w-f)*(w-d)),M=2*T/m,z=Math.asin(M/r.distance3D(t,i,e,u,p,c)),_=Math.asin(M/r.distance3D(s,o,h,u,p,c)),C=M/Math.tan(_)/m,P=M/Math.tan(z)/m,O=new a(s-t,o-i,h-e),E=new a(s-u,o-p,h-c),k=new a;if(O.cross(E,k),k.z>0&&(x=-1),t==s){x*=-1;var I=P;P=C,C=I}var A=this.invSize*M,N=this.invSize*m;rot=n.multiply(n.identity,n.rotateZ(b)),this.surface.setProperties({"border-radius":"0px","border-right":this.size*P+"px solid transparent","border-left":this.size*C+"px solid transparent","border-bottom":this.size+"px solid rgba("+this.red+", "+this.green+", "+this.blue+", 1.0)"});var D=.5*(t+s)-.5*x*M*Math.sin(-b),R=.5*(i+o)-.5*x*M*Math.cos(Math.abs(b));this.mtx=n.multiply(n.identity,n.scale(N*S,A*x,1),rot,n.move(n.identity,[D,R,0]))},e.exports=s}),define("famous-generative/Triangle3D",["require","exports","module","famous/Surface","famous/Matrix","famous-utils/Utils","famous/RenderNode","famous-math/Quaternion","famous-math/Vector","famous-generative/Line"],function(t,i,e){function s(t){t||(t={}),this.x1=t.x1||0,this.y1=t.y1||0,this.z1=t.z1||0,this.x2=t.x2||0,this.y2=t.y2||0,this.z2=t.z2||0,this.x3=t.x3||0,this.y3=t.y3||0,this.z3=t.z3||0,this.mtx=n.identity,this.result=[],this.xAxis=new a(1,0,0),this.yAxis=new a(0,1,0),this.zAxis=new a(0,0,1),this.red="undefined"==typeof t.red?255:t.red,this.green="undefined"==typeof t.green?255:t.green,this.blue="undefined"==typeof t.blue?255:t.blue,this.opacity="undefined"==typeof t.opacity?1:t.opacity,this.size=1e3,this.halfSize=.5*this.size,this.invSize=1/this.size,this.halfPi=.5*Math.PI,this.surface=new o({size:[this.size,this.size]}),this.surface.addClass("Triangle3D"),this.surface.setProperties({"background-color":"rgba(0, 0, 0, 0.0)","border-radius":"0px","border-top":"0px solid","border-right":.5*this.size+"px solid red","border-left":.5*this.size+"px solid blue","border-bottom":this.size+"px solid rgba("+this.red+", "+this.green+", "+this.blue+", 1.0)"}),this.normal=new h({width:4,opacity:1}),this.line1=new h({width:4,opacity:1}),this.line2=new h({width:4,opacity:1}),this.line3=new h({width:4,opacity:1}),this.line4=new h({width:4,opacity:1}),this.line5=new h({width:4,opacity:1}),this.line6=new h({width:4,opacity:1}),this.normal.setColor(255,0,0,1),this.line1.setColor(255,255,0,1),this.line2.setColor(255,0,255,1),this.line3.setColor(0,255,255,1),this.line4.setColor(255,0,0,1),this.line5.setColor(0,0,0,1),this.line5.setColor(0,0,0,1);var i="font-size: 24px; ";i+="line-height: 30px; ",i+="margin: 0px; ";var e=.75,s=30;this.p1Surf=new o({size:[s,s]}),this.p1Surf.setProperties(r.backgroundColor(255,255,255,1)),this.p1Surf.setProperties(r.borderRadius(s)),this.p1Surf.setContent('<p class="triangleIndex" style="'+i+'">'+"1"+"</p>"),this.p1Surf.mtx=n.identity,this.p1Surf.opacity=e,this.p2Surf=new o({size:[s,s]}),this.p2Surf.setProperties(r.backgroundColor(255,255,255,1)),this.p2Surf.setProperties(r.borderRadius(s)),this.p2Surf.setContent('<p class="triangleIndex" style="'+i+'">'+"2"+"</p>"),this.p2Surf.mtx=n.identity,this.p2Surf.opacity=e,this.p3Surf=new o({size:[s,s]}),this.p3Surf.setProperties(r.backgroundColor(255,255,255,1)),this.p3Surf.setProperties(r.borderRadius(s)),this.p3Surf.setContent('<p class="triangleIndex" style="'+i+'">'+"3"+"</p>"),this.p3Surf.mtx=n.identity,this.p3Surf.opacity=e,this.p4Surf=new o({size:[s,s]}),this.p4Surf.setProperties(r.backgroundColor(255,0,0,1)),this.p4Surf.setProperties(r.borderRadius(s)),this.p4Surf.setContent('<p class="triangleIndex" style="'+i+'">'+"C"+"</p>"),this.p4Surf.mtx=n.identity,this.p4Surf.opacity=e,this.p5Surf=new o({size:[s,s]}),this.p5Surf.setProperties(r.backgroundColor(0,255,0,1)),this.p5Surf.setProperties(r.borderRadius(s)),this.p5Surf.setContent('<p class="triangleIndex" style="'+i+'">'+"M"+"</p>"),this.p5Surf.mtx=n.identity,this.p5Surf.opacity=e,this.p6Surf=new o({size:[s,s]}),this.p6Surf.setProperties(r.backgroundColor(0,0,255,1)),this.p6Surf.setProperties(r.borderRadius(s)),this.p6Surf.setContent('<p class="triangleIndex" style="'+i+'">'+"V"+"</p>"),this.p6Surf.mtx=n.identity,this.p6Surf.opacity=e,this.calculateTransform()}var o=t("famous/Surface"),n=t("famous/Matrix"),r=t("famous-utils/Utils");t("famous/RenderNode"),t("famous-math/Quaternion");var a=t("famous-math/Vector"),h=t("famous-generative/Line");s.prototype.setProperties=function(t){this.surface.setProperties(t)},s.prototype.setColor=function(t,i,e,s){return this.red=Math.abs(Math.floor(t)),this.green=Math.abs(Math.floor(i)),this.blue=Math.abs(Math.floor(e)),this.opacity=s,this.surface.setProperties({"border-bottom":this.size+"px solid rgba("+this.red+", "+this.green+", "+this.blue+", 1.0)"}),this},s.prototype.setOpacity=function(t){return this.opacity=t,this},s.prototype.render=function(){var t=[{transform:this.mtx,opacity:this.opacity,target:this.surface.render()}];return t.push(this.normal.render()),t.push(this.line1.render()),t.push(this.line2.render()),t.push(this.line3.render()),t.push(this.line4.render()),t.push(this.line5.render()),t.push(this.line6.render()),t.push({transform:this.p1Surf.mtx,opacity:this.p1Surf.opacity,target:this.p1Surf.render()}),t.push({transform:this.p2Surf.mtx,opacity:this.p2Surf.opacity,target:this.p2Surf.render()}),t.push({transform:this.p3Surf.mtx,opacity:this.p3Surf.opacity,target:this.p3Surf.render()}),t.push({transform:this.p4Surf.mtx,opacity:this.p4Surf.opacity,target:this.p4Surf.render()}),t.push({transform:this.p5Surf.mtx,opacity:this.p5Surf.opacity,target:this.p5Surf.render()}),t.push({transform:this.p6Surf.mtx,opacity:this.p6Surf.opacity,target:this.p6Surf.render()}),t},s.prototype.setP1=function(t,i,e){this.set(t,i,e,this.x2,this.y2,this.z2,this.x3,this.y3,this.z3)},s.prototype.setP2=function(t,i,e){this.set(this.x1,this.y1,this.z1,t,i,e,this.x3,this.y3,this.z3)},s.prototype.setP3=function(t,i,e){this.set(this.x1,this.y1,this.z1,this.x2,this.y2,this.z2,t,i,e)},s.prototype.set=function(t,i,e,s,o,n,r,a,h){this.x1=t,this.y1=i,this.z1=e,this.x2=s,this.y2=o,this.z2=n,this.x3=r,this.y3=a,this.z3=h,this.calculateTransform()},s.prototype.getP1=function(){return[this.x1,this.y1,this.z1]},s.prototype.getP2=function(){return[this.x2,this.y2,this.z2]},s.prototype.getP3=function(){return[this.x3,this.y3,this.z3]},s.prototype.getLength=function(){return this.length},s.prototype.calculateTransform=function(){var t=0,i=0,e=0,s=0,o=0,h=0,u=0,p=0,c=0,l=r.distance3D(this.x1,this.y1,this.z1,this.x2,this.y2,this.z2),f=r.distance3D(this.x1,this.y1,this.z1,this.x3,this.y3,this.z3),d=r.distance3D(this.x2,this.y2,this.z2,this.x3,this.y3,this.z3),m=0,g=0,v=0,y=0,x=0;l>f?l>d?(this.y1<this.y2?(t=this.x1,i=this.y1,e=this.z1,s=this.x2,o=this.y2,h=this.z2):(t=this.x2,i=this.y2,e=this.z2,s=this.x1,o=this.y1,h=this.z1),u=this.x3,p=this.y3,c=this.z3,g=l):(this.y2<this.y3?(t=this.x2,i=this.y2,e=this.z2,s=this.x3,o=this.y3,h=this.z3):(t=this.x3,i=this.y3,e=this.z3,s=this.x2,o=this.y2,h=this.z2),u=this.x1,p=this.y1,c=this.z1,g=d):f>d?(this.y1<this.y3?(t=this.x1,i=this.y1,e=this.z1,s=this.x3,o=this.y3,h=this.z3):(t=this.x3,i=this.y3,e=this.z3,s=this.x1,o=this.y1,h=this.z1),u=this.x2,p=this.y2,c=this.z2,g=f):(this.y2<this.y3?(t=this.x2,i=this.y2,e=this.z2,s=this.x3,o=this.y3,h=this.z3):(t=this.x3,i=this.y3,e=this.z3,s=this.x2,o=this.y2,h=this.z2),u=this.x1,p=this.y1,c=this.z1,g=d);var S=new a(t,i,e),b=new a(s,o,h),w=new a(u,p,c),T=new a(t+s,i+o,e+h);T.mult(.5,T),this.p5Surf.mtx=n.translate(T.x,T.y,T.z),this.p1Surf.mtx=n.move(n.identity,S.toArray()),this.p2Surf.mtx=n.move(n.identity,b.toArray()),this.p3Surf.mtx=n.move(n.identity,w.toArray());var M=new a(t+s+u,i+o+p,e+h+c);M.mult(1/3,M);var z=new a;z.add(b).sub(S,z);var _=new a;_.add(w).sub(b,_);var C=new a;C.add(w).sub(S,C);var P=new a;z.cross(_,P);var O=this.xAxis.dot(P),E=this.yAxis.dot(P),k=this.zAxis.dot(P);console.log(O,E,k),0>k&&(S=new a(s,o,h),b=new a(t,i,e),z=new a,z.add(b).sub(S,z),_=new a,_.add(w).sub(b,_),C=new a,C.add(w).sub(S,C),P=new a,z.cross(_,P)),O=this.xAxis.dot(P),E=this.yAxis.dot(P),k=this.zAxis.dot(P),this.p1Surf.mtx=n.move(n.identity,S.toArray()),this.p2Surf.mtx=n.move(n.identity,b.toArray()),this.p3Surf.mtx=n.move(n.identity,w.toArray()),console.log(O,E,k);var I=new a;I.add(S).sub(T,I),this.line5.set(T.x,T.y,T.z,T.x+I.x,T.y+I.y,T.z+I.z),m=.5*P.norm(),v=2*m/g;var A=new a;A=I.cross(P,A),A.normalize(v/2,A),this.line6.set(T.x,T.y,T.z,T.x+A.x,T.y+A.y,T.z+A.z);var N=new a(T.x+A.x,T.y+A.y,T.z+A.z);this.p6Surf.mtx=n.translate(N.x,N.y,N.z);var D=Math.asin(v/C.getLength()),R=Math.asin(v/_.getLength()),y=v/Math.tan(R)/g,x=v/Math.tan(D)/g;P.normalize(150,P),this.line4.set(M.x,M.y,M.z,M.x+P.x,M.y+P.y,M.z+P.z),this.p4Surf.mtx=n.translate(M.x,M.y,M.z),Math.acos(z.dot(_)/(z.norm()*_.norm()));var F=Math.atan2(P.x,Math.sqrt(P.z*P.z+P.y*P.y)),B=Math.atan2(-P.y,P.z);this.surface.setProperties({"border-radius":"0px","border-right":this.size*x+"px solid transparent","border-left":this.size*y+"px solid transparent","border-bottom":this.size+"px solid rgba("+this.red+", "+this.green+", "+this.blue+", 1.0)"});var L=M.x-(M.x-N.x),U=M.y-(M.y-N.y),V=M.z-(M.z-N.z);this.line1.setLineWidth(10),this.line1.set(0,0,0,M.x,M.y,M.z),this.mtx=n.scale(this.invSize*g,this.invSize*v,1),this.mtx=n.multiply(this.mtx,n.rotateZ(0),n.rotate(B,F,0)),this.mtx=n.move(this.mtx,[L,U,V])},e.exports=s}),define("famous-generative/Triangle3DOLD",["require","exports","module","famous/Surface","famous/Matrix","famous-utils/Utils","famous/RenderNode","famous-math/Quaternion","famous-math/Vector","famous-generative/Line"],function(t,i,e){function s(t){t||(t={}),this.x1=t.x1||0,this.y1=t.y1||0,this.z1=t.z1||0,this.x2=t.x2||0,this.y2=t.y2||0,this.z2=t.z2||0,this.x3=t.x3||0,this.y3=t.y3||0,this.z3=t.z3||0,this.mtx=n.identity,this.result=[],this.red="undefined"==typeof t.red?255:t.red,this.green="undefined"==typeof t.green?255:t.green,this.blue="undefined"==typeof t.blue?255:t.blue,this.opacity="undefined"==typeof t.opacity?1:t.opacity,this.size=1e3,this.halfSize=.5*this.size,this.invSize=1/this.size,this.halfPi=.5*Math.PI,this.surface=new o([this.size,this.size]),this.surface.addClass("Triangle3D"),this.surface.setProperties({"background-color":"rgba(0, 0, 0, 0.0)","border-radius":"0px","border-top":"0px solid","border-right":.5*this.size+"px solid red","border-left":.5*this.size+"px solid blue","border-bottom":this.size+"px solid rgba("+this.red+", "+this.green+", "+this.blue+", 1.0)"}),this.normal=new h({width:4,opacity:1}),this.line1=new h({width:4,opacity:1}),this.line2=new h({width:4,opacity:1}),this.line3=new h({width:4,opacity:1}),this.line4=new h({width:4,opacity:1}),this.line5=new h({width:4,opacity:1}),this.line6=new h({width:4,opacity:1}),this.normal.setColor(255,0,0,1),this.line1.setColor(255,255,0,1),this.line2.setColor(255,0,255,1),this.line3.setColor(0,255,255,1),this.line4.setColor(255,0,0,1),this.line5.setColor(0,0,0,1),this.line5.setColor(0,0,0,1);var i="font-size: 24px; ";i+="line-height: 30px; ",i+="margin: 0px; ";var e=.75,s=30;this.p1Surf=new o([s,s]),this.p1Surf.setProperties(r.backgroundColor(255,255,255,1)),this.p1Surf.setProperties(r.borderRadius(s)),this.p1Surf.setContent('<p class="triangleIndex" style="'+i+'">'+"1"+"</p>"),this.p1Surf.mtx=n.identity,this.p1Surf.opacity=e,this.p2Surf=new o([s,s]),this.p2Surf.setProperties(r.backgroundColor(255,255,255,1)),this.p2Surf.setProperties(r.borderRadius(s)),this.p2Surf.setContent('<p class="triangleIndex" style="'+i+'">'+"2"+"</p>"),this.p2Surf.mtx=n.identity,this.p2Surf.opacity=e,this.p3Surf=new o([s,s]),this.p3Surf.setProperties(r.backgroundColor(255,255,255,1)),this.p3Surf.setProperties(r.borderRadius(s)),this.p3Surf.setContent('<p class="triangleIndex" style="'+i+'">'+"3"+"</p>"),this.p3Surf.mtx=n.identity,this.p3Surf.opacity=e,this.p4Surf=new o([s,s]),this.p4Surf.setProperties(r.backgroundColor(255,0,0,1)),this.p4Surf.setProperties(r.borderRadius(s)),this.p4Surf.setContent('<p class="triangleIndex" style="'+i+'">'+"C"+"</p>"),this.p4Surf.mtx=n.identity,this.p4Surf.opacity=e,this.p5Surf=new o([s,s]),this.p5Surf.setProperties(r.backgroundColor(0,255,0,1)),this.p5Surf.setProperties(r.borderRadius(s)),this.p5Surf.setContent('<p class="triangleIndex" style="'+i+'">'+"M"+"</p>"),this.p5Surf.mtx=n.identity,this.p5Surf.opacity=e,this.p6Surf=new o([s,s]),this.p6Surf.setProperties(r.backgroundColor(0,0,255,1)),this.p6Surf.setProperties(r.borderRadius(s)),this.p6Surf.setContent('<p class="triangleIndex" style="'+i+'">'+"V"+"</p>"),this.p6Surf.mtx=n.identity,this.p6Surf.opacity=e,this.calculateTransform()}var o=t("famous/Surface"),n=t("famous/Matrix"),r=t("famous-utils/Utils");t("famous/RenderNode"),t("famous-math/Quaternion");var a=t("famous-math/Vector"),h=t("famous-generative/Line");s.prototype.setProperties=function(t){this.surface.setProperties(t)},s.prototype.setColor=function(t,i,e,s){return this.red=Math.abs(Math.floor(t)),this.green=Math.abs(Math.floor(i)),this.blue=Math.abs(Math.floor(e)),this.opacity=s,this.surface.setProperties({"border-bottom":this.size+"px solid rgba("+this.red+", "+this.green+", "+this.blue+", 1.0)"}),this},s.prototype.setOpacity=function(t){return this.opacity=t,this},s.prototype.render=function(){var t=[{transform:this.mtx,opacity:this.opacity,target:this.surface.render()}];return t.push(this.normal.render()),t.push(this.line1.render()),t.push(this.line2.render()),t.push(this.line3.render()),t.push(this.line4.render()),t.push(this.line5.render()),t.push(this.line6.render()),t.push({transform:this.p1Surf.mtx,opacity:this.p1Surf.opacity,target:this.p1Surf.render()}),t.push({transform:this.p2Surf.mtx,opacity:this.p2Surf.opacity,target:this.p2Surf.render()}),t.push({transform:this.p3Surf.mtx,opacity:this.p3Surf.opacity,target:this.p3Surf.render()}),t.push({transform:this.p4Surf.mtx,opacity:this.p4Surf.opacity,target:this.p4Surf.render()}),t.push({transform:this.p5Surf.mtx,opacity:this.p5Surf.opacity,target:this.p5Surf.render()}),t.push({transform:this.p6Surf.mtx,opacity:this.p6Surf.opacity,target:this.p6Surf.render()}),t},s.prototype.setP1=function(t,i,e){this.set(t,i,e,this.x2,this.y2,this.z2,this.x3,this.y3,this.z3)},s.prototype.setP2=function(t,i,e){this.set(this.x1,this.y1,this.z1,t,i,e,this.x3,this.y3,this.z3)},s.prototype.setP3=function(t,i,e){this.set(this.x1,this.y1,this.z1,this.x2,this.y2,this.z2,t,i,e)
},s.prototype.set=function(t,i,e,s,o,n,r,a,h){this.x1=t,this.y1=i,this.z1=e,this.x2=s,this.y2=o,this.z2=n,this.x3=r,this.y3=a,this.z3=h,this.calculateTransform()},s.prototype.getP1=function(){return[this.x1,this.y1,this.z1]},s.prototype.getP2=function(){return[this.x2,this.y2,this.z2]},s.prototype.getP3=function(){return[this.x3,this.y3,this.z3]},s.prototype.getLength=function(){return this.length},s.prototype.calculateTransform=function(){var t=0,i=0,e=0,s=0,o=0,h=0,u=0,p=0,c=0,l=r.distance3D(this.x1,this.y1,this.z1,this.x2,this.y2,this.z2),f=r.distance3D(this.x1,this.y1,this.z1,this.x3,this.y3,this.z3),d=r.distance3D(this.x2,this.y2,this.z2,this.x3,this.y3,this.z3),m=0,g=0,v=0,y=0,x=0;if(l>f?l>d?(this.y1<this.y2?(t=this.x1,i=this.y1,e=this.z1,s=this.x2,o=this.y2,h=this.z2):(t=this.x2,i=this.y2,e=this.z2,s=this.x1,o=this.y1,h=this.z1),u=this.x3,p=this.y3,c=this.z3,g=l):(this.y2<this.y3?(t=this.x2,i=this.y2,e=this.z2,s=this.x3,o=this.y3,h=this.z3):(t=this.x3,i=this.y3,e=this.z3,s=this.x2,o=this.y2,h=this.z2),u=this.x1,p=this.y1,c=this.z1,g=d):f>d?(this.y1<this.y3?(t=this.x1,i=this.y1,e=this.z1,s=this.x3,o=this.y3,h=this.z3):(t=this.x3,i=this.y3,e=this.z3,s=this.x1,o=this.y1,h=this.z1),u=this.x2,p=this.y2,c=this.z2,g=f):(this.y2<this.y3?(t=this.x2,i=this.y2,e=this.z2,s=this.x3,o=this.y3,h=this.z3):(t=this.x3,i=this.y3,e=this.z3,s=this.x2,o=this.y2,h=this.z2),u=this.x1,p=this.y1,c=this.z1,g=d),s>=t){var S=t,b=i,w=e;t=s,i=o,e=h,s=S,o=b,h=w}var T=new a(t,i,e),M=new a(s,o,h),z=new a(u,p,c),_=new a(t+s,i+o,e+h);_.mult(.5,_);var C=new a;C.add(T).sub(_,C),this.line5.set(_.x,_.y,_.z,_.x+C.x,_.y+C.y,_.z+C.z),this.p5Surf.mtx=n.translate(_.x,_.y,_.z),this.p1Surf.mtx=n.move(n.identity,[t,i,e]),this.p2Surf.mtx=n.move(n.identity,[s,o,h]),this.p3Surf.mtx=n.move(n.identity,[u,p,c]);var P=new a(t+s+u,i+o+p,e+h+c);P.mult(1/3,P);var O=new a;O.add(M).sub(T,O);var E=new a;E.add(z).sub(M,E);var k=new a;k.add(z).sub(T,k);var I=new a;O.cross(E,I),m=.5*I.norm(),v=2*m/g;var A=new a;A=C.cross(I,A),A.normalize(v/2,A),this.line6.set(_.x,_.y,_.z,_.x+A.x,_.y+A.y,_.z+A.z);var N=new a(_.x+A.x,_.y+A.y,_.z+A.z);this.p6Surf.mtx=n.translate(N.x,N.y,N.z);var D=Math.asin(v/k.getLength()),R=Math.asin(v/E.getLength()),y=v/Math.tan(R)/g,x=v/Math.tan(D)/g;I.normalize(150,I),this.line4.set(P.x,P.y,P.z,P.x+I.x,P.y+I.y,P.z+I.z),this.p4Surf.mtx=n.translate(P.x,P.y,P.z);var F=Math.acos(O.dot(E)/(O.norm()*E.norm())),B=Math.atan2(I.x,Math.sqrt(I.z*I.z+I.y*I.y)),L=Math.atan2(-I.y,I.z);this.surface.setProperties({"border-radius":"0px","border-right":this.size*x+"px solid red","border-left":this.size*y+"px solid green","border-bottom":this.size+"px solid rgba("+this.red+", "+this.green+", "+this.blue+", 1.0)"});var U=P.x-(P.x-N.x),V=P.y-(P.y-N.y),H=P.z-(P.z-N.z);this.line1.setLineWidth(10),this.line1.set(0,0,0,P.x,P.y,P.z),this.mtx=n.scale(this.invSize*g,this.invSize*v,1),this.mtx=n.multiply(this.mtx,n.rotateZ(-F+.5*Math.PI),n.rotate(L,B,0)),this.mtx=n.move(this.mtx,[U,V,H])},e.exports=s}),define("famous-gl/Effects/BlackAndWhiteEffect",["require","exports","module","../Effect"],function(t,i,e){function s(t){o.apply(this,t),this.options={vertexDefines:void 0,vertexUniforms:void 0,vertexChunk:void 0,fragmentDefines:["const vec3 lumcoeff = vec3(0.299,0.587,0.114);"],fragmentUniforms:{exposure:{value:2},brightness:{value:2},lumacomponents:{value:[1,0,0]}},fragmentChunk:["color.rgb *= (exp2(color.rgb)*vec3(exposure));","vec3 lumacomponents = vec3(lumcoeff * lumacomponents);","float luminance = dot(color.rgb,lumacomponents);","color.rgb = vec3(luminance)*brightness;"]},this.setOptions(t)}var o=t("../Effect");s.prototype=Object.create(o.prototype),s.prototype.constructor=s,s.prototype.setExposure=function(t){this.options.exposure.value=t},s.prototype.setBrightness=function(t){this.options.brightness.value=t},s.prototype.setLumaComponents=function(t){this.options.lumacomponents.value=t},e.exports=s}),define("famous-gl/Effects/CartesianToPolarEffect",["require","exports","module","../Effect"],function(t,i,e){function s(t){o.apply(this,t),this.options={vertexDefines:void 0,vertexUniforms:void 0,vertexChunk:void 0,fragmentDefines:void 0,fragmentUniforms:void 0,fragmentChunk:["vec2 normalizedCoords = vec2(2.0)*vec2(v_texcoord.x*v_aspect, v_texcoord.y)-vec2(1.0*v_aspect, 1.0);","float theta = (PI + atan(normalizedCoords.x,normalizedCoords.y))/TWO_PI;","float r = length(normalizedCoords);","vec2 polar = vec2(theta, r);","color.rgb = texture2D(u_texture, polar).rgb;"]},this.setOptions(t)}var o=t("../Effect");s.prototype=Object.create(o.prototype),s.prototype.constructor=s,e.exports=s}),define("famous-gl/Effects/DuoToneEffect",["require","exports","module","../Effect"],function(t,i,e){function s(t){o.apply(this,t),this.options={vertexDefines:void 0,vertexUniforms:void 0,vertexChunk:void 0,fragmentDefines:void 0,fragmentUniforms:{highcolor:{value:[1,0,1]},lowcolor:{value:[1,1,0]},thresh:{value:.8}},fragmentChunk:["vec3 duoToneResult = vec3(color.r + color.g + color.b / 3.0);","duoToneResult = (duoToneResult.r < thresh ) ? lowcolor : highcolor;","color.rgb = duoToneResult;"]},this.setOptions(t)}var o=t("../Effect");s.prototype=Object.create(o.prototype),s.prototype.constructor=s,e.exports=s}),define("famous-gl/Effects/InvertColorEffect",["require","exports","module","../Effect"],function(t,i,e){function s(t){o.apply(this,t),this.options={vertexDefines:void 0,vertexUniforms:void 0,vertexChunk:void 0,fragmentDefines:void 0,fragmentUniforms:void 0,fragmentChunk:["color.rgb = clamp(vec3(1.0) - color.rgb, 0.0, 1.0);"]},this.setOptions(t)}var o=t("../Effect");s.prototype=Object.create(o.prototype),s.prototype.constructor=s,e.exports=s}),define("famous-gl/Effects/LightTunnelEffect",["require","exports","module","../Effect"],function(t,i,e){function s(t){o.apply(this,t),this.options={vertexDefines:void 0,vertexUniforms:void 0,vertexChunk:void 0,fragmentDefines:void 0,fragmentUniforms:{radius:{value:1},origin:{value:[-.5,-.5]}},fragmentChunk:["vec2 two = vec2(2.0, 2.0);","vec2 torigin = vec2(origin.x*v_aspect, origin.y);","vec2 center = vec2(0.5*v_aspect, 0.5);","vec2 point = vec2(v_texcoord.x*v_aspect, v_texcoord.y);","vec2 normCoord = (two * point) - center;","normCoord += torigin;","float r = length(normCoord);","float phi = atan(normCoord.y, normCoord.x);","if (r > radius*v_aspect) r = radius*v_aspect;","normCoord.x = r* cos(phi);","normCoord.y = r* sin(phi);","normCoord -= torigin;","vec2 texCoord = ((normCoord + center) / vec2(2.0*v_aspect, 2.0));","color.rgb = texture2D(u_texture, texCoord).rgb;"]},this.setOptions(t)}var o=t("../Effect");s.prototype=Object.create(o.prototype),s.prototype.constructor=s,e.exports=s}),define("famous-gl/Effects/LomoEffect",["require","exports","module","../Effect"],function(t,i,e){function s(t){o.apply(this,t),this.options={vertexDefines:void 0,vertexUniforms:void 0,vertexChunk:void 0,fragmentDefines:["const vec4 one = vec4(1.0);","const vec4 two = vec4(2.0);","const vec4 lomolumcoeff = vec4(0.299,0.587,0.114, 0.);","","vec4 vignetteFunction(vec2 normalizedTexcoord) {","	normalizedTexcoord = 2.0 * normalizedTexcoord - 1.0;","	float r = length(normalizedTexcoord);","	return 1.0 - vec4(smoothstep(0.5,1.0,r)) + 0.5;","}","","vec4 hardlight(vec4 a, vec4 b, float amount)","{","vec4 result;","vec4 branch1;","vec4 branch2;","float luminance = dot(b,lomolumcoeff);","float mixamount;","","mixamount = clamp((luminance - 0.45) * 10., 0., 1.);","branch1 = two * a * b;","branch2 = one - (two * (one - a) * (one - b));","","result =  mix(branch1,branch2, vec4(mixamount));","","return mix(a,result, amount);","}"],fragmentUniforms:{sharpness:{value:.00125},amount:{value:.5}},fragmentChunk:["vec2 tc1 = v_texcoord + vec2(-sharpness, -sharpness);","vec2 tc2 = v_texcoord + vec2(+sharpness, -sharpness);","vec2 tc3 = v_texcoord + vec2(+sharpness, +sharpness);","vec2 tc4 = v_texcoord + vec2(-sharpness, +sharpness);","vec2 normcoord = v_texcoord;","vec4 input0 = texture2D(u_texture, v_texcoord);","vec4 input1 = texture2D(u_texture, tc1);","vec4 input2 = texture2D(u_texture, tc2);","vec4 input3 = texture2D(u_texture, tc3);","vec4 input4 = texture2D(u_texture, tc4);","vec4 sharpened = 5.0 * input0 - (input1 + input2 + input3 + input4);","vec4 hardlighted = hardlight(sharpened, input0, 0.5);","vec4 saturated = mix(vec4(dot(hardlighted,lomolumcoeff)), hardlighted, 0.75);","vec4 result;","result.r = saturated.r;","result.g = saturated.g;","result.b = saturated.b;","result.a = saturated.a;","color.rgb = mix(input0, result, amount).rgb;"]},this.setOptions(t)}var o=t("../Effect");s.prototype=Object.create(o.prototype),s.prototype.constructor=s,e.exports=s}),define("famous-gl/Effects/PixelateEffect",["require","exports","module","../Effect"],function(t,i,e){function s(t){o.apply(this,t),this.options={vertexDefines:void 0,vertexUniforms:void 0,vertexChunk:void 0,fragmentDefines:void 0,fragmentUniforms:{pixelScale:{value:1}},fragmentChunk:["vec2 texCoordsStep = 1.0/v_resolution.xy*pixelScale;","vec2 pixelBin = floor(v_texcoord/texCoordsStep);","vec2 inPixelStep = texCoordsStep/3.0;","vec2 inPixelHalfStep = inPixelStep/2.0;","vec2 offset = pixelBin * texCoordsStep;","vec2 offset0 = vec2(inPixelHalfStep.x, inPixelStep.y*2.0 + inPixelHalfStep.y) + offset;","vec2 offset1 = vec2(inPixelStep.x + inPixelHalfStep.x, inPixelStep.y*2.0 + inPixelHalfStep.y) + offset;","vec2 offset2 = vec2(inPixelStep.x*2.0 + inPixelHalfStep.x, inPixelStep.y*2.0 + inPixelHalfStep.y) + offset;","vec2 offset3 = vec2(inPixelHalfStep.x, inPixelStep.y + inPixelHalfStep.y) + offset;","vec2 offset4 = vec2(inPixelStep.x + inPixelHalfStep.x, inPixelStep.y + inPixelHalfStep.y) + offset;","vec2 offset5 = vec2(inPixelStep.x*2.0 + inPixelHalfStep.x, inPixelStep.y + inPixelHalfStep.y) + offset;","vec2 offset6 = vec2(inPixelHalfStep.x, inPixelHalfStep.y) + offset;","vec2 offset7 = vec2(inPixelStep.x + inPixelHalfStep.x, inPixelHalfStep.y) + offset;","vec2 offset8 = vec2(inPixelStep.x*2.0 + inPixelHalfStep.x, inPixelHalfStep.y) + offset;","vec4 input0 = texture2D(u_texture,offset0);","vec4 input1 = texture2D(u_texture,offset1);","vec4 input2 = texture2D(u_texture,offset2);","vec4 input3 = texture2D(u_texture,offset3);","vec4 input4 = texture2D(u_texture,offset4);","vec4 input5 = texture2D(u_texture,offset5);","vec4 input6 = texture2D(u_texture,offset6);","vec4 input7 = texture2D(u_texture,offset7);","vec4 input8 = texture2D(u_texture,offset8);","vec4 avgColor = input0 + input1 + input2 + input3 + input4 + input5 + input6 + input7 + input8;","avgColor /= 9.0;","color.rgb = avgColor.rgb;"]},this.setOptions(t)}var o=t("../Effect");s.prototype=Object.create(o.prototype),s.prototype.constructor=s,e.exports=s}),define("famous-gl/Effects/PolarToCartesianEffect",["require","exports","module","../Effect"],function(t,i,e){function s(t){o.apply(this,t),this.options={vertexDefines:void 0,vertexUniforms:void 0,vertexChunk:void 0,fragmentDefines:void 0,fragmentUniforms:void 0,fragmentChunk:["vec2 polToCart = 2.0*v_texcoord - 1.0;","float theta = PI + polToCart.x*PI;","float r = (1.0 + polToCart.y)*0.5;","vec2 cartesian = r*vec2(sin(theta)/v_aspect, cos(theta));","cartesian = vec2(0.5, 0.5) - cartesian/2.0;","color.rgb = texture2D(u_texture, cartesian).rgb;"]},this.setOptions(t)}var o=t("../Effect");s.prototype=Object.create(o.prototype),s.prototype.constructor=s,e.exports=s}),define("famous-gl/Effects/ScanlineEffect",["require","exports","module","../Effect"],function(t,i,e){function s(t){o.apply(this,t),this.options={vertexDefines:void 0,vertexUniforms:void 0,vertexChunk:void 0,fragmentDefines:void 0,fragmentUniforms:{scanTime:{value:1},scanOffset:{value:5}},fragmentChunk:["vec4 col = vec4(1.0);","float colorOffset = scanOffset/1000.0;","float xScanOffset = cos(scanTime*0.01)*colorOffset;","col.r = texture2D(u_texture,vec2(v_texcoord.x+xScanOffset,v_texcoord.y+colorOffset)).x;","col.g = texture2D(u_texture,vec2(v_texcoord.x+xScanOffset, v_texcoord.y-xScanOffset)).y;","col.b = texture2D(u_texture,vec2(v_texcoord.x-xScanOffset,v_texcoord.y-colorOffset)).z;","col.rgb *= 1.0+1.0*sin(scanTime+v_texcoord.y*v_resolution.y);","color.rgb *= col.rgb;"]},this.setOptions(t)}var o=t("../Effect");s.prototype=Object.create(o.prototype),s.prototype.constructor=s,e.exports=s}),define("famous-gl/Effects/Technicolor1Effect",["require","exports","module","../Effect"],function(t,i,e){function s(t){o.apply(this,t),this.options={vertexDefines:void 0,vertexUniforms:void 0,vertexChunk:void 0,fragmentDefines:["const vec4 redfilter        = vec4(1.0, 0.0, 0.0, 0.0);","const vec4 bluegreenfilter  = vec4(0.0, 1.0, 0.7, 0.0);"],fragmentUniforms:{amount:{value:1}},fragmentChunk:["vec4 redrecord = color * redfilter;","vec4 bluegreenrecord = color * bluegreenfilter;","vec4 rednegative = vec4(redrecord.r);","vec4 bluegreennegative = vec4((bluegreenrecord.g + bluegreenrecord.b)/2.0);","vec4 redoutput = rednegative * redfilter;","vec4 bluegreenoutput = bluegreennegative * bluegreenfilter;","vec4 result = redoutput + bluegreenoutput;","color = mix(color, result, amount);"]},this.setOptions(t)}var o=t("../Effect");s.prototype=Object.create(o.prototype),s.prototype.constructor=s,e.exports=s}),define("famous-gl/Effects/Technicolor2Effect",["require","exports","module","../Effect"],function(t,i,e){function s(t){o.apply(this,t),this.options={vertexDefines:void 0,vertexUniforms:void 0,vertexChunk:void 0,fragmentDefines:["const vec4 redfilter        = vec4(1.0, 0.0, 0.0, 0.0);","const vec4 bluegreenfilter  = vec4(0.0, 1.0, 1.0, 0.0);","const vec4 cyanfilter       = vec4(0.0, 1.0, 0.5, 0.0);","const vec4 magentafilter    = vec4(1.0, 0.0, 0.25, 0.0);"],fragmentUniforms:{amount:{value:1}},fragmentChunk:["vec4 redrecord = color * redfilter;","vec4 bluegreenrecord = color * bluegreenfilter;","vec4 rednegative = vec4(redrecord.r);","vec4 bluegreennegative = vec4((bluegreenrecord.g + bluegreenrecord.b)/2.0);","vec4 redoutput = rednegative + cyanfilter;","vec4 bluegreenoutput = bluegreennegative + magentafilter;","vec4 result = redoutput * bluegreenoutput;","color = mix(color, result, amount);"]},this.setOptions(t)}var o=t("../Effect");s.prototype=Object.create(o.prototype),s.prototype.constructor=s,e.exports=s}),define("famous-gl/Effects/Technicolor3Effect",["require","exports","module","../Effect"],function(t,i,e){function s(t){o.apply(this,t),this.options={vertexDefines:void 0,vertexUniforms:void 0,vertexChunk:void 0,fragmentDefines:void 0,fragmentUniforms:{amount:{value:1}},fragmentChunk:["vec3 redmatte = vec3(color.r - ((color.g + color.b)/2.0));","vec3 greenmatte = vec3(color.g - ((color.r + color.b)/2.0));","vec3 bluematte = vec3(color.b - ((color.r + color.g)/2.0));","redmatte = 1.0 - redmatte;","greenmatte = 1.0 - greenmatte;","bluematte = 1.0 - bluematte;","vec3 red = greenmatte * bluematte * color.r;","vec3 green = redmatte * bluematte * color.g;","vec3 blue = redmatte * greenmatte * color.b;","color.rgb = mix(color.rgb, vec3(red.r, green.g, blue.b), amount);"]},this.setOptions(t)}var o=t("../Effect");s.prototype=Object.create(o.prototype),s.prototype.constructor=s,e.exports=s}),define("famous-gl/Effects/VignetteEffect",["require","exports","module","../Effect"],function(t,i,e){function s(t){o.apply(this,t),this.options={vertexDefines:void 0,vertexUniforms:void 0,vertexChunk:void 0,fragmentDefines:void 0,fragmentUniforms:{vignette:{value:3}},fragmentChunk:["float dist = 1.0 - distance(vec2(v_texcoord.x, v_texcoord.y/v_aspect), vec2(0.5, 0.5/v_aspect));","dist = clamp(pow(dist, vignette), 0.0, 1.0);","color.rgb *= dist;"]},this.setOptions(t)}var o=t("../Effect");s.prototype=Object.create(o.prototype),s.prototype.constructor=s,e.exports=s}),define("famous-gl/Primitives/ArcPrimitive",["require","exports","module","../Primitive","famous-utils/Utils"],function(t,i,e){function s(t){o.apply(this,t),this.options.innerRadius=100,this.options.outerRadius=150,this.options.resolution=60,this.options.radialResolution=void 0,this.options.angleResolution=void 0,this.options.angle=Math.PI,this.options.drawMode=o.TRIANGLE_STRIP,this.setOptions(t),this.setup()}var o=t("../Primitive"),n=t("famous-utils/Utils");s.prototype=Object.create(o.prototype),s.prototype.constructor=s,s.prototype.setup=function(){this.drawMode===o.TRIANGLES||this.drawMode===o.TRIANGLE_STRIP||this.drawMode===o.TRIANGLE_FAN?(this.drawMode=o.TRIANGLES,this.makeFilledArcTriangles()):this.drawMode===o.LINES?this.makeLinedArc():this.drawMode===o.LINE_LOOP||this.drawMode===o.LINE_STRIP?(this.drawMode=o.LINES,this.makeOutlinedArc()):(this.drawMode=o.POINTS,this.makePointArc())},s.prototype.makeFilledArcTriangles=function(){var t=[],i=[],e=[],s=this.options.innerRadius,o=this.options.outerRadius;this.options.resolution=this.options.resolution>=3?this.options.resolution:3;for(var r=this.options.angleResolution?this.options.angleResolution:this.options.resolution,a=this.options.radialResolution?this.options.radialResolution:1,h=this.options.angle,u=0;a>u;u++)for(var p=n.map(u,0,a,s,o),c=0;r>c;c++){var l=n.map(c,0,r,0,h),f=n.map(c+1,0,r,0,h),d=n.map(u+1,0,a,s,o),m=p*Math.cos(l),g=p*Math.sin(l),v=p*Math.cos(f),y=p*Math.sin(f),x=d*Math.cos(f),S=d*Math.sin(f),b=d*Math.cos(l),w=d*Math.sin(l),T=c/r,M=(c+1)/r,z=u/a,_=(u+1)/a;t.push(m,g,0),i.push(0,0,1),e.push(T,z),t.push(x,S,0),i.push(0,0,1),e.push(M,_),t.push(v,y,0),i.push(0,0,1),e.push(M,z),t.push(m,g,0),i.push(0,0,1),e.push(T,z),t.push(b,w,0),i.push(0,0,1),e.push(T,_),t.push(x,S,0),i.push(0,0,1),e.push(M,_)}this.setPositions(t),this.setNormals(i),this.setTextureCoords(e)},s.prototype.makeLinedArc=function(){var t=[],i=[],e=[],s=this.options.innerRadius,o=this.options.outerRadius;this.options.resolution=this.options.resolution>=3?this.options.resolution:3;for(var r=this.options.angleResolution?this.options.angleResolution:this.options.resolution,a=this.options.radialResolution?this.options.radialResolution:1,h=this.options.angle,u=0;a>u;u++)for(var p=n.map(u,0,a,s,o),c=0;r>c;c++){var l=n.map(c,0,r,0,h),f=n.map(c+1,0,r,0,h),d=n.map(u+1,0,a,s,o),m=p*Math.cos(l),g=p*Math.sin(l),v=p*Math.cos(f),y=p*Math.sin(f),x=d*Math.cos(f),S=d*Math.sin(f),b=d*Math.cos(l),w=d*Math.sin(l);t.push(m,g,0),t.push(v,y,0),t.push(v,y,0),t.push(x,S,0),t.push(x,S,0),t.push(b,w,0),t.push(b,w,0),t.push(m,g,0),i.push(0,0,1),i.push(0,0,1),i.push(0,0,1),i.push(0,0,1),i.push(0,0,1),i.push(0,0,1),i.push(0,0,1),i.push(0,0,1);var T=c/r,M=(c+1)/r,z=u/a,_=(u+1)/a;e.push(T,z),e.push(M,z),e.push(M,z),e.push(M,_),e.push(M,_),e.push(T,_),e.push(T,_),e.push(T,z)}this.setPositions(t),this.setNormals(i),this.setTextureCoords(e)},s.prototype.makeOutlinedArc=function(){var t=[],i=[],e=[],s=this.options.innerRadius,o=this.options.outerRadius;this.options.resolution=this.options.resolution>=3?this.options.resolution:3;for(var r=this.options.angleResolution?this.options.angleResolution:this.options.resolution,a=this.options.radialResolution?this.options.radialResolution:1,h=this.options.angle,u=0;a>=u;u++)for(var p=n.map(u,0,a,s,o),c=0;r>c;c++){var l=n.map(c,0,r,0,h),f=n.map(c+1,0,r,0,h),d=Math.cos(l),m=Math.sin(l),g=Math.cos(f),v=Math.sin(f),y=c/r,x=(c+1)/r;t.push(d*p,m*p,0),i.push(0,0,1),e.push(y,u/a),t.push(g*p,v*p,0),i.push(0,0,1),e.push(x,u/a)}if(h!==2*Math.PI)for(var c=0;r>=c;c+=r)for(var l=n.map(c,0,r,0,h),u=0;a>u;u++){var p=n.map(u,0,a,s,o),S=n.map(u+1,0,a,s,o),d=Math.cos(l),m=Math.sin(l),y=c/r;t.push(d*p,m*p,0),i.push(0,0,1),e.push(y,u/a),t.push(d*S,m*S,0),i.push(0,0,1),e.push(y,(u+1)/a)}this.setPositions(t),this.setNormals(i),this.setTextureCoords(e)},s.prototype.makePointArc=function(){var t=[],i=[],e=[],s=this.options.innerRadius,o=this.options.outerRadius;this.options.resolution=this.options.resolution>=3?this.options.resolution:3;for(var r=this.options.angleResolution?this.options.angleResolution:this.options.resolution,a=this.options.radialResolution?this.options.radialResolution:1,h=this.options.angle,u=0;a>=u;u++)for(var p=n.map(u,0,a,s,o),c=0;r>=c;c++){var l=n.map(c,0,r,0,h),f=Math.cos(l),d=Math.sin(l);t.push(f*p,d*p,0),i.push(0,0,1),e.push(c/r,u/a)}if(1===a&&h!==2*Math.PI)for(var m=o-s,g=.5*Math.PI*Math.max(o,s),v=g/r,y=Math.max(Math.floor(m/v),1),c=1;y>c;c++){var f=Math.cos(0),d=Math.sin(0),x=Math.cos(h),S=Math.sin(h),p=n.map(c,0,y,s,o);t.push(f*p,d*p,0),i.push(0,0,1),e.push(0,c/y),t.push(x*p,S*p,0),i.push(0,0,1),e.push(1,c/y)}this.setPositions(t),this.setNormals(i),this.setTextureCoords(e)},e.exports=s}),define("famous-gl/Primitives/BoxPrimitive",["require","exports","module","../Primitive","famous-utils/Utils"],function(t,i,e){function s(t){o.apply(this,t),this.options.width=100,this.options.height=100,this.options.depth=100,this.options.resolution=1,this.options.resolutionX=void 0,this.options.resolutionY=void 0,this.options.resolutionZ=void 0,this.options.vertical=!1,this.options.drawMode=o.TRIANGLES,this.setOptions(t),this.setup()}var o=t("../Primitive"),n=t("famous-utils/Utils");s.prototype=Object.create(o.prototype),s.prototype.constructor=s,s.prototype.setup=function(){this.drawMode===o.LINES?(this.drawMode=o.LINES,this.setupOutlineBox()):this.drawMode===o.LINE_LOOP||this.drawMode===o.LINE_STRIP?(this.drawMode=o.LINES,this.setupLoopBox()):this.drawMode===o.TRIANGLES||this.drawMode===o.TRIANGLE_STRIP||this.drawMode===o.TRIANGLE_FAN?(this.drawMode=o.TRIANGLES,this.setupFilledBox()):this.drawMode===o.POINTS&&this.setupPointBox()},s.prototype.setupFilledBox=function(){for(var t=[],i=[],e=[],s=this.options.width,o=this.options.height,r=this.options.depth,a=this.options.resolutionX?this.options.resolutionX:this.options.resolution,h=this.options.resolutionY?this.options.resolutionY:this.options.resolution,u=this.options.resolutionZ?this.options.resolutionZ:this.options.resolution,p=s/a,c=o/h,l=r/u,f=.5*-s,d=.5*o,m=.5*-r,g=0;a>g;g++)for(var v=0;h>v;v++){var y=f+g*p,x=d-v*c,S=-m,b=f+(g+1)*p,w=d-v*c,T=-m,M=f+(g+1)*p,z=d-(v+1)*c,_=-m,C=f+g*p,P=d-(v+1)*c,O=-m;t.push(y,x,S),i.push(0,0,1),e.push(n.map(y,f,-f,0,1),n.map(x,d,-d,0,1)),t.push(C,P,O),i.push(0,0,1),e.push(n.map(C,f,-f,0,1),n.map(P,d,-d,0,1)),t.push(M,z,_),i.push(0,0,1),e.push(n.map(M,f,-f,0,1),n.map(z,d,-d,0,1)),t.push(y,x,S),i.push(0,0,1),e.push(n.map(y,f,-f,0,1),n.map(x,d,-d,0,1)),t.push(M,z,_),i.push(0,0,1),e.push(n.map(M,f,-f,0,1),n.map(z,d,-d,0,1)),t.push(b,w,T),i.push(0,0,1),e.push(n.map(b,f,-f,0,1),n.map(w,d,-d,0,1))}for(var g=0;a>g;g++)for(var v=0;h>v;v++){var y=f+g*p,x=d-v*c,S=m,b=f+(g+1)*p,w=d-v*c,T=m,M=f+(g+1)*p,z=d-(v+1)*c,_=m,C=f+g*p,P=d-(v+1)*c,O=m;t.push(y,x,S),i.push(0,0,-1),e.push(n.map(y,-f,f,0,1),n.map(x,d,-d,0,1)),t.push(C,P,O),i.push(0,0,-1),e.push(n.map(C,-f,f,0,1),n.map(P,d,-d,0,1)),t.push(M,z,_),i.push(0,0,-1),e.push(n.map(M,-f,f,0,1),n.map(z,d,-d,0,1)),t.push(y,x,S),i.push(0,0,-1),e.push(n.map(y,-f,f,0,1),n.map(x,d,-d,0,1)),t.push(M,z,_),i.push(0,0,-1),e.push(n.map(M,-f,f,0,1),n.map(z,d,-d,0,1)),t.push(b,w,T),i.push(0,0,-1),e.push(n.map(b,-f,f,0,1),n.map(w,d,-d,0,1))}for(var g=0;a>g;g++)for(var E=0;u>E;E++){var y=f+g*p,x=d,S=m+E*l,b=f+(g+1)*p,w=d,T=m+E*l,M=f+(g+1)*p,z=d,_=m+(E+1)*l,C=f+g*p,P=d,O=m+(E+1)*l;t.push(y,x,S),i.push(0,1,0),e.push(n.map(y,f,-f,0,1),n.map(S,m,-m,0,1)),t.push(C,P,O),i.push(0,1,0),e.push(n.map(C,f,-f,0,1),n.map(O,m,-m,0,1)),t.push(M,z,_),i.push(0,1,0),e.push(n.map(M,f,-f,0,1),n.map(_,m,-m,0,1)),t.push(y,x,S),i.push(0,1,0),e.push(n.map(y,f,-f,0,1),n.map(S,m,-m,0,1)),t.push(M,z,_),i.push(0,1,0),e.push(n.map(M,f,-f,0,1),n.map(_,m,-m,0,1)),t.push(b,w,T),i.push(0,1,0),e.push(n.map(b,f,-f,0,1),n.map(T,m,-m,0,1))}for(var g=0;a>g;g++)for(var E=0;u>E;E++){var y=f+g*p,x=-d,S=m+E*l,b=f+(g+1)*p,w=-d,T=m+E*l,M=f+(g+1)*p,z=-d,_=m+(E+1)*l,C=f+g*p,P=-d,O=m+(E+1)*l;t.push(y,x,S),i.push(0,-1,0),e.push(n.map(y,f,-f,0,1),n.map(S,-m,m,0,1)),t.push(C,P,O),i.push(0,-1,0),e.push(n.map(C,f,-f,0,1),n.map(O,-m,m,0,1)),t.push(M,z,_),i.push(0,-1,0),e.push(n.map(M,f,-f,0,1),n.map(_,-m,m,0,1)),t.push(y,x,S),i.push(0,-1,0),e.push(n.map(y,f,-f,0,1),n.map(S,-m,m,0,1)),t.push(M,z,_),i.push(0,-1,0),e.push(n.map(M,f,-f,0,1),n.map(_,-m,m,0,1)),t.push(b,w,T),i.push(0,-1,0),e.push(n.map(b,f,-f,0,1),n.map(T,-m,m,0,1))}for(var E=0;u>E;E++)for(var v=0;h>v;v++){var y=-f,x=d-v*c,S=-m-E*l,b=-f,w=d-v*c,T=-m-(E+1)*l,M=-f,z=d-(v+1)*c,_=-m-(E+1)*l,C=-f,P=d-(v+1)*c,O=-m-E*l;t.push(y,x,S),i.push(1,0,0),e.push(n.map(S,-m,m,0,1),n.map(x,d,-d,0,1)),t.push(C,P,O),i.push(1,0,0),e.push(n.map(O,-m,m,0,1),n.map(P,d,-d,0,1)),t.push(M,z,_),i.push(1,0,0),e.push(n.map(_,-m,m,0,1),n.map(z,d,-d,0,1)),t.push(y,x,S),i.push(1,0,0),e.push(n.map(S,-m,m,0,1),n.map(x,d,-d,0,1)),t.push(M,z,_),i.push(1,0,0),e.push(n.map(_,-m,m,0,1),n.map(z,d,-d,0,1)),t.push(b,w,T),i.push(1,0,0),e.push(n.map(T,-m,m,0,1),n.map(w,d,-d,0,1))}for(var E=0;u>E;E++)for(var v=0;h>v;v++){var y=f,x=d-v*c,S=-m-E*l,b=f,w=d-v*c,T=-m-(E+1)*l,M=f,z=d-(v+1)*c,_=-m-(E+1)*l,C=f,P=d-(v+1)*c,O=-m-E*l;t.push(y,x,S),i.push(-1,0,0),e.push(n.map(S,m,-m,0,1),n.map(x,d,-d,0,1)),t.push(C,P,O),i.push(-1,0,0),e.push(n.map(O,m,-m,0,1),n.map(P,d,-d,0,1)),t.push(M,z,_),i.push(-1,0,0),e.push(n.map(_,m,-m,0,1),n.map(z,d,-d,0,1)),t.push(y,x,S),i.push(-1,0,0),e.push(n.map(S,m,-m,0,1),n.map(x,d,-d,0,1)),t.push(M,z,_),i.push(-1,0,0),e.push(n.map(_,m,-m,0,1),n.map(z,d,-d,0,1)),t.push(b,w,T),i.push(-1,0,0),e.push(n.map(T,m,-m,0,1),n.map(w,d,-d,0,1))}this.setPositions(t),this.setNormals(i),this.setTextureCoords(e)},s.prototype.setupOutlineBox=function(){for(var t=[],i=[],e=[],s=this.options.width,o=this.options.height,r=this.options.depth,a=this.options.resolutionX?this.options.resolutionX:this.options.resolution,h=this.options.resolutionY?this.options.resolutionY:this.options.resolution,u=this.options.resolutionZ?this.options.resolutionZ:this.options.resolution,p=s/res,c=o/res,l=r/res,f=.5*-s,d=.5*o,m=.5*-r,g=0;a>g;g++)for(var v=0;h>v;v++){var y=f+g*p,x=d-v*c,S=-m,b=f+(g+1)*p,w=d-v*c,T=-m,M=f+(g+1)*p,z=d-(v+1)*c,_=-m,C=f+g*p,P=d-(v+1)*c,O=-m;t.push(y,x,S),i.push(0,0,1),e.push(n.map(y,f,-f,0,1),n.map(x,d,-d,0,1)),t.push(b,w,T),i.push(0,0,1),e.push(n.map(b,f,-f,0,1),n.map(w,d,-d,0,1)),t.push(b,w,T),i.push(0,0,1),e.push(n.map(b,f,-f,0,1),n.map(w,d,-d,0,1)),t.push(M,z,_),i.push(0,0,1),e.push(n.map(M,f,-f,0,1),n.map(z,d,-d,0,1)),t.push(M,z,_),i.push(0,0,1),e.push(n.map(M,f,-f,0,1),n.map(z,d,-d,0,1)),t.push(C,P,O),i.push(0,0,1),e.push(n.map(C,f,-f,0,1),n.map(P,d,-d,0,1)),t.push(C,P,O),i.push(0,0,1),e.push(n.map(C,f,-f,0,1),n.map(P,d,-d,0,1)),t.push(y,x,S),i.push(0,0,1),e.push(n.map(y,f,-f,0,1),n.map(x,d,-d,0,1))}for(var g=0;a>g;g++)for(var v=0;h>v;v++){var y=f+g*p,x=d-v*c,S=m,b=f+(g+1)*p,w=d-v*c,T=m,M=f+(g+1)*p,z=d-(v+1)*c,_=m,C=f+g*p,P=d-(v+1)*c,O=m;t.push(y,x,S),i.push(0,0,-1),e.push(n.map(y,-f,f,0,1),n.map(x,d,-d,0,1)),t.push(b,w,T),i.push(0,0,-1),e.push(n.map(b,-f,f,0,1),n.map(w,d,-d,0,1)),t.push(b,w,T),i.push(0,0,-1),e.push(n.map(b,-f,f,0,1),n.map(w,d,-d,0,1)),t.push(M,z,_),i.push(0,0,-1),e.push(n.map(M,-f,f,0,1),n.map(z,d,-d,0,1)),t.push(M,z,_),i.push(0,0,-1),e.push(n.map(M,-f,f,0,1),n.map(z,d,-d,0,1)),t.push(C,P,O),i.push(0,0,-1),e.push(n.map(C,-f,f,0,1),n.map(P,d,-d,0,1)),t.push(C,P,O),i.push(0,0,-1),e.push(n.map(C,-f,f,0,1),n.map(P,d,-d,0,1)),t.push(y,x,S),i.push(0,0,-1),e.push(n.map(y,-f,f,0,1),n.map(x,d,-d,0,1))}for(var g=0;a>g;g++)for(var E=0;u>E;E++){var y=f+g*p,x=d,S=m+E*l,b=f+(g+1)*p,w=d,T=m+E*l,M=f+(g+1)*p,z=d,_=m+(E+1)*l,C=f+g*p,P=d,O=m+(E+1)*l;t.push(y,x,S),i.push(0,1,0),e.push(n.map(y,f,-f,0,1),n.map(S,m,-m,0,1)),t.push(b,w,T),i.push(0,1,0),e.push(n.map(b,f,-f,0,1),n.map(T,m,-m,0,1)),t.push(b,w,T),i.push(0,1,0),e.push(n.map(b,f,-f,0,1),n.map(T,m,-m,0,1)),t.push(M,z,_),i.push(0,1,0),e.push(n.map(M,f,-f,0,1),n.map(_,m,-m,0,1)),t.push(M,z,_),i.push(0,1,0),e.push(n.map(M,f,-f,0,1),n.map(_,m,-m,0,1)),t.push(C,P,O),i.push(0,1,0),e.push(n.map(C,f,-f,0,1),n.map(O,m,-m,0,1)),t.push(C,P,O),i.push(0,1,0),e.push(n.map(C,f,-f,0,1),n.map(O,m,-m,0,1)),t.push(y,x,S),i.push(0,1,0),e.push(n.map(y,f,-f,0,1),n.map(S,m,-m,0,1))}for(var g=0;a>g;g++)for(var E=0;u>E;E++){var y=f+g*p,x=-d,S=m+E*l,b=f+(g+1)*p,w=-d,T=m+E*l,M=f+(g+1)*p,z=-d,_=m+(E+1)*l,C=f+g*p,P=-d,O=m+(E+1)*l;t.push(y,x,S),i.push(0,-1,0),e.push(n.map(y,f,-f,0,1),n.map(S,-m,m,0,1)),t.push(b,w,T),i.push(0,-1,0),e.push(n.map(b,f,-f,0,1),n.map(T,-m,m,0,1)),t.push(b,w,T),i.push(0,-1,0),e.push(n.map(b,f,-f,0,1),n.map(T,-m,m,0,1)),t.push(M,z,_),i.push(0,-1,0),e.push(n.map(M,f,-f,0,1),n.map(_,-m,m,0,1)),t.push(M,z,_),i.push(0,-1,0),e.push(n.map(M,f,-f,0,1),n.map(_,-m,m,0,1)),t.push(C,P,O),i.push(0,-1,0),e.push(n.map(C,f,-f,0,1),n.map(O,-m,m,0,1)),t.push(C,P,O),i.push(0,-1,0),e.push(n.map(C,f,-f,0,1),n.map(O,-m,m,0,1)),t.push(y,x,S),i.push(0,-1,0),e.push(n.map(y,f,-f,0,1),n.map(S,-m,m,0,1))}for(var E=0;u>E;E++)for(var v=0;h>v;v++){var y=-f,x=d-v*c,S=-m-E*l,b=-f,w=d-v*c,T=-m-(E+1)*l,M=-f,z=d-(v+1)*c,_=-m-(E+1)*l,C=-f,P=d-(v+1)*c,O=-m-E*l;t.push(y,x,S),i.push(1,0,0),e.push(n.map(S,-m,m,0,1),n.map(x,d,-d,0,1)),t.push(b,w,T),i.push(1,0,0),e.push(n.map(T,-m,m,0,1),n.map(w,d,-d,0,1)),t.push(b,w,T),i.push(1,0,0),e.push(n.map(T,-m,m,0,1),n.map(w,d,-d,0,1)),t.push(M,z,_),i.push(1,0,0),e.push(n.map(_,-m,m,0,1),n.map(z,d,-d,0,1)),t.push(M,z,_),i.push(1,0,0),e.push(n.map(_,-m,m,0,1),n.map(z,d,-d,0,1)),t.push(C,P,O),i.push(1,0,0),e.push(n.map(O,-m,m,0,1),n.map(P,d,-d,0,1)),t.push(C,P,O),i.push(1,0,0),e.push(n.map(O,-m,m,0,1),n.map(P,d,-d,0,1)),t.push(y,x,S),i.push(1,0,0),e.push(n.map(S,-m,m,0,1),n.map(x,d,-d,0,1))}for(var E=0;u>E;E++)for(var v=0;h>v;v++){var y=f,x=d-v*c,S=-m-E*l,b=f,w=d-v*c,T=-m-(E+1)*l,M=f,z=d-(v+1)*c,_=-m-(E+1)*l,C=f,P=d-(v+1)*c,O=-m-E*l;t.push(y,x,S),i.push(-1,0,0),e.push(n.map(S,m,-m,0,1),n.map(x,d,-d,0,1)),t.push(b,w,T),i.push(-1,0,0),e.push(n.map(T,m,-m,0,1),n.map(w,d,-d,0,1)),t.push(b,w,T),i.push(-1,0,0),e.push(n.map(T,m,-m,0,1),n.map(w,d,-d,0,1)),t.push(M,z,_),i.push(-1,0,0),e.push(n.map(_,m,-m,0,1),n.map(z,d,-d,0,1)),t.push(M,z,_),i.push(-1,0,0),e.push(n.map(_,m,-m,0,1),n.map(z,d,-d,0,1)),t.push(C,P,O),i.push(-1,0,0),e.push(n.map(O,m,-m,0,1),n.map(P,d,-d,0,1)),t.push(C,P,O),i.push(-1,0,0),e.push(n.map(O,m,-m,0,1),n.map(P,d,-d,0,1)),t.push(y,x,S),i.push(-1,0,0),e.push(n.map(S,m,-m,0,1),n.map(x,d,-d,0,1))}this.setPositions(t),this.setNormals(i),this.setTextureCoords(e)},s.prototype.setupLoopBox=function(){var t=[],i=[],e=[],s=this.options.width,o=this.options.height,r=this.options.depth,a=this.options.resolutionX?this.options.resolutionX:this.options.resolution,h=this.options.resolutionY?this.options.resolutionY:this.options.resolution,u=this.options.resolutionZ?this.options.resolutionZ:this.options.resolution,p=s/a,c=o/h,l=r/u,f=.5*-s,d=.5*o,m=.5*-r;this.options.vertical?a++:h++;for(var g=0;a>g;g++)for(var v=0;h>v;v++){var y=f+g*p,x=d-v*c,S=-m;if(t.push(y,x,S),i.push(0,0,1),e.push(n.map(y,f,-f,0,1),n.map(x,d,-d,0,1)),this.options.vertical){var b=f+g*p,w=d-(v+1)*c,T=-m;t.push(b,w,T),i.push(0,0,1),e.push(n.map(b,f,-f,0,1),n.map(w,d,-d,0,1))}else{var M=f+(g+1)*p,z=d-v*c,_=-m;t.push(M,z,_),i.push(0,0,1),e.push(n.map(M,f,-f,0,1),n.map(z,d,-d,0,1))}}for(var g=0;a>g;g++)for(var v=0;h>v;v++){var y=f+g*p,x=d-v*c,S=m;if(t.push(y,x,S),i.push(0,0,-1),e.push(n.map(y,-f,f,0,1),n.map(x,d,-d,0,1)),this.options.vertical){var b=f+g*p,w=d-(v+1)*c,T=m;t.push(b,w,T),i.push(0,0,-1),e.push(n.map(b,-f,f,0,1),n.map(w,d,-d,0,1))}else{var M=f+(g+1)*p,z=d-v*c,_=m;t.push(M,z,_),i.push(0,0,-1),e.push(n.map(M,-f,f,0,1),n.map(z,d,-d,0,1))}}if(this.options.vertical){for(var g=0;a>g;g++)for(var C=0;u>C;C++){var y=f+g*p,x=d,S=m+C*l;if(t.push(y,x,S),i.push(0,1,0),e.push(n.map(y,f,-f,0,1),n.map(S,m,-m,0,1)),this.options.vertical){var b=f+g*p,w=d,T=m+(C+1)*l;t.push(b,w,T),i.push(0,1,0),e.push(n.map(b,f,-f,0,1),n.map(T,m,-m,0,1))}else{var M=f+(g+1)*p,z=d,_=m+C*l;t.push(M,z,_),i.push(0,1,0),e.push(n.map(M,f,-f,0,1),n.map(_,m,-m,0,1))}}for(var g=0;a>g;g++)for(var C=0;u>C;C++){var y=f+g*p,x=-d,S=m+C*l;if(t.push(y,x,S),i.push(0,-1,0),e.push(n.map(y,f,-f,0,1),n.map(S,-m,m,0,1)),this.options.vertical){var b=f+g*p,w=-d,T=m+(C+1)*l;t.push(b,w,T),i.push(0,-1,0),e.push(n.map(b,f,-f,0,1),n.map(T,-m,m,0,1))}else{var M=f+(g+1)*p,z=-d,_=m+C*l;t.push(M,z,_),i.push(0,-1,0),e.push(n.map(M,f,-f,0,1),n.map(_,-m,m,0,1))}}}else{for(var C=0;u>C;C++)for(var v=0;h>v;v++){var y=-f,x=d-v*c,S=-m-C*l;
if(t.push(y,x,S),i.push(1,0,0),e.push(n.map(S,-m,m,0,1),n.map(x,d,-d,0,1)),this.options.vertical){var b=-f,w=d-(v+1)*c,T=-m-C*l;t.push(b,w,T),i.push(1,0,0),e.push(n.map(T,-m,m,0,1),n.map(w,d,-d,0,1))}else{var M=-f,z=d-v*c,_=-m-(C+1)*l;t.push(M,z,_),i.push(1,0,0),e.push(n.map(_,-m,m,0,1),n.map(z,d,-d,0,1))}}for(var C=0;u>C;C++)for(var v=0;h>v;v++){var y=f,x=d-v*c,S=-m-C*l;if(t.push(y,x,S),i.push(-1,0,0),e.push(n.map(S,m,-m,0,1),n.map(x,d,-d,0,1)),this.options.vertical){var b=f,w=d-(v+1)*c,T=-m-C*l;t.push(b,w,T),i.push(-1,0,0),e.push(n.map(T,m,-m,0,1),n.map(w,d,-d,0,1))}else{var M=f,z=d-v*c,_=-m-(C+1)*l;t.push(M,z,_),i.push(-1,0,0),e.push(n.map(_,m,-m,0,1),n.map(z,d,-d,0,1))}}}this.setPositions(t),this.setNormals(i),this.setTextureCoords(e)},s.prototype.setupPointBox=function(){for(var t=[],i=[],e=[],s=this.options.width,o=this.options.height,r=this.options.depth,a=this.options.resolutionX?this.options.resolutionX:this.options.resolution,h=this.options.resolutionY?this.options.resolutionY:this.options.resolution,u=this.options.resolutionZ?this.options.resolutionZ:this.options.resolution,p=s/a,c=o/h,l=r/u,f=.5*-s,d=.5*o,m=.5*-r,g=0;a>=g;g++)for(var v=0;h>=v;v++){var y=f+g*p,x=d-v*c,S=-m;t.push(y,x,S),i.push(0,0,1),e.push(n.map(y,f,-f,0,1),n.map(x,d,-d,0,1))}for(var g=0;a>=g;g++)for(var v=0;h>=v;v++){var y=f+g*p,x=d-v*c,S=m;t.push(y,x,S),i.push(0,0,-1),e.push(n.map(y,-f,f,0,1),n.map(x,d,-d,0,1))}for(var g=0;a>=g;g++)for(var b=0;u>=b;b++){var y=f+g*p,x=d,S=m+b*l;t.push(y,x,S),i.push(0,1,0),e.push(n.map(y,f,-f,0,1),n.map(S,m,-m,0,1))}for(var g=0;a>=g;g++)for(var b=0;u>=b;b++){var y=f+g*p,x=-d,S=m+b*l;t.push(y,x,S),i.push(0,-1,0),e.push(n.map(y,f,-f,0,1),n.map(S,-m,m,0,1))}for(var b=0;u>=b;b++)for(var v=0;h>=v;v++){var y=-f,x=d-v*c,S=-m-b*l;t.push(y,x,S),i.push(1,0,0),e.push(n.map(S,-m,m,0,1),n.map(x,d,-d,0,1))}for(var b=0;u>=b;b++)for(var v=0;h>=v;v++){var y=f,x=d-v*c,S=-m-b*l;t.push(y,x,S),i.push(-1,0,0),e.push(n.map(S,m,-m,0,1),n.map(x,d,-d,0,1))}this.setPositions(t),this.setNormals(i),this.setTextureCoords(e)},s.prototype.setupOutlineBox=function(){for(var t=[],i=[],e=[],s=this.options.width,o=this.options.height,r=this.options.depth,a=this.options.resolutionX?this.options.resolutionX:this.options.resolution,h=this.options.resolutionY?this.options.resolutionY:this.options.resolution,u=this.options.resolutionZ?this.options.resolutionZ:this.options.resolution,p=s/a,c=o/h,l=r/u,f=.5*-s,d=.5*o,m=.5*-r,g=0;a>g;g++)for(var v=0;h>v;v++){var y=f+g*p,x=d-v*c,S=-m,b=f+(g+1)*p,w=d-v*c,T=-m,M=f+(g+1)*p,z=d-(v+1)*c,_=-m,C=f+g*p,P=d-(v+1)*c,O=-m;t.push(y,x,S),i.push(0,0,1),e.push(n.map(y,f,-f,0,1),n.map(x,d,-d,0,1)),t.push(b,w,T),i.push(0,0,1),e.push(n.map(b,f,-f,0,1),n.map(w,d,-d,0,1)),t.push(b,w,T),i.push(0,0,1),e.push(n.map(b,f,-f,0,1),n.map(w,d,-d,0,1)),t.push(M,z,_),i.push(0,0,1),e.push(n.map(M,f,-f,0,1),n.map(z,d,-d,0,1)),t.push(M,z,_),i.push(0,0,1),e.push(n.map(M,f,-f,0,1),n.map(z,d,-d,0,1)),t.push(C,P,O),i.push(0,0,1),e.push(n.map(C,f,-f,0,1),n.map(P,d,-d,0,1)),t.push(C,P,O),i.push(0,0,1),e.push(n.map(C,f,-f,0,1),n.map(P,d,-d,0,1)),t.push(y,x,S),i.push(0,0,1),e.push(n.map(y,f,-f,0,1),n.map(x,d,-d,0,1))}for(var g=0;a>g;g++)for(var v=0;h>v;v++){var y=f+g*p,x=d-v*c,S=m,b=f+(g+1)*p,w=d-v*c,T=m,M=f+(g+1)*p,z=d-(v+1)*c,_=m,C=f+g*p,P=d-(v+1)*c,O=m;t.push(y,x,S),i.push(0,0,-1),e.push(n.map(y,-f,f,0,1),n.map(x,d,-d,0,1)),t.push(b,w,T),i.push(0,0,-1),e.push(n.map(b,-f,f,0,1),n.map(w,d,-d,0,1)),t.push(b,w,T),i.push(0,0,-1),e.push(n.map(b,-f,f,0,1),n.map(w,d,-d,0,1)),t.push(M,z,_),i.push(0,0,-1),e.push(n.map(M,-f,f,0,1),n.map(z,d,-d,0,1)),t.push(M,z,_),i.push(0,0,-1),e.push(n.map(M,-f,f,0,1),n.map(z,d,-d,0,1)),t.push(C,P,O),i.push(0,0,-1),e.push(n.map(C,-f,f,0,1),n.map(P,d,-d,0,1)),t.push(C,P,O),i.push(0,0,-1),e.push(n.map(C,-f,f,0,1),n.map(P,d,-d,0,1)),t.push(y,x,S),i.push(0,0,-1),e.push(n.map(y,-f,f,0,1),n.map(x,d,-d,0,1))}for(var g=0;a>g;g++)for(var E=0;u>E;E++){var y=f+g*p,x=d,S=m+E*l,b=f+(g+1)*p,w=d,T=m+E*l,M=f+(g+1)*p,z=d,_=m+(E+1)*l,C=f+g*p,P=d,O=m+(E+1)*l;t.push(y,x,S),i.push(0,1,0),e.push(n.map(y,f,-f,0,1),n.map(S,m,-m,0,1)),t.push(b,w,T),i.push(0,1,0),e.push(n.map(b,f,-f,0,1),n.map(T,m,-m,0,1)),t.push(b,w,T),i.push(0,1,0),e.push(n.map(b,f,-f,0,1),n.map(T,m,-m,0,1)),t.push(M,z,_),i.push(0,1,0),e.push(n.map(M,f,-f,0,1),n.map(_,m,-m,0,1)),t.push(M,z,_),i.push(0,1,0),e.push(n.map(M,f,-f,0,1),n.map(_,m,-m,0,1)),t.push(C,P,O),i.push(0,1,0),e.push(n.map(C,f,-f,0,1),n.map(O,m,-m,0,1)),t.push(C,P,O),i.push(0,1,0),e.push(n.map(C,f,-f,0,1),n.map(O,m,-m,0,1)),t.push(y,x,S),i.push(0,1,0),e.push(n.map(y,f,-f,0,1),n.map(S,m,-m,0,1))}for(var g=0;a>g;g++)for(var E=0;u>E;E++){var y=f+g*p,x=-d,S=m+E*l,b=f+(g+1)*p,w=-d,T=m+E*l,M=f+(g+1)*p,z=-d,_=m+(E+1)*l,C=f+g*p,P=-d,O=m+(E+1)*l;t.push(y,x,S),i.push(0,-1,0),e.push(n.map(y,f,-f,0,1),n.map(S,-m,m,0,1)),t.push(b,w,T),i.push(0,-1,0),e.push(n.map(b,f,-f,0,1),n.map(T,-m,m,0,1)),t.push(b,w,T),i.push(0,-1,0),e.push(n.map(b,f,-f,0,1),n.map(T,-m,m,0,1)),t.push(M,z,_),i.push(0,-1,0),e.push(n.map(M,f,-f,0,1),n.map(_,-m,m,0,1)),t.push(M,z,_),i.push(0,-1,0),e.push(n.map(M,f,-f,0,1),n.map(_,-m,m,0,1)),t.push(C,P,O),i.push(0,-1,0),e.push(n.map(C,f,-f,0,1),n.map(O,-m,m,0,1)),t.push(C,P,O),i.push(0,-1,0),e.push(n.map(C,f,-f,0,1),n.map(O,-m,m,0,1)),t.push(y,x,S),i.push(0,-1,0),e.push(n.map(y,f,-f,0,1),n.map(S,-m,m,0,1))}for(var E=0;u>E;E++)for(var v=0;h>v;v++){var y=-f,x=d-v*c,S=-m-E*l,b=-f,w=d-v*c,T=-m-(E+1)*l,M=-f,z=d-(v+1)*c,_=-m-(E+1)*l,C=-f,P=d-(v+1)*c,O=-m-E*l;t.push(y,x,S),i.push(1,0,0),e.push(n.map(S,-m,m,0,1),n.map(x,d,-d,0,1)),t.push(b,w,T),i.push(1,0,0),e.push(n.map(T,-m,m,0,1),n.map(w,d,-d,0,1)),t.push(b,w,T),i.push(1,0,0),e.push(n.map(T,-m,m,0,1),n.map(w,d,-d,0,1)),t.push(M,z,_),i.push(1,0,0),e.push(n.map(_,-m,m,0,1),n.map(z,d,-d,0,1)),t.push(M,z,_),i.push(1,0,0),e.push(n.map(_,-m,m,0,1),n.map(z,d,-d,0,1)),t.push(C,P,O),i.push(1,0,0),e.push(n.map(O,-m,m,0,1),n.map(P,d,-d,0,1)),t.push(C,P,O),i.push(1,0,0),e.push(n.map(O,-m,m,0,1),n.map(P,d,-d,0,1)),t.push(y,x,S),i.push(1,0,0),e.push(n.map(S,-m,m,0,1),n.map(x,d,-d,0,1))}for(var E=0;u>E;E++)for(var v=0;h>v;v++){var y=f,x=d-v*c,S=-m-E*l,b=f,w=d-v*c,T=-m-(E+1)*l,M=f,z=d-(v+1)*c,_=-m-(E+1)*l,C=f,P=d-(v+1)*c,O=-m-E*l;t.push(y,x,S),i.push(-1,0,0),e.push(n.map(S,m,-m,0,1),n.map(x,d,-d,0,1)),t.push(b,w,T),i.push(-1,0,0),e.push(n.map(T,m,-m,0,1),n.map(w,d,-d,0,1)),t.push(b,w,T),i.push(-1,0,0),e.push(n.map(T,m,-m,0,1),n.map(w,d,-d,0,1)),t.push(M,z,_),i.push(-1,0,0),e.push(n.map(_,m,-m,0,1),n.map(z,d,-d,0,1)),t.push(M,z,_),i.push(-1,0,0),e.push(n.map(_,m,-m,0,1),n.map(z,d,-d,0,1)),t.push(C,P,O),i.push(-1,0,0),e.push(n.map(O,m,-m,0,1),n.map(P,d,-d,0,1)),t.push(C,P,O),i.push(-1,0,0),e.push(n.map(O,m,-m,0,1),n.map(P,d,-d,0,1)),t.push(y,x,S),i.push(-1,0,0),e.push(n.map(S,m,-m,0,1),n.map(x,d,-d,0,1))}this.setPositions(t),this.setNormals(i),this.setTextureCoords(e)},e.exports=s}),define("famous-gl/Primitives/ConePrimitive",["require","exports","module","../Primitive","famous-utils/Utils"],function(t,i,e){function s(t){o.apply(this,t),this.options.radius=100,this.options.height=100,this.options.resolution=60,this.options.angleResolution=void 0,this.options.radialResolution=void 0,this.options.axisResolution=void 0,this.options.drawMode=o.TRIANGLES,this.setOptions(t),this.setup()}var o=t("../Primitive"),n=t("famous-utils/Utils");s.prototype=Object.create(o.prototype),s.prototype.constructor=s,s.prototype.setup=function(){this.drawMode===o.TRIANGLES||this.drawMode===o.TRIANGLE_STRIP||this.drawMode===o.TRIANGLE_FAN?(this.drawMode=o.TRIANGLES,this.setupFilledCone()):this.drawMode===o.LINES?(this.drawMode=o.LINES,this.setupOutlinedCone()):this.drawMode===o.LINE_LOOP||this.drawMode===o.LINE_STRIP?(this.drawMode=o.LINES,this.setupLoopCone()):this.drawMode===o.POINTS&&this.setupPointCone()},s.prototype.setupPointCone=function(){var t=[],i=[],e=[],s=this.options.radius,o=this.options.height;this.options.resolution=this.options.resolution>=3?this.options.resolution:3;for(var r=this.options.angleResolution?this.options.angleResolution:this.options.resolution,a=this.options.radialResolution?this.options.radialResolution:1,h=this.options.axisResolution?this.options.axisResolution:1,u=2*Math.PI,p=.5*o,c=0;a>=c;c++){var l=n.map(c,0,a,0,s);if(0===c)t.push(0,-p,0),i.push(0,-1,0),e.push(0,0);else for(var f=0;r>=f;f++){var d=n.map(f,0,r,0,u),m=l*Math.cos(d),g=l*Math.sin(d),v=f/r,y=c/a;t.push(m,-p,g),i.push(0,-1,0),e.push(v,y)}}for(var c=0;h>=c;c++){var x=-p+n.map(c,0,h,0,o),S=-p+n.map(c+1,0,h,0,o),l=n.map(c,0,h,s,0),b=n.map(c+1,0,h,s,0);if(c===h)t.push(0,p,0),i.push(0,1,0),e.push(1,1);else for(var f=0;r>f;f++){var d=n.map(f,0,r,0,u),w=n.map(f+1,0,r,0,u),m=l*Math.cos(d),g=l*Math.sin(d),T=x,M=l*Math.cos(w),z=l*Math.sin(w),_=x,C=b*Math.cos(w),P=b*Math.sin(w),O=S,E=f/r,k=c/h,I=this.calculateNormal(m,g,T,M,z,_,C,P,O);t.push(m,T,g),i.push(I[0],I[1],I[2]),e.push(E,k)}}this.setPositions(t),this.setNormals(i),this.setTextureCoords(e)},s.prototype.setupOutlinedCone=function(){var t=[],i=[],e=[],s=this.options.radius,o=this.options.height;this.options.resolution=this.options.resolution>=3?this.options.resolution:3;for(var r=this.options.angleResolution?this.options.angleResolution:this.options.resolution,a=this.options.radialResolution?this.options.radialResolution:1,h=this.options.axisResolution?this.options.axisResolution:1,u=2*Math.PI,p=.5*o,c=0;a>c;c++){var l=n.map(c,0,a,0,s),f=n.map(c+1,0,a,0,s);if(0===c)for(var d=0;r>d;d++){var m=n.map(d,0,r,0,u),g=n.map(d+1,0,r,0,u),v=f*Math.cos(m),y=f*Math.sin(m),x=d/r,S=c/a,b=f*Math.cos(g),w=f*Math.sin(g),T=(d+1)/r,M=(c+1)/a;t.push(0,-p,0),i.push(0,-1,0),e.push(0,0),t.push(v,-p,y),i.push(0,-1,0),e.push(x,M),t.push(v,-p,y),i.push(0,-1,0),e.push(x,M),t.push(b,-p,w),i.push(0,-1,0),e.push(T,M),t.push(b,-p,w),i.push(0,-1,0),e.push(T,M),t.push(0,-p,0),i.push(0,-1,0),e.push(0,0)}else for(var d=0;r>=d;d++){var x=d/r,S=c/a,T=(d+1)/r,M=(c+1)/a,m=n.map(d,0,r,0,u),g=n.map(d+1,0,r,0,u),v=l*Math.cos(m),y=l*Math.sin(m),b=f*Math.cos(m),w=f*Math.sin(m),z=f*Math.cos(g),_=f*Math.sin(g),C=l*Math.cos(g),P=l*Math.sin(g);t.push(v,-p,y),i.push(0,-1,0),e.push(x,S),t.push(b,-p,w),i.push(0,-1,0),e.push(x,M),t.push(b,-p,w),i.push(0,-1,0),e.push(x,M),t.push(z,-p,_),i.push(0,-1,0),e.push(T,M),t.push(z,-p,_),i.push(0,-1,0),e.push(T,M),t.push(C,-p,P),i.push(0,-1,0),e.push(T,S),t.push(C,-p,P),i.push(0,-1,0),e.push(T,S),t.push(v,-p,y),i.push(0,-1,0),e.push(x,S)}}for(var c=0;h>c;c++){var O=-p+n.map(c,0,h,0,o),E=-p+n.map(c+1,0,h,0,o),l=n.map(c,0,h,s,0),f=n.map(c+1,0,h,s,0);if(c===h-1)for(var d=0;r>d;d++){var m=n.map(d,0,r,0,u),g=n.map(d+1,0,r,0,u),v=l*Math.cos(m),k=O,y=l*Math.sin(m),b=l*Math.cos(g),I=O,w=l*Math.sin(g),z=f*Math.cos(g),A=E,_=f*Math.sin(g),x=d/r,S=c/h,T=(d+1)/r,M=(c+1)/h,N=this.calculateNormal(v,k,y,b,I,w,z,A,_);t.push(0,p,0),i.push(0,1,0),e.push(1,1),t.push(v,k,y),i.push(N[0],N[1],N[2]),e.push(x,M),t.push(v,k,y),i.push(N[0],N[1],N[2]),e.push(x,M),t.push(b,k,w),i.push(N[0],N[1],N[2]),e.push(T,M),t.push(b,k,w),i.push(N[0],N[1],N[2]),e.push(T,M),t.push(0,p,0),i.push(0,1,0),e.push(1,1)}else for(var d=0;r>d;d++){var m=n.map(d,0,r,0,u),g=n.map(d+1,0,r,0,u),v=l*Math.cos(m),k=O,y=l*Math.sin(m),b=l*Math.cos(g),I=O,w=l*Math.sin(g),z=f*Math.cos(g),A=E,_=f*Math.sin(g),C=f*Math.cos(m),D=E,P=f*Math.sin(m),x=d/r,S=c/h,T=(d+1)/r,M=(c+1)/h,N=this.calculateNormal(v,k,y,b,I,w,z,A,_);t.push(v,k,y),i.push(N[0],N[1],N[2]),e.push(x,S),t.push(b,I,w),i.push(N[0],N[1],N[2]),e.push(T,S),t.push(b,I,w),i.push(N[0],N[1],N[2]),e.push(T,S),t.push(z,A,_),i.push(N[0],N[1],N[2]),e.push(T,M),t.push(z,A,_),i.push(N[0],N[1],N[2]),e.push(T,M),t.push(C,D,P),i.push(N[0],N[1],N[2]),e.push(x,M),t.push(C,D,P),i.push(N[0],N[1],N[2]),e.push(x,M),t.push(v,k,y),i.push(N[0],N[1],N[2]),e.push(x,S)}}this.setPositions(t),this.setNormals(i),this.setTextureCoords(e)},s.prototype.setupLoopCone=function(){var t=[],i=[],e=[],s=this.options.radius,o=this.options.height;this.options.resolution=this.options.resolution>=3?this.options.resolution:3;for(var r=this.options.angleResolution?this.options.angleResolution:this.options.resolution,a=this.options.radialResolution?this.options.radialResolution:1,h=this.options.axisResolution?this.options.axisResolution:1,u=2*Math.PI,p=.5*o,c=0;a>=c;c++){var l=n.map(c,0,a,0,s),f=n.map(c+1,0,a,0,s);if(0===c)for(var d=0;r>d;d++){var m=n.map(d,0,r,0,u),g=n.map(d+1,0,r,0,u),v=f*Math.cos(m),y=f*Math.sin(m),x=d/r,S=c/a,b=f*Math.cos(g),w=f*Math.sin(g),T=(d+1)/r,M=(c+1)/a;t.push(v,-p,y),i.push(0,-1,0),e.push(x,M),t.push(b,-p,w),i.push(0,-1,0),e.push(T,M)}else for(var d=0;r>=d;d++){var x=d/r,S=c/a,T=(d+1)/r,M=(c+1)/a,m=n.map(d,0,r,0,u),g=n.map(d+1,0,r,0,u),v=l*Math.cos(m),y=l*Math.sin(m),z=l*Math.cos(g),_=l*Math.sin(g);t.push(v,-p,y),i.push(0,-1,0),e.push(x,S),t.push(z,-p,_),i.push(0,-1,0),e.push(T,S)}}for(var c=0;h>=c;c++){var C=-p+n.map(c,0,h,0,o),P=-p+n.map(c+1,0,h,0,o),l=n.map(c,0,h,s,0),f=n.map(c+1,0,h,s,0);c===h&&(l=1);for(var d=0;r>d;d++){var m=n.map(d,0,r,0,u),g=n.map(d+1,0,r,0,u),v=l*Math.cos(m),O=C,y=l*Math.sin(m),b=l*Math.cos(g),E=C,w=l*Math.sin(g),k=f*Math.cos(g),I=P,A=f*Math.sin(g),x=d/r,S=c/h,T=(d+1)/r,M=(c+1)/h,N=this.calculateNormal(v,O,y,b,E,w,k,I,A);t.push(v,O,y),i.push(N[0],N[1],N[2]),e.push(x,S),t.push(b,E,w),i.push(N[0],N[1],N[2]),e.push(T,S)}}this.setPositions(t),this.setNormals(i),this.setTextureCoords(e)},s.prototype.setupFilledCone=function(){var t=[],i=[],e=[],s=this.options.radius,o=this.options.height;this.options.resolution=this.options.resolution>=3?this.options.resolution:3;for(var r=this.options.angleResolution?this.options.angleResolution:this.options.resolution,a=this.options.radialResolution?this.options.radialResolution:1,h=this.options.axisResolution?this.options.axisResolution:1,u=2*Math.PI,p=.5*o,c=0;a>c;c++)for(var l=n.map(c,0,a,0,s),f=n.map(c+1,0,a,0,s),d=0;r>d;d++){var m=d/r,g=c/a,v=(d+1)/r,y=(c+1)/a,x=n.map(d,0,r,0,u),S=n.map(d+1,0,r,0,u),b=l*Math.cos(x),w=l*Math.sin(x),T=f*Math.cos(x),M=f*Math.sin(x),z=f*Math.cos(S),_=f*Math.sin(S),C=l*Math.cos(S),P=l*Math.sin(S);t.push(b,-p,w),i.push(0,-1,0),e.push(m,g),t.push(z,-p,_),i.push(0,-1,0),e.push(v,y),t.push(T,-p,M),i.push(0,-1,0),e.push(m,y),t.push(b,-p,w),i.push(0,-1,0),e.push(m,g),t.push(C,-p,P),i.push(0,-1,0),e.push(v,g),t.push(z,-p,_),i.push(0,-1,0),e.push(v,y)}for(var c=0;h>c;c++)for(var O=-p+n.map(c,0,h,0,o),E=-p+n.map(c+1,0,h,0,o),l=n.map(c,0,h,s,0),f=n.map(c+1,0,h,s,0),d=0;r>d;d++){var x=n.map(d,0,r,0,u),S=n.map(d+1,0,r,0,u),b=l*Math.cos(x),k=O,w=l*Math.sin(x),T=l*Math.cos(S),I=O,M=l*Math.sin(S),z=f*Math.cos(S),A=E,_=f*Math.sin(S),C=f*Math.cos(x),N=E,P=f*Math.sin(x),m=d/r,g=c/h,v=(d+1)/r,y=(c+1)/h,D=this.calculateNormal(b,k,w,T,I,M,z,A,_);t.push(b,k,w),i.push(D[0],D[1],D[2]),e.push(m,g),t.push(z,A,_),i.push(D[0],D[1],D[2]),e.push(v,y),t.push(T,I,M),i.push(D[0],D[1],D[2]),e.push(v,g),t.push(b,k,w),i.push(D[0],D[1],D[2]),e.push(m,g),t.push(C,N,P),i.push(D[0],D[1],D[2]),e.push(m,y),t.push(z,A,_),i.push(D[0],D[1],D[2]),e.push(v,y)}this.setPositions(t),this.setNormals(i),this.setTextureCoords(e)},e.exports=s}),define("famous-gl/Primitives/CylinderPrimitive",["require","exports","module","../Primitive","famous-utils/Utils"],function(t,i,e){function s(t){o.apply(this,t),this.options.radius=100,this.options.depth=100,this.options.resolution=60,this.options.angleResolution=void 0,this.options.radialResolution=void 0,this.options.axisResolution=void 0,this.options.drawMode=o.TRIANGLES,this.setOptions(t),this.setup()}var o=t("../Primitive"),n=t("famous-utils/Utils");s.prototype=Object.create(o.prototype),s.prototype.constructor=s,s.prototype.setup=function(){this.drawMode===o.TRIANGLES||this.drawMode===o.TRIANGLE_STRIP||this.drawMode===o.TRIANGLE_FAN?(this.drawMode=o.TRIANGLES,this.setupFilledCylinder()):this.drawMode===o.LINES?(this.drawMode=o.LINES,this.setupOutlinedCylinder()):this.drawMode===o.LINE_LOOP||this.drawMode===o.LINE_STRIP?(this.drawMode=o.LINES,this.setupLoopCylinder()):this.drawMode===o.POINTS&&this.setupPointCylinder()},s.prototype.setupPointCylinder=function(){var t=[],i=[],e=[],s=this.options.radius,o=this.options.depth;this.options.resolution=this.options.resolution>=3?this.options.resolution:3;for(var r=this.options.angleResolution?this.options.angleResolution:this.options.resolution,a=this.options.radialResolution?this.options.radialResolution:1,h=this.options.axisResolution?this.options.axisResolution:1,u=2*Math.PI,p=.5*-o,c=0;a>=c;c++){var l=n.map(c,0,a,0,s);if(0===c)t.push(0,0,-p),i.push(0,0,1),e.push(0,0),t.push(0,0,p),i.push(0,0,-1),e.push(0,0);else for(var f=0;r>=f;f++){var d=n.map(f,0,r,0,u),m=l*Math.cos(d),g=l*Math.sin(d),v=f/r,y=c/a;t.push(m,g,-p),i.push(0,0,1),e.push(v,y),t.push(m,g,p),i.push(0,0,-1),e.push(v,y)}}for(var c=0;h>c;c++)for(var x=-p-n.map(c,0,h,0,o),f=0;r>f;f++){var d=n.map(f,0,r,0,u),m=Math.cos(d),g=Math.sin(d),S=x,b=f/r,w=c/h;t.push(m*s,g*s,S),i.push(m,g,0),e.push(b,w)}this.setPositions(t),this.setNormals(i),this.setTextureCoords(e)},s.prototype.setupOutlinedCylinder=function(){var t=[],i=[],e=[],s=this.options.radius,o=this.options.depth;this.options.resolution=this.options.resolution>=3?this.options.resolution:3;for(var r=this.options.angleResolution?this.options.angleResolution:this.options.resolution,a=this.options.radialResolution?this.options.radialResolution:1,h=this.options.axisResolution?this.options.axisResolution:1,u=2*Math.PI,p=.5*-o,c=0;a>c;c++){var l=n.map(c,0,a,0,s),f=n.map(c+1,0,a,0,s);if(0===c)for(var d=0;r>d;d++){var m=n.map(d,0,r,0,u),g=n.map(d+1,0,r,0,u),v=0,y=0,x=-p,S=f*Math.cos(m),b=f*Math.sin(m),w=-p,T=f*Math.cos(g),M=f*Math.sin(g),z=-p,_=d/r,C=(d+1)/r,P=c/a,O=(c+1)/a;t.push(v,y,x),i.push(0,0,1),e.push(_,P),t.push(S,b,w),i.push(0,0,1),e.push(_,O),t.push(S,b,w),i.push(0,0,1),e.push(_,O),t.push(T,M,z),i.push(0,0,1),e.push(C,O),t.push(T,M,z),i.push(0,0,1),e.push(C,O),t.push(v,y,x),i.push(0,0,1),e.push(_,P),t.push(v,y,-x),i.push(0,0,-1),e.push(_,P),t.push(S,b,-w),i.push(0,0,-1),e.push(_,O),t.push(S,b,-w),i.push(0,0,-1),e.push(_,O),t.push(T,M,-z),i.push(0,0,-1),e.push(C,O),t.push(T,M,-z),i.push(0,0,-1),e.push(C,O),t.push(v,y,-x),i.push(0,0,-1),e.push(_,P)}else for(var d=0;r>d;d++){var m=n.map(d,0,r,0,u),g=n.map(d+1,0,r,0,u),S=l*Math.cos(m),b=l*Math.sin(m),w=-p,T=l*Math.cos(g),M=l*Math.sin(g),z=-p,E=f*Math.cos(g),k=f*Math.sin(g),I=-p,A=f*Math.cos(m),N=f*Math.sin(m),D=-p,_=d/r,C=(d+1)/r,P=c/a,O=(c+1)/a;t.push(S,b,w),i.push(0,0,1),e.push(_,P),t.push(T,M,z),i.push(0,0,1),e.push(C,P),t.push(T,M,z),i.push(0,0,1),e.push(C,P),t.push(E,k,I),i.push(0,0,1),e.push(C,O),t.push(E,k,I),i.push(0,0,1),e.push(C,O),t.push(A,N,D),i.push(0,0,1),e.push(_,O),t.push(A,N,D),i.push(0,0,1),e.push(_,O),t.push(S,b,w),i.push(0,0,1),e.push(_,P),t.push(S,b,-w),i.push(0,0,-1),e.push(_,P),t.push(T,M,-z),i.push(0,0,-1),e.push(C,P),t.push(T,M,-z),i.push(0,0,-1),e.push(C,P),t.push(E,k,-I),i.push(0,0,-1),e.push(C,O),t.push(E,k,-I),i.push(0,0,-1),e.push(C,O),t.push(A,N,-D),i.push(0,0,-1),e.push(_,O),t.push(A,N,-D),i.push(0,0,-1),e.push(_,O),t.push(S,b,-w),i.push(0,0,-1),e.push(_,P)}}for(var c=0;h>c;c++)for(var R=-p-n.map(c,0,h,0,o),F=-p-n.map(c+1,0,h,0,o),d=0;r>d;d++){var m=n.map(d,0,r,0,u),g=n.map(d+1,0,r,0,u),S=Math.cos(m),b=Math.sin(m),w=R,T=Math.cos(g),M=Math.sin(g),z=R,E=Math.cos(g),k=Math.sin(g),I=F,A=Math.cos(m),N=Math.sin(m),D=F,_=d/r,C=(d+1)/r,P=c/h,O=(c+1)/h;t.push(S*s,b*s,w),i.push(S,b,0),e.push(_,P),t.push(T*s,M*s,z),i.push(T,M,0),e.push(C,P),t.push(T*s,M*s,z),i.push(T,M,0),e.push(C,P),t.push(E*s,k*s,I),i.push(E,k,0),e.push(C,O),t.push(E*s,k*s,I),i.push(E,k,0),e.push(C,O),t.push(A*s,N*s,D),i.push(A,N,0),e.push(_,O),t.push(A*s,N*s,D),i.push(A,N,0),e.push(_,O),t.push(S*s,b*s,w),i.push(S,b,0),e.push(_,P)}this.setPositions(t),this.setNormals(i),this.setTextureCoords(e)},s.prototype.setupLoopCylinder=function(){var t=[],i=[],e=[],s=this.options.radius,o=this.options.depth;this.options.resolution=this.options.resolution>=3?this.options.resolution:3;for(var r=this.options.angleResolution?this.options.angleResolution:this.options.resolution,a=this.options.radialResolution?this.options.radialResolution:1,h=this.options.axisResolution?this.options.axisResolution:1,u=2*Math.PI,p=.5*-o,c=1;a>=c;c++){var l=n.map(c,0,a,0,s);n.map(c+1,0,a,0,s);for(var f=0;r>f;f++){var d=n.map(f,0,r,0,u),m=n.map(f+1,0,r,0,u),g=l*Math.cos(d),v=l*Math.sin(d),y=-p,x=l*Math.cos(m),S=l*Math.sin(m),b=-p,w=f/r,T=(f+1)/r,M=c/a;t.push(g,v,y),i.push(0,0,1),e.push(w,M),t.push(x,S,b),i.push(0,0,1),e.push(T,M),t.push(g,v,-y),i.push(0,0,-1),e.push(w,M),t.push(x,S,-b),i.push(0,0,-1),e.push(T,M)}}for(var c=0;h>=c;c++){var z=-p-n.map(c,0,h,0,o);-p-n.map(c+1,0,h,0,o);for(var f=0;r>f;f++){var d=n.map(f,0,r,0,u),m=n.map(f+1,0,r,0,u),g=Math.cos(d),v=Math.sin(d),y=z,x=Math.cos(m),S=Math.sin(m),b=z,w=f/r,T=(f+1)/r,M=c/h;t.push(g*s,v*s,y),i.push(g,v,0),e.push(w,M),t.push(x*s,S*s,b),i.push(x,S,0),e.push(T,M)}}this.setPositions(t),this.setNormals(i),this.setTextureCoords(e)},s.prototype.setupFilledCylinder=function(){var t=[],i=[],e=[],s=this.options.radius,o=this.options.depth;this.options.resolution=this.options.resolution>=3?this.options.resolution:3;for(var r=this.options.angleResolution?this.options.angleResolution:this.options.resolution,a=this.options.radialResolution?this.options.radialResolution:1,h=this.options.axisResolution?this.options.axisResolution:1,u=2*Math.PI,p=.5*-o,c=0;a>c;c++){var l=n.map(c,0,a,0,s),f=n.map(c+1,0,a,0,s);if(0===c)for(var d=0;r>d;d++){var m=n.map(d,0,r,0,u),g=n.map(d+1,0,r,0,u),v=0,y=0,x=-p,S=f*Math.cos(m),b=f*Math.sin(m),w=-p,T=f*Math.cos(g),M=f*Math.sin(g),z=-p,_=d/r,C=(d+1)/r,P=c/a,O=(c+1)/a;t.push(v,y,x),i.push(0,0,1),e.push(_,P),t.push(S,b,w),i.push(0,0,1),e.push(_,O),t.push(T,M,z),i.push(0,0,1),e.push(C,O),t.push(v,y,-x),i.push(0,0,-1),e.push(_,P),t.push(S,b,-w),i.push(0,0,-1),e.push(_,O),t.push(T,M,-z),i.push(0,0,-1),e.push(C,O)}else for(var d=0;r>d;d++){var m=n.map(d,0,r,0,u),g=n.map(d+1,0,r,0,u),S=l*Math.cos(m),b=l*Math.sin(m),w=-p,T=l*Math.cos(g),M=l*Math.sin(g),z=-p,E=f*Math.cos(g),k=f*Math.sin(g),I=-p,A=f*Math.cos(m),N=f*Math.sin(m),D=-p,_=d/r,C=(d+1)/r,P=c/a,O=(c+1)/a;t.push(S,b,w),i.push(0,0,1),e.push(_,P),t.push(E,k,I),i.push(0,0,1),e.push(C,O),t.push(T,M,z),i.push(0,0,1),e.push(C,P),t.push(S,b,w),i.push(0,0,1),e.push(_,P),t.push(A,N,D),i.push(0,0,1),e.push(_,O),t.push(E,k,I),i.push(0,0,1),e.push(C,O),t.push(S,b,-w),i.push(0,0,-1),e.push(_,P),t.push(E,k,-I),i.push(0,0,-1),e.push(C,O),t.push(T,M,-z),i.push(0,0,-1),e.push(C,P),t.push(S,b,-w),i.push(0,0,-1),e.push(_,P),t.push(A,N,-D),i.push(0,0,-1),e.push(_,O),t.push(E,k,-I),i.push(0,0,-1),e.push(C,O)}}for(var c=0;h>c;c++)for(var R=-p-n.map(c,0,h,0,o),F=-p-n.map(c+1,0,h,0,o),d=0;r>d;d++){var m=n.map(d,0,r,0,u),g=n.map(d+1,0,r,0,u),S=Math.cos(m),b=Math.sin(m),w=R,T=Math.cos(g),M=Math.sin(g),z=R,E=Math.cos(g),k=Math.sin(g),I=F,A=Math.cos(m),N=Math.sin(m),D=F,_=d/r,C=(d+1)/r,P=c/h,O=(c+1)/h;t.push(S*s,b*s,w),i.push(S,b,0),e.push(_,P),t.push(E*s,k*s,I),i.push(E,k,0),e.push(C,O),t.push(T*s,M*s,z),i.push(T,M,0),e.push(C,P),t.push(S*s,b*s,w),i.push(S,b,0),e.push(_,P),t.push(A*s,N*s,D),i.push(A,N,0),e.push(_,O),t.push(E*s,k*s,I),i.push(E,k,0),e.push(C,O)}this.setPositions(t),this.setNormals(i),this.setTextureCoords(e)},e.exports=s}),define("famous-gl/Primitives/EllipsePrimitive",["require","exports","module","../Primitive","famous-utils/Utils"],function(t,i,e){function s(t){o.apply(this,t),this.options.width=100,this.options.height=100,this.options.resolution=60,this.options.radialResolution=void 0,this.options.angleResolution=void 0,this.options.drawCenter=!1,this.options.vertical=!1,this.options.drawMode=o.TRIANGLES,this.setOptions(t),this.setup()}var o=t("../Primitive"),n=t("famous-utils/Utils");s.prototype=Object.create(o.prototype),s.prototype.constructor=s,s.prototype.setup=function(){var t=[],i=[],e=[];this.options.resolution=this.options.resolution>=3?this.options.resolution:3,this.options.radialResolution=this.options.radialResolution>=1?this.options.radialResolution:1,this.options.angleResolution=this.options.angleResolution>=3?this.options.angleResolution:this.options.resolution;var s=this.options.angleResolution,r=this.options.radialResolution,a=2*Math.PI,h=Math.max(c,l),u=this.options.drawCenter;if(this.drawMode===o.POINTS)for(var p=0;r>=p;p++){var c=n.map(p,0,r,0,.5*this.options.width),l=n.map(p,0,r,0,.5*this.options.height),f=Math.max(c,l);if(0===p)u&&(t.push(0,0,0),i.push(0,0,1),e.push(0,0));else for(var d=0;s>=d;d++){var m=n.map(d,0,s,0,a),g=c*Math.cos(m),v=l*Math.sin(m);t.push(g,v,0),i.push(0,0,1);var y=d/s;e.push(y,f/h)}}else if(this.drawMode===o.LINE_STRIP||this.drawMode===o.LINE_LOOP){this.drawMode=o.LINES;var x=r;this.options.vertical||x++;for(var p=0;x>p;p++){var c=n.map(p,0,r,0,.5*this.options.width),l=n.map(p,0,r,0,.5*this.options.height),S=n.map(p+1,0,r,0,.5*this.options.width),b=n.map(p+1,0,r,0,.5*this.options.height),f=Math.max(c,l),w=Math.max(S,b);if(0===p){if(u)for(var d=0;s>d;d++){var m=n.map(d,0,s,0,a),T=n.map(d+1,0,s,0,a),g=c*Math.cos(m),v=l*Math.sin(m),M=d/s,z=(d+1)/s;if(t.push(g,v,0),i.push(0,0,1),e.push(M,f/h),this.options.vertical){var _=S*Math.cos(m),C=b*Math.sin(m);t.push(_,C,0),i.push(0,0,1),e.push(M,w/h)}else{var P=c*Math.cos(T),O=l*Math.sin(T);t.push(P,O,0),i.push(0,0,1),e.push(z,f/h)}}}else for(var d=0;s>d;d++){var m=n.map(d,0,s,0,a),T=n.map(d+1,0,s,0,a),g=c*Math.cos(m),v=l*Math.sin(m),M=d/s,z=(d+1)/s;if(t.push(g,v,0),i.push(0,0,1),e.push(M,f/h),this.options.vertical){var _=S*Math.cos(m),C=b*Math.sin(m);t.push(_,C,0),i.push(0,0,1),e.push(M,w/h)}else{var P=c*Math.cos(T),O=l*Math.sin(T);t.push(P,O,0),i.push(0,0,1),e.push(z,f/h)}}}}else if(this.drawMode===o.LINES)for(var p=0;r>p;p++){var c=n.map(p,0,r,0,.5*this.options.width),l=n.map(p,0,r,0,.5*this.options.height),S=n.map(p+1,0,r,0,.5*this.options.width),b=n.map(p+1,0,r,0,.5*this.options.height),f=Math.max(c,l),w=Math.max(S,b);if(0===p)for(var d=0;s>d;d++){var m=n.map(d,0,s,0,a),T=n.map(d+1,0,s,0,a),g=S*Math.cos(m),v=b*Math.sin(m),_=S*Math.cos(T),C=b*Math.sin(T),M=d/s,z=(d+1)/s;t.push(0,0,0),i.push(0,0,1),e.push(M,f/h),t.push(g,v,0),i.push(0,0,1),e.push(M,w/h),t.push(g,v,0),i.push(0,0,1),e.push(M,w/h),t.push(_,C,0),i.push(0,0,1),e.push(z,w/h),t.push(_,C,0),i.push(0,0,1),e.push(z,w/h),t.push(0,0,0),i.push(0,0,1),e.push(0,0)}else for(var d=0;s>d;d++){var m=n.map(d,0,s,0,a),T=n.map(d+1,0,s,0,a),g=c*Math.cos(m),v=l*Math.sin(m),_=S*Math.cos(m),C=b*Math.sin(m),E=S*Math.cos(T),k=b*Math.sin(T),P=c*Math.cos(T),O=l*Math.sin(T),M=d/s,z=(d+1)/s;t.push(g,v,0),i.push(0,0,1),e.push(M,f/h),t.push(_,C,0),i.push(0,0,1),e.push(M,w/h),t.push(_,C,0),i.push(0,0,1),e.push(M,w/h),t.push(E,k,0),i.push(0,0,1),e.push(z,w/h),t.push(E,k,0),i.push(0,0,1),e.push(z,w/h),t.push(P,O,0),i.push(0,0,1),e.push(z,f/h),t.push(P,O,0),i.push(0,0,1),e.push(z,f/h),t.push(g,v,0),i.push(0,0,1),e.push(M,f/h)}}else if(this.drawMode===o.TRIANGLE_FAN||this.drawMode===o.TRIANGLES||o.TRIANGLE_STRIP){this.drawMode=o.TRIANGLES;for(var p=0;r>p;p++){var c=n.map(p,0,r,0,.5*this.options.width),l=n.map(p,0,r,0,.5*this.options.height),S=n.map(p+1,0,r,0,.5*this.options.width),b=n.map(p+1,0,r,0,.5*this.options.height),f=Math.max(c,l),w=Math.max(S,b);if(0===p)for(var d=0;s>d;d++){var m=n.map(d,0,s,0,a),T=n.map(d+1,0,s,0,a),g=S*Math.cos(m),v=b*Math.sin(m),_=S*Math.cos(T),C=b*Math.sin(T),M=d/s,z=(d+1)/s;t.push(0,0,0),i.push(0,0,1),e.push(M,f/h),t.push(g,v,0),i.push(0,0,1),e.push(M,w/h),t.push(_,C,0),i.push(0,0,1),e.push(z,w/h)}else for(var d=0;s>d;d++){var m=n.map(d,0,s,0,a),T=n.map(d+1,0,s,0,a),g=c*Math.cos(m),v=l*Math.sin(m),_=S*Math.cos(m),C=b*Math.sin(m),E=S*Math.cos(T),k=b*Math.sin(T),P=c*Math.cos(T),O=l*Math.sin(T),M=d/s,z=(d+1)/s;t.push(g,v,0),i.push(0,0,1),e.push(M,f/h),t.push(E,k,0),i.push(0,0,1),e.push(z,w/h),t.push(_,C,0),i.push(0,0,1),e.push(M,w/h),t.push(g,v,0),i.push(0,0,1),e.push(M,f/h),t.push(P,O,0),i.push(0,0,1),e.push(z,f/h),t.push(E,k,0),i.push(0,0,1),e.push(z,w/h)}}}this.setPositions(t),this.setNormals(i),this.setTextureCoords(e)},e.exports=s}),define("famous-gl/Primitives/IcoSpherePrimitive",["require","exports","module","../Primitive","famous-utils/Utils","famous-math/Vector"],function(t,i,e){function s(t){o.apply(this,t),this.options.radius=100,this.options.resolution=1,this.options.drawMode=o.TRIANGLES,this.setOptions(t),this.setup()}var o=t("../Primitive"),n=t("famous-utils/Utils"),r=t("famous-math/Vector");s.prototype=Object.create(o.prototype),s.prototype.constructor=s,s.prototype.setup=function(){this.createIcoSphere()},s.prototype.createIcoSphere=function(){var t=[],i=[],e=[],s=this.options.radius;this.options.resolution;var a=Math.cos(Math.PI/3),h=Math.sin(Math.PI/3);t.push([-s*a,s*h,0]),t.push([s*a,s*h,0]),t.push([-s*a,-s*h,0]),t.push([s*a,-s*h,0]),t.push([0,-s*a,s*h]),t.push([0,s*a,s*h]),t.push([0,-s*a,-s*h]),t.push([0,s*a,-s*h]),t.push([s*h,0,-s*a]),t.push([s*h,0,s*a]),t.push([-s*h,0,-s*a]),t.push([-s*h,0,s*a]);var u=[];u.push([0,11,5]),u.push([0,5,1]),u.push([0,1,7]),u.push([0,7,10]),u.push([0,10,11]),u.push([1,5,9]),u.push([5,11,4]),u.push([11,10,2]),u.push([10,7,6]),u.push([7,1,8]),u.push([3,9,4]),u.push([3,4,2]),u.push([3,2,6]),u.push([3,6,8]),u.push([3,8,9]),u.push([4,9,5]),u.push([2,4,11]),u.push([6,2,10]),u.push([8,6,7]),u.push([9,8,1]);for(var p=[],c=0;c<this.options.resolution;c++){for(var l=0;l<u.length;l++){var f=u[l],d=t[f[0]],m=t[f[1]],g=t[f[2]],v=this.createMidPoint(d[0],d[1],d[2],m[0],m[1],m[2]),y=this.createMidPoint(m[0],m[1],m[2],g[0],g[1],g[2]),x=this.createMidPoint(d[0],d[1],d[2],g[0],g[1],g[2]),S=t.length;t.push(v);var b=t.length;t.push(y);var w=t.length;t.push(x),p.push([f[0],S,w]),p.push([S,f[1],b]),p.push([w,S,b]),p.push([w,b,f[2]])}u=p,p=[]}var T=[],M=new r;if(this.drawMode===o.LINES||this.drawMode===o.LINE_LOOP||this.drawMode===o.LINE_STRIP){this.drawMode=o.LINES;for(var l=0;l<u.length;l++){var f=u[l],d=t[f[0]],m=t[f[1]],g=t[f[2]];T.push(d[0],d[1],d[2]),T.push(m[0],m[1],m[2]),T.push(m[0],m[1],m[2]),T.push(g[0],g[1],g[2]),T.push(g[0],g[1],g[2]),T.push(d[0],d[1],d[2])}}else if(this.drawMode===o.TRIANGLES||this.drawMode===o.TRIANGLE_STRIP||this.drawMode===o.TRIANGLE_FAN){this.drawMode=o.TRIANGLES;for(var l=0;l<u.length;l++){var f=u[l],d=t[f[0]],m=t[f[1]],g=t[f[2]];T.push(d[0],d[1],d[2]),T.push(m[0],m[1],m[2]),T.push(g[0],g[1],g[2])}}else if(this.drawMode===o.POINTS)for(var l=0;l<t.length;l++){var z=t[l];T.push(z[0],z[1],z[2])}for(var _=Math.PI,C=Math.PI,l=0;l<T.length;l+=3){var P=T[l],O=T[l+1],E=T[l+2];M.setXYZ(P,O,E),M.normalize(1,M),i.push(M.x,M.y,M.z);var k=Math.atan2(M.z,M.x),I=Math.acos(M.y);e.push(n.map(k,-_,_,0,1),n.map(I,0,C,0,1))}this.setPositions(T),this.setNormals(i),this.setTextureCoords(e)},s.prototype.createMidPoint=function(t,i,e,s,o,n){var a=new r(t+s,i+o,e+n);return a.mult(.5,a),a.normalize(this.options.radius,a),a.toArray()},e.exports=s}),define("famous-gl/Primitives/ParametricPrimitive",["require","exports","module","../Primitive","famous-utils/Utils"],function(t,e,s){function o(t){n.apply(this,t),this.options.variables={varyings:{theta:{resolution:30,range:[-Math.PI,Math.PI]},phi:{resolution:30,range:[0,Math.PI]}},params:{radius:50}},this.options.generator=function(t,i,e){var s=e.radius*Math.cos(t)*Math.sin(i),o=e.radius*Math.sin(t)*Math.sin(i),n=e.radius*Math.cos(i);return[s,n,o]},this.options.vertical=!1,this.options.drawMode=n.TRIANGLES,this.setOptions(t),this.setup()}var n=t("../Primitive"),r=t("famous-utils/Utils");o.prototype=Object.create(n.prototype),o.prototype.constructor=o,o.prototype.setup=function(){this.drawMode===n.LINES?(this.drawMode=n.LINES,this.makeOutlineShape()):this.drawMode===n.LINE_LOOP||this.drawMode===n.LINE_STRIP?(this.drawMode=n.LINES,this.makeLoopShape()):this.drawMode===n.TRIANGLES||this.drawMode===n.TRIANGLE_STRIP||this.drawMode===n.TRIANGLE_FAN?(this.drawMode=n.TRIANGLES,this.makeFilledShape()):this.makePointShape()},o.prototype.makeFilledShape=function(){var t=[],e=[],s=[],o=this.options.generator,n=this.options.variables,a=n.varyings,h=Object.keys(a),u=n.params,p=a[h[0]],c=a[h[1]],l=p.resolution,f=c.resolution;for(j=0;l>j;j++){var d=r.map(j,0,p.resolution,p.range[0],p.range[1]),m=r.map(j+1,0,p.resolution,p.range[0],p.range[1]);
for(i=0;f>i;i++){var g=r.map(i,0,c.resolution,c.range[0],c.range[1]),v=r.map(i+1,0,c.resolution,c.range[0],c.range[1]),y=o(d,g,u),x=o(d,v,u),S=o(m,v,u),b=o(m,g,u),w=this.calculateNormal(y[0],y[1],y[2],x[0],x[1],x[2],S[0],S[1],S[2]),T=j/l,M=(j+1)/l,z=i/l,_=(i+1)/l;t.push(y[0],y[1],y[2]),e.push(w[0],w[1],w[2]),s.push(T,z),t.push(S[0],S[1],S[2]),e.push(w[0],w[1],w[2]),s.push(M,_),t.push(x[0],x[1],x[2]),e.push(w[0],w[1],w[2]),s.push(T,_),t.push(y[0],y[1],y[2]),e.push(w[0],w[1],w[2]),s.push(T,z),t.push(b[0],b[1],b[2]),e.push(w[0],w[1],w[2]),s.push(M,z),t.push(S[0],S[1],S[2]),e.push(w[0],w[1],w[2]),s.push(M,_)}}this.setPositions(t),this.setNormals(e),this.setTextureCoords(s)},o.prototype.makeLoopShape=function(){var t=[],e=[],s=[],o=this.options.generator,n=this.options.variables,a=n.varyings,h=Object.keys(a),u=n.params,p=a[h[0]],c=a[h[1]],l=p.resolution,f=c.resolution;for(j=0;l>j;j++){var d=r.map(j,0,p.resolution,p.range[0],p.range[1]),m=r.map(j+1,0,p.resolution,p.range[0],p.range[1]);for(i=0;f>i;i++){var g=r.map(i,0,c.resolution,c.range[0],c.range[1]),v=r.map(i+1,0,c.resolution,c.range[0],c.range[1]),y=o(d,g,u),x=o(d,v,u),S=o(m,v,u),b=o(m,g,u),w=this.calculateNormal(y[0],y[1],y[2],x[0],x[1],x[2],S[0],S[1],S[2]),T=j/l,M=(j+1)/l,z=i/l,_=(i+1)/l;t.push(y[0],y[1],y[2]),e.push(w[0],w[1],w[2]),s.push(T,z),this.options.vertical?(t.push(x[0],x[1],x[2]),e.push(w[0],w[1],w[2]),s.push(T,_)):(t.push(b[0],b[1],b[2]),e.push(w[0],w[1],w[2]),s.push(M,z))}}this.setPositions(t),this.setNormals(e),this.setTextureCoords(s)},o.prototype.makeOutlineShape=function(){var t=[],e=[],s=[],o=this.options.generator,n=this.options.variables,a=n.varyings,h=Object.keys(a),u=n.params,p=a[h[0]],c=a[h[1]],l=p.resolution,f=c.resolution;for(j=0;l>j;j++){var d=r.map(j,0,p.resolution,p.range[0],p.range[1]),m=r.map(j+1,0,p.resolution,p.range[0],p.range[1]);for(i=0;f>i;i++){var g=r.map(i,0,c.resolution,c.range[0],c.range[1]),v=r.map(i+1,0,c.resolution,c.range[0],c.range[1]),y=o(d,g,u),x=o(d,v,u),S=o(m,v,u),b=o(m,g,u),w=this.calculateNormal(y[0],y[1],y[2],x[0],x[1],x[2],S[0],S[1],S[2]),T=j/l,M=(j+1)/l,z=i/l,_=(i+1)/l;t.push(y[0],y[1],y[2]),e.push(w[0],w[1],w[2]),s.push(T,z),t.push(x[0],x[1],x[2]),e.push(w[0],w[1],w[2]),s.push(T,_),t.push(x[0],x[1],x[2]),e.push(w[0],w[1],w[2]),s.push(T,_),t.push(S[0],S[1],S[2]),e.push(w[0],w[1],w[2]),s.push(M,_),t.push(S[0],S[1],S[2]),e.push(w[0],w[1],w[2]),s.push(M,_),t.push(b[0],b[1],b[2]),e.push(w[0],w[1],w[2]),s.push(M,z),t.push(b[0],b[1],b[2]),e.push(w[0],w[1],w[2]),s.push(M,z),t.push(y[0],y[1],y[2]),e.push(w[0],w[1],w[2]),s.push(T,z)}}this.setPositions(t),this.setNormals(e),this.setTextureCoords(s)},o.prototype.makePointShape=function(){var t=[],e=[],s=[],o=this.options.generator,n=this.options.variables,a=n.varyings,h=Object.keys(a),u=n.params,p=a[h[0]],c=a[h[1]],l=p.resolution,f=c.resolution;for(j=0;l>=j;j++){var d=r.map(j,0,p.resolution,p.range[0],p.range[1]),m=r.map(j+1,0,p.resolution,p.range[0],p.range[1]);for(i=0;f>=i;i++){var g=r.map(i,0,c.resolution,c.range[0],c.range[1]),v=r.map(i+1,0,c.resolution,c.range[0],c.range[1]),y=o(d,g,u),x=o(d,v,u),S=o(m,v,u),b=this.calculateNormal(y[0],y[1],y[2],x[0],x[1],x[2],S[0],S[1],S[2]);t.push(y[0],y[1],y[2]),e.push(b[0],b[1],b[2]),s.push(j/l,i/f)}}this.setPositions(t),this.setNormals(e),this.setTextureCoords(s)},s.exports=o}),define("famous-gl/Primitives/SpherePrimitive",["require","exports","module","../Primitive","famous-utils/Utils"],function(t,i,e){function s(t){o.apply(this,t),this.options.radius=100,this.options.resolution=30,this.options.resolutionTheta=void 0,this.options.resolutionPhi=void 0,this.options.vertical=!1,this.options.drawMode=o.TRIANGLES,this.setOptions(t),this.setup()}var o=t("../Primitive"),n=t("famous-utils/Utils");s.prototype=Object.create(o.prototype),s.prototype.constructor=s,s.prototype.setup=function(){this.drawMode===o.LINES?(this.drawMode=o.LINES,this.makeOutlineSphere()):this.drawMode===o.LINE_LOOP||this.drawMode===o.LINE_STRIP?(this.drawMode=o.LINES,this.makeLoopSphere()):this.drawMode===o.TRIANGLES||this.drawMode===o.TRIANGLE_STRIP||this.drawMode===o.TRIANGLE_FAN?(this.drawMode=o.TRIANGLES,this.makeFilledSphere()):this.makePointSphere()},s.prototype.makeFilledSphere=function(){var t=[],i=[],e=[],s=this.options.radius;this.options.resolution=this.options.resolution>=3?this.options.resolution:3;var o=this.options.resolutionTheta?this.options.resolutionTheta:this.options.resolution,r=this.options.resolutionPhi?this.options.resolutionPhi:this.options.resolution;o=o>=3?o:3,r=r>=3?r:3;for(var a=Math.PI,h=Math.PI,u=0;o>u;u++)for(var p=n.map(u,0,o,-a,a),c=n.map(u+1,0,o,-a,a),l=0;r>l;l++){var f=n.map(l,0,r,0,h),d=n.map(l+1,0,r,0,h),m=Math.cos(p)*Math.sin(f),g=Math.cos(f),v=Math.sin(p)*Math.sin(f),y=Math.cos(c)*Math.sin(f),x=Math.cos(f),S=Math.sin(c)*Math.sin(f),b=Math.cos(c)*Math.sin(d),w=Math.cos(d),T=Math.sin(c)*Math.sin(d),M=Math.cos(p)*Math.sin(d),z=Math.cos(d),_=Math.sin(p)*Math.sin(d);t.push(s*m,s*g,s*v),i.push(m,g,v),e.push(u/o,l/r),t.push(s*M,s*z,s*_),i.push(M,z,_),e.push(u/o,(l+1)/r),t.push(s*b,s*w,s*T),i.push(b,w,T),e.push((u+1)/o,(l+1)/r),t.push(s*m,s*g,s*v),i.push(m,g,v),e.push(u/o,l/r),t.push(s*b,s*w,s*T),i.push(b,w,T),e.push((u+1)/o,(l+1)/r),t.push(s*y,s*x,s*S),i.push(y,x,S),e.push((u+1)/o,l/r)}this.setPositions(t),this.setNormals(i),this.setTextureCoords(e)},s.prototype.makeLoopSphere=function(){var t=[],i=[],e=[],s=this.options.radius;this.options.resolution=this.options.resolution>=3?this.options.resolution:3;var o=this.options.resolutionTheta?this.options.resolutionTheta:this.options.resolution,r=this.options.resolutionPhi?this.options.resolutionPhi:this.options.resolution;o=o>=3?o:3,r=r>=3?r:3;for(var a=Math.PI,h=Math.PI,u=0;o>u;u++)for(var p=n.map(u,0,o,-a,a),c=n.map(u+1,0,o,-a,a),l=0;r>l;l++){var f=n.map(l,0,r,0,h),d=n.map(l+1,0,r,0,h),m=Math.cos(p)*Math.sin(f),g=Math.cos(f),v=Math.sin(p)*Math.sin(f);if(t.push(s*m,s*g,s*v),i.push(m,g,v),e.push(u/o,l/r),this.options.vertical){var y=Math.cos(p)*Math.sin(d),x=Math.cos(d),S=Math.sin(p)*Math.sin(d);t.push(s*y,s*x,s*S),i.push(y,x,S),e.push(u/o,(l+1)/r)}else{var b=Math.cos(c)*Math.sin(f),w=Math.cos(f),T=Math.sin(c)*Math.sin(f);t.push(s*b,s*w,s*T),i.push(b,w,T),e.push((u+1)/o,l/r)}}this.setPositions(t),this.setNormals(i),this.setTextureCoords(e)},s.prototype.makeOutlineSphere=function(){var t=[],i=[],e=[],s=this.options.radius;this.options.resolution=this.options.resolution>=3?this.options.resolution:3;var o=this.options.resolutionTheta?this.options.resolutionTheta:this.options.resolution,r=this.options.resolutionPhi?this.options.resolutionPhi:this.options.resolution;o=o>=3?o:3,r=r>=3?r:3;for(var a=Math.PI,h=Math.PI,u=0;o>u;u++)for(var p=n.map(u,0,o,-a,a),c=n.map(u+1,0,o,-a,a),l=0;r>l;l++){var f=n.map(l,0,r,0,h),d=n.map(l+1,0,r,0,h),m=Math.cos(p)*Math.sin(f),g=Math.cos(f),v=Math.sin(p)*Math.sin(f),y=Math.cos(c)*Math.sin(f),x=Math.cos(f),S=Math.sin(c)*Math.sin(f),b=Math.cos(c)*Math.sin(d),w=Math.cos(d),T=Math.sin(c)*Math.sin(d),M=Math.cos(p)*Math.sin(d),z=Math.cos(d),_=Math.sin(p)*Math.sin(d);t.push(s*m,s*g,s*v),i.push(m,g,v),e.push(u/o,l/r),t.push(s*y,s*x,s*S),i.push(y,x,S),e.push((u+1)/o,l/r),t.push(s*y,s*x,s*S),i.push(y,x,S),e.push((u+1)/o,l/r),t.push(s*b,s*w,s*T),i.push(b,w,T),e.push((u+1)/o,(l+1)/r),t.push(s*b,s*w,s*T),i.push(b,w,T),e.push((u+1)/o,(l+1)/r),t.push(s*M,s*z,s*_),i.push(M,z,_),e.push(u/o,(l+1)/r),t.push(s*M,s*z,s*_),i.push(M,z,_),e.push(u/o,(l+1)/r),t.push(s*m,s*g,s*v),i.push(m,g,v),e.push(u/o,l/r)}this.setPositions(t),this.setNormals(i),this.setTextureCoords(e)},s.prototype.makePointSphere=function(){var t=[],i=[],e=[],s=this.options.radius;this.options.resolution=this.options.resolution>=3?this.options.resolution:3;var o=this.options.resolutionTheta?this.options.resolutionTheta:this.options.resolution,r=this.options.resolutionPhi?this.options.resolutionPhi:this.options.resolution;o=o>=3?o:3,r=r>=3?r:3;for(var a=Math.PI,h=Math.PI,u=0;o>u;u++)for(var p=n.map(u,0,o,-a,a),c=0;r>c;c++){var l=n.map(c,0,r,0,h),f=Math.cos(p)*Math.sin(l),d=Math.cos(l),m=Math.sin(p)*Math.sin(l);t.push(s*f,s*d,s*m),i.push(f,d,m),e.push(u/o,c/r)}this.setPositions(t),this.setNormals(i),this.setTextureCoords(e)},e.exports=s}),define("famous-gl/Primitives/TorusPrimitive",["require","exports","module","../Primitive"],function(t,i,e){function s(t){o.apply(this,t),this.options.tubeRadius=200,this.options.radius=50,this.options.resolution=30,this.options.resolutionTheta=void 0,this.options.resolutionPhi=void 0,this.options.vertical=!0,this.options.drawMode=o.TRIANGLES,this.setOptions(t),this.setup()}var o=t("../Primitive");s.prototype=Object.create(o.prototype),s.prototype.constructor=s,s.prototype.setup=function(){this.drawMode===o.LINES?(this.drawMode=o.LINES,this.makeOutlineTorus()):this.drawMode===o.LINE_LOOP||this.drawMode===o.LINE_STRIP?(this.drawMode=o.LINES,this.makeLoopTorus()):this.drawMode===o.TRIANGLES||this.drawMode===o.TRIANGLE_STRIP||this.drawMode===o.TRIANGLE_FAN?(this.drawMode=o.TRIANGLES,this.makeFilledTorus()):this.makePointTorus()},s.prototype.makeFilledTorus=function(){var t=[],i=[],e=[],s=this.options.radius,o=this.options.tubeRadius;this.options.resolution=this.options.resolution>=3?this.options.resolution:3;var n=this.options.resolutionTheta?this.options.resolutionTheta:this.options.resolution,r=this.options.resolutionPhi?this.options.resolutionPhi:this.options.resolution;n=n>=3?n:3,r=r>=3?r:3;for(var a=2*Math.PI,h=a/n,u=2*Math.PI,p=u/r,c=0;a>c;c+=h)for(var l=0;u>=l;l+=p){var f=l+p,d=c+h,m=Math.cos(l),g=Math.sin(l),v=Math.cos(c),y=Math.sin(c),x=Math.cos(f),S=Math.sin(f),b=Math.cos(d),w=Math.sin(d),T=(o+s*m)*v,M=(o+s*m)*y,z=s*g,_=(o+s*m)*b,C=(o+s*m)*w,P=s*g,O=(o+s*x)*b,E=(o+s*x)*w,k=s*S,I=(o+s*x)*v,A=(o+s*x)*y,N=s*S;t.push(T,M,z),i.push(m*v,m*y,g),e.push(c/a,l/u),t.push(O,E,k),i.push(x*b,x*w,S),e.push(d/a,f/u),t.push(_,C,P),i.push(m*b,m*w,g),e.push(d/a,l/u),t.push(T,M,z),i.push(m*v,m*y,g),e.push(c/a,l/u),t.push(I,A,N),i.push(x*v,x*y,S),e.push(c/a,f/u),t.push(O,E,k),i.push(x*b,x*w,S),e.push(d/a,f/u)}this.setPositions(t),this.setNormals(i),this.setTextureCoords(e)},s.prototype.makeLoopTorus=function(){var t=[],i=[],e=[],s=this.options.radius,o=this.options.tubeRadius;this.options.resolution=this.options.resolution>=3?this.options.resolution:3;var n=this.options.resolutionTheta?this.options.resolutionTheta:this.options.resolution,r=this.options.resolutionPhi?this.options.resolutionPhi:this.options.resolution;n=n>=3?n:3,r=r>=3?r:3;for(var a=2*Math.PI,h=a/n,u=2*Math.PI,p=u/r,c=0;a>c;c+=h)for(var l=0;u>=l;l+=p){var f=l+p,d=c+h,m=Math.cos(l),g=Math.sin(l),v=Math.cos(c),y=Math.sin(c),x=Math.cos(f),S=Math.sin(f),b=Math.cos(d),w=Math.sin(d),T=(o+s*m)*v,M=(o+s*m)*y,z=s*g,_=(o+s*m)*b,C=(o+s*m)*w,P=s*g,O=(o+s*x)*v,E=(o+s*x)*y,k=s*S;t.push(T,M,z),i.push(m*v,m*y,g),e.push(c/a,l/u),this.options.vertical?(t.push(_,C,P),i.push(m*b,m*w,g),e.push(d/a,l/u)):(t.push(O,E,k),i.push(x*v,x*y,S),e.push(c/a,f/u))}this.setPositions(t),this.setNormals(i),this.setTextureCoords(e)},s.prototype.makeOutlineTorus=function(){var t=[],i=[],e=[],s=this.options.radius,o=this.options.tubeRadius;this.options.resolution=this.options.resolution>=3?this.options.resolution:3;var n=this.options.resolutionTheta?this.options.resolutionTheta:this.options.resolution,r=this.options.resolutionPhi?this.options.resolutionPhi:this.options.resolution;n=n>=3?n:3,r=r>=3?r:3;for(var a=2*Math.PI,h=a/n,u=2*Math.PI,p=u/r,c=0;a>c;c+=h)for(var l=0;u>=l;l+=p){var f=l+p,d=c+h,m=Math.cos(l),g=Math.sin(l),v=Math.cos(c),y=Math.sin(c),x=Math.cos(f),S=Math.sin(f),b=Math.cos(d),w=Math.sin(d),T=(o+s*m)*v,M=(o+s*m)*y,z=s*g,_=(o+s*m)*b,C=(o+s*m)*w,P=s*g,O=(o+s*x)*b,E=(o+s*x)*w,k=s*S,I=(o+s*x)*v,A=(o+s*x)*y,N=s*S;t.push(T,M,z),i.push(m*v,m*y,g),e.push(c/a,l/u),t.push(_,C,P),i.push(m*b,m*w,g),e.push(d/a,l/u),t.push(_,C,P),i.push(m*b,m*w,g),e.push(d/a,l/u),t.push(O,E,k),i.push(x*b,x*w,S),e.push(d/a,f/u),t.push(O,E,k),i.push(x*b,x*w,S),e.push(d/a,f/u),t.push(I,A,N),i.push(x*v,x*y,S),e.push(c/a,f/u),t.push(I,A,N),i.push(x*v,x*y,S),e.push(c/a,f/u),t.push(T,M,z),i.push(m*v,m*y,g),e.push(c/a,l/u)}this.setPositions(t),this.setNormals(i),this.setTextureCoords(e)},s.prototype.makePointTorus=function(){var t=[],i=[],e=[],s=this.options.radius,o=this.options.tubeRadius;this.options.resolution=this.options.resolution>=3?this.options.resolution:3;var n=this.options.resolutionTheta?this.options.resolutionTheta:this.options.resolution,r=this.options.resolutionPhi?this.options.resolutionPhi:this.options.resolution;n=n>=3?n:3,r=r>=3?r:3;for(var a=2*Math.PI,h=a/n,u=2*Math.PI,p=u/r,c=0;a>c;c+=h)for(var l=0;u>=l;l+=p){var f=Math.cos(l),d=Math.sin(l),m=Math.cos(c),g=Math.sin(c),v=(o+s*f)*m,y=(o+s*f)*g,x=s*d;t.push(v,y,x),i.push(f*m,f*g,d),e.push(c/a,l/u)}this.setPositions(t),this.setNormals(i),this.setTextureCoords(e)},e.exports=s}),define("famous-gl/ShaderFunctions/Map",["require","exports","module"],function(t,i,e){e.exports=["float map(float value, float inputMin, float inputMax, float outputMin, float outputMax) {","	return ( (value - inputMin) / (inputMax - inputMin) ) * (outputMax - outputMin) + outputMin;","}"].join("\n")}),define("famous-gl/ShaderFunctions/Noise2D",["require","exports","module"],function(t,i,e){e.exports=["vec3 mod289(vec3 x) {","	return x - floor(x * (1.0 / 289.0)) * 289.0;","}","","vec2 mod289(vec2 x) {","	return x - floor(x * (1.0 / 289.0)) * 289.0;","}","","vec3 permute(vec3 x) {","	return mod289(((x*34.0)+1.0)*x);","}","","float snoise(vec2 v) {","	const vec4 C = vec4(0.211324865405187,  0.366025403784439, -0.577350269189626, 0.024390243902439);","","	vec2 i  = floor(v + dot(v, C.yy));","	vec2 x0 = v -   i + dot(i, C.xx);","","	vec2 i1;","	i1 = (x0.x > x0.y) ? vec2(1.0, 0.0) : vec2(0.0, 1.0);","	vec4 x12 = x0.xyxy + C.xxzz;","	x12.xy -= i1;","","	i = mod289(i);","	vec3 p = permute( permute( i.y + vec3(0.0, i1.y, 1.0 )) + i.x + vec3(0.0, i1.x, 1.0 ));","","	vec3 m = max(0.5 - vec3(dot(x0,x0), dot(x12.xy,x12.xy), dot(x12.zw,x12.zw)), 0.0);","	m = m*m;","	m = m*m;","","	vec3 x = 2.0 * fract(p * C.www) - 1.0;","	vec3 h = abs(x) - 0.5;","	vec3 ox = floor(x + 0.5);","	vec3 a0 = x - ox;","","	m *= 1.79284291400159 - 0.85373472095314 * ( a0*a0 + h*h );","","	vec3 g;","	g.x  = a0.x  * x0.x  + h.x  * x0.y;","	g.yz = a0.yz * x12.xz + h.yz * x12.yw;","	return 130.0 * dot(m, g);","}"].join("\n")}),define("famous-gl/ShaderFunctions/Noise3D",["require","exports","module"],function(t,i,e){e.exports=["vec3 mod289(vec3 x) {","	return x - floor(x * (1.0 / 289.0)) * 289.0;","}","","vec4 mod289(vec4 x) {","	return x - floor(x * (1.0 / 289.0)) * 289.0;","}","","vec4 permute(vec4 x) {","	return mod289(((x*34.0)+1.0)*x);","}","","vec4 taylorInvSqrt(vec4 r)","{","	return 1.79284291400159 - 0.85373472095314 * r;","}","","float snoise(vec3 v)","{","	const vec2  C = vec2(1.0/6.0, 1.0/3.0);","	const vec4  D = vec4(0.0, 0.5, 1.0, 2.0);","","	vec3 i = floor(v + dot(v, C.yyy));","	vec3 x0 = v - i + dot(i, C.xxx);","","	vec3 g = step(x0.yzx, x0.xyz);","	vec3 l = 1.0 - g;","	vec3 i1 = min( g.xyz, l.zxy );","	vec3 i2 = max( g.xyz, l.zxy );","","	vec3 x1 = x0 - i1 + C.xxx;","	vec3 x2 = x0 - i2 + C.yyy;","	vec3 x3 = x0 - D.yyy;","","	i = mod289(i);","	vec4 p = permute( permute( permute( i.z + vec4(0.0, i1.z, i2.z, 1.0 )) + i.y + vec4(0.0, i1.y, i2.y, 1.0 )) + i.x + vec4(0.0, i1.x, i2.x, 1.0 ));","","	float n_ = 0.142857142857;","	vec3  ns = n_ * D.wyz - D.xzx;","","	vec4 j = p - 49.0 * floor(p * ns.z * ns.z);","","	vec4 x_ = floor(j * ns.z);","	vec4 y_ = floor(j - 7.0 * x_ );","","	vec4 x = x_ *ns.x + ns.yyyy;","	vec4 y = y_ *ns.x + ns.yyyy;","	vec4 h = 1.0 - abs(x) - abs(y);","","	vec4 b0 = vec4( x.xy, y.xy );","	vec4 b1 = vec4( x.zw, y.zw );","","	vec4 s0 = floor(b0)*2.0 + 1.0;","	vec4 s1 = floor(b1)*2.0 + 1.0;","	vec4 sh = -step(h, vec4(0.0));","","	vec4 a0 = b0.xzyw + s0.xzyw*sh.xxyy;","	vec4 a1 = b1.xzyw + s1.xzyw*sh.zzww;","","	vec3 p0 = vec3(a0.xy,h.x);","	vec3 p1 = vec3(a0.zw,h.y);","	vec3 p2 = vec3(a1.xy,h.z);","	vec3 p3 = vec3(a1.zw,h.w);","","	vec4 norm = taylorInvSqrt(vec4(dot(p0,p0), dot(p1,p1), dot(p2, p2), dot(p3,p3)));","	p0 *= norm.x;","	p1 *= norm.y;","	p2 *= norm.z;","	p3 *= norm.w;","","	vec4 m = max(0.6 - vec4(dot(x0,x0), dot(x1,x1), dot(x2,x2), dot(x3,x3)), 0.0);","	m = m * m;","	return 42.0 * dot( m*m, vec4( dot(p0,x0), dot(p1,x1), dot(p2,x2), dot(p3,x3)));","}"].join("\n")}),define("famous-gl/ShaderFunctions/Noise4D",["require","exports","module"],function(t,i,e){e.exports=["vec4 mod289(vec4 x) {","	return x - floor(x * (1.0 / 289.0)) * 289.0; }","","float mod289(float x) {","	return x - floor(x * (1.0 / 289.0)) * 289.0; }","","vec4 permute(vec4 x) {","	return mod289(((x*34.0)+1.0)*x);","}","","float permute(float x) {","	return mod289(((x*34.0)+1.0)*x);","}","","vec4 taylorInvSqrt(vec4 r) {","	return 1.79284291400159 - 0.85373472095314 * r;","}","","float taylorInvSqrt(float r) {","	return 1.79284291400159 - 0.85373472095314 * r;","}","","vec4 grad4(float j, vec4 ip) {","	const vec4 ones = vec4(1.0, 1.0, 1.0, -1.0);","	vec4 p,s;","","	p.xyz = floor( fract (vec3(j) * ip.xyz) * 7.0) * ip.z - 1.0;","	p.w = 1.5 - dot(abs(p.xyz), ones.xyz);","	s = vec4(lessThan(p, vec4(0.0)));","	p.xyz = p.xyz + (s.xyz*2.0 - 1.0) * s.www;","","	return p;","}","","#define F4 0.309016994374947451","","float snoise(vec4 v) {","	const vec4  C = vec4( 0.138196601125011, 0.276393202250021, 0.414589803375032, -0.447213595499958);","","	vec4 i  = floor(v + dot(v, vec4(F4)) );","		vec4 x0 = v -   i + dot(i, C.xxxx);","","	vec4 i0;","	vec3 isX = step( x0.yzw, x0.xxx );","	vec3 isYZ = step( x0.zww, x0.yyz );","","	i0.x = isX.x + isX.y + isX.z;","	i0.yzw = 1.0 - isX;","	i0.y += isYZ.x + isYZ.y;","	i0.zw += 1.0 - isYZ.xy;","	i0.z += isYZ.z;","	i0.w += 1.0 - isYZ.z;","","	vec4 i3 = clamp( i0, 0.0, 1.0 );","	vec4 i2 = clamp( i0-1.0, 0.0, 1.0 );","	vec4 i1 = clamp( i0-2.0, 0.0, 1.0 );","","	vec4 x1 = x0 - i1 + C.xxxx;","	vec4 x2 = x0 - i2 + C.yyyy;","	vec4 x3 = x0 - i3 + C.zzzz;","	vec4 x4 = x0 + C.wwww;","","	i = mod289(i);","	float j0 = permute( permute( permute( permute(i.w) + i.z) + i.y) + i.x);","	vec4 j1 = permute( permute( permute( permute (i.w + vec4(i1.w, i2.w, i3.w, 1.0 )) + i.z + vec4(i1.z, i2.z, i3.z, 1.0 )) + i.y + vec4(i1.y, i2.y, i3.y, 1.0 )) + i.x + vec4(i1.x, i2.x, i3.x, 1.0 ));","","	vec4 ip = vec4(1.0/294.0, 1.0/49.0, 1.0/7.0, 0.0);","","	vec4 p0 = grad4(j0,   ip);","	vec4 p1 = grad4(j1.x, ip);","	vec4 p2 = grad4(j1.y, ip);","	vec4 p3 = grad4(j1.z, ip);","	vec4 p4 = grad4(j1.w, ip);","","	vec4 norm = taylorInvSqrt(vec4(dot(p0,p0), dot(p1,p1), dot(p2, p2), dot(p3,p3)));","	p0 *= norm.x;","	p1 *= norm.y;","	p2 *= norm.z;","	p3 *= norm.w;","	p4 *= taylorInvSqrt(dot(p4,p4));","","	vec3 m0 = max(0.6 - vec3(dot(x0,x0), dot(x1,x1), dot(x2,x2)), 0.0);","	vec2 m1 = max(0.6 - vec2(dot(x3,x3), dot(x4,x4)            ), 0.0);","	m0 = m0 * m0;","	m1 = m1 * m1;","	return 49.0 * (dot(m0*m0, vec3(dot(p0, x0), dot(p1, x1), dot(p2, x2))) + dot(m1*m1, vec2(dot(p3, x3), dot(p4, x4))));","}"].join("\n")}),define("famous-gl/Camera",["require","exports","module","famous/Engine","famous-utils/Utils","famous/Matrix","famous-math/Vector","famous-math/Quaternion","famous/EventHandler"],function(t,i,e){function s(){this.eventInput=new u,this.eventOutput=new u,u.setInputHandler(this,this.eventInput),u.setOutputHandler(this,this.eventOutput),this.renderMatrix=r.identity,this.doubleClickToReset=!0,this.touchTime=(new Date).getTime(),this.clickTime=(new Date).getTime(),this.deltaTime=200,this.viewWidth=n.getWidth(),this.viewHeight=n.getHeight(),this.radius=Math.max(this.viewWidth,this.viewHeight),this.center=new a(.5*this.viewWidth,.5*this.viewHeight,0),this.axis=new a(0,1,0),this.theta=0,this.flipX=1,this.flipY=1,this.flipZ=1,this.t1=new a,this.t2=new a,this.pt1=new a,this.pt2=new a,this.damping=.98,this.zAcc=0,this.zVel=0,this.dt=0,this.pdt=0,this.distance=-100,this.position=new a(0,0,this.distance),this.rotation=new a(0,0,0),this.e_mtx=r.identity,this.q_rot=new h,this.q_mtx=r.identity,this.quat=new h,this.d_mtx=r.identity,this.sensitivityRotation=4,this.sensitivityZoom=3,this.touchDown=!1,this.mouseDown=!1,this.callbacks={},this.bindEvents(),this.updateMatrix()}var o=t("famous/Engine"),n=t("famous-utils/Utils"),r=t("famous/Matrix"),a=t("famous-math/Vector"),h=t("famous-math/Quaternion"),u=t("famous/EventHandler");s.prototype.bindEvents=function(){this.callbacks.prerender=this._update.bind(this),this.callbacks.touchstart=this.touchstart.bind(this),this.callbacks.touchmove=this.touchmove.bind(this),this.callbacks.touchend=this.touchend.bind(this),this.callbacks.mousedown=this.mousedown.bind(this),this.callbacks.mousemove=this.mousemove.bind(this),this.callbacks.mouseup=this.mouseup.bind(this),this.callbacks.mousewheel=this.mousewheel.bind(this),this.callbacks.wheel=this.mousewheel.bind(this),this.callbacks.resize=this.resize.bind(this);for(var t=Object.keys(this.callbacks),i=0;i<t.length;i++)this.eventInput.on(t[i],this.callbacks[t[i]]);o.pipe(this)},s.prototype.unbindEvents=function(){for(var t=Object.keys(this.callbacks),i=0;i<t.length;i++)this.eventInput.unbind(t[i],this.callbacks[t[i]]);o.unpipe(this)},s.prototype._update=function(){this.update(),!this.mouseDown&&!this.touchDown&&this.theta>.001&&(this.quat.makeFromAngleAndAxis(this.theta*this.sensitivityRotation,this.axis),this.q_rot=this.q_rot.multiply(this.quat),this.q_mtx=this.q_rot.getMatrix(),this.updateMatrix(),this.theta*=this.damping)},s.prototype.update=function(){},s.prototype.setFlipX=function(t){this.flipX=t?-1:1},s.prototype.setFlipY=function(t){this.flipY=t?-1:1},s.prototype.setFlipZ=function(t){this.flipZ=t?-1:1},s.prototype.setSensitivityZoom=function(t){this.sensitivityZoom=t},s.prototype.setSensitivityRotation=function(t){this.sensitivityRotation=t},s.prototype.setDistance=function(t){this.distance=t,this.position.z=this.distance,this.setPosition(this.position)},s.prototype.getDistance=function(){return this.position.z},s.prototype.setPosition=function(t){this.position.set(t),this.updateMatrix()},s.prototype.applyQuaternionRotation=function(t){this.q_rot=this.q_rot.multiply(t),this.q_mtx=this.q_rot.getMatrix(),this.updateMatrix()},s.prototype.applyEulerRotation=function(t,i,e){this.rotation.setXYZ(t,i,e),this.e_mtx=r.rotate(t,i,e),this.updateMatrix()},s.prototype.updateMatrix=function(){this.renderMatrix=r.move(r.multiply(this.q_mtx,this.e_mtx),this.position.toArray())},s.prototype.getRotationMatrix=function(){return this.q_mtx},s.prototype.getMatrix=function(){return this.renderMatrix},s.prototype.reset=function(){this.theta=0,this.q_rot.clear(),this.q_mtx=this.d_mtx,this.position.clear(),this.position.setXYZ(0,0,this.distance),this.updateMatrix()},s.prototype.setDefaultMatrix=function(t){this.d_mtx=t},s.prototype.clickCheckForCameraRestart=function(){var t=(new Date).getTime();t-this.clickTime<this.deltaTime&&this.doubleClickToReset&&this.reset(),this.clickTime=t},s.prototype.touchCheckForCameraRestart=function(){var t=(new Date).getTime();t-this.touchTime<this.deltaTime&&this.doubleClickToReset&&this.reset(),this.touchTime=t},s.prototype.touchstart=function(t){1==t.touches.length?(this.touchDown=!0,this.touchCheckForCameraRestart(),this.theta=0,this.t1.clear(),this.pt1.clear(),this.quat.clear(),this.setArcBallVector(t.touches[0].clientX,t.touches[0].clientY)):2==t.touches.length&&(this.touchDown=!0,this.t1.setXYZ(t.touches[0].clientX,t.touches[0].clientY,0),this.t2.setXYZ(t.touches[1].clientX,t.touches[1].clientY,0),this.pt1.set(this.t1),this.pt2.set(this.t2),this.dt=n.distance(this.t1.x,this.t1.y,this.t2.x,this.t2.y),this.pdt=this.dt)},s.prototype.touchmove=function(t){1==t.touches.length&&this.touchDown?(this.setArcBallVector(t.touches[0].clientX,t.touches[0].clientY),this.updateArcBallRotation()):2==t.touches.length&&(this.t1.setXYZ(t.touches[0].clientX,t.touches[0].clientY,0),this.t2.setXYZ(t.touches[1].clientX,t.touches[1].clientY,0),this.dt=n.distance(this.t1.x,this.t1.y,this.t2.x,this.t2.y),this.position.z+=this.flipZ*(this.dt-this.pdt)*this.sensitivityZoom,this.updateMatrix(),this.pt1.set(this.t1),this.pt2.set(this.t2),this.pdt=this.dt)},s.prototype.touchend=function(t){0===t.touches.length?(this.touchDown=!1,this.t1.clear(),this.pt1.clear(),this.quat.clear()):1==t.touches.length&&(this.t1.clear(),this.pt1.clear(),this.t2.clear(),this.pt2.clear(),this.dt=0,this.pdt=0)},s.prototype.setArcBallVector=function(t,i){this.pt1.set(this.t1),this.t1.clear(),this.t1.x=-1*this.flipX*(t-this.center.x)/this.radius,this.t1.y=-1*this.flipY*(i-this.center.y)/this.radius;var e=this.t1.norm();e>1?this.t1.normalize(1,this.t1):this.t1.z=Math.sqrt(1-e)},s.prototype.updateArcBallRotation=function(){this.theta=Math.acos(this.t1.dot(this.pt1)),this.axis=this.pt1.cross(this.t1,this.axis),this.quat.makeFromAngleAndAxis(this.theta*this.sensitivityRotation,this.axis),this.q_rot=this.q_rot.multiply(this.quat),this.q_mtx=this.q_rot.getMatrix(),this.updateMatrix()},s.prototype.mousemove=function(t){this.mouseDown&&(this.setArcBallVector(t.clientX,t.clientY),this.updateArcBallRotation())},s.prototype.mousedown=function(t){this.mouseDown=!0,this.clickCheckForCameraRestart(),this.theta=0,this.t1.clear(),this.pt1.clear(),this.quat.clear(),this.setArcBallVector(t.clientX,t.clientY)},s.prototype.mouseup=function(){this.mouseDown=!1},s.prototype.mousewheel=function(t){this.position.z+=.05*this.flipZ*n.limit(t.wheelDeltaY||-t.deltaY,-100,100)*this.sensitivityZoom,this.updateMatrix()},s.prototype.resize=function(){this.viewWidth=n.getWidth(),this.viewHeight=n.getHeight(),this.center=new a(.5*this.viewWidth,.5*this.viewHeight,0),this.radius=Math.max(this.viewWidth,this.viewHeight)},s.prototype.setDamping=function(t){this.damping=t},s.prototype.render=function(t){return{transform:this.renderMatrix,origin:[.5,.5],target:t}},e.exports=s}),define("famous-gl/Shader",["require","exports","module"],function(t,i,e){function s(t){this.options={context:void 0},this.setOptions(t),this.gl=this.options.context}s.prototype.setOptions=function(t){for(var i in t)t.hasOwnProperty(i)&&(this.options[i]=t[i])},e.exports=s}),define("famous-modifiers/Camera",["require","exports","module","famous/Transitionable","famous/Matrix","famous/Utility"],function(t,i,e){function s(t){this._renderMatrix=r.identity,this._scaleState=new n([1,1,1]),this._skewState=new n([0,0,0]),this._rotateState=new n([0,0,0]),this._translateState=new n([0,0,0]),this._dirty=!1,t&&this.lookAt(t)}function o(){var t=r.scale.apply(this,this._scaleState.get()),i=r.skew.apply(this,this._skewState.get()),e=r.rotate.apply(this,this._rotateState.get()),s=r.move(r.multiply(t,i,e),this._translateState.get());return r.inverse(s)}var n=t("famous/Transitionable"),r=t("famous/Matrix"),a=t("famous/Utility");s.prototype.halt=function(){this._scaleState.halt(),this._skewState.halt(),this._rotateState.halt(),this._translateState.halt()},s.prototype.getScale=function(){return this._scaleState.get()},s.prototype.setScale=function(t,i,e){return this._dirty=!0,this._scaleState.set(t,i,e)},s.prototype.getSkew=function(){return this._skewState.get()},s.prototype.setSkew=function(t,i,e){return this._dirty=!0,this._skewState.set(t,i,e)},s.prototype.getRotation=function(){return this._rotateState.get()},s.prototype.setRotation=function(t,i,e){return this._dirty=!0,this._rotateState.set(t,i,e)},s.prototype.getSpin=s.prototype.getRotation,s.prototype.setSpin=s.prototype.setRotation,s.prototype.getPos=function(){return this._translateState.get()},s.prototype.setPos=function(t,i,e){return this._dirty=!0,this._translateState.set(t,i,e)},s.prototype.lookAt=function(t,i,e){var s=void 0;e&&(s=a.after(4,e)),this.halt();var o=r.interpret(t);this.setScale(o.scale,i,s),this.setSkew(o.skew,i,s),this.setRotation(o.rotate,i,s),this.setPos(o.translate,i,s)},s.prototype.render=function(t){return this._dirty|=this._scaleState.isActive()||this._skewState.isActive()||this._rotateState.isActive()||this._translateState.isActive(),this._dirty&&(this._renderMatrix=o.call(this),this._dirty=!1),{transform:this._renderMatrix,group:!0,target:t}},e.exports=s}),define("famous-modifiers/Draggable",["require","exports","module","famous/Matrix","famous-sync/MouseSync","famous-sync/TouchSync","famous-sync/GenericSync","famous/Transitionable","famous/EventHandler"],function(t,i,e){function s(t){this.options=Object.create(s.DEFAULT_OPTIONS),t&&this.setOptions(t),this._positionState=new f([0,0]),this._cursorPos=[0,0],this._active=!0,this.sync=new l(function(){return this._cursorPos}.bind(this),{scale:this.options.scale,syncClasses:[p,c]}),this.eventOutput=new d,d.setInputHandler(this,this.sync),d.setOutputHandler(this,this.eventOutput),a.call(this)}function o(){var t=this.getPosition();this._cursorPos=t.slice(),this.eventOutput.emit("dragstart",{p:t})}function n(t){this._active&&(this.setPosition(h.call(this,t.p),this.options.transition),this._cursorPos=t.p),this.eventOutput.emit("dragmove",{p:this.getPosition()})}function r(){this.eventOutput.emit("dragend",{p:this.getPosition()})}function a(){this.sync.on("start",o.bind(this)),this.sync.on("update",n.bind(this)),this.sync.on("end",r.bind(this))}function h(t){var i=this.options,e=i.projection,s=i.maxX,o=i.maxY,n=i.snapX,r=i.snapY,a=e&m.x?t[0]:0,h=e&m.y?t[1]:0;return n>0&&(a-=a%n),r>0&&(h-=h%r),a=Math.max(Math.min(a,s),-s),h=Math.max(Math.min(h,o),-o),[a,h]}var u=t("famous/Matrix"),p=t("famous-sync/MouseSync"),c=t("famous-sync/TouchSync"),l=t("famous-sync/GenericSync"),f=t("famous/Transitionable"),d=t("famous/EventHandler"),m={x:1,y:2};s.DEFAULT_OPTIONS={projection:m.x|m.y,scale:1,maxX:1/0,maxY:1/0,snapX:0,snapY:0,transition:{duration:0}},s.prototype.setOptions=function(t){var i=this.options;if(void 0!==t.projection){var e=t.projection;this.options.projection=0,["x","y"].forEach(function(t){-1!=e.indexOf(t)&&(i.projection|=m[t])})}void 0!==t.scale&&(i.scale=t.scale),void 0!==t.maxX&&(i.maxX=t.maxX),void 0!==t.maxY&&(i.maxY=t.maxY),void 0!==t.snapX&&(i.snapX=t.snapX),void 0!==t.snapY&&(i.snapY=t.snapY),void 0!==t.transition&&(i.transition=t.transition)},s.prototype.getPosition=function(){return this._positionState.get()},s.prototype.setPosition=function(t,i,e){this._positionState.isActive()&&this._positionState.halt(),this._positionState.set(t,i,e)},s.prototype.activate=function(){this._active=!0},s.prototype.deactivate=function(){this._active=!1},s.prototype.toggle=function(){this._active=!this._active},s.prototype.render=function(t){var i=this.getPosition();return{transform:u.translate(i[0],i[1]),target:t}},e.exports=s}),define("famous-mvc/Ajax",["require","exports","module"],function(t,i,e){function s(t){var i=[];for(var e in t)i.push(encodeURIComponent(e)+"="+encodeURIComponent(t[e]));return i.join("&")}var o=function(t){var i={url:"",progress:void 0,success:void 0,error:void 0,data:void 0,type:"GET"};for(var e in t)i[e]=t[e];var o,n=new XMLHttpRequest;n.onreadystatechange=function(){4==this.readyState&&i.success&&i.success(this.responseText)},i.progress&&(n.onprogress=i.progress),i.error&&(n.onerror=i.error),i.data&&(o=s(i.data),i.url="GET"==i.type?i.url+o:i.url),n.open(i.type,i.url),n.send(o?o:null)};e.exports=o}),define("famous-physics/constraints/Collision",["require","exports","module","famous-physics/constraints/Constraint","../math/Vector","famous/EventHandler"],function(t,i,e){function s(t){this.opts={restitution:.5},t&&this.setOpts(t),this.eventOutput=new r,r.setOutputHandler(this,this.eventOutput),this.n=new n,this.vRel=new n,this.I=new n,this.disp=new n}var o=t("famous-physics/constraints/Constraint"),n=t("../math/Vector"),r=t("famous/EventHandler");s.prototype=Object.create(o.prototype),s.prototype.constructor=o,s.prototype.setOpts=function(t){for(var i in t)this.opts[i]=t[i]},s.prototype.applyConstraint=function(t,i){if(void 0!==i)for(var e=i.p,s=i.r,o=i.v,n=this.n,r=this.I,a=this.vRel,h=this.disp,u=this.opts.restitution,p=0;p<t.length;p++){var c=t[p];if(i!=c){var l=c.p,f=c.r,d=i.mInv;h.set(e.sub(l));var m=h.norm(),g=s+f-m;if(g>0){n.set(h.normalize());var v={target:c,source:i,overlap:g,normal:n};
this.eventOutput.emit("preCollision",v),this.eventOutput.emit("collision",v);var y=c.v,x=c.mInv;a.set(o.sub(y)),r.set(n.mult((1+u)*a.dot(n)/(d+x))),o.sub(r.mult(d),o),e.add(n.mult(g/2),e),y.add(r.mult(x),y),l.add(n.mult(-g/2),l),this.eventOutput.emit("postCollision",v)}}}},e.exports=s}),define("famous-physics/math/vector",["require","exports","module"],function(t,i,e){function s(t,i,e){return 1===arguments.length?this.set(t):(this.x=t||0,this.y=i||0,this.z=e||0),this}var o=new s(0,0,0);s.prototype.add=function(t,i){return i=i||o,i.setXYZ(this.x+(t.x||0),this.y+(t.y||0),this.z+(t.z||0))},s.prototype.sub=function(t,i){return i=i||o,i.setXYZ(this.x-t.x,this.y-t.y,this.z-t.z)},s.prototype.mult=function(t,i){return i=i||o,i.setXYZ(t*this.x,t*this.y,t*this.z)},s.prototype.div=function(t,i){return this.mult(1/t,i)},s.prototype.cross=function(t,i){return i=i||o,i.setXYZ(this.y*t.z-this.z*t.y,this.z*t.x-this.x*t.z,this.x*t.y-this.y*t.x)},s.prototype.equals=function(t){return t.x==this.x&&t.y==this.y&&t.z==this.z},s.prototype.rotateX=function(t,i){i=i||o;var e=this.x,s=this.y,n=this.z,r=Math.cos(t),a=Math.sin(t);return i.setXYZ(e,-n*a+s*r,n*r-s*a)},s.prototype.rotateY=function(t,i){i=i||o;var e=this.x,s=this.y,n=this.z,r=Math.cos(t),a=Math.sin(t);return i.setXYZ(-n*a+e*r,s,n*r+e*a)},s.prototype.rotateZ=function(t,i){i=i||o;var e=this.x,s=this.y,n=this.z,r=Math.cos(t),a=Math.sin(t);return i.setXYZ(-s*a+e*r,s*r+e*a,n)},s.prototype.dot=function(t){return this.x*t.x+this.y*t.y+this.z*t.z},s.prototype.normSquared=function(){return this.dot(this)},s.prototype.norm=function(){return Math.sqrt(this.normSquared())},s.prototype.normalize=function(t,i){t=void 0!==t?t:1,i=i||o;var e=1e-7,s=this.norm();return Math.abs(s)>e?this.mult(t/s,i):i.setXYZ(t,0,0)},s.prototype.clone=function(){return new s(this)},s.prototype.isZero=function(){return!(this.x||this.y||this.z)},s.prototype.set=function(t){return t instanceof Array?this.setFromArray(t):(this.x=t.x,this.y=t.y,this.z=t.z||0),this!==o&&o.clear(),this},s.prototype.setFromArray=function(t){this.x=t[0],this.y=t[1],this.z=t[2]||0},s.prototype.put=function(t){t.set(o)},s.prototype.setXYZ=function(t,i,e){return o.clear(),this.x=t,this.y=i,this.z=e,this},s.prototype.clear=function(){this.x=0,this.y=0,this.z=0},s.prototype.cap=function(t,i){if(1/0===t)return this;i=i||o;var e=this.norm();return e>t?this.normalize(t,i):this},s.prototype.project=function(t,i){return i=i||o,t.mult(this.dot(t),i)},s.prototype.reflectAcross=function(t,i){return i=i||o,t.normalize(),this.sub(this.project(t).mult(2),i)},s.prototype.toArray=function(){return[this.x,this.y,this.z]},s.prototype.get=function(){return this.toArray()},e.exports=s}),define("famous-physics/constraints/CollisionJacobian",["require","exports","module","famous-physics/constraints/Constraint","famous-physics/math/vector","famous/EventHandler"],function(t,i,e){function s(t){this.opts={k:.5,restitution:.5},t&&this.setOpts(t),this.eventOutput=new r,r.setOutputHandler(this,this.eventOutput),this.n=new n,this.pDiff=new n,this.vDiff=new n,this.impulse1=new n,this.impulse2=new n,this.slop=0}var o=t("famous-physics/constraints/Constraint"),n=t("famous-physics/math/vector"),r=t("famous/EventHandler");s.prototype=Object.create(o.prototype),s.prototype.constructor=o,s.prototype.setOpts=function(t){for(var i in t)this.opts[i]=t[i]},s.prototype.applyConstraint=function(t,i,e){if(void 0!==i)for(var s=i.v,o=i.p,n=i.mInv,r=i.r,a=this.opts.k,h=this.n,u=this.pDiff,p=this.vDiff,c=this.impulse1,l=this.impulse2,f=i.restitution,d=0;d<t.length;d++){var m=t[d];if(m!=i){var g=m.v,v=m.p,y=m.mInv,x=m.r,S=m.restitution,b=void 0!==this.opts.restitution?this.opts.restitution:Math.sqrt(f*S);u.set(v.sub(o)),p.set(g.sub(s));var w=u.norm(),T=w-(r+x),M=1/(n+y),z=0;if(0>T){h.set(u.normalize());var _={target:m,source:i,overlap:T,normal:h};this.eventOutput.emit("preCollision",_),this.eventOutput.emit("collision",_);var C=T<=this.slop?((1+b)*h.dot(p)+a/e*(T-this.slop))/(z+e/M):(1+b)*h.dot(p)/(z+e/M);h.mult(e*C).put(c),c.mult(-1).put(l),i.applyImpulse(c),m.applyImpulse(l),o.add(h.mult(T/2),o),v.add(h.mult(-T/2),v),this.eventOutput.emit("postCollision",_)}}}},e.exports=s}),define("famous-physics/constraints/Curve",["require","exports","module","famous-physics/constraints/Constraint","../math/Vector"],function(t,i,e){function s(t){this.opts={f:function(t,i){return 100*Math.sin(t/100)-i},df:void 0,g:function(t,i,e){return e},dg:void 0,dampingRatio:0,period:0},t&&this.setOpts(t),this.J=new n,this.impulse=new n}var o=t("famous-physics/constraints/Constraint"),n=t("../math/Vector");s.prototype=Object.create(o.prototype),s.prototype.constructor=o,s.prototype.setOpts=function(t){for(var i in t)this.opts[i]=t[i]},s.prototype.applyConstraint=function(t,i,e){for(var s=this.impulse,o=this.J,n=this.opts.f,r=this.opts.f,a=this.opts.df,h=this.opts.dg,u=0,p=0;p<t.length;p++){var c=t[p],l=c.v,f=c.p,d=c.m;if(0==this.opts.period)var m=0,g=1;else var v=4*d*Math.PI*this.opts.dampingRatio/this.opts.period,y=4*d*Math.PI*Math.PI/(this.opts.period*this.opts.period),m=1/(v+e*y),g=e*y/(v+e*y);if(void 0===a){var x=1e-7,S=n(f.x,f.y,f.z),b=(n(f.x+x,f.y,f.z)-S)/x,w=(n(f.x,f.y+x,f.z)-S)/x,T=(n(f.x,f.y,f.z+x)-S)/x,M=r(f.x,f.y,f.z),z=(r(f.x+x,f.y,f.z)-M)/x,_=(r(f.x,f.y+x,f.z)-M)/x,C=(r(f.x,f.y,f.z+x)-M)/x;o.setXYZ(b+z,w+_,T+C)}else{var P=a(f.x,f.y,f.z),O=h(f.x,f.y,f.z);o.setXYZ(P[0]+O[0],P[1]+O[1],P[2]+O[2])}var E=g/e*(n(f.x,f.y,f.z)+r(f.x,f.y,f.z)),k=-(o.dot(l)+E)/(m+e*o.normSquared()/d);s.set(o.mult(e*k)),c.applyImpulse(s),u+=Math.abs(k)}return u},s.prototype.setupSlider=function(t,i){i=i||t.opts.name,t.setOpts({value:this.opts[i]}),t.init(),t.on("change",function(t){this.opts[i]=t.value}.bind(this))},e.exports=s}),define("famous-physics/constraints/Distance",["require","exports","module","famous-physics/constraints/Constraint","../math/Vector"],function(t,i,e){function s(t){this.opts={length:0,anchor:void 0,dampingRatio:0,period:0},t&&this.setOpts(t),this.impulse=new n,this.n=new n,this.diffP=new n,this.diffV=new n}var o=t("famous-physics/constraints/Constraint"),n=t("../math/Vector");s.prototype=Object.create(o.prototype),s.prototype.constructor=o,s.prototype.setOpts=function(t){void 0!==t.anchor&&(t.anchor.p instanceof n&&(this.opts.anchor=t.anchor.p),t.anchor instanceof n&&(this.opts.anchor=t.anchor),t.anchor instanceof Array&&(this.opts.anchor=new n(t.anchor))),void 0!==t.length&&(this.opts.length=t.length),void 0!==t.dampingRatio&&(this.opts.dampingRatio=t.dampingRatio),void 0!==t.period&&(this.opts.period=t.period)},s.prototype.setAnchor=function(t){void 0===this.opts.anchor&&(this.opts.anchor=new n),this.opts.anchor.set(t)},s.prototype.applyConstraint=function(t,i,e){var s=this.n,o=this.diffP,n=this.diffV,r=this.impulse;if(i)var a=i.p,h=i.mInv,u=i.v;else var a=this.opts.anchor,h=0;for(var p=this.opts.length,c=0,l=0;l<t.length;l++){var f=t[l],d=f.v,m=f.p,g=f.mInv;o.set(m.sub(a)),s.set(o.normalize());var v=o.norm()-p;i?n.set(d.sub(u)):n.set(d);var y=1/(g+h);if(0==this.opts.period)var x=0,S=1;else var b=4*y*Math.PI*this.opts.dampingRatio/this.opts.period,w=4*y*Math.PI*Math.PI/(this.opts.period*this.opts.period),x=1/(b+e*w),S=e*w/(b+e*w);var T=S/e*v,M=-(s.dot(n)+T)/(x+e/y);r.set(s.mult(e*M)),f.applyImpulse(r),i&&i.applyImpulse(r.mult(-1)),c+=Math.abs(M)}return c},e.exports=s}),define("famous-physics/constraints/Distance1D",["require","exports","module","famous-physics/constraints/Constraint","../math/Vector"],function(t,i,e){function s(t){this.opts={length:0,anchor:void 0,dampingRatio:0,period:0},t&&this.setOpts(t),this.impulse=new n}var o=t("famous-physics/constraints/Constraint"),n=t("../math/Vector");s.prototype=Object.create(o.prototype),s.prototype.constructor=o,s.prototype.setOpts=function(t){for(var i in t)this.opts[i]=t[i]},s.prototype.applyConstraint=function(t,i,e){var s,o,n=this.impulse;if(i)var r=i.p.x,a=i.mInv,h=i.v.x;else var r=this.opts.anchor,a=0;for(var u=this.opts.length,p=this.opts.period,c=this.opts.dampingRatio,l=0,f=0;f<t.length;f++){var d=t[f],m=d.v.x,g=d.p.x,v=d.mInv;s=g-r;var y=s-u;o=i?m-h:m;var x=1/(v+a);if(0==p)var S=0,b=1;else var w=4*x*Math.PI*c/p,T=4*x*Math.PI*Math.PI/(p*p),S=1/(w+e*T),b=e*T/(w+e*T);var M=b/e*y,z=-(o+M)/(S+e/x);n.setXYZ(e*z,0,0),d.applyImpulse(n),i&&i.applyImpulse(n.mult(-1)),l+=Math.abs(z)}return l},s.prototype.setupSlider=function(t,i){i=i||t.opts.name,t.setOpts({value:this.opts[i]}),t.init instanceof Function&&t.init(),t.on("change",function(t){this.opts[i]=t.value}.bind(this))},e.exports=s}),define("famous-physics/constraints/Rod",["require","exports","module","famous-physics/constraints/Constraint","../math/Vector"],function(t,i,e){function s(t){this.opts={length:0,anchor:void 0,stiffness:1},t&&this.setOpts(t),this.disp=new n,this.push=new n}var o=t("famous-physics/constraints/Constraint"),n=t("../math/Vector");s.prototype=Object.create(o.prototype),s.prototype.constructor=o,s.prototype.setOpts=function(t){void 0!==t.anchor&&(t.anchor.p instanceof n&&(this.opts.anchor=t.anchor.p),t.anchor instanceof Array&&(this.opts.anchor=new n(t.anchor)),delete t.anchor);for(var i in t)this.opts[i]=t[i]},s.prototype.applyConstraint=function(t,i,e){var s=this.opts,o=this.disp,n=this.push,r=s.length,a=s.stiffness,h=s.anchor||i.p,u=t[0],p=u.p;o.set(p.sub(h));var c=o.norm(),l=(r-c)/c;Math.abs(l)>0&&(o.mult(.5*l*a,n),u.immunity||(p.add(n,p),u.v.add(n.div(e),u.v)),i&&!i.immunity&&(i.p.sub(n,i.p),i.v.sub(n.div(e),i.v)))},e.exports=s}),define("famous-physics/constraints/Rope",["require","exports","module","famous-physics/constraints/Constraint","famous-physics/math/Vector"],function(t,i,e){function s(t){this.opts={length:0,anchor:void 0,dampingRatio:0,period:0},t&&this.setOpts(t),this.impulse=new n,this.n=new n,this.diffP=new n,this.diffV=new n}var o=t("famous-physics/constraints/Constraint"),n=t("famous-physics/math/Vector");s.prototype=Object.create(o.prototype),s.prototype.constructor=o,s.prototype.setOpts=function(t){void 0!==t.anchor&&(t.anchor instanceof n&&(this.opts.anchor=t.anchor),t.anchor.p instanceof n&&(this.opts.anchor=t.anchor.p),t.anchor instanceof Array&&(this.opts.anchor=new n(t.anchor))),void 0!==t.length&&(this.opts.length=t.length),void 0!==t.dampingRatio&&(this.opts.dampingRatio=t.dampingRatio),void 0!==t.period&&(this.opts.period=t.period)},s.prototype.applyConstraint=function(t,i,e){var s=this.n,o=this.diffP,n=this.diffV,r=this.impulse;if(i)var a=i.p,h=i.mInv,u=i.v;else var a=this.opts.anchor,h=0;for(var p=this.opts.length,c=0,l=0;l<t.length;l++){var f=t[l],d=f.v,m=f.p,g=f.mInv;o.set(m.sub(a));var v=o.norm()-p;if(0>v)return;s.set(o.normalize()),i?n.set(d.sub(u)):n.set(d);var y=1/(g+h);if(0==this.opts.period)var x=0,S=1;else var b=4*y*Math.PI*this.opts.dampingRatio/this.opts.period,w=4*y*Math.PI*Math.PI/(this.opts.period*this.opts.period),x=1/(b+e*w),S=e*w/(b+e*w);var T=S/e*v,M=-(s.dot(n)+T)/(x+e/y);r.set(s.mult(e*M)),f.applyImpulse(r),i&&i.applyImpulse(r.mult(-1)),c+=Math.abs(M)}return c},s.prototype.setupSlider=function(t,i){i=i||t.opts.name,t.setOpts({value:this.opts[i]}),t.init(),t.on("change",function(t){this.opts[i]=t.value}.bind(this))},e.exports=s}),define("famous-physics/constraints/Surface",["require","exports","module","famous-physics/constraints/Constraint","../math/Vector"],function(t,i,e){function s(t){this.opts={f:void 0,df:void 0,dampingRatio:0,period:0},t&&this.setOpts(t),this.J=new n,this.impulse=new n,this.eps=1e-7}var o=t("famous-physics/constraints/Constraint"),n=t("../math/Vector");s.prototype=Object.create(o.prototype),s.prototype.constructor=o,s.prototype.setOpts=function(t){for(var i in t)this.opts[i]=t[i]},s.prototype.applyConstraint=function(t,i,e){for(var s=this.impulse,o=this.J,n=this.opts.f,r=this.opts.df,a=0,h=0;h<t.length;h++){var u=t[h],p=u.v,c=u.p,l=u.m;if(0==this.opts.period)var f=0,d=1;else var m=4*l*Math.PI*this.opts.dampingRatio/this.opts.period,g=4*l*Math.PI*Math.PI/(this.opts.period*this.opts.period),f=1/(m+e*g),d=e*g/(m+e*g);if(void 0===r){var v=this.eps,y=n(c.x,c.y,c.z),x=(n(c.x+v,c.y,c.z)-y)/v,S=(n(c.x,c.y+v,c.z)-y)/v,b=(n(c.x,c.y,c.z+v)-y)/v;o.setXYZ(x,S,b)}else o.setXYZ.apply(o,r(c.x,c.y,c.z));var w=d/e*n(c.x,c.y,c.z),T=-(o.dot(p)+w)/(f+e*o.normSquared()/l);s.set(o.mult(e*T)),u.applyImpulse(s),a+=Math.abs(T)}return a},s.prototype.setupSlider=function(t,i){i=i||t.opts.name,t.setOpts({value:this.opts[i]}),t.init(),t.on("change",function(t){this.opts[i]=t.value}.bind(this))},e.exports=s}),define("famous-physics/constraints/Walls",["require","exports","module","famous-physics/constraints/Constraint","famous-physics/math/Vector","famous-physics/constraints/Wall"],function(t,i,e){function s(t){this.opts={sides:s.TWO_DIMENSIONAL,size:[window.innerWidth,window.innerHeight,0],origin:[.5,.5,.5],k:0,restitution:.5,onContact:s.ON_CONTACT.REFLECT},this.sides={},t&&this.setOpts(t)}function o(t,i,e){var o;switch(parseInt(t)){case s.LEFT:o=i[0]*e[0];break;case s.TOP:o=i[1]*e[1];break;case s.FRONT:o=i[2]*e[2];break;case s.RIGHT:o=i[0]*(1-e[0]);break;case s.BOTTOM:o=i[1]*(1-e[1]);break;case s.BACK:o=i[2]*(1-e[2])}return o}var n=t("famous-physics/constraints/Constraint"),r=t("famous-physics/math/Vector"),a=t("famous-physics/constraints/Wall");s.prototype=Object.create(n.prototype),s.prototype.constructor=n,s.LEFT=0,s.RIGHT=1,s.TOP=2,s.BOTTOM=3,s.FRONT=4,s.BACK=5;var h={0:new r(1,0,0),1:new r(-1,0,0),2:new r(0,1,0),3:new r(0,-1,0),4:new r(0,0,1),5:new r(0,0,-1)};s.TWO_DIMENSIONAL=[s.LEFT,s.RIGHT,s.TOP,s.BOTTOM],s.THREE_DIMENSIONAL=[s.LEFT,s.RIGHT,s.TOP,s.BOTTOM,s.FRONT,s.BACK],s.ON_CONTACT=a.ON_CONTACT,s.prototype.setOpts=function(t){var i=!1;void 0!==t.restitution&&this.setOptsForEach({restitution:t.restitution}),void 0!==t.k&&this.setOptsForEach({k:t.k}),void 0!==t.size&&(i=!0),void 0!==t.sides&&this.createSides(t.sides),void 0!==t.onContact&&this.setOnContact(t.onContact),void 0!==t.origin&&(i=!0),i&&this.setSize(t.size,t.origin)},s.prototype.createSides=function(t){this.sides={},this.opts.sides=[];for(var i=0;i<t.length;i++){var e=t[i];this.sides[i]=new a({n:h[e].clone(),d:o(e,this.opts.size,this.opts.origin)}),this.opts.sides[i]=e}},s.prototype.setSize=function(t,i){i=i||this.opts.origin,i.length<3&&(i[2]=.5),this.forEach(function(e,s){var n=o(s,t,i);e.setOpts({d:n})}),this.opts.size=t,this.opts.origin=i},s.prototype.setOptsForEach=function(t){this.forEach(function(i){i.setOpts(t)});for(var i in t)this.opts[i]=t[i]},s.prototype.setOnContact=function(t){this.forEach(function(i){i.setOpts({onContact:t})});var i=this.sides;switch(t){case s.ON_CONTACT.REFLECT:break;case s.ON_CONTACT.WRAP:this.forEach(function(e){e.setOpts({onContact:t}),e.on("wrap",function(t){var o=t.particle,n=e.opts.n,r=e.opts.d;switch(e){case s.RIGHT:var a=i.LEFT.opts.d;break;case s.LEFT:var a=i.TOP.opts.d;break;case s.TOP:var a=i.BOTTOM.opts.d;break;case s.BOTTOM:var a=i.TOP.opts.d}o.p.add(n.mult(r+a),o.p)})});break;case s.ON_CONTACT.ABSORB:}this.opts.onContact=t},s.prototype.applyConstraint=function(t,i,e){this.forEach(function(s){s.applyConstraint(t,i,e)})},s.prototype.forEach=function(t){for(var i in this.sides)t(this.sides[i],i)},s.prototype.rotateZ=function(t){this.forEach(function(i){var e=i.opts.n;e.rotateZ(t).put(e)})},s.prototype.rotateX=function(t){this.forEach(function(i){var e=i.opts.n;e.rotateX(t).put(e)})},s.prototype.rotateY=function(t){this.forEach(function(i){var e=i.opts.n;e.rotateY(t).put(e)})},e.exports=s}),define("famous-physics/math/matrix",["require","exports","module"],function(require,exports,module){function Matrix(t,i,e,s){this.nRows=t,this.nCols=i,this.values=e||[[]],s&&this.loop(s)}Matrix.prototype={loop:function(t){for(var i=this.values,e=0;e<this.nRows;e++){i[e]=[];for(var s=0;s<this.nCols;s++)i[e][s]=t(e,s)}return this},set:function(t){return this.values=t,this},create:function(t){return this.loop(t)},identity:function(){return this.loop(function(t,i){return t==i?1:0})},print:function(){for(var row=0;row<this.nRows;row++){for(var str="console.log(",col=0;col<this.nCols;col++)str+="this.values["+row+"]["+col+"].toFixed(1)",col<this.nCols-1&&(str+=",");str+=")",eval(str)}},rightMult:function(t,i){t.nRows!=this.nCols&&console.warn("cant multiply");for(var e=this.values,s=t.values,o=this.nRows,n=t.nCols,r=[],a=0;o>a;a++){r[a]=[];for(var h=0;n>h;h++){for(var u=0,p=0;p<this.nCols;p++)u+=e[a][p]*s[p][h];r[a][h]=u}}return i?i.set(r):new Matrix(o,n).set(r)},vMult:function(t){for(var i=t.length,e=[],s=0;s<this.nRows;s++){for(var o=0,n=0;i>n;n++)o+=this.values[s][n]*t[n];e[s]=o}return e},diag:function(t){var i=function(i,e){return i==e?t[i]:0};return this.loop(i)},transpose:function(t){var i=function(t,i){return this.values[i][t]}.bind(this);return t?t.loop(i):new Matrix(this.nCols,this.nRows,[[]],i)}},module.exports=Matrix}),define("famous-physics/math/GaussSeidel",["require","exports","module"],function(t,i,e){function s(t,i){this.numIterations=t||10,this.tolerance=i||1e-7,this.prevX=[],this.x=[]}function o(){for(var t=0,i=this.x.length,e=0;i>e;e++)t+=Math.pow(this.prevX[e]-this.x[e],2)/(this.x[e]*this.x[e]);return Math.sqrt(t)}s.prototype.solve=function(t,i){for(var e,s=this.numIterations,n=i.length,r=this.x,a=this.prevX,h=0;n>h;h++)this.x[h]=0;for(var u=0,p=1/0;s>u&&p>this.tolerance;){for(var h=0;n>h;h++){a[h]=r[h],e=0;for(var c=0;n>c;c++)c!=h&&(e+=t[h][c]*r[c]);r[h]=(i[h]-e)/t[h][h]}p=o(),u++}return r},e.exports=s}),define("famous-physics/constraints/joint",["require","exports","module","../math/matrix","../math/GaussSeidel","../math/Vector"],function(t,i,e){function s(t){this.opts={length:0},t&&this.setOpts(t);var i=10,e=1e-5;this.solver=new n(i,e)}var o=t("../math/matrix"),n=t("../math/GaussSeidel"),r=t("../math/Vector");s.prototype.getPosition=function(t,i,e){var s=2,n=1,a=[],h=[],u=[],p=[],c=[],l=t;a[0]=l.getVel(),h[0]=l.p,u[0]=l.mInv,p[0]=l.f,c[0]=l.m,a[1]=i.v,h[1]=i.p,u[1]=i.mInv,p[1]=i.f,c[1]=i.m;for(var f=[],d=0;n>d;d++){f[d]=[];for(var m=0;s>m;m++){var g;m==d?g=h[d].sub(h[d+1]):m==d+1&&(g=h[d+1].sub(h[d])),f[d][3*m+0]=g.x,f[d][3*m+1]=g.y,f[d][3*m+2]=g.z}}var v=new o(n,3*s);v.set(f);for(var y=[],d=0;n>d;d++){y[d]=[];for(var m=0;s>m;m++){var g;m==d?g=a[d].sub(a[d+1]):m==d+1&&(g=a[d+1].sub(a[d])),y[d][3*m+0]=g.x,y[d][3*m+1]=g.y,y[d][3*m+2]=g.z}}for(var x=[],S=[],b=0;s>b;b++)x[3*b+0]=u[b],x[3*b+1]=u[b],x[3*b+2]=u[b],S[3*b+0]=a[b].x,S[3*b+1]=a[b].y,S[3*b+2]=a[b].z;var w=new o(3*s,3*s).diag(x),T=new o(n,n);v.rightMult(w).rightMult(v.transpose(),T);for(var M=v.vMult(S),z=1,_=[],b=0;n>b;b++){var C=this.length,P=h[b+1].sub(h[b]).normSquared();_[b]=.5*(P-C*C)}for(var O=[],E=0;n>E;E++)O[E]=-M[E]-z/e*_[E];for(var k=this.solver.solve(T.values,O),I=v.transpose().vMult(k),A=[],b=0;s>b;b++)A[b]=new r(I[3*b+0],I[3*b+1],I[3*b+2]);for(var b=0;s>b;b++){var S=a[b],N=c[b],D=A[b];(0!=b||0!=l.id)&&(1==b&&0==l.id?S.add(D.sub(A[0]).div(N),S):S.add(D.div(N),S))}},s.prototype.getError=function(){},e.exports=s}),define("famous-physics/forces/Repulsion",["require","exports","module","famous-physics/forces/Force","famous-physics/math/Vector"],function(t,i,e){function s(t){this.opts={strength:1,anchor:void 0,radii:{min:0,max:1/0},cutoff:0,cap:1/0,decayFunction:s.DECAY_FUNCTIONS.GRAVITY},t&&this.setOpts(t),this.setOpts(t),this.disp=new n,o.call(this)}var o=t("famous-physics/forces/Force"),n=t("famous-physics/math/Vector");s.prototype=Object.create(o.prototype),s.prototype.constructor=o,s.DECAY_FUNCTIONS={LINEAR:function(t,i){return Math.max(1-1/i*t,0)},MORSE:function(t,i){var e=0==i?100:i,s=t+e*(1-Math.log(2));return Math.max(1-Math.pow(1-Math.exp(s/e-1),2),0)},INVERSE:function(t,i){return 1/(1-i+t)},GRAVITY:function(t,i){return 1/(1-i+t*t)}},s.prototype.setOpts=function(t){void 0!==t.anchor&&(t.anchor.p instanceof n&&(this.opts.anchor=t.anchor.p),t.anchor instanceof Array&&(this.opts.anchor=new n(t.anchor)),delete t.anchor);for(var i in t)this.opts[i]=t[i]},s.prototype.applyForce=function(t,i){var e=this.opts,s=this.force,o=this.disp,n=e.strength,r=e.anchor||i.p,a=e.cap,h=e.cutoff,u=e.radii.max,p=e.radii.min,c=e.decayFunction;if(0!=n)for(var l in t){var f=t[l];if(f!=i){var d=f.m,m=f.p;o.set(m.sub(r));var g=o.norm();u>g&&g>p&&(s.set(o.normalize(n*d*c(g,h)).cap(a)),f.applyForce(s))}}},e.exports=s}),define("famous-physics/forces/TorqueSpring",["require","exports","module","famous-physics/forces/Force","famous-physics/math/Vector"],function(t,i,e){function s(t){this.opts={period:300,dampingRatio:0,length:0,lMin:0,lMax:1/0,anchor:void 0,forceFunction:s.FORCE_FUNCTIONS.HOOK,callback:void 0,callbackTolerance:1e-7},t&&this.setOpts(t),this.torque=new h,this.init(),this._canFireCallback=void 0,a.call(this),this.disp=new h(0,0,0)}function o(t){this.forceFunction=t}function n(t){t.stiffness=Math.pow(2*Math.PI/t.period,2)}function r(t){t.damping=4*Math.PI*t.dampingRatio/t.period}var a=t("famous-physics/forces/Force"),h=t("famous-physics/math/Vector");s.prototype=Object.create(a.prototype),s.prototype.constructor=a,s.FORCE_FUNCTIONS={FENE:function(t,i){var e=.99*i,s=Math.max(Math.min(t,e),-e);return s/(1-s*s/(i*i))},HOOK:function(t){return t}},s.prototype.init=function(){var t=this.opts;o.call(this,t.forceFunction),n.call(this,t),r.call(this,t)},s.prototype.applyForce=function(t){for(var i=this.torque,e=this.opts,s=this.disp,o=e.stiffness,n=e.damping,r=e.length,a=e.anchor,h=0;h<t.length;h++){var u=t[h];s.set(a.sub(u.q));var p=s.norm()-r;if(0==p)return;var c=u.m;o*=c,n*=c,i.set(s.normalize(o*this.forceFunction(p,this.opts.lMax))),n&&i.add(u.w.mult(-n),i),u.applyTorque(i)}},s.prototype.setOpts=function(t){void 0!==t.anchor&&(t.anchor.p instanceof h&&(this.opts.anchor=t.anchor.p),t.anchor instanceof h&&(this.opts.anchor=t.anchor),t.anchor instanceof Array&&(this.opts.anchor=new h(t.anchor))),void 0!==t.period&&(this.opts.period=t.period),void 0!==t.dampingRatio&&(this.opts.dampingRatio=t.dampingRatio),void 0!==t.length&&(this.opts.length=t.length),void 0!==t.lMin&&(this.opts.lMin=t.lMin),void 0!==t.lMax&&(this.opts.lMax=t.lMax),void 0!==t.forceFunction&&(this.opts.forceFunction=t.forceFunction),void 0!==t.callback&&(this.opts.callback=t.callback),void 0!==t.callbackTolerance&&(this.opts.callbackTolerance=t.callbackTolerance),this.init()},e.exports=s}),define("famous-physics/forces/VectorField",["require","exports","module","famous-physics/forces/Force","../math/Vector"],function(t,i,e){function s(t){this.opts={strength:1,field:s.FIELDS.CONSTANT},t&&this.setOpts(t),this.setFieldOptions(this.opts.field),this.timeDependent=3==this.opts.field.length,this.tOrig=void 0,this.register=new n(0,0,0),o.call(this)}var o=t("famous-physics/forces/Force"),n=t("../math/Vector");s.prototype=Object.create(o.prototype),s.prototype.constructor=o,s.FIELDS={CONSTANT:function(t,i){return t.set(i.direction)},LINEAR:function(t,i){return t.set(t.mult(i.k))},RADIAL_GRAVITY:function(t){return t.set(t.mult(-1,t))},SPHERE_ATTRACTOR:function(t,i){return t.set(t.mult((i.radius-t.norm())/t.norm()))},POINT_ATTRACTOR:function(t,i){return t.set(i.p.sub(t))}},s.prototype.setOpts=function(t){for(var i in t)this.opts[i]=t[i]},s.prototype.evaluate=function(t,i){return this.register.set(t),this.opts.field(this.register,this.opts,i)},s.prototype.applyForce=function(t){var i,e=this.force;this.timeDependent?(this.tOrig&&(this.tOrig=Date.now()),i=.001*(Date.now()-this.tOrig)):i=void 0;for(var s=0;s<t.length;s++){var o=t[s];e.set(this.evaluate(o.p,i).mult(o.m*this.opts.strength)),o.applyForce(e)}},s.prototype.setFieldOptions=function(t){var i=s.FIELDS;switch(t){case i.CONSTANT:this.opts.direction||(this.opts.direction=new n(0,1,0));break;case i.POINT_ATTRACTOR:this.opts.p||(this.opts.p=new n(0,0,0));break;case i.SPHERE_ATTRACTOR:this.opts.radius||(this.opts.radius=1);break;case i.LINEAR:this.opts.k||(this.opts.k=1)}},e.exports=s}),define("famous-physics/forces/rotationalDrag",["require","exports","module","famous-physics/forces/Force","famous-physics/math/Vector"],function(t,i,e){function s(t){this.opts={strength:.01,forceFunction:s.FORCE_FUNCTIONS.LINEAR},t&&this.setOpts(t),o.call(this)}var o=t("famous-physics/forces/Force");t("famous-physics/math/Vector"),s.prototype=Object.create(o.prototype),s.prototype.constructor=o,s.FORCE_FUNCTIONS={LINEAR:function(t){return t},QUADRATIC:function(t){return t.mult(t.norm())}},s.prototype.applyForce=function(t){var i=this.opts.strength,e=this.opts.forceFunction,s=this.force;for(var o in t){var n=t[o];e(n.w).mult(-100*i).put(s),n.applyTorque(s)}},s.prototype.setOpts=function(t){for(var i in t)this.opts[i]=t[i]},e.exports=s}),define("famous-physics/integrator/verlet",["require","exports","module","../math/Vector"],function(t,i,e){function s(t){t=t||{},this.vCap=t.vCap||1/0,this.aCap=t.aCap||1/0,this.drag=t.drag||1,this.diff=new o,this.pOldCopy=new o,this.dragVector=new o}var o=t("../math/Vector");s.prototype.integrate=function(t,i,e){var s=t.pOld,o=t.p,n=t.a;if(this.diff.set(o.sub(s)),e){var r=t.v;t.hasImmunity("velocity")||r.add(n.mult(.5*i),r),t.hasImmunity("position")||(s.set(o),o.add(r.mult(i),o))}else this.pOldCopy.set(s),t.hasImmunity("position")||(this.dragVector.set(this.diff.mult(this.drag)),s.set(o),o.add(n.mult(i*i),o),o.add(this.dragVector,o))},s.prototype.integrateVelocity=function(t,i,e){var s=t.p,o=t.a;if(e){var n=t.v;n.add(o.mult(.5*i),n),s.add(n.mult(i),s)}else s.add(o.mult(i*i),s)},s.prototype.integratePosition=function(t){var i=t.p,e=t.pOld,s=this.pOldCopy;s.set(e),e.set(i),i.add(i.sub(s).mult(this.drag),i)},e.exports=s}),define("famous-physics/math/Random",["require","exports","module"],function(t,i,e){function s(t,i){return t+Math.random()*(i-t)}function o(t,i){return Math.floor(t+Math.random()*(i-t+1))}e.exports={integer:function(t,i,e){if(t=void 0!==t?t:0,i=void 0!==i?i:1,void 0!==e){for(var s=[],n=0;e>n;n++)s.push(o(t,i));return s}return o(t,i)},range:function(t,i,e){if(t=void 0!==t?t:0,i=void 0!==i?i:1,void 0!==e){for(var o=[],n=0;e>n;n++)o.push(s(t,i));return o}return s(t,i)},sign:function(t){return t=void 0!==t?t:.5,Math.random()<t?1:-1},bool:function(t){return t=void 0!==t?t:.5,Math.random()<t}}}),define("famous-physics/utils/WallTransition",["require","exports","module","famous-physics/PhysicsEngine","famous-physics/forces/Spring","famous-physics/constraints/Wall","famous-physics/math/Vector"],function(t,i,e){function s(t){t=t||0,this._anchor=new g(t,0,0),this.endState=t,this.prevState=void 0,this.atRest=!0,this.spring=new d({anchor:this._anchor}),this.wall=new m,this.PE=new f,this.particle=this.PE.createParticle({p:[t,0,0]}),this.PE.attach(this.spring,this.particle),this.PE.attach(this.wall,this.particle)}function o(){if(!this.atRest){this.PE.step();var t=n.call(this);v>t&&(this.atRest=!0,h.call(this,this.endState),this.callback&&this.callback())}}function n(){return this.particle.getEnergy()+this.spring.getEnergy(this.particle)}function r(t){var i=s.DEFAULT_OPTIONS;void 0===t.period&&(t.period=i.period),void 0===t.dampingRatio&&(t.dampingRatio=i.dampingRatio),void 0===t.velocity&&(t.velocity=i.velocity),void 0===t.restitution&&(t.restitution=i.restitution),this.spring.setOpts({period:t.period,dampingRatio:t.dampingRatio}),this.wall.setOpts({restitution:t.restitution}),u.call(this,t.velocity)}function a(t){this.prevState=this.endState,this.endState=t;var i;i=this.endState-this.prevState>=0?1:-1,this._anchor.x=t,this.wall.setOpts({d:Math.abs(t),n:[-i,0,0]}),u.call(this,i*c.call(this))}function h(t){this.particle.p.x=t}function u(t){this.particle.v.x=t}function p(){return this.particle.p.x}function c(){return this.particle.v.x}function l(t){this.callback=t}var f=t("famous-physics/PhysicsEngine"),d=t("famous-physics/forces/Spring"),m=t("famous-physics/constraints/Wall"),g=t("famous-physics/math/Vector");s.DEFAULT_OPTIONS={period:300,dampingRatio:0,restitution:.4,velocity:0},s.forceFunctions=d.forceFunctions;var v=1e-5;s.prototype.reset=function(t,i){t=t||0,i=i||0,this.prevState=void 0,h.call(this,t),u.call(this,i),a.call(this,t),l.call(this,void 0)},s.prototype.getVelocity=function(){return o.call(this),c.call(this)},s.prototype.setVelocity=function(t){this.call(this,u(t))},s.prototype.halt=function(){this.set(this.get())},s.prototype.get=function(){return o.call(this),p.call(this)},s.prototype.set=function(t,i,e){return i?(this.atRest=!1,r.call(this,i),a.call(this,t),l.call(this,e),void 0):(this.reset(t),e&&e(),void 0)},e.exports=s}),define("famous-physics/utils/SpringTransition",["require","exports","module","famous-physics/PhysicsEngine","famous-physics/forces/Spring","famous-physics/math/Vector"],function(t,i,e){function s(t){t=t||0,this._anchor=new m(t,0,0),this.endState=t,this.prevState=void 0,this.atRest=!0,this.spring=new d({anchor:this._anchor}),this.PE=new f,this.particle=this.PE.createParticle({p:[t,0,0]}),this.PE.attach(this.spring,this.particle)}function o(){if(!this.atRest){this.PE.step();var t=n.call(this);g>t&&(this.atRest=!0,h.call(this,this.endState),this.callback&&this.callback())}}function n(){return this.particle.getEnergy()+this.spring.getEnergy(this.particle)}function r(t){var i=s.DEFAULT_OPTIONS;void 0===t.period&&(t.period=i.period),void 0===t.dampingRatio&&(t.dampingRatio=i.dampingRatio),void 0===t.velocity&&(t.velocity=i.velocity),t.period<150&&console.warn("period may be unstable, increase the period or use a stiff transition"),this.spring.setOpts({period:t.period,dampingRatio:t.dampingRatio}),u.call(this,t.velocity)}function a(t){this.prevState=this.endState,this.endState=t;var i;i=this.endState-this.prevState>0?1:this.endState<0?-1:0,this._anchor.x=t,u.call(this,i*c.call(this))}function h(t){this.particle.p.x=t}function u(t){this.particle.v.x=t}function p(){return this.particle.p.x}function c(){return this.particle.v.x}function l(t){this.callback=t}var f=t("famous-physics/PhysicsEngine"),d=t("famous-physics/forces/Spring"),m=t("famous-physics/math/Vector");s.DEFAULT_OPTIONS={period:300,dampingRatio:.5,velocity:0},s.forceFunctions=d.forceFunctions;var g=1e-5;s.prototype.reset=function(t,i){t=t||0,i=i||0,this.prevState=void 0,h.call(this,t),u.call(this,i),a.call(this,t),l.call(this,void 0)},s.prototype.getVelocity=function(){return o.call(this),c.call(this)},s.prototype.setVelocity=function(t){this.call(this,u(t))},s.prototype.halt=function(){this.set(this.get())},s.prototype.get=function(){return o.call(this),p.call(this)},s.prototype.set=function(t,i,e){return i?(this.atRest=!1,r.call(this,i),a.call(this,t),l.call(this,e),void 0):(this.reset(t),e&&e(),void 0)},e.exports=s}),define("famous-physics/utils/PhysicsRegister",["require","exports","module","famous/Transitionable","famous-physics/utils/WallTransition","famous-physics/utils/SpringTransition"],function(t){var i=t("famous/Transitionable"),e=t("famous-physics/utils/WallTransition");i.registerMethod("wall",e);var s=t("famous-physics/utils/SpringTransition");i.registerMethod("spring",s)}),define("famous-physics/utils/PhysicsTransition2",["require","exports","module","famous-physics/PhysicsEngine","famous-physics/constraints/StiffSpring","famous-physics/forces/VectorField","famous-physics/constraints/Wall","famous-physics/math/Vector","famous/EventHandler"],function(t,i,e){function s(t){t=t||0,this.endState=t,this.prevState=void 0,this.direction=void 0,this.defaultDefinition={transition:{curve:{v:1,thrust:0},duration:500},bounce:{period:0,dampingRatio:0},walls:!1},this._anchor=new z(t,0,0),this.stageOneActive=!1,this.attachedSpring=void 0,this.attachedWall=void 0,this.attachedThrust=void 0,this.eventHandler=new _,this.eventHandler.on("initStageTwo",g.bind(this)),this.PE=new b,this.particle=this.PE.createBody({p:[t,0,0],v:[0,0,0]}),this.spring=new w({anchor:this._anchor}),this.thrust=new T({strength:0,field:T.FIELDS.CONSTANT,direction:[1,0,0]}),this.wall=new M({restitution:.5,k:0,n:new z(-1,0,0)})}function o(){return this.particle.p.x<=this.endState?1:-1}function n(t){this.direction=t}function r(){1==this.stageOneActive&&this.direction!=o.call(this)&&this.eventHandler.emit("initStageTwo")}function a(t){var i,e,o=t.transition.duration,n=t.transition.curve;"string"==typeof n&&(n=s.TRANSITIONS[n]),e=this.direction*n.v,i=this.direction*n.thrust;var r=this.endState-this.particle.p.x;
if(0==o)this.v=e||0,this.a=0;else{var a;0==i?a=r/(e*o):(0>e*e+2*i*r&&console.warn("unphysical choices for (v,a), target cannot be reached"),a=r>0?(-e+Math.sqrt(e*e+2*i*r))/(i*o):(-e-Math.sqrt(e*e+2*i*r))/(i*o)),this.v=a*e,this.a=a*a*i}var h=t.bounce;"string"==typeof h&&(h=s.BOUNCE[h]),this.spring.setOpts({period:h.period,dampingRatio:h.dampingRatio}),this.wallsActive=t.walls}function h(t){this.prevState=this.endState,this.endState=t,n.call(this,o.call(this))}function u(t){void 0===this.attachedSpring&&(this._anchor.x=t,this.attachedSpring=this.PE.attach(this.spring,this.particle))}function p(){void 0!==this.attachedSpring&&(this.PE.detach(this.attachedSpring,this.particle),this.attachedSpring=void 0)}function c(t,i){this.wallsActive&&(this.wall.setOpts({d:Math.abs(t),n:[-i,0,0]}),this.attachedWall=this.PE.attach(this.wall,this.particle))}function l(){void 0!==this.attachedWall&&(this.PE.detach(this.attachedWall,this.particle),this.attachedWall=void 0)}function f(t){this.thrust.setOpts({strength:t}),this.attachedThrust=this.PE.attach(this.thrust,this.particle)}function d(){void 0!==this.attachedThrust&&(this.PE.detach(this.attachedThrust),this.attachedThrust=void 0)}function m(){this.stageOneActive=!0,p.call(this),d.call(this),l.call(this),f.call(this,this.a),v.call(this,this.v),C=Date.now()}function g(){console.log("Duration : ",Date.now()-C),this.stageOneActive=!1,d.call(this),y.call(this,this.endState),u.call(this,this.endState),c.call(this,this.endState,this.direction)}function v(t){this.particle.v.x=t}function y(t){this.particle.p.x=t}function x(t){this.spring.setOpts({callback:t})}function S(){this.PE.step(),r.call(this)}var b=t("famous-physics/PhysicsEngine"),w=t("famous-physics/constraints/StiffSpring"),T=t("famous-physics/forces/VectorField"),M=t("famous-physics/constraints/Wall"),z=t("famous-physics/math/Vector"),_=t("famous/EventHandler");s.TRANSITIONS={linear:{v:1,thrust:0},easeIn:{v:0,thrust:2},backIn:{v:-1,thrust:2}},s.BOUNCE={none:{dampingRatio:0,period:0},low:{dampingRatio:.5,period:300},medium:{dampingRatio:.3,period:600},high:{dampingRatio:.1,period:800}};var C;s.forceFunctions=w.forceFunctions,s.prototype.reset=function(t,i){i=i||0,t=t||0,this.PE.detachAll(),y.call(this,t),v.call(this,i),x.call(this,void 0)},s.prototype.set=function(t,i,e){return i?(h.call(this,t),a.call(this,i),x.call(this,e),m.call(this),void 0):(this.reset(t),e&&e(),void 0)},s.prototype.get=function(){return S.call(this),this.particle.p.x},s.prototype.getVelocity=function(){return S.call(this),this.particle.v.x},s.prototype.getTarget=function(){return this.endState},e.exports=s}),define("famous-physics/utils/StiffSpringTransition",["require","exports","module","famous-physics/PhysicsEngine","famous-physics/constraints/StiffSpring","famous-physics/math/Vector"],function(t,i,e){function s(t){t=t||0,this._anchor=new m(t,0,0),this.endState=t,this.prevState=void 0,this.atRest=!0,this.spring=new d({anchor:this._anchor}),this.PE=new f,this.particle=this.PE.createParticle({p:[t,0,0]}),this.PE.attach(this.spring,this.particle)}function o(){if(!this.atRest){this.PE.step();var t=n.call(this);g>t&&(this.atRest=!0,h.call(this,this.endState),this.callback&&this.callback())}}function n(){return this.particle.getEnergy()+this.spring.getEnergy(this.particle)}function r(t){var i=s.DEFAULT_OPTIONS;void 0===t.period&&(t.period=i.period),void 0===t.dampingRatio&&(t.dampingRatio=i.dampingRatio),void 0===t.velocity&&(t.velocity=i.velocity),this.spring.setOpts({period:t.period,dampingRatio:t.dampingRatio}),u.call(this,t.velocity)}function a(t){this.prevState=this.endState,this.endState=t;var i;i=this.endState-this.prevState>0?1:this.endState<0?-1:0,this._anchor.x=t,u.call(this,i*c.call(this))}function h(t){this.particle.p.x=t}function u(t){this.particle.v.x=t}function p(){return this.particle.p.x}function c(){return this.particle.v.x}function l(t){this.callback=t}var f=t("famous-physics/PhysicsEngine"),d=t("famous-physics/constraints/StiffSpring"),m=t("famous-physics/math/Vector");s.DEFAULT_OPTIONS={period:300,dampingRatio:.5,velocity:0},s.forceFunctions=d.forceFunctions;var g=1e-5;s.prototype.reset=function(t,i){t=t||0,i=i||0,this.prevState=void 0,h.call(this,t),u.call(this,i),a.call(this,t),l.call(this,void 0)},s.prototype.getVelocity=function(){return o.call(this),c.call(this)},s.prototype.setVelocity=function(t){this.call(this,u(t))},s.prototype.halt=function(){this.set(this.get())},s.prototype.get=function(){return o.call(this),p.call(this)},s.prototype.set=function(t,i,e){return i?(this.atRest=!1,r.call(this,i),a.call(this,t),l.call(this,e),void 0):(this.reset(t),e&&e(),void 0)},e.exports=s}),define("famous-sync/FastClick",["require","exports","module"],function(){if(window.CustomEvent){var t=300,i={};document.addEventListener("touchstart",function(t){for(var e=Date.now(),s=0;s<t.changedTouches.length;s++){var o=t.changedTouches[s];i[o.identifier]=e}}),window.addEventListener("touchmove",function(t){for(var e=0;e<t.changedTouches.length;e++){var s=t.changedTouches[e];delete i[s.identifier]}}),document.addEventListener("touchend",function(e){for(var s=Date.now(),o=0;o<e.changedTouches.length;o++){var n=e.changedTouches[o],r=i[n.identifier];if(r&&t>s-r){e.preventDefault();var a=new CustomEvent("click",{bubbles:!0,details:n});e.target.dispatchEvent(a)}delete i[n.identifier]}})}}),define("famous-sync/HoverSync",["require","exports","module","famous/EventHandler","./BaseMouseSync"],function(t,i,e){function s(){o.apply(this,arguments),this.input.on("mouseenter",this._handleStart.bind(this)),this.input.on("mousemove",function(t){this._prevCoord?this._handleUpdate(t):this._handleStart(t)}.bind(this)),this.input.on("mouseleave",this._handleEnd.bind(this)),this.input.on("mouseout",this._handleEnd.bind(this))}t("famous/EventHandler");var o=t("./BaseMouseSync");s.prototype=Object.create(o.prototype),s.prototype.constructor=s,e.exports=s}),define("famous-ui/Buttons/SpringButton",["require","exports","module","famous-physics/PhysicsEngine","famous/View","famous-physics/forces/Spring","famous/Surface","famous-physics/math/Vector","famous-utils/Utils"],function(t,i,e){function s(){a.apply(this,arguments),this.eventInput.pipe(this.eventOutput),this.PE=new r,this.available=!0,this.anchor=this.PE.createParticle({p:this.options.pos,v:this.options.vel,immunity:!0}),this.particle=this.PE.createParticle({p:this.options.pos,v:this.options.vel}),this.spring=new h({period:this.options.springPeriod,dampingRatio:this.options.springDampingRatio,length:this.options.springLength,anchor:this.options.pos,callback:n.bind(this)}),this.PE.attach(this.spring,this.particle),this.surface=new u({size:this.options.size,content:this.options.content,classes:this.options.classes,properties:this.options.properties}),this.surface.on("click",o.bind(this))}function o(){this._addForce(this.options.clickForce)}function n(){this.options.limitTouches&&(this.available=!0)}var r=t("famous-physics/PhysicsEngine"),a=t("famous/View"),h=t("famous-physics/forces/Spring"),u=t("famous/Surface");t("famous-physics/math/Vector");var p=t("famous-utils/Utils");s.prototype=Object.create(a.prototype),s.prototype.constructor=s,s.DEFAULT_OPTIONS={size:[200,200],pos:[0,0,0],vel:[0,0,0],springPeriod:200,springDampingRatio:.8,springLength:0,content:"",properties:{},classes:[],limitTouches:!1,forceMult:[10,10,10],callbackTolerance:1e-4,clickForce:[0,0,-.005]},s.prototype.setPeriod=function(t){this.spring.setPeriod(t)},s.prototype.setDamping=function(t){this.spring.setDampingRatio(t)},s.prototype.setCallbackTolerance=function(t){this.spring.opts.callbackTolerance=t},s.prototype._addForce=function(t){var i={x:0,y:0,z:0};p.isArray(t)?(i.x=t[0]*this.options.forceMult[0],i.y=t[1]*this.options.forceMult[1],i.z=t[2]*this.options.forceMult[2]):(i.x=t.x*this.options.forceMult[0],i.y=t.y*this.options.forceMult[1],i.z=t.z*this.options.forceMult[2]),this.options.limitTouches?this.available&&(this.particle.applyForce(i),this.available=!1,this.eventOutput.emit("click")):(this.particle.applyForce(i),this.eventOutput.emit("click"))},s.prototype.render=function(){return this.PE.step(),{opacity:1,transform:this.PE.getTransform(this.particle),target:this.surface.render()}},e.exports=s}),define("famous-ui/Buttons/SpringButton.ui",["require","exports","module","./SpringButton"],function(t,i,e){function s(){o.apply(this,arguments),this.autoUI=[{type:"label",uiOptions:{content:"PHYSICS",properties:{"border-bottom":"1px solid #f2786f",color:"#f2786f","font-size":"16px"}}},{option:"springPeriod",type:"slider",uiOptions:{range:[100,2e3],name:"SPRING DURATION"}},{option:"springPeriod",callback:this.setDamping,type:"slider",uiOptions:{range:[.002,.8],name:"SPRING DAMPING"}},{type:"label",uiOptions:{content:"APPEARANCE",properties:{"border-bottom":"1px solid white",color:"rgba( 255, 255, 255, 1 )","font-size":"16px"}}},{callback:this.setBackgroundColor,type:"colorPicker",uiOptions:{name:"Background Color"}},{callback:this.setBorderColor,type:"colorPicker",uiOptions:{name:"Stroke Color"}},{callback:this.setBorderRadius,type:"slider",uiOptions:{range:[0,100],name:"BORDER RADIUS"}}]}var o=t("./SpringButton");s.prototype=Object.create(o.prototype),s.prototype.constructor=s,s.prototype.setPeriod=function(t){this.setOptions({period:t})},s.prototype.setDamping=function(t){this.setOptions({dampingRatio:t})},s.prototype.setBackgroundColor=function(t){this.surface.setProperties({"background-color":t.getCSSColor()})},s.prototype.setBorderColor=function(t){this.surface.setProperties({border:"1px solid "+t.getCSSColor()})},s.prototype.setBorderRadius=function(t){this.surface.setProperties({"border-radius":t+"px"})},e.exports=s}),define("famous-utils/FormatTime",["require","exports","module"],function(t,i,e){function s(t,i){var e=t.toString().match(/(\d+)/g),s=new Date(e[0],e[1]-1,e[2],e[3],e[4],e[5],0),r=new Date,a=.001*(r.getTime()-s.getTime()),h=parseInt(a/60,10),u=parseInt(h/60,10),p=parseInt(u/24,10),c=o(s),l=10,f="";return 720>h?60>h?2>h?(f="just now",l=1,[f,l]):30>h?(f=h+" minutes ago",l=2,[f,l]):40>h?(f="about a half hour ago",l=2,[f,l]):50>h?(f="about 45 minutes ago",l=3,[f,l]):(f="about an hour ago",l=4,[f,l]):(f=1==i?c[6]+":"+c[7]+c[8]:"earlier today at "+c[6]+":"+c[7]+c[8],l=5,[f,l]):1440>h?(f="yesterday at "+c[6]+":"+c[7]+c[8],l=6,[f,l]):p>=1&&2>=p?(f="yesterday at "+c[6]+":"+c[7]+c[8],l=7,[f,l]):6>p?(f=c[0]+" at "+c[6]+":"+c[7]+c[8],l=8,[f,l]):30>p?(f=1==i?c[3]+"/"+c[1]+" at "+c[6]+":"+c[7]+c[8]:c[4]+" "+c[1]+c[2]+" around "+c[6]+c[8],l=9,[f,l]):(f=n(c,r),l=10,[f,l])}function o(t){var i=t.getDate(),e=t.getDay(),s=t.getMonth()+1,o=t.getFullYear(),n=t.getHours(),r=t.getMinutes().toString(),a=12>n?"am":"pm";r.length<2&&(r="0"+r);var h=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],u={1:"st",2:"nd",3:"rd",4:"th",5:"th",6:"th",7:"th",8:"th",9:"th",10:"th",11:"th",12:"th",13:"th",14:"th",15:"th",16:"th",17:"th",18:"th",19:"th",20:"th",21:"st",22:"nd",23:"rd",24:"th",25:"th",26:"th",27:"th",28:"th",29:"th",30:"th",31:"st"},p={1:"Jan",2:"Feb",3:"Mar",4:"April",5:"May",6:"June",7:"July",8:"Aug",9:"Sep",10:"Oct",11:"Nov",12:"Dec"};return 0===n&&(n=12),n>12&&(n-=12),[h[e],i,u[i],s,p[s],o,n,r,a]}function n(t,i){i?i:new Date;var e=i.getFullYear()===t[5]?t[4]+" "+t[1]+t[2]:t[4]+" "+t[1]+t[2]+" "+t[5];return e}e.exports=s}),define("famous-utils/NoiseImage",["require","exports","module"],function(t,i,e){function s(t,i,e){t||(t=[128,128]),i||(i=8),o.width=t[0],o.height=t[1];var s=i>>1,r=o.width/i,a=i*i>>1,h=1/s;u(e),n.fillRect(0,0,t[0],t[1]),u(e);for(var p,c,l=0;a>l;l++)Math.random()+.5>>0&&(c=l*h>>0,p=l-s*c,n.fillRect(p*r,c*r,r,r),n.fillRect((i-(p+1))*r,c*r,r,r));var f=o.toDataURL("image/png");return f}var o=document.createElement("canvas"),n=o.getContext("2d"),r=function(t){var i=361*Math.random()>>0,e=t?360*.125*t-(46*Math.random()>>0):i;return e},a=function(){return 30+71*Math.random()>>0},h=function(){return 30+71*Math.random()>>0},u=function(t){n.fillStyle="hsl("+r(t)+","+a()+"%,"+h()+"%)"};e.exports={generate:s}}),define("famous-utils/TimeAgo",["require","exports","module"],function(t,i,e){function s(t){var i=Date.now(),e=i-t,s=6e4,o=60*s,n=24*o;if(s>e)return"Just Now";if(o>e){var r=~~(e/s);return r+"m"}if(n>e){var a=~~(e/o);return a+"h"}var h=~~(e/n);return h+"d"}e.exports={parse:s}}),define("famous-views/ControlSet",["require","exports","module","famous/EventHandler","famous/Matrix"],function(t,i,e){function s(){this.eventOutput=new o,o.setOutputHandler(this,this.eventOutput),this.controls=[]}var o=t("famous/EventHandler"),n=t("famous/Matrix");s.prototype.include=function(t,i){i.on("change",function(i){this.eventOutput.emit(t,{value:i.value})}.bind(this)),this.controls.push(i)},s.prototype.render=function(){for(var t=[],i=0,e=0,s=0;s<this.controls.length;s++){var o=this.controls[s],r=o.getSize();t.push({transform:n.translate(0,i),target:o.render()}),i+=r[1],e=Math.max(e,r[0])}return{size:[e,i],target:t}},e.exports=s}),define("famous-views/Flip",["require","exports","module","famous/Matrix","famous/Transitionable","famous/RenderNode"],function(t,i,e){function s(t){this.options={transition:!0,cull:!0},t&&this.setOptions(t),this._side=0,this.state=new n(0),this.frontNode=new r,this.backNode=new r}var o=t("famous/Matrix"),n=t("famous/Transitionable"),r=t("famous/RenderNode");s.prototype.setDefaultTransition=function(t){this.transition=t},s.prototype.flip=function(t,i){void 0===t&&(t=1===this._side?0:1),this._side=t,this.state.set(t,this.options.transition,i)},s.prototype.getOptions=function(){return this.options},s.prototype.setOptions=function(t){void 0!==t.transition&&(this.options.transition=t.transition),void 0!==t.cull&&(this.options.cull=t.cull)},s.prototype.linkFront=function(t){return this.frontNode.link(t)},s.prototype.linkBack=function(t){return this.backNode.link(t)},s.prototype.render=function(t){var i=this.state.get();return void 0!==t?{transform:o.rotateY(Math.PI*i),target:t}:this.options.cull&&!this.state.isActive()?i?this.backNode.render():this.frontNode.render():[{transform:o.rotateY(Math.PI*i),target:this.frontNode.render()},{transform:o.rotateY(Math.PI*(i+1)),target:this.backNode.render()}]},e.exports=s}),define("famous-views/LightBox",["require","exports","module","famous/Matrix","famous/Modifier","famous/RenderNode","famous/Utility"],function(t,i,e){function s(t){this.options={inTransform:o.scale(.001,.001,.001),inOpacity:0,inOrigin:[.5,.5],outTransform:o.scale(.001,.001,.001),outOpacity:0,outOrigin:[.5,.5],showTransform:o.identity,showOpacity:1,showOrigin:[.5,.5],inTransition:!0,outTransition:!0,overlap:!1},t&&this.setOptions(t),this._showing=!1,this.nodes=[],this.transforms=[]}var o=t("famous/Matrix"),n=t("famous/Modifier"),r=t("famous/RenderNode"),a=t("famous/Utility");s.prototype.getOptions=function(){return this.options},s.prototype.setOptions=function(t){void 0!==t.inTransform&&(this.options.inTransform=t.inTransform),void 0!==t.inOpacity&&(this.options.inOpacity=t.inOpacity),void 0!==t.inOrigin&&(this.options.inOrigin=t.inOrigin),void 0!==t.outTransform&&(this.options.outTransform=t.outTransform),void 0!==t.outOpacity&&(this.options.outOpacity=t.outOpacity),void 0!==t.outOrigin&&(this.options.outOrigin=t.outOrigin),void 0!==t.showTransform&&(this.options.showTransform=t.showTransform),void 0!==t.showOpacity&&(this.options.showOpacity=t.showOpacity),void 0!==t.showOrigin&&(this.options.showOrigin=t.showOrigin),void 0!==t.inTransition&&(this.options.inTransition=t.inTransition),void 0!==t.outTransition&&(this.options.outTransition=t.outTransition),void 0!==t.overlap&&(this.options.overlap=t.overlap)},s.prototype.show=function(t,i,e){if(!t)return this.hide(e);if(i instanceof Function&&(e=i,i=void 0),this._showing){if(!this.options.overlap)return this.hide(this.show.bind(this,t,e)),void 0;this.hide()}this._showing=!0;var s=new n({transform:this.options.inTransform,opacity:this.options.inOpacity,origin:this.options.inOrigin}),o=new r;o.link(s).link(t),this.nodes.push(o),this.transforms.push(s);var h=e?a.after(3,e):void 0;i||(i=this.options.inTransition),s.setTransform(this.options.showTransform,i,h),s.setOpacity(this.options.showOpacity,i,h),s.setOrigin(this.options.showOrigin,i,h)},s.prototype.hide=function(t,i){if(this._showing){this._showing=!1,t instanceof Function&&(i=t,t=void 0);var e=this.nodes[this.nodes.length-1],s=this.transforms[this.transforms.length-1],o=a.after(3,function(){this.nodes.splice(this.nodes.indexOf(e),1),this.transforms.splice(this.transforms.indexOf(s),1),i&&i.call(this)}.bind(this));t||(t=this.options.outTransition),s.setTransform(this.options.outTransform,t,o),s.setOpacity(this.options.outOpacity,t,o),s.setOrigin(this.options.outOrigin,t,o)}},s.prototype.render=function(){for(var t=[],i=0;i<this.nodes.length;i++)t.push(this.nodes[i].render());return t},e.exports=s}),define("famous-views/Modal",["require","exports","module","famous/Engine","famous-views/LightBox","famous/EventHandler"],function(t,i,e){var s,o=t("famous/Engine"),n=t("famous-views/LightBox"),r=t("famous/EventHandler"),a=new r,h={lightBox:new n};r.setOutputHandler(h,a),h.setOptions=function(t){this.lightBox.setOptions(t)},h.getOptions=function(){return this.lightBox.getOptions()},h.show=function(t,i){s||(s=o.createContext(),s.link(this.lightBox)),this.lightBox.show(t,i,function(){a.emit("show")}.bind(this))},h.hide=function(t){this.lightBox.hide(t,function(){a.emit("hide")}.bind(this))},e.exports=h}),define("famous-views/ScrollContainer",["require","exports","module","famous/ContainerSurface","famous/EventHandler","./Scrollview","famous/Utility"],function(t,i,e){function s(t){this.options=Object.create(s.DEFAULT_OPTIONS),this.surface=new o(this.options.look),this.scrollview=new r(this.options.feel),t&&this.setOptions(t),this.surface.link(this.scrollview),n.setInputHandler(this,this.surface),n.setOutputHandler(this,this.surface),this.pipe(this.scrollview)}var o=t("famous/ContainerSurface"),n=t("famous/EventHandler"),r=t("./Scrollview"),a=t("famous/Utility");s.DEFAULT_OPTIONS={look:void 0,feel:{direction:a.Direction.X}},s.prototype.setOptions=function(t){void 0!==t.look&&(this.options.look=t.look,this.surface.setOptions(this.options.look)),void 0!==t.feel&&(this.options.feel=t.feel,this.scrollview.setOptions(this.options.feel))},s.prototype.sequenceFrom=function(){return this.scrollview.sequenceFrom.apply(this.scrollview,arguments)},s.prototype.render=function(){return this.surface.render.apply(this.surface,arguments)},e.exports=s}),define("famous-views/SequentialLayout",["require","exports","module","famous/OptionsManager","famous/Matrix","famous/Transitionable","famous/ViewSequence","famous/Utility"],function(t,i,e){function s(t){this._items=null,this._size=null,this._outputFunction=s.DEFAULT_OUTPUT_FUNCTION,this.options=Object.create(this.constructor.DEFAULT_OPTIONS),this.optionsManager=new o(this.options),t&&this.setOptions(t)}var o=t("famous/OptionsManager"),n=t("famous/Matrix");t("famous/Transitionable");var r=t("famous/ViewSequence"),a=t("famous/Utility");s.DEFAULT_OPTIONS={direction:a.Direction.X,defaultItemSize:[50,50],itemSpacing:0},s.DEFAULT_OUTPUT_FUNCTION=function(t,i){var e=this.options.direction===a.Direction.X?n.translate(i,0):n.translate(0,i);return{transform:e,target:t.render()}},s.prototype.getSize=function(){return this._size||this.render(),this._size},s.prototype.sequenceFrom=function(t){return t instanceof Array&&(t=new r(t)),this._items=t,this},s.prototype.setOptions=function(){return this.optionsManager.setOptions.apply(this.optionsManager,arguments),this},s.prototype.setOutputFunction=function(t){return this._outputFunction=t,this},s.prototype.render=function(){for(var t=0,i=0,e=this.options.direction===a.Direction.X?0:1,s=this.options.direction===a.Direction.X?1:0,o=this._items,n=[];o;){var r=o.get();t&&(t+=this.options.itemSpacing);var h;r&&r.getSize&&(h=r.getSize()),h||(h=this.options.defaultItemSize),h[s]!==!0&&(i=Math.max(i,h[s]));var u=this._outputFunction.call(this,r,t,n.length);n.push(u),h[e]&&h[e]!==!0&&(t+=h[e]),o=o.getNext()}return i||(i=void 0),this._size||(this._size=[0,0]),this._size[e]=t,this._size[s]=i,{size:this.getSize(),target:n}},e.exports=s}),define("famous-views/Shaper",["require","exports","module","famous/RenderNode","famous/Matrix","famous/Modifier","famous/Utility"],function(t,i,e){function s(t){this.nodes=[],this.transforms=[],this.defaultTransition={duration:1e3,curve:"easeInOut"};for(var i in t)this.side(i).from(t[i])}var o=t("famous/RenderNode"),n=t("famous/Matrix"),r=t("famous/Modifier"),a=t("famous/Utility");s.prototype.side=function(t){return this.nodes[t]||(this.transforms[t]=new r,this.transforms[t].setDefaultTransition(this.defaultTransition),this.nodes[t]=new o(this.transforms[t])),this.nodes[t]},s.prototype.halt=function(t){this.transforms[t].halt()},s.prototype.haltSet=function(t){for(var i=0;i<t.length;i++)this.halt(i)},s.prototype.haltAll=function(){this.haltSet(this.all())},s.prototype.set=function(t,i,e,s){return this.transforms[t]?(this.transforms[t].setTransform(i,e,s),void 0):(s&&s(),void 0)},s.prototype.setShape=function(t,i,e,s){for(var o="function"==typeof i?i:function(t){return i[t]},n=s?a.after(t.length,s):void 0,r=0;r<t.length;r++)this.set(t[r],o(r),e,n)},s.prototype.setShapeAll=function(t,i,e){this.setShape(this.all(),t,i,e)},s.prototype.modify=function(t,i,e,s){var o=n.multiply(this.transforms[t].getFinalTransform(),i);this.set(t,o,e,s)},s.prototype.modifySet=function(t,i,e,s){for(var o=s?a.after(t.length,s):void 0,n=0;n<t.length;n++)this.modify(t[n],i,e,o)},s.prototype.modifyAll=function(t,i,e){this.modify(this.all(),t,i,e)},s.prototype.setOpacity=function(t,i,e,s){this.transforms[t].setOpacity(i,e,s)},s.prototype.setOpacitySet=function(t,i,e,s){for(var o=s?a.after(t.length,s):void 0,n=0;n<t.length;n++)this.setOpacity(t[n],i,e,o)},s.prototype.setOpacityAll=function(t,i,e){this.setOpacitySet(this.all(),t,i,e)},s.prototype.all=function(){var t=[];for(var i in this.nodes)t.push(i);return t},s.prototype.getTransform=function(t){return this.transforms[t].getTransform()},s.prototype.getOpacity=function(t){return this.transforms[t].getOpacity()},s.prototype.isMoving=function(t){return this.transforms[t].isMoving()},s.prototype.render=function(){for(var t=[],i=0;i<this.nodes.length;i++)t[i]=this.nodes[i].execute();return t},e.exports=s}),define("famous-views/Swappable",["require","exports","module","famous/RenderNode","famous/Matrix","famous/Modifier"],function(t,i,e){function s(t){this.options={initTransform:h.identity,initOpacity:0,finalTransform:h.identity,finalOpacity:0,inTransition:{duration:500,curve:"easeInOut"},outTransition:{duration:500,curve:"easeInOut"},async:!1},this.nodes={},this.transforms=[],this.currIndex=-1,this.prevIndex=-1,this.setOptions(t)}function o(t,i,e,s,o,n,r){if(t in this.nodes){var a=this.nodes[t].modifiers[0];console.log(this.nodes[t]),a.isMoving&&!a.isMoving()&&(i&&a.setTransform(i),void 0!==e&&a.setOpacity(e)),a.setTransform(s,n),a.setOpacity(o,n,r)}}function n(t,i){o.call(this,t,this.options.initTransform,this.options.initOpacity,h.identity,1,this.options.inTransition,i)}function r(t,i){o.call(this,t,void 0,void 0,this.options.finalTransform,this.options.finalOpacity,this.options.outTransition,i)}var a=t("famous/RenderNode"),h=t("famous/Matrix"),u=t("famous/Modifier");s.prototype.item=function(t){var i=new a(new u(this.options.initTransform,this.options.initOpacity),!0);return this.nodes[t]=i,i},s.prototype.select=function(t,i){t!=this.currIndex&&(this.options.async?r.call(this,this.currIndex,function(){n.call(this,this.currIndex,i)}.bind(this)):(r.call(this,this.currIndex),n.call(this,t,i)),this.currIndex=t)},s.prototype.setOptions=function(t){for(var i in t)this.options[i]=t[i]},s.prototype.getOptions=function(){return this.options},s.prototype.render=function(){var t=[];for(var i in this.nodes)t.push(this.nodes[i].render());return t},e.exports=s}),define("main",["require","exports","module","app/data/Alarm","app/data/AppSettings","app/data/RiseData","app/data/TimeHelpers","app/scenes/AlarmScene","app/scenes/BackgroundScene","app/scenes/HomeScene","app/scenes/NewAlarmScene","app/scenes/TimeScene","app/templates/checkmark","app/templates/xMark","app/widgets/ActivationBackground","app/widgets/AlarmActivatorView","app/widgets/AlarmButton","app/widgets/AlarmRinger","app/widgets/BackgroundFaderView","app/widgets/BackgroundGLFaderView","app/widgets/ButtonSlider","app/widgets/CurrentTimeView","app/widgets/CurrentTimelineView","app/widgets/CustomAlarmView","app/widgets/DayManager","app/widgets/EmptyClass","app/widgets/InputNameView","app/widgets/MoveableTimeView","app/widgets/PhysicsDrawer","app/widgets/ResponsiveSurface","app/widgets/SettingsMenuView","app/widgets/SwipeEventSwitcher","app/widgets/TimeUntil","app/ID","app/SceneController","app/SceneTransitions","core/ExpandingSurface","core/GA","core/Interface","core/InterfaceContainer","core/NextButton","core/Signup","core/SignupContent","core/SignupData","core/SignupError","core/Submit","core/UI","famous/CanvasSurface","famous/ContainerSurface","famous/Context","famous/ElementAllocator","famous/Engine","famous/Entity","famous/EventArbiter","famous/EventHandler","famous/Group","famous/ImageSurface","famous/Matrix","famous/Modifier","famous/MultipleTransition","famous/OptionsManager","famous/RenderNode","famous/Scene","famous/SceneCompiler","famous/SpecParser","famous/Surface","famous/Timer","famous/Transitionable","famous/TweenTransition","famous/Utility","famous/VideoSurface","famous/View","famous/ViewSequence","famous/WebGLSurface","famous-animation/Animation","famous-animation/AnimationEngine","famous-animation/CubicBezier","famous-animation/Easing","famous-animation/Idle","famous-animation/LayoutEngine","famous-animation/PiecewiseCubicBezier","famous-animation/RegisterEasing","famous-animation/Sequence","famous-animation/Timer","famous-audio/BufferLoader","famous-audio/SoundPlayer","famous-color/Color","famous-color/ColorPalette","famous-color/ColorPalettes","famous-css/StyleManager","famous-css/StyleSheet","famous-generative/Axis","famous-generative/Box","famous-generative/DebugTriangle","famous-generative/EasyCamera","famous-generative/Integrator","famous-generative/Line","famous-generative/Particle","famous-generative/SimplexNoise","famous-generative/Touch","famous-generative/TouchVisualizer","famous-generative/Triangle","famous-generative/Triangle3D","famous-generative/Triangle3DOLD","famous-gl/Effects/BlackAndWhiteEffect","famous-gl/Effects/CartesianToPolarEffect","famous-gl/Effects/DuoToneEffect","famous-gl/Effects/ExposureEffect","famous-gl/Effects/InvertColorEffect","famous-gl/Effects/LightTunnelEffect","famous-gl/Effects/LomoEffect","famous-gl/Effects/PixelateEffect","famous-gl/Effects/PolarToCartesianEffect","famous-gl/Effects/ScanlineEffect","famous-gl/Effects/Technicolor1Effect","famous-gl/Effects/Technicolor2Effect","famous-gl/Effects/Technicolor3Effect","famous-gl/Effects/TwirlEffect","famous-gl/Effects/VignetteEffect","famous-gl/Primitives/ArcPrimitive","famous-gl/Primitives/BoxPrimitive","famous-gl/Primitives/ConePrimitive","famous-gl/Primitives/CylinderPrimitive","famous-gl/Primitives/EllipsePrimitive","famous-gl/Primitives/IcoSpherePrimitive","famous-gl/Primitives/ParametricPrimitive","famous-gl/Primitives/PlanePrimitive","famous-gl/Primitives/SpherePrimitive","famous-gl/Primitives/TorusPrimitive","famous-gl/ShaderFunctions/Map","famous-gl/ShaderFunctions/Noise2D","famous-gl/ShaderFunctions/Noise3D","famous-gl/ShaderFunctions/Noise4D","famous-gl/Camera","famous-gl/Effect","famous-gl/Fbo","famous-gl/Geometry","famous-gl/Light","famous-gl/Material","famous-gl/Mesh","famous-gl/Primitive","famous-gl/Renderer","famous-gl/Scene","famous-gl/Shader","famous-gl/ShaderMaker","famous-gl/Texture","famous-math/Quaternion","famous-math/Vector","famous-modifiers/Camera","famous-modifiers/Draggable","famous-mvc/Ajax","famous-mvc/Collection","famous-mvc/Model","famous-physics/bodies/Body","famous-physics/bodies/Circle","famous-physics/bodies/Particle","famous-physics/bodies/Rectangle","famous-physics/constraints/Collision","famous-physics/constraints/CollisionJacobian","famous-physics/constraints/Constraint","famous-physics/constraints/Curve","famous-physics/constraints/Distance","famous-physics/constraints/Distance1D","famous-physics/constraints/Rod","famous-physics/constraints/Rope","famous-physics/constraints/StiffSpring","famous-physics/constraints/Surface","famous-physics/constraints/Wall","famous-physics/constraints/Walls","famous-physics/constraints/joint","famous-physics/forces/Drag","famous-physics/forces/Force","famous-physics/forces/Repulsion","famous-physics/forces/Spring","famous-physics/forces/TorqueSpring","famous-physics/forces/VectorField","famous-physics/forces/rotationalDrag","famous-physics/integrator/SymplecticEuler","famous-physics/integrator/verlet","famous-physics/math/GaussSeidel","famous-physics/math/Quaternion","famous-physics/math/Random","famous-physics/math/Vector","famous-physics/math/matrix","famous-physics/utils/PhysicsRegister","famous-physics/utils/PhysicsTransition","famous-physics/utils/PhysicsTransition2","famous-physics/utils/SpringTransition","famous-physics/utils/StiffSpringTransition","famous-physics/utils/WallTransition","famous-physics/PhysicsEngine","famous-scene/GLScene","famous-scene/Scene","famous-scene/SceneController","famous-scene/SceneTransitions","famous-scene/Transitions","famous-sync/BaseMouseSync","famous-sync/CustomSync","famous-sync/FastClick","famous-sync/GenericSync","famous-sync/HoverSync","famous-sync/MouseSync","famous-sync/PinchSync","famous-sync/RotateSync","famous-sync/ScaleSync","famous-sync/ScrollSync","famous-sync/TouchSync","famous-sync/TouchTracker","famous-sync/TwoFingerSync","famous-ui/Buttons/ButtonBase","famous-ui/Buttons/RotateButton","famous-ui/Buttons/SpringButton","famous-ui/Buttons/SpringButton.ui","famous-ui/ColorPicker/AlphaPicker","famous-ui/ColorPicker/CanvasPicker","famous-ui/ColorPicker/ColorButton","famous-ui/ColorPicker/ColorPicker","famous-ui/ColorPicker/GradientPicker","famous-ui/ColorPicker/HuePicker","famous-ui/Dropdown/Dropdown","famous-ui/Dropdown/DropdownItem","famous-ui/Easing/CanvasDrawer","famous-ui/Easing/EasingBool","famous-ui/Easing/EasingVisualizer","famous-ui/Easing/MultiEasingToggle","famous-ui/Text/Label","famous-ui/Toggles/BoolToggle","famous-ui/Toggles/MultiBoolToggle","famous-ui/AutoUI","famous-ui/PanelScrollview","famous-ui/Slider","famous-utils/FormatTime","famous-utils/KeyCodes","famous-utils/NoiseImage","famous-utils/Time","famous-utils/TimeAgo","famous-utils/Utils","famous-views/ControlSet","famous-views/Flip","famous-views/InputSurface","famous-views/LightBox","famous-views/Modal","famous-views/ScrollContainer","famous-views/Scrollview","famous-views/SequentialLayout","famous-views/Shaper","famous-views/Swappable","surface-extensions/ExpandingSurface"],function(t,i,e){var s=function(i){i.call(this,t)};s.App={},s.App.Data_Alarm=t("app/data/Alarm"),s.App.Data_AppSettings=t("app/data/AppSettings"),s.App.Data_RiseData=t("app/data/RiseData"),s.App.Data_TimeHelpers=t("app/data/TimeHelpers"),s.App.Scenes_AlarmScene=t("app/scenes/AlarmScene"),s.App.Scenes_BackgroundScene=t("app/scenes/BackgroundScene"),s.App.Scenes_HomeScene=t("app/scenes/HomeScene"),s.App.Scenes_NewAlarmScene=t("app/scenes/NewAlarmScene"),s.App.Scenes_TimeScene=t("app/scenes/TimeScene"),s.App.Templates_checkmark=t("app/templates/checkmark"),s.App.Templates_xMark=t("app/templates/xMark"),s.App.Widgets_ActivationBackground=t("app/widgets/ActivationBackground"),s.App.Widgets_AlarmActivatorView=t("app/widgets/AlarmActivatorView"),s.App.Widgets_AlarmButton=t("app/widgets/AlarmButton"),s.App.Widgets_AlarmRinger=t("app/widgets/AlarmRinger"),s.App.Widgets_BackgroundFaderView=t("app/widgets/BackgroundFaderView"),s.App.Widgets_BackgroundGLFaderView=t("app/widgets/BackgroundGLFaderView"),s.App.Widgets_ButtonSlider=t("app/widgets/ButtonSlider"),s.App.Widgets_CurrentTimeView=t("app/widgets/CurrentTimeView"),s.App.Widgets_CurrentTimelineView=t("app/widgets/CurrentTimelineView"),s.App.Widgets_CustomAlarmView=t("app/widgets/CustomAlarmView"),s.App.Widgets_DayManager=t("app/widgets/DayManager"),s.App.Widgets_EmptyClass=t("app/widgets/EmptyClass"),s.App.Widgets_InputNameView=t("app/widgets/InputNameView"),s.App.Widgets_MoveableTimeView=t("app/widgets/MoveableTimeView"),s.App.Widgets_PhysicsDrawer=t("app/widgets/PhysicsDrawer"),s.App.Widgets_ResponsiveSurface=t("app/widgets/ResponsiveSurface"),s.App.Widgets_SettingsMenuView=t("app/widgets/SettingsMenuView"),s.App.Widgets_SwipeEventSwitcher=t("app/widgets/SwipeEventSwitcher"),s.App.Widgets_TimeUntil=t("app/widgets/TimeUntil"),s.App.ID=t("app/ID"),s.App.SceneController=t("app/SceneController"),s.App.SceneTransitions=t("app/SceneTransitions"),s.Core={},s.Core.ExpandingSurface=t("core/ExpandingSurface"),s.Core.GA=t("core/GA"),s.Core.Interface=t("core/Interface"),s.Core.InterfaceContainer=t("core/InterfaceContainer"),s.Core.NextButton=t("core/NextButton"),s.Core.Signup=t("core/Signup"),s.Core.SignupContent=t("core/SignupContent"),s.Core.SignupData=t("core/SignupData"),s.Core.SignupError=t("core/SignupError"),s.Core.Submit=t("core/Submit"),s.Core.UI=t("core/UI"),s.Famous={},s.Famous.CanvasSurface=t("famous/CanvasSurface"),s.Famous.ContainerSurface=t("famous/ContainerSurface"),s.Famous.Context=t("famous/Context"),s.Famous.ElementAllocator=t("famous/ElementAllocator"),s.Famous.Engine=t("famous/Engine"),s.Famous.Entity=t("famous/Entity"),s.Famous.EventArbiter=t("famous/EventArbiter"),s.Famous.EventHandler=t("famous/EventHandler"),s.Famous.Group=t("famous/Group"),s.Famous.ImageSurface=t("famous/ImageSurface"),s.Famous.Matrix=t("famous/Matrix"),s.Famous.Modifier=t("famous/Modifier"),s.Famous.MultipleTransition=t("famous/MultipleTransition"),s.Famous.OptionsManager=t("famous/OptionsManager"),s.Famous.RenderNode=t("famous/RenderNode"),s.Famous.Scene=t("famous/Scene"),s.Famous.SceneCompiler=t("famous/SceneCompiler"),s.Famous.SpecParser=t("famous/SpecParser"),s.Famous.Surface=t("famous/Surface"),s.Famous.Timer=t("famous/Timer"),s.Famous.Transitionable=t("famous/Transitionable"),s.Famous.TweenTransition=t("famous/TweenTransition"),s.Famous.Utility=t("famous/Utility"),s.Famous.VideoSurface=t("famous/VideoSurface"),s.Famous.View=t("famous/View"),s.Famous.ViewSequence=t("famous/ViewSequence"),s.Famous.WebGLSurface=t("famous/WebGLSurface"),s.FamousAnimation={},s.FamousAnimation.Animation=t("famous-animation/Animation"),s.FamousAnimation.AnimationEngine=t("famous-animation/AnimationEngine"),s.FamousAnimation.CubicBezier=t("famous-animation/CubicBezier"),s.FamousAnimation.Easing=t("famous-animation/Easing"),s.FamousAnimation.Idle=t("famous-animation/Idle"),s.FamousAnimation.LayoutEngine=t("famous-animation/LayoutEngine"),s.FamousAnimation.PiecewiseCubicBezier=t("famous-animation/PiecewiseCubicBezier"),s.FamousAnimation.RegisterEasing=t("famous-animation/RegisterEasing"),s.FamousAnimation.Sequence=t("famous-animation/Sequence"),s.FamousAnimation.Timer=t("famous-animation/Timer"),s.FamousAudio={},s.FamousAudio.BufferLoader=t("famous-audio/BufferLoader"),s.FamousAudio.SoundPlayer=t("famous-audio/SoundPlayer"),s.FamousColor={},s.FamousColor.Color=t("famous-color/Color"),s.FamousColor.ColorPalette=t("famous-color/ColorPalette"),s.FamousColor.ColorPalettes=t("famous-color/ColorPalettes"),s.FamousCss={},s.FamousCss.StyleManager=t("famous-css/StyleManager"),s.FamousCss.StyleSheet=t("famous-css/StyleSheet"),s.FamousGenerative={},s.FamousGenerative.Axis=t("famous-generative/Axis"),s.FamousGenerative.Box=t("famous-generative/Box"),s.FamousGenerative.DebugTriangle=t("famous-generative/DebugTriangle"),s.FamousGenerative.EasyCamera=t("famous-generative/EasyCamera"),s.FamousGenerative.Integrator=t("famous-generative/Integrator"),s.FamousGenerative.Line=t("famous-generative/Line"),s.FamousGenerative.Particle=t("famous-generative/Particle"),s.FamousGenerative.SimplexNoise=t("famous-generative/SimplexNoise"),s.FamousGenerative.Touch=t("famous-generative/Touch"),s.FamousGenerative.TouchVisualizer=t("famous-generative/TouchVisualizer"),s.FamousGenerative.Triangle=t("famous-generative/Triangle"),s.FamousGenerative.Triangle3D=t("famous-generative/Triangle3D"),s.FamousGenerative.Triangle3DOLD=t("famous-generative/Triangle3DOLD"),s.FamousGl={},s.FamousGl.Effects_BlackAndWhiteEffect=t("famous-gl/Effects/BlackAndWhiteEffect"),s.FamousGl.Effects_CartesianToPolarEffect=t("famous-gl/Effects/CartesianToPolarEffect"),s.FamousGl.Effects_DuoToneEffect=t("famous-gl/Effects/DuoToneEffect"),s.FamousGl.Effects_ExposureEffect=t("famous-gl/Effects/ExposureEffect"),s.FamousGl.Effects_InvertColorEffect=t("famous-gl/Effects/InvertColorEffect"),s.FamousGl.Effects_LightTunnelEffect=t("famous-gl/Effects/LightTunnelEffect"),s.FamousGl.Effects_LomoEffect=t("famous-gl/Effects/LomoEffect"),s.FamousGl.Effects_PixelateEffect=t("famous-gl/Effects/PixelateEffect"),s.FamousGl.Effects_PolarToCartesianEffect=t("famous-gl/Effects/PolarToCartesianEffect"),s.FamousGl.Effects_ScanlineEffect=t("famous-gl/Effects/ScanlineEffect"),s.FamousGl.Effects_Technicolor1Effect=t("famous-gl/Effects/Technicolor1Effect"),s.FamousGl.Effects_Technicolor2Effect=t("famous-gl/Effects/Technicolor2Effect"),s.FamousGl.Effects_Technicolor3Effect=t("famous-gl/Effects/Technicolor3Effect"),s.FamousGl.Effects_TwirlEffect=t("famous-gl/Effects/TwirlEffect"),s.FamousGl.Effects_VignetteEffect=t("famous-gl/Effects/VignetteEffect"),s.FamousGl.Primitives_ArcPrimitive=t("famous-gl/Primitives/ArcPrimitive"),s.FamousGl.Primitives_BoxPrimitive=t("famous-gl/Primitives/BoxPrimitive"),s.FamousGl.Primitives_ConePrimitive=t("famous-gl/Primitives/ConePrimitive"),s.FamousGl.Primitives_CylinderPrimitive=t("famous-gl/Primitives/CylinderPrimitive"),s.FamousGl.Primitives_EllipsePrimitive=t("famous-gl/Primitives/EllipsePrimitive"),s.FamousGl.Primitives_IcoSpherePrimitive=t("famous-gl/Primitives/IcoSpherePrimitive"),s.FamousGl.Primitives_ParametricPrimitive=t("famous-gl/Primitives/ParametricPrimitive"),s.FamousGl.Primitives_PlanePrimitive=t("famous-gl/Primitives/PlanePrimitive"),s.FamousGl.Primitives_SpherePrimitive=t("famous-gl/Primitives/SpherePrimitive"),s.FamousGl.Primitives_TorusPrimitive=t("famous-gl/Primitives/TorusPrimitive"),s.FamousGl.ShaderFunctions_Map=t("famous-gl/ShaderFunctions/Map"),s.FamousGl.ShaderFunctions_Noise2D=t("famous-gl/ShaderFunctions/Noise2D"),s.FamousGl.ShaderFunctions_Noise3D=t("famous-gl/ShaderFunctions/Noise3D"),s.FamousGl.ShaderFunctions_Noise4D=t("famous-gl/ShaderFunctions/Noise4D"),s.FamousGl.Camera=t("famous-gl/Camera"),s.FamousGl.Effect=t("famous-gl/Effect"),s.FamousGl.Fbo=t("famous-gl/Fbo"),s.FamousGl.Geometry=t("famous-gl/Geometry"),s.FamousGl.Light=t("famous-gl/Light"),s.FamousGl.Material=t("famous-gl/Material"),s.FamousGl.Mesh=t("famous-gl/Mesh"),s.FamousGl.Primitive=t("famous-gl/Primitive"),s.FamousGl.Renderer=t("famous-gl/Renderer"),s.FamousGl.Scene=t("famous-gl/Scene"),s.FamousGl.Shader=t("famous-gl/Shader"),s.FamousGl.ShaderMaker=t("famous-gl/ShaderMaker"),s.FamousGl.Texture=t("famous-gl/Texture"),s.FamousMath={},s.FamousMath.Quaternion=t("famous-math/Quaternion"),s.FamousMath.Vector=t("famous-math/Vector"),s.FamousModifiers={},s.FamousModifiers.Camera=t("famous-modifiers/Camera"),s.FamousModifiers.Draggable=t("famous-modifiers/Draggable"),s.FamousMvc={},s.FamousMvc.Ajax=t("famous-mvc/Ajax"),s.FamousMvc.Collection=t("famous-mvc/Collection"),s.FamousMvc.Model=t("famous-mvc/Model"),s.FamousPhysics={},s.FamousPhysics.Bodies_Body=t("famous-physics/bodies/Body"),s.FamousPhysics.Bodies_Circle=t("famous-physics/bodies/Circle"),s.FamousPhysics.Bodies_Particle=t("famous-physics/bodies/Particle"),s.FamousPhysics.Bodies_Rectangle=t("famous-physics/bodies/Rectangle"),s.FamousPhysics.Constraints_Collision=t("famous-physics/constraints/Collision"),s.FamousPhysics.Constraints_CollisionJacobian=t("famous-physics/constraints/CollisionJacobian"),s.FamousPhysics.Constraints_Constraint=t("famous-physics/constraints/Constraint"),s.FamousPhysics.Constraints_Curve=t("famous-physics/constraints/Curve"),s.FamousPhysics.Constraints_Distance=t("famous-physics/constraints/Distance"),s.FamousPhysics.Constraints_Distance1D=t("famous-physics/constraints/Distance1D"),s.FamousPhysics.Constraints_Rod=t("famous-physics/constraints/Rod"),s.FamousPhysics.Constraints_Rope=t("famous-physics/constraints/Rope"),s.FamousPhysics.Constraints_StiffSpring=t("famous-physics/constraints/StiffSpring"),s.FamousPhysics.Constraints_Surface=t("famous-physics/constraints/Surface"),s.FamousPhysics.Constraints_Wall=t("famous-physics/constraints/Wall"),s.FamousPhysics.Constraints_Walls=t("famous-physics/constraints/Walls"),s.FamousPhysics.Constraints_joint=t("famous-physics/constraints/joint"),s.FamousPhysics.Forces_Drag=t("famous-physics/forces/Drag"),s.FamousPhysics.Forces_Force=t("famous-physics/forces/Force"),s.FamousPhysics.Forces_Repulsion=t("famous-physics/forces/Repulsion"),s.FamousPhysics.Forces_Spring=t("famous-physics/forces/Spring"),s.FamousPhysics.Forces_TorqueSpring=t("famous-physics/forces/TorqueSpring"),s.FamousPhysics.Forces_VectorField=t("famous-physics/forces/VectorField"),s.FamousPhysics.Forces_rotationalDrag=t("famous-physics/forces/rotationalDrag"),s.FamousPhysics.Integrator_SymplecticEuler=t("famous-physics/integrator/SymplecticEuler"),s.FamousPhysics.Integrator_verlet=t("famous-physics/integrator/verlet"),s.FamousPhysics.Math_GaussSeidel=t("famous-physics/math/GaussSeidel"),s.FamousPhysics.Math_Quaternion=t("famous-physics/math/Quaternion"),s.FamousPhysics.Math_Random=t("famous-physics/math/Random"),s.FamousPhysics.Math_Vector=t("famous-physics/math/Vector"),s.FamousPhysics.Math_matrix=t("famous-physics/math/matrix"),s.FamousPhysics.Utils_PhysicsRegister=t("famous-physics/utils/PhysicsRegister"),s.FamousPhysics.Utils_PhysicsTransition=t("famous-physics/utils/PhysicsTransition"),s.FamousPhysics.Utils_PhysicsTransition2=t("famous-physics/utils/PhysicsTransition2"),s.FamousPhysics.Utils_SpringTransition=t("famous-physics/utils/SpringTransition"),s.FamousPhysics.Utils_StiffSpringTransition=t("famous-physics/utils/StiffSpringTransition"),s.FamousPhysics.Utils_WallTransition=t("famous-physics/utils/WallTransition"),s.FamousPhysics.PhysicsEngine=t("famous-physics/PhysicsEngine"),s.FamousScene={},s.FamousScene.GLScene=t("famous-scene/GLScene"),s.FamousScene.Scene=t("famous-scene/Scene"),s.FamousScene.SceneController=t("famous-scene/SceneController"),s.FamousScene.SceneTransitions=t("famous-scene/SceneTransitions"),s.FamousScene.Transitions=t("famous-scene/Transitions"),s.FamousSync={},s.FamousSync.BaseMouseSync=t("famous-sync/BaseMouseSync"),s.FamousSync.CustomSync=t("famous-sync/CustomSync"),s.FamousSync.FastClick=t("famous-sync/FastClick"),s.FamousSync.GenericSync=t("famous-sync/GenericSync"),s.FamousSync.HoverSync=t("famous-sync/HoverSync"),s.FamousSync.MouseSync=t("famous-sync/MouseSync"),s.FamousSync.PinchSync=t("famous-sync/PinchSync"),s.FamousSync.RotateSync=t("famous-sync/RotateSync"),s.FamousSync.ScaleSync=t("famous-sync/ScaleSync"),s.FamousSync.ScrollSync=t("famous-sync/ScrollSync"),s.FamousSync.TouchSync=t("famous-sync/TouchSync"),s.FamousSync.TouchTracker=t("famous-sync/TouchTracker"),s.FamousSync.TwoFingerSync=t("famous-sync/TwoFingerSync"),s.FamousUi={},s.FamousUi.Buttons_ButtonBase=t("famous-ui/Buttons/ButtonBase"),s.FamousUi.Buttons_RotateButton=t("famous-ui/Buttons/RotateButton"),s.FamousUi.Buttons_SpringButton=t("famous-ui/Buttons/SpringButton"),s.FamousUi.Buttons_SpringButton.ui=t("famous-ui/Buttons/SpringButton.ui"),s.FamousUi.ColorPicker_AlphaPicker=t("famous-ui/ColorPicker/AlphaPicker"),s.FamousUi.ColorPicker_CanvasPicker=t("famous-ui/ColorPicker/CanvasPicker"),s.FamousUi.ColorPicker_ColorButton=t("famous-ui/ColorPicker/ColorButton"),s.FamousUi.ColorPicker_ColorPicker=t("famous-ui/ColorPicker/ColorPicker"),s.FamousUi.ColorPicker_GradientPicker=t("famous-ui/ColorPicker/GradientPicker"),s.FamousUi.ColorPicker_HuePicker=t("famous-ui/ColorPicker/HuePicker"),s.FamousUi.Dropdown_Dropdown=t("famous-ui/Dropdown/Dropdown"),s.FamousUi.Dropdown_DropdownItem=t("famous-ui/Dropdown/DropdownItem"),s.FamousUi.Easing_CanvasDrawer=t("famous-ui/Easing/CanvasDrawer"),s.FamousUi.Easing_EasingBool=t("famous-ui/Easing/EasingBool"),s.FamousUi.Easing_EasingVisualizer=t("famous-ui/Easing/EasingVisualizer"),s.FamousUi.Easing_MultiEasingToggle=t("famous-ui/Easing/MultiEasingToggle"),s.FamousUi.Text_Label=t("famous-ui/Text/Label"),s.FamousUi.Toggles_BoolToggle=t("famous-ui/Toggles/BoolToggle"),s.FamousUi.Toggles_MultiBoolToggle=t("famous-ui/Toggles/MultiBoolToggle"),s.FamousUi.AutoUI=t("famous-ui/AutoUI"),s.FamousUi.PanelScrollview=t("famous-ui/PanelScrollview"),s.FamousUi.Slider=t("famous-ui/Slider"),s.FamousUtils={},s.FamousUtils.FormatTime=t("famous-utils/FormatTime"),s.FamousUtils.KeyCodes=t("famous-utils/KeyCodes"),s.FamousUtils.NoiseImage=t("famous-utils/NoiseImage"),s.FamousUtils.Time=t("famous-utils/Time"),s.FamousUtils.TimeAgo=t("famous-utils/TimeAgo"),s.FamousUtils.Utils=t("famous-utils/Utils"),s.FamousViews={},s.FamousViews.ControlSet=t("famous-views/ControlSet"),s.FamousViews.Flip=t("famous-views/Flip"),s.FamousViews.InputSurface=t("famous-views/InputSurface"),s.FamousViews.LightBox=t("famous-views/LightBox"),s.FamousViews.Modal=t("famous-views/Modal"),s.FamousViews.ScrollContainer=t("famous-views/ScrollContainer"),s.FamousViews.Scrollview=t("famous-views/Scrollview"),s.FamousViews.SequentialLayout=t("famous-views/SequentialLayout"),s.FamousViews.Shaper=t("famous-views/Shaper"),s.FamousViews.Swappable=t("famous-views/Swappable"),s.SurfaceExtensions={},s.SurfaceExtensions.ExpandingSurface=t("surface-extensions/ExpandingSurface"),e.exports=s
}),require(["lib/classList","lib/functionPrototypeBind","lib/requestAnimationFrame","main"]),require("main")});
